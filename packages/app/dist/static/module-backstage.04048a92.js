(()=>{(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1850],{86456:(xn,Yt,e)=>{"use strict";e.d(Yt,{r:()=>Me});var i=e(53907),p=e(30705),g=e(57032),j=e(56563),k=e(2784),o=e(77277),z=e(49558),He=e(73557),Ze=e(39857),a=e(43642),xe=e(80079),Ee=e(90941),se=e(32915),Y=e(40562),Fe=e(21853),ge=e(60744),_e=e(66569),Q=e(30254),be=e(13384),M=e(15933),c=e(58838),S=e(86737),_=e(4989),b=e(44407),m=e(18628),ve=e(84219),ee=e(98685),he=e(39781),J=e(39412),ne=e(78258),re=e(73689),Pe=e(12536),Pt=e(19219),T=e(41547),rn=e(47591),de=e(93606),Bt=e(3493),ut=e(81887),rt=e(68542),bt=e(87561);const ke=R=>(...B)=>{const X=B.length===0?[1]:B,nt=(mt,ct)=>typeof mt=="string"?mt:ct*mt;return X.map(mt=>{const ct=nt(mt,R);return typeof ct=="number"?`${ct}px`:ct}).join(" ")};function _t(R,B){if(!B||typeof B=="string")return;const X=typeof B=="function"?B(R):B;if(X)return{"@global":X}}function at(R,B){if(!(!B||typeof B=="string")){if(typeof B=="object"){const X={...R},nt=R.spacing(1);return typeof nt=="number"&&(X.spacing=ke(nt)),Object.fromEntries(Object.entries(B).map(([mt,ct])=>typeof ct=="function"?[mt,ct({theme:X})]:[mt,ct]))}return B}}const zt=/^&.Mui-([\w-]+)$/;function Ot(R){let B=R;if(!R||typeof R!="object")return B;for(const X of Object.keys(R)){const nt=R[X];if(!(!nt||typeof nt!="object"))for(const mt of Object.keys(nt)){const ct=mt,jt=ct.match(zt);if(jt){const[,dn]=jt,{[ct]:An,...bn}=nt;An&&(B={...B,[X]:bn,[dn]:An})}}}return B}function Zt(R,B={}){const X={},nt={};for(const mt of Object.keys(B)){const ct=B[mt];ct&&("styleOverrides"in ct&&(mt==="MuiCssBaseline"?X[mt]=_t(R,ct.styleOverrides):X[mt]=Ot(at(R,ct.styleOverrides))),"defaultProps"in ct&&(nt[mt]=ct.defaultProps))}return{overrides:X,props:nt}}const dt={wave:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1368' height='401' x='0' y='0' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M437 116C223 116 112 0 112 0h1256v400c-82 0-225-21-282-109-112-175-436-175-649-175z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1368 400V282C891-29 788 40 711 161 608 324 121 372 0 361v39h1368z'/%3e%3cpath fill='url(%23paint2_linear)' d='M1368 244v156H0V94c92-24 198-46 375 0l135 41c176 51 195 109 858 109z'/%3e%3cpath fill='url(%23paint3_linear)' d='M1252 400h116c-14-7-35-14-116-16-663-14-837-128-1013-258l-85-61C98 28 46 8 0 0v400h1252z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M-172-98h1671v601H-172z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='602' x2='1093.5' y1='-960.5' y2='272' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='482' x2='480' y1='1058.5' y2='70.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='424' x2='446.1' y1='-587.5' y2='274.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='587' x2='349' y1='-1120.5' y2='341' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,wave2:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='1764' height='479' x='-229' y='-6' maskUnits='userSpaceOnUse'%3e%3cpath fill='url(%23paint0_linear)' d='M0 400h1350C1321 336 525 33 179-2c-345-34-395 236-408 402H0z'/%3e%3cpath fill='url(%23paint1_linear)' d='M1378 177v223H0V217s219 75 327 52C436 246 717-35 965 45s254 144 413 132z'/%3e%3cpath fill='url(%23paint2_linear)' d='M26 400l-78-16c-170 205-44-6-137-30l-4-1 4 1 137 30c37-45 89-110 159-201 399-514-45 238 1176-50 275-65 354-39 91 267H26z'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='431' x2='397.3' y1='-599' y2='372.8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='236.5' x2='446.6' y1='-586' y2='381.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='851.8' x2='640.4' y1='-867.2' y2='363.7' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`,round:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='1368' height='400' fill='none'%3e%3cmask id='a' width='2269' height='1408' x='-610' y='-509' maskUnits='userSpaceOnUse'%3e%3ccircle cx='1212.8' cy='74.8' r='317.5' fill='url(%23paint0_linear)' transform='rotate(-52 1213 75)'/%3e%3ccircle cx='737.8' cy='445.8' r='317.5' fill='url(%23paint1_linear)' transform='rotate(-116 738 446)'/%3e%3ccircle cx='601.8' cy='52.8' r='418.6' fill='url(%23paint2_linear)' transform='rotate(-117 602 53)'/%3e%3ccircle cx='999.8' cy='364' r='389.1' fill='url(%23paint3_linear)' transform='rotate(31 1000 364)'/%3e%3cellipse cx='-109.2' cy='263.5' fill='url(%23paint4_linear)' rx='429.2' ry='465.8' transform='rotate(-85 -109 264)'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath fill='white' d='M0 0h1368v400H0z'/%3e%3c/g%3e%3cdefs%3e%3clinearGradient id='paint0_linear' x1='1301.2' x2='161.4' y1='-1879.7' y2='-969.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint1_linear' x1='826.2' x2='-313.6' y1='-1508.7' y2='-598.6' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint2_linear' x1='718.4' x2='-784.3' y1='-2524' y2='-1324.2' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint3_linear' x1='1108.2' x2='-288.6' y1='-2031.1' y2='-915.9' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3clinearGradient id='paint4_linear' x1='10.4' x2='-1626.5' y1='-2603.8' y2='-1399.5' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='white'/%3e%3cstop offset='1' stop-color='white' stop-opacity='0'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e")`},gt={darkGrey:["#171717","#383838"],marineBlue:["#006D8F","#0049A1"],veryBlue:["#0027AF","#270094"],rubyRed:["#98002B","#8D1134"],toastyOrange:["#BE2200","#A41D00"],purpleSky:["#8912CA","#3E00EA"],eveningSea:["#00FFF2","#035355"],teal:["#005B4B"],pinkSea:["#C8077A","#C2297D"],greens:["#4BB8A5","#187656"]};function Ut(R){var B;const{colors:X,shape:nt,options:mt}=R,jt=`linear-gradient(90deg, ${(X.length===1?[X[0],X[0]]:X).join(", ")})`,dn=`${nt},  ${jt}`,An=(B=mt==null?void 0:mt.fontColor)!=null?B:"#FFFFFF";return{colors:X,shape:nt,backgroundImage:dn,fontColor:An}}const qt={home:Ut({colors:gt.teal,shape:dt.wave}),documentation:Ut({colors:gt.pinkSea,shape:dt.wave2}),tool:Ut({colors:gt.purpleSky,shape:dt.round}),service:Ut({colors:gt.marineBlue,shape:dt.wave}),website:Ut({colors:gt.veryBlue,shape:dt.wave}),library:Ut({colors:gt.rubyRed,shape:dt.wave}),other:Ut({colors:gt.darkGrey,shape:dt.wave}),app:Ut({colors:gt.toastyOrange,shape:dt.wave}),apis:Ut({colors:gt.teal,shape:dt.wave2}),card:Ut({colors:gt.greens,shape:dt.wave})},yt=16,Ft='"Helvetica Neue", Helvetica, Roboto, Arial, sans-serif',I="home";function W(R){const{palette:B,htmlFontSize:X=yt,fontFamily:nt=Ft,defaultPageTheme:mt=I,pageTheme:ct=qt,typography:jt}=R;if(!ct[mt])throw new Error(`${mt} is not defined in pageTheme.`);const dn={htmlFontSize:X,fontFamily:nt,h1:{fontSize:54,fontWeight:700,marginBottom:10},h2:{fontSize:40,fontWeight:700,marginBottom:8},h3:{fontSize:32,fontWeight:700,marginBottom:6},h4:{fontWeight:700,fontSize:28,marginBottom:6},h5:{fontWeight:700,fontSize:24,marginBottom:4},h6:{fontWeight:700,fontSize:20,marginBottom:2}};return{palette:B,typography:jt!=null?jt:dn,page:ct[mt],getPageTheme:({themeId:An})=>{var bn;return(bn=ct[An])!=null?bn:ct[mt]}}}const O={MuiCssBaseline:{styleOverrides:R=>({html:{height:"100%",fontFamily:R.typography.fontFamily},body:{height:"100%",fontFamily:R.typography.fontFamily,overscrollBehaviorY:"none",fontSize:"0.875rem",lineHeight:1.43},a:{color:"inherit",textDecoration:"none"}})},MuiGrid:{defaultProps:{spacing:2}},MuiSwitch:{defaultProps:{color:"primary"}},MuiTableRow:{styleOverrides:{root:({theme:R})=>({"&:nth-of-type(odd)":{backgroundColor:R.palette.background.default}}),hover:{"&:hover":{cursor:"pointer"}},head:({theme:R})=>({"&:nth-of-type(odd)":{backgroundColor:R.palette.background.paper}})}},MuiTableCell:{styleOverrides:{root:({theme:R})=>({wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:R.spacing(3,2,3,2.5),borderBottom:0}),sizeSmall:({theme:R})=>({padding:R.spacing(1.5,2,1.5,2.5)}),head:({theme:R})=>({wordBreak:"break-word",overflow:"hidden",color:R.palette.textSubtle,fontWeight:"normal",lineHeight:"1"})}},MuiTabs:{styleOverrides:{root:{minHeight:24}}},MuiTab:{styleOverrides:{root:({theme:R})=>({color:R.palette.link,minHeight:24,textTransform:"initial",letterSpacing:"0.07em","&:hover":{color:(0,rn._j)(R.palette.link,.3),background:(0,rn.$n)(R.palette.link,.95)},[R.breakpoints.up("md")]:{minWidth:120,fontSize:R.typography.pxToRem(14),fontWeight:500}}),textColorPrimary:({theme:R})=>({color:R.palette.link})}},MuiTableSortLabel:{styleOverrides:{root:{color:"inherit","&:hover":{color:"inherit"},"&:focus":{color:"inherit"},"&.Mui-active":{fontWeight:"bold",color:"inherit"}}}},MuiListItemText:{styleOverrides:{dense:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},MuiButton:{styleOverrides:{text:{padding:void 0}}},MuiChip:{styleOverrides:{root:({theme:R})=>({marginRight:R.spacing(1),marginBottom:R.spacing(1)}),label:({theme:R})=>({lineHeight:R.spacing(2.5),fontWeight:R.typography.fontWeightMedium,fontSize:R.spacing(1.75)}),labelSmall:({theme:R})=>({fontSize:R.spacing(1.5)}),deleteIcon:({theme:R})=>({width:R.spacing(3),height:R.spacing(3),margin:R.spacing(0,.75,0,-.75)}),deleteIconSmall:({theme:R})=>({width:R.spacing(2),height:R.spacing(2),margin:R.spacing(0,.5,0,-.5)})}},MuiCard:{styleOverrides:{root:{display:"flex",flexDirection:"column"}}},MuiCardHeader:{styleOverrides:{root:{paddingBottom:0}}},MuiCardContent:{styleOverrides:{root:{flexGrow:1,"&:last-child":{paddingBottom:void 0}}}},MuiCardActions:{styleOverrides:{root:{justifyContent:"flex-end"}}},MuiLink:{defaultProps:{underline:"hover"}},MuiPaper:{styleOverrides:{root:{backgroundImage:"unset"}}}};var D=(R,B,X)=>{if(!B.has(R))throw TypeError("Cannot "+X)},ae=(R,B,X)=>(D(R,B,"read from private field"),X?X.call(R):B.get(R)),fe=(R,B,X)=>{if(B.has(R))throw TypeError("Cannot add the same private member more than once");B instanceof WeakSet?B.add(R):B.set(R,X)},Ke=(R,B,X,nt)=>(D(R,B,"write to private field"),nt?nt.call(R,X):B.set(R,X),X),ft;class Je{constructor(B,X){fe(this,ft,new Map),Ke(this,ft,new Map),B&&ae(this,ft).set("v4",B),X&&ae(this,ft).set("v5",X)}getTheme(B){return ae(this,ft).get(B)}}ft=new WeakMap;function wt(R){const B=W(R),X={...O,...R.components},nt=(0,de.Z)({...B,components:X}),mt=Zt(nt,X),ct={...(0,re.Z)(B),...mt};return new Je(ct,nt)}function nn(R){const B=adaptV4Theme(R),X=createTheme$2(R);return new Je(X,B)}const Ae={light:{type:"light",mode:"light",background:{default:"#F8F8F8",paper:"#FFFFFF"},status:{ok:"#1DB954",warning:"#FF9800",error:"#E22134",running:"#1F5493",pending:"#FFED51",aborted:"#757575"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#1F5493"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#000000",textVerySubtle:"#DDD",textSubtle:"#6E6E6E",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#2196F3",link:"#0A6EBE",gold:"#FFD600",navigation:{background:"#171717",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#181818",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}},dark:{type:"dark",mode:"dark",background:{default:"#333333",paper:"#424242"},status:{ok:"#71CF88",warning:"#FFB84D",error:"#F84C55",running:"#3488E3",pending:"#FEF071",aborted:"#9E9E9E"},bursts:{fontColor:"#FEFEFE",slackChannelText:"#ddd",backgroundColor:{default:"#7C3699"},gradient:{linear:"linear-gradient(-137deg, #4BB8A5 0%, #187656 100%)"}},primary:{main:"#9CC9FF",dark:"#82BAFD"},secondary:{main:"#FF88B2"},banner:{info:"#2E77D0",error:"#E22134",text:"#FFFFFF",link:"#000000",closeButtonColor:"#FFFFFF",warning:"#FF9800"},border:"#E6E6E6",textContrast:"#FFFFFF",textVerySubtle:"#727272",textSubtle:"#CCCCCC",highlight:"#FFFBCC",errorBackground:"#FFEBEE",warningBackground:"#F59B23",infoBackground:"#ebf5ff",errorText:"#CA001B",infoText:"#004e8a",warningText:"#000000",linkHover:"#82BAFD",link:"#9CC9FF",gold:"#FFD600",navigation:{background:"#424242",indicator:"#9BF0E1",color:"#b5b5b5",selectedColor:"#FFF",navItem:{hoverBackground:"#404040"},submenu:{background:"#404040"}},pinSidebarButton:{icon:"#404040",background:"#BDBDBD"},tabbar:{indicator:"#9BF0E1"}}},Te={light:wt({palette:Ae.light}),dark:wt({palette:Ae.dark})};rt.Z.configure(R=>`v5-${R}`);const vt=(0,Pe.Z)({productionPrefix:"jss4-"});function Tt(R){const{children:B,theme:X,noCssBaseline:nt=!1}=R,mt=X.getTheme("v4"),ct=X.getTheme("v5");let jt;nt||(jt=k.createElement(bt.ZP,null));let dn=k.createElement(k.Fragment,null,jt,B);return mt&&(dn=k.createElement(Pt.ZP,{generateClassName:vt},k.createElement(T.Z,{theme:mt},dn))),ct&&(dn=k.createElement(Bt.Z,{injectFirst:!0},k.createElement(ut.Z,{theme:ct},dn))),dn}function At(R){var B,X,nt,mt;return{props:{MuiGrid:(X=(B=O)==null?void 0:B.MuiGrid)==null?void 0:X.defaultProps,MuiSwitch:(mt=(nt=O)==null?void 0:nt.MuiSwitch)==null?void 0:mt.defaultProps},...W(R)}}function Wt(R){return Zt(R,O).overrides}function St(R){const B=At(R),X=(0,re.Z)(B),nt=Wt(X);return{...X,overrides:nt}}const Ue=St({palette:Ae.light}),Xe=St({palette:Ae.dark});var Mt=e(98192),le=e(15222);const Be=[(0,p.ni)({api:g.q,deps:{configApi:g.p},factory:({configApi:R})=>i.pM.compile(`${R.getString("backend.baseUrl")}/api/{{ pluginId }}`)}),(0,p.ni)({api:g.l,deps:{},factory:()=>new i.CX}),(0,p.ni)({api:g.a,deps:{},factory:()=>new i.gN}),(0,p.ni)({api:g.r,deps:{alertApi:g.l},factory:({alertApi:R})=>{const B=new i.KN(R,new i.gr);return i.Jv.forward(B,{hidden:!1}),B}}),(0,p.ni)({api:g.x,deps:{errorApi:g.r},factory:({errorApi:R})=>i.CJ.create({errorApi:R})}),(0,p.ni)({api:g.s,deps:{configApi:g.p,identityApi:g.t,discoveryApi:g.q},factory:({configApi:R,identityApi:B,discoveryApi:X})=>(0,i.jJ)({middleware:[i.II.resolvePluginProtocol({discoveryApi:X}),i.II.injectIdentityAuth({identityApi:B,config:R})]})}),(0,p.ni)({api:g.v,deps:{},factory:()=>new i.YM}),(0,p.ni)({api:g.g,deps:{discoveryApi:g.q,oauthRequestApi:g.v,configApi:g.p},factory:({discoveryApi:R,oauthRequestApi:B,configApi:X})=>i.eE.create({configApi:X,discoveryApi:R,oauthRequestApi:B,environment:X.getOptionalString("auth.environment")})}),(0,p.ni)({api:g.m,deps:{discoveryApi:g.q,oauthRequestApi:g.v,configApi:g.p},factory:({discoveryApi:R,oauthRequestApi:B,configApi:X})=>i._i.create({configApi:X,discoveryApi:R,oauthRequestApi:B,environment:X.getOptionalString("auth.environment")})}),(0,p.ni)({api:g.d,deps:{discoveryApi:g.q,oauthRequestApi:g.v,configApi:g.p},factory:({discoveryApi:R,oauthRequestApi:B,configApi:X})=>i.Td.create({configApi:X,discoveryApi:R,oauthRequestApi:B,defaultScopes:["read:user"],environment:X.getOptionalString("auth.environment")})}),(0,p.ni)({api:g.o,deps:{discoveryApi:g.q,oauthRequestApi:g.v,configApi:g.p},factory:({discoveryApi:R,oauthRequestApi:B,configApi:X})=>i.sn.create({configApi:X,discoveryApi:R,oauthRequestApi:B,environment:X.getOptionalString("auth.environment")})}),(0,p.ni)({api:g.e,deps:{discoveryApi:g.q,oauthRequestApi:g.v,configApi:g.p},factory:({discoveryApi:R,oauthRequestApi:B,configApi:X})=>i.aq.create({configApi:X,discoveryApi:R,oauthRequestApi:B,environment:X.getOptionalString("auth.environment")})}),(0,p.ni)({api:g.h,deps:{discoveryApi:g.q,oauthRequestApi:g.v,configApi:g.p},factory:({discoveryApi:R,oauthRequestApi:B,configApi:X})=>i.$_.create({configApi:X,discoveryApi:R,oauthRequestApi:B,environment:X.getOptionalString("auth.environment")})}),(0,p.ni)({api:g.i,deps:{discoveryApi:g.q,oauthRequestApi:g.v,configApi:g.p},factory:({discoveryApi:R,oauthRequestApi:B,configApi:X})=>i.xP.create({configApi:X,discoveryApi:R,oauthRequestApi:B,defaultScopes:["team"],environment:X.getOptionalString("auth.environment")})}),(0,p.ni)({api:g.j,deps:{discoveryApi:g.q,oauthRequestApi:g.v,configApi:g.p},factory:({discoveryApi:R,oauthRequestApi:B,configApi:X})=>i.C4.create({configApi:X,discoveryApi:R,oauthRequestApi:B,defaultScopes:["REPO_READ"]})}),(0,p.ni)({api:g.k,deps:{discoveryApi:g.q,oauthRequestApi:g.v,configApi:g.p},factory:({discoveryApi:R,oauthRequestApi:B,configApi:X})=>i.uC.create({configApi:X,discoveryApi:R,oauthRequestApi:B,environment:X.getOptionalString("auth.environment")})}),(0,p.ni)({api:j.RV,deps:{discovery:g.q,identity:g.t,config:g.p},factory:({config:R,discovery:B,identity:X})=>j.iM.create({config:R,discovery:B,identity:X})})];function ie({children:R}){return(0,He.GV)()?k.createElement(k.Fragment,null,R):k.createElement(He.VA,null,R)}const Ge=()=>k.createElement(z.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}),tt=({step:R,error:B})=>{let X="";return R==="load-config"?X=`The configuration failed to load, someone should have a look at this error: ${B.message}`:R==="load-chunk"&&(X=`Lazy loaded chunk failed to load, try to reload the page: ${B.message}`),k.createElement(ie,null,k.createElement(z.mf,{status:"501",statusMessage:X}))},ot=({error:R,resetError:B,plugin:X})=>k.createElement(z.yu,{title:`Error in ${X==null?void 0:X.getId()}`,defaultExpanded:!0,error:R},k.createElement(o.Z,{variant:"outlined",onClick:B},"Retry")),Rt={Progress:z.Ex,Router:Ze.VK,NotFoundErrorPage:Ge,BootErrorPage:tt,ErrorBoundaryFallback:ot},en={brokenImage:xe.Z,catalog:m.Z,scaffolder:se.Z,techdocs:Y.Z,search:Fe.Z,chat:ge.Z,dashboard:_e.Z,docs:Q.Z,email:be.Z,github:c.Z,group:ve.Z,help:S.Z,"kind:api":M.Z,"kind:component":b.Z,"kind:domain":a.Z,"kind:group":ve.Z,"kind:location":_.Z,"kind:system":Ee.Z,"kind:user":ee.Z,"kind:resource":J.Z,"kind:template":ne.Z,user:ee.Z,warning:he.Z},Ce=[{id:"light",title:"Light Theme",variant:"light",icon:k.createElement(le.Z,null),Provider:({children:R})=>k.createElement(Tt,{theme:Te.light,children:R})},{id:"dark",title:"Dark Theme",variant:"dark",icon:k.createElement(Mt.Z,null),Provider:({children:R})=>k.createElement(Tt,{theme:Te.dark,children:R})}];function Me(R){var B,X,nt,mt;return(0,i.bg)({...R,apis:(B=R==null?void 0:R.apis)!=null?B:[],bindRoutes:R==null?void 0:R.bindRoutes,components:{...Rt,...R==null?void 0:R.components},configLoader:R==null?void 0:R.configLoader,defaultApis:Be,icons:{...en,...R==null?void 0:R.icons},plugins:(X=R==null?void 0:R.plugins)!=null?X:[],featureFlags:(nt=R==null?void 0:R.featureFlags)!=null?nt:[],themes:(mt=R==null?void 0:R.themes)!=null?mt:Ce})}},88285:(xn,Yt,e)=>{"use strict";e.d(Yt,{MS:()=>_e,mk:()=>Q,n3:()=>z});var i=e(34520),p=e(32272),g=e(96279),j=e.n(g),k=e(23587),o=e.n(k);const z=Symbol.for("CATALOG_FILTER_EXISTS_0e15b590c0b343a2bae3e787e84c2111");function He(be){return!be.cursor}const Ze="catalog";var a=Object.defineProperty,xe=(be,M,c)=>M in be?a(be,M,{enumerable:!0,configurable:!0,writable:!0,value:c}):be[M]=c,Ee=(be,M,c)=>(xe(be,typeof M!="symbol"?M+"":M,c),c);class se{constructor(M){Ee(this,"discoveryApi"),Ee(this,"fetchApi"),this.discoveryApi=M.discoveryApi,this.fetchApi=M.fetchApi||{fetch:j()}}async analyzeLocation(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/analyze-location",b=k.parse(_).expand({});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(M.body)})}async createLocation(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/locations{?dryRun}",b=k.parse(_).expand({...M.query});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(M.body)})}async deleteEntityByUid(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/entities/by-uid/{uid}",b=k.parse(_).expand({uid:M.path.uid});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"DELETE"})}async deleteLocation(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/locations/{id}",b=k.parse(_).expand({id:M.path.id});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"DELETE"})}async getEntities(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/entities{?fields,limit,filter*,offset,after,order*}",b=k.parse(_).expand({...M.query});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntitiesByQuery(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/entities/by-query{?fields,limit,orderField*,cursor,filter*,fullTextFilterTerm,fullTextFilterFields}",b=k.parse(_).expand({...M.query});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntitiesByRefs(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/entities/by-refs",b=k.parse(_).expand({});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(M.body)})}async getEntityAncestryByName(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/entities/by-name/{kind}/{namespace}/{name}/ancestry",b=k.parse(_).expand({kind:M.path.kind,namespace:M.path.namespace,name:M.path.name});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntityByName(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/entities/by-name/{kind}/{namespace}/{name}",b=k.parse(_).expand({kind:M.path.kind,namespace:M.path.namespace,name:M.path.name});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntityByUid(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/entities/by-uid/{uid}",b=k.parse(_).expand({uid:M.path.uid});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getEntityFacets(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/entity-facets{?facet*,filter*}",b=k.parse(_).expand({...M.query});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getLocation(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/locations/{id}",b=k.parse(_).expand({id:M.path.id});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async getLocations(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/locations",b=k.parse(_).expand({});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"GET"})}async refreshEntity(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/refresh",b=k.parse(_).expand({});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(M.body)})}async validateEntity(M,c){const S=await this.discoveryApi.getBaseUrl(Ze),_="/validate-entity",b=k.parse(_).expand({});return await this.fetchApi.fetch(`${S}${b}`,{headers:{"Content-Type":"application/json",...(c==null?void 0:c.token)&&{Authorization:`Bearer ${c==null?void 0:c.token}`}},method:"POST",body:JSON.stringify(M.body)})}}var Y=Object.defineProperty,Fe=(be,M,c)=>M in be?Y(be,M,{enumerable:!0,configurable:!0,writable:!0,value:c}):be[M]=c,ge=(be,M,c)=>(Fe(be,typeof M!="symbol"?M+"":M,c),c);class _e{constructor(M){ge(this,"apiClient"),this.apiClient=new se(M)}async getEntityAncestors(M,c){return await this.requestRequired(await this.apiClient.getEntityAncestryByName({path:(0,i.of)(M.entityRef)},c))}async getLocationById(M,c){return await this.requestOptional(await this.apiClient.getLocation({path:{id:M}},c))}async getEntities(M,c){const{filter:S=[],fields:_=[],order:b,offset:m,limit:ve,after:ee}=M!=null?M:{},he=[];if(b)for(const re of[b].flat())re&&he.push(`${re.order}:${re.field}`);const J=await this.requestRequired(await this.apiClient.getEntities({query:{fields:_,limit:ve,filter:this.getFilterValue(S),offset:m,after:ee,order:b?he:void 0}},c)),ne=(re,Pe)=>{var Pt,T;if(((Pt=re.metadata)==null?void 0:Pt.name)===void 0||re.kind===void 0||((T=Pe.metadata)==null?void 0:T.name)===void 0||Pe.kind===void 0)return 0;const rn=(0,i.eE)(re),de=(0,i.eE)(Pe);return rn<de?-1:rn>de?1:0};return{items:J.sort(ne)}}async getEntitiesByRefs(M,c){const S=await this.apiClient.getEntitiesByRefs({body:M},c);if(!S.ok)throw await p.VL.fromResponse(S);const{items:_}=await S.json();return{items:_.map(b=>b!=null?b:void 0)}}async queryEntities(M={},c){var S,_;const b={};if(He(M)){const{fields:m=[],filter:ve,limit:ee,orderFields:he,fullTextFilter:J}=M;b.filter=this.getFilterValue(ve),ee!==void 0&&(b.limit=ee),he!==void 0&&(b.orderField=(Array.isArray(he)?he:[he]).map(({field:re,order:Pe})=>`${re},${Pe}`)),m.length&&(b.fields=m);const ne=(S=J==null?void 0:J.term)==null?void 0:S.trim();ne&&(b.fullTextFilterTerm=ne),(_=J==null?void 0:J.fields)!=null&&_.length&&(b.fullTextFilterFields=J.fields)}else{const{fields:m=[],limit:ve,cursor:ee}=M;b.cursor=ee,ve!==void 0&&(b.limit=ve),m.length&&(b.fields=m)}return this.apiClient.getEntitiesByQuery({query:b},c).then(m=>m.json())}async getEntityByRef(M,c){return this.requestOptional(await this.apiClient.getEntityByName({path:(0,i.of)(M)},c))}async getEntityByName(M,c){const{kind:S,namespace:_="default",name:b}=M;return this.requestOptional(await this.apiClient.getEntityByName({path:{kind:S,namespace:_,name:b}},c))}async refreshEntity(M,c){const S=await this.apiClient.refreshEntity({body:{entityRef:M}},c);if(S.status!==200)throw new Error(await S.text())}async getEntityFacets(M,c){const{filter:S=[],facets:_}=M;return await this.requestOptional(await this.apiClient.getEntityFacets({query:{facet:_,filter:this.getFilterValue(S)}},c))}async addLocation(M,c){const{type:S="url",target:_,dryRun:b}=M,m=await this.apiClient.createLocation({body:{type:S,target:_},query:{dryRun:b?"true":void 0}},c);if(m.status!==201)throw new Error(await m.text());const{location:ve,entities:ee,exists:he}=await m.json();if(!ve)throw new Error(`Location wasn't added: ${_}`);return{location:ve,entities:ee,exists:he}}async getLocationByRef(M,c){return(await this.requestRequired(await this.apiClient.getLocations({},c))).map(_=>_.data).find(_=>M===(0,i.NZ)(_))}async removeLocationById(M,c){await this.requestIgnored(await this.apiClient.deleteLocation({path:{id:M}},c))}async removeEntityByUid(M,c){await this.requestIgnored(await this.apiClient.deleteEntityByUid({path:{uid:M}},c))}async validateEntity(M,c,S){const _=await this.apiClient.validateEntity({body:{entity:M,location:c}},S);if(_.ok)return{valid:!0};if(_.status!==400)throw await p.VL.fromResponse(_);const{errors:b=[]}=await _.json();return{valid:!1,errors:b}}async requestIgnored(M){if(!M.ok)throw await p.VL.fromResponse(M)}async requestRequired(M){if(!M.ok)throw await p.VL.fromResponse(M);return M.json()}async requestOptional(M){if(!M.ok){if(M.status===404)return;throw await p.VL.fromResponse(M)}return await M.json()}getFilterValue(M=[]){const c=[];for(const S of[M].flat()){const _=[];for(const[b,m]of Object.entries(S))for(const ve of[m].flat())ve===z?_.push(b):typeof ve=="string"&&_.push(`${b}=${ve}`);_.length&&c.push(_.join(","))}return c}}const Q="backstage.io/catalog-processing"},34520:(xn,Yt,e)=>{"use strict";e.d(Yt,{$1:()=>oe,CV:()=>ar,Dg:()=>pe,In:()=>ie,KS:()=>vn,M6:()=>ia,M_:()=>Se,NZ:()=>Ba,Ou:()=>Qa,P1:()=>nr,S4:()=>N,Tf:()=>Fe,X9:()=>te,Zj:()=>We,_b:()=>Lt,aS:()=>gn,cz:()=>cn,eE:()=>ve,hr:()=>on,iB:()=>b,l2:()=>Y,nP:()=>Qe,of:()=>m,q1:()=>Oa,w$:()=>kt,wI:()=>Xe,wP:()=>tn,y$:()=>le,zG:()=>se});var i=e(76635),p=e.n(i),g=e(27991),j=e.n(g);function k(je){return je.kind.toLocaleUpperCase("en-US")==="API"}function o(je){return je.kind.toLocaleUpperCase("en-US")==="COMPONENT"}function z(je){return je.kind.toLocaleUpperCase("en-US")==="DOMAIN"}function He(je){return je.kind.toLocaleUpperCase("en-US")==="GROUP"}function Ze(je){return je.kind.toLocaleUpperCase("en-US")==="LOCATION"}function a(je){return je.kind.toLocaleUpperCase("en-US")==="RESOURCE"}function xe(je){return je.kind.toLocaleUpperCase("en-US")==="SYSTEM"}function Ee(je){return je.kind.toLocaleUpperCase("en-US")==="USER"}const se="default",Y="backstage.io/view-url",Fe="backstage.io/edit-url",ge="kubernetes.io/api-server",_e="kubernetes.io/api-server-certificate-authority",Q="kubernetes.io/auth-provider";var be=Object.defineProperty,M=(je,ue,Ct)=>ue in je?be(je,ue,{enumerable:!0,configurable:!0,writable:!0,value:Ct}):je[ue]=Ct,c=(je,ue,Ct)=>(M(je,typeof ue!="symbol"?ue+"":ue,Ct),Ct);class S{constructor(ue=se){c(this,"namespace"),this.namespace=ue}async enforce(ue){return ue.metadata.namespace?ue:lodash.merge({metadata:{namespace:this.namespace}},ue)}}function _(je){let ue=je.indexOf(":");const Ct=je.indexOf("/");Ct!==-1&&Ct<ue&&(ue=-1);const Rn=ue===-1?void 0:je.slice(0,ue),Un=Ct===-1?void 0:je.slice(ue+1,Ct),ea=je.slice(Math.max(ue+1,Ct+1));if(Rn===""||Un===""||ea==="")throw new TypeError(`Entity reference "${je}" was not on the form [<kind>:][<namespace>/]<name>`);return{kind:Rn,namespace:Un,name:ea}}function b(je){return{kind:je.kind,namespace:je.metadata.namespace||se,name:je.metadata.name}}function m(je,ue){var Ct,Rn,Un,ea;if(!je)throw new Error("Entity reference must not be empty");const fa=ue==null?void 0:ue.defaultKind,Za=(ue==null?void 0:ue.defaultNamespace)||se;let Ka,_a,Ua;if(typeof je=="string"){const Ma=_(je);Ka=(Ct=Ma.kind)!=null?Ct:fa,_a=(Rn=Ma.namespace)!=null?Rn:Za,Ua=Ma.name}else Ka=(Un=je.kind)!=null?Un:fa,_a=(ea=je.namespace)!=null?ea:Za,Ua=je.name;if(Ka)if(_a){if(!Ua){const Ma=JSON.stringify(je);throw new Error(`Entity reference ${Ma} had missing or empty name`)}}else{const Ma=JSON.stringify(je);throw new Error(`Entity reference ${Ma} had missing or empty namespace`)}else{const Ma=JSON.stringify(je);throw new Error(`Entity reference ${Ma} had missing or empty kind (e.g. did not start with "component:" or similar)`)}return{kind:Ka,namespace:_a,name:Ua}}function ve(je){var ue,Ct;let Rn,Un,ea;return"metadata"in je?(Rn=je.kind,Un=(ue=je.metadata.namespace)!=null?ue:se,ea=je.metadata.name):(Rn=je.kind,Un=(Ct=je.namespace)!=null?Ct:se,ea=je.name),`${Rn.toLocaleLowerCase("en-US")}:${Un.toLocaleLowerCase("en-US")}/${ea.toLocaleLowerCase("en-US")}`}var ee=Object.defineProperty,he=(je,ue,Ct)=>ue in je?ee(je,ue,{enumerable:!0,configurable:!0,writable:!0,value:Ct}):je[ue]=Ct,J=(je,ue,Ct)=>(he(je,typeof ue!="symbol"?ue+"":ue,Ct),Ct);class ne{constructor(ue){J(this,"parentRef");const{kind:Ct,namespace:Rn,name:Un}=m(ue,{defaultKind:"Group",defaultNamespace:se});if(Ct.toLocaleUpperCase("en-US")!=="GROUP")throw new TypeError("group parent must be a group");this.parentRef=ve({kind:Ct,namespace:Rn,name:Un})}async enforce(ue){if(ue.kind!=="Group")return ue;const Ct=ue;return Ct.spec.parent||ve(Ct)!==this.parentRef&&(Ct.spec.parent=this.parentRef),Ct}}class re{static isValidPrefixAndOrSuffix(ue,Ct,Rn,Un){if(typeof ue!="string")return!1;const ea=ue.split(Ct);return ea.length===1?Un(ea[0]):ea.length===2?Rn(ea[0])&&Un(ea[1]):!1}static isJsonSafe(ue){try{return p().isEqual(ue,JSON.parse(JSON.stringify(ue)))}catch{return!1}}static isValidDnsSubdomain(ue){return typeof ue=="string"&&ue.length>=1&&ue.length<=253&&ue.split(".").every(re.isValidDnsLabel)}static isValidDnsLabel(ue){return typeof ue=="string"&&ue.length>=1&&ue.length<=63&&/^[a-z0-9]+(?:\-+[a-z0-9]+)*$/.test(ue)}static isValidTag(ue){return typeof ue=="string"&&ue.length>=1&&ue.length<=63&&/^[a-z0-9+#]+(\-[a-z0-9+#]+)*$/.test(ue)}static isValidUrl(ue){if(typeof ue!="string")return!1;try{return new URL(ue),!0}catch{return!1}}static isValidString(ue){var Ct;return typeof ue=="string"&&((Ct=ue==null?void 0:ue.trim())==null?void 0:Ct.length)>=1}static isNonEmptyString(ue){var Ct;return typeof ue=="string"&&((Ct=ue==null?void 0:ue.trim())==null?void 0:Ct.length)>=1}}var Pe="http://json-schema.org/draft-07/schema",Pt="EntityEnvelope",T="The envelope skeleton parts of an entity - whatever is necessary to be able to give it a ref and pass to further validation / policy checking.",rn=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService"}}],de="object",Bt=["apiVersion","kind","metadata"],ut=!0,rt={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{type:"object",required:["name"],additionalProperties:!0,properties:{name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1}}}},bt={$schema:Pe,$id:Pt,description:T,examples:rn,type:de,required:Bt,additionalProperties:ut,properties:rt},ke="http://json-schema.org/draft-07/schema",_t="Entity",at="The parts of the format that's common to all versions/kinds of entity.",zt=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],Ot="object",Zt=["apiVersion","kind","metadata"],dt=!1,gt={apiVersion:{type:"string",description:"The version of specification format for this particular entity that this is written against.",minLength:1,examples:["backstage.io/v1alpha1","my-company.net/v1","1.0"]},kind:{type:"string",description:"The high level entity type being described.",minLength:1,examples:["API","Component","Domain","Group","Location","Resource","System","Template","User"]},metadata:{$ref:"EntityMeta"},spec:{type:"object",description:"The specification data describing the entity itself."},relations:{type:"array",description:"The relations that this entity has with other entities.",items:{$ref:"common#relation"}},status:{$ref:"common#status"}},Ut={$schema:ke,$id:_t,description:at,examples:zt,type:Ot,required:Zt,additionalProperties:dt,properties:gt},qt="http://json-schema.org/draft-07/schema",yt="EntityMeta",Ft="Metadata fields common to all versions/kinds of entity.",I=[{uid:"e01199ab-08cc-44c2-8e19-5c29ded82521",etag:"lsndfkjsndfkjnsdfkjnsd==",name:"my-component-yay",namespace:"the-namespace",labels:{"backstage.io/custom":"ValueStuff"},annotations:{"example.com/bindings":"are-secret"},tags:["java","data"]}],W="object",O=["name"],D=!0,ae={uid:{type:"string",description:"A globally unique ID for the entity. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, but the server is free to reject requests that do so in such a way that it breaks semantics.",examples:["e01199ab-08cc-44c2-8e19-5c29ded82521"],minLength:1},etag:{type:"string",description:"An opaque string that changes for each update operation to any part of the entity, including metadata. This field can not be set by the user at creation time, and the server will reject an attempt to do so. The field will be populated in read operations. The field can (optionally) be specified when performing update or delete operations, and the server will then reject the operation if it does not match the current stored value.",examples:["lsndfkjsndfkjnsdfkjnsd=="],minLength:1},name:{type:"string",description:"The name of the entity. Must be unique within the catalog at any given point in time, for any given namespace + kind pair.",examples:["metadata-proxy"],minLength:1},namespace:{type:"string",description:"The namespace that the entity belongs to.",default:"default",examples:["default","admin"],minLength:1},title:{type:"string",description:"A display name of the entity, to be presented in user interfaces instead of the name property, when available.",examples:["React SSR Template"],minLength:1},description:{type:"string",description:"A short (typically relatively few words, on one line) description of the entity."},labels:{type:"object",description:"Key/value pairs of identifying information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},annotations:{type:"object",description:"Key/value pairs of non-identifying auxiliary information attached to the entity.",additionalProperties:!0,patternProperties:{"^.+$":{type:"string"}}},tags:{type:"array",description:"A list of single-valued strings, to for example classify catalog entities in various ways.",items:{type:"string",minLength:1}},links:{type:"array",description:"A list of external hyperlinks related to the entity. Links can provide additional contextual information that may be located outside of Backstage itself. For example, an admin dashboard or external CMS page.",items:{type:"object",required:["url"],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://admin.example-org.com"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["Admin Dashboard"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},type:{type:"string",description:"An optional value to categorize links into specific groups.",examples:["runbook","documentation","logs","dashboard"],minLength:1}}}}},fe={$schema:qt,$id:yt,description:Ft,examples:I,type:W,required:O,additionalProperties:D,properties:ae},Ke="http://json-schema.org/draft-07/schema",ft="common",Je="object",wt="Common definitions to import from other schemas",nn={reference:{$id:"#reference",type:"object",description:"A reference by name to another entity.",required:["kind","namespace","name"],additionalProperties:!1,properties:{kind:{type:"string",description:"The kind field of the entity.",minLength:1},namespace:{type:"string",description:"The metadata.namespace field of the entity.",minLength:1},name:{type:"string",description:"The metadata.name field of the entity.",minLength:1}}},relation:{$id:"#relation",type:"object",description:"A directed relation from one entity to another.",required:["type","targetRef"],additionalProperties:!1,properties:{type:{type:"string",minLength:1,pattern:"^\\w+$",description:"The type of relation."},target:{$ref:"#reference",deprecated:!0},targetRef:{type:"string",minLength:1,description:"The entity ref of the target of this relation."}}},status:{$id:"#status",type:"object",description:"The current status of the entity, as claimed by various sources.",required:[],additionalProperties:!0,properties:{items:{type:"array",items:{$ref:"#statusItem"}}}},statusItem:{$id:"#statusItem",type:"object",description:"A specific status item on a well known format.",required:["type","level","message"],additionalProperties:!0,properties:{type:{type:"string",minLength:1},level:{$ref:"#statusLevel",description:"The status level / severity of the status item."},message:{type:"string",description:"A brief message describing the status, intended for human consumption."},error:{$ref:"#error",description:"An optional serialized error object related to the status."}}},statusLevel:{$id:"#statusLevel",type:"string",description:"A status level / severity.",enum:["info","warning","error"]},error:{$id:"#error",type:"object",description:"A serialized error object.",required:["name","message"],additionalProperties:!0,properties:{name:{type:"string",examples:["Error","InputError"],description:"The type name of the error",minLength:1},message:{type:"string",description:"The message of the error"},code:{type:"string",description:"An error code associated with the error"},stack:{type:"string",description:"An error stack trace"}}}},Ae={$schema:Ke,$id:ft,type:Je,description:wt,definitions:nn};const Te=new Map,vt=[bt,Ut,fe,Ae];function Tt(je){if(!(je!=null&&je.length))throw new TypeError("Unknown error");const ue=je[0];throw new TypeError(`${ue.instancePath||"<root>"} ${ue.message}${ue.params?` - ${Object.entries(ue.params).map(([Ct,Rn])=>`${Ct}: ${Rn}`).join(", ")}`:""}`)}function At(je,ue={}){var Ct;const Rn=(Ct=ue==null?void 0:ue.disableCache)!=null?Ct:!1,Un=Rn?"":JSON.stringify(je);if(!Rn){const Ka=Te.get(Un);if(Ka)return Ka}const ea=Wt(je),fa=new(j())({allowUnionTypes:!0,allErrors:!0,validateSchema:!0});ea.length&&fa.addSchema(ea,void 0,void 0,!0);const Za=fa.compile(je);return Rn||Te.set(Un,Za),Za}function Wt(je){if(typeof je!="object")return[];const ue=new Set;je.$id&&ue.add(je.$id);const Ct=new Array,Rn=[je];for(;Rn.length;){const Un=Rn.pop();for(const ea of St(Un))if(!ue.has(ea)){ue.add(ea);const fa=vt.find(Za=>Za.$id===ea);fa&&(Ct.push(fa),Rn.push(fa))}}return Ct}function*St(je){const ue=[je];for(;ue.length;){const Ct=ue.pop();if(typeof Ct=="object"&&Ct)for(const[Rn,Un]of Object.entries(Ct))Rn==="$ref"&&typeof Un=="string"?yield Un.split("#")[0]:ue.push(Un)}}function Ue(je){const ue=At(je||bt);return Ct=>{if(ue(Ct)===!0)return Ct;throw Tt(ue.errors)}}function Xe(je){const ue=At(je);return Ct=>{var Rn;if(ue(Ct)===!0)return Ct;const ea=(Rn=ue.errors)==null?void 0:Rn.filter(fa=>["/kind","/apiVersion"].includes(fa.instancePath));if(ea!=null&&ea.length&&ea.every(fa=>fa.keyword==="enum"))return!1;throw Tt(ue.errors)}}function Mt(je){const ue=At(je||Ut);return Ct=>{if(ue(Ct)===!0)return Ct;throw Tt(ue.errors)}}class le{static isValidApiVersion(ue){return re.isValidPrefixAndOrSuffix(ue,"/",re.isValidDnsSubdomain,Ct=>Ct.length>=1&&Ct.length<=63&&/^[a-z0-9A-Z]+$/.test(Ct))}static isValidKind(ue){return typeof ue=="string"&&ue.length>=1&&ue.length<=63&&/^[a-zA-Z][a-z0-9A-Z]*$/.test(ue)}static isValidObjectName(ue){return typeof ue=="string"&&ue.length>=1&&ue.length<=63&&/^([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]$/.test(ue)}static isValidNamespace(ue){return re.isValidDnsLabel(ue)}static isValidLabelKey(ue){return re.isValidPrefixAndOrSuffix(ue,"/",re.isValidDnsSubdomain,le.isValidObjectName)}static isValidLabelValue(ue){return ue===""||le.isValidObjectName(ue)}static isValidAnnotationKey(ue){return re.isValidPrefixAndOrSuffix(ue,"/",re.isValidDnsSubdomain,le.isValidObjectName)}static isValidAnnotationValue(ue){return typeof ue=="string"}}const Be={isValidApiVersion:le.isValidApiVersion,isValidKind:le.isValidKind,isValidEntityName:le.isValidObjectName,isValidNamespace:le.isValidNamespace,isValidLabelKey:le.isValidLabelKey,isValidLabelValue:le.isValidLabelValue,isValidAnnotationKey:le.isValidAnnotationKey,isValidAnnotationValue:le.isValidAnnotationValue,isValidTag:je=>typeof je=="string"&&je.length>=1&&je.length<=63&&/^[a-z0-9:+#]+(\-[a-z0-9:+#]+)*$/.test(je)};function ie(je={}){return{...Be,...je}}var Ge=Object.defineProperty,tt=(je,ue,Ct)=>ue in je?Ge(je,ue,{enumerable:!0,configurable:!0,writable:!0,value:Ct}):je[ue]=Ct,ot=(je,ue,Ct)=>(tt(je,typeof ue!="symbol"?ue+"":ue,Ct),Ct);class Rt{constructor(ue=ie()){ot(this,"validators"),this.validators=ue}async enforce(ue){var Ct,Rn,Un,ea,fa,Za,Ka;function _a(h,l,y){if(l==null)throw new Error(`${h} must have a value`);let G;try{G=y(l)}catch(Re){throw new Error(`${h} could not be validated, ${Re}`)}if(!G){let Re;switch(y.name){case"isValidLabelValue":case"isValidObjectName":Re="a string that is sequences of [a-zA-Z0-9] separated by any of [-_.], at most 63 characters in total";break;case"isValidLabelKey":case"isValidApiVersion":case"isValidAnnotationKey":Re="a valid prefix and/or suffix";break;case"isValidNamespace":case"isValidDnsLabel":Re="a string that is sequences of [a-z0-9] separated by [-], at most 63 characters in total";break;case"isValidTag":Re="a string that is sequences of [a-z0-9+#] separated by [-], at most 63 characters in total";break;case"isValidAnnotationValue":Re="a string";break;case"isValidKind":Re="a string that is a sequence of [a-zA-Z][a-z0-9A-Z], at most 63 characters in total";break;case"isValidUrl":Re="a string that is a valid url";break;case"isValidString":case"isNonEmptyString":Re="a non empty string";break;default:Re=void 0;break}const lt=Re?` expected ${Re} but found "${l}".`:"";throw new Error(`"${h}" is not valid;${lt} To learn more about catalog file format, visit: https://github.com/backstage/backstage/blob/master/docs/architecture-decisions/adr002-default-catalog-file-format.md`)}}function Ua(h,l,y){return l===void 0||_a(h,l,y)}_a("apiVersion",ue.apiVersion,this.validators.isValidApiVersion),_a("kind",ue.kind,this.validators.isValidKind),_a("metadata.name",ue.metadata.name,this.validators.isValidEntityName),Ua("metadata.namespace",ue.metadata.namespace,this.validators.isValidNamespace);for(const[h,l]of Object.entries((Ct=ue.metadata.labels)!=null?Ct:[]))_a(`labels.${h}`,h,this.validators.isValidLabelKey),_a(`labels.${h}`,l,this.validators.isValidLabelValue);for(const[h,l]of Object.entries((Rn=ue.metadata.annotations)!=null?Rn:[]))_a(`annotations.${h}`,h,this.validators.isValidAnnotationKey),_a(`annotations.${h}`,l,this.validators.isValidAnnotationValue);const Ma=(Un=ue.metadata.tags)!=null?Un:[];for(let h=0;h<Ma.length;++h)_a(`tags.${h}`,Ma[h],this.validators.isValidTag);const qa=(ea=ue.metadata.links)!=null?ea:[];for(let h=0;h<qa.length;++h)_a(`links.${h}.url`,(fa=qa[h])==null?void 0:fa.url,re.isValidUrl),Ua(`links.${h}.title`,(Za=qa[h])==null?void 0:Za.title,re.isNonEmptyString),Ua(`links.${h}.icon`,(Ka=qa[h])==null?void 0:Ka.icon,le.isValidObjectName);return ue}}var en=Object.defineProperty,Ce=(je,ue,Ct)=>ue in je?en(je,ue,{enumerable:!0,configurable:!0,writable:!0,value:Ct}):je[ue]=Ct,Me=(je,ue,Ct)=>(Ce(je,typeof ue!="symbol"?ue+"":ue,Ct),Ct);const R=null;class B{constructor(ue=R){Me(this,"knownFields"),this.knownFields=ue}async enforce(ue){for(const Ct of Object.keys(ue))if(!this.knownFields.includes(Ct))throw new Error(`Unknown field ${Ct}`);return ue}}var X=Object.defineProperty,nt=(je,ue,Ct)=>ue in je?X(je,ue,{enumerable:!0,configurable:!0,writable:!0,value:Ct}):je[ue]=Ct,mt=(je,ue,Ct)=>(nt(je,typeof ue!="symbol"?ue+"":ue,Ct),Ct);class ct{constructor(){mt(this,"validate")}async enforce(ue){if(!this.validate){const Un=new Ajv({allowUnionTypes:!0});this.validate=Un.addSchema([Ae,fe],void 0,void 0,!0).compile(Ut)}if(this.validate(ue)===!0)return ue;const[Rn]=this.validate.errors||[];throw Rn?new Error(`Malformed envelope, ${Rn.instancePath||"<root>"} ${Rn.message}`):new Error("Malformed envelope, Unknown error")}}class jt{constructor(ue){this.policies=ue}async enforce(ue){let Ct=ue;for(const Rn of this.policies){const Un=await Rn.enforce(Ct);if(!Un)throw new Error(`Policy ${Rn.constructor.name} did not return a result`);Ct=Un}return Ct}}class dn{constructor(ue){this.policies=ue}async enforce(ue){for(const Ct of this.policies){const Rn=await Ct.enforce(ue);if(Rn)return Rn}throw new Error("The entity did not match any known policy")}}const An={allOf(je){return new jt(je)},oneOf(je){return new dn(je)}};var bn="http://json-schema.org/draft-07/schema",F="ApiV1alpha1",H="An API describes an interface that can be exposed by a component. The API can be defined in different formats, like OpenAPI, AsyncAPI, GraphQL, gRPC, or other formats.",Ne=[{apiVersion:"backstage.io/v1alpha1",kind:"API",metadata:{name:"artist-api",description:"Retrieve artist details",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"openapi",lifecycle:"production",owner:"artist-relations-team",system:"artist-engagement-portal",definition:`openapi: "3.0.0"
info:...`}}],it=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["API"]},spec:{type:"object",required:["type","lifecycle","owner","definition"],properties:{type:{type:"string",description:"The type of the API definition.",examples:["openapi","asyncapi","graphql","grpc","trpc"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the API.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the API.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the API belongs to.",minLength:1},definition:{type:"string",description:"The definition of the API, based on the format defined by the type.",minLength:1}}}}}],Gt={$schema:bn,$id:F,description:H,examples:Ne,allOf:it};function Dt(je){let ue;return{async check(Ct){return ue||(ue=Xe(je)),ue(Ct)===Ct}}}const mn=Dt(Gt);var un="http://json-schema.org/draft-07/schema",Cn="ComponentV1alpha1",Oe='A Component describes a software component. It is typically intimately linked to the source code that constitutes the component, and should be what a developer may regard a "unit of software", usually with a distinct deployable or linkable artifact.',$e=[{apiVersion:"backstage.io/v1alpha1",kind:"Component",metadata:{name:"LoremService",description:"Creates Lorems like a pro.",labels:{product_name:"Random value Generator"},annotations:{docs:"https://github.com/..../tree/develop/doc"}},spec:{type:"service",lifecycle:"production",owner:"tools"}}],st=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Component"]},spec:{type:"object",required:["type","lifecycle","owner"],properties:{type:{type:"string",description:"The type of component.",examples:["service","website","library"],minLength:1},lifecycle:{type:"string",description:"The lifecycle state of the component.",examples:["experimental","production","deprecated"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},system:{type:"string",description:"An entity reference to the system that the component belongs to.",minLength:1},subcomponentOf:{type:"string",description:"An entity reference to another component of which the component is a part.",minLength:1},providesApis:{type:"array",description:"An array of entity references to the APIs that are provided by the component.",items:{type:"string",minLength:1}},consumesApis:{type:"array",description:"An array of entity references to the APIs that are consumed by the component.",items:{type:"string",minLength:1}},dependsOn:{type:"array",description:"An array of references to other entities that the component depends on to function.",items:{type:"string",minLength:1}}}}}}],Qt={$schema:un,$id:Cn,description:Oe,examples:$e,allOf:st};const Xt=Dt(Qt);var ln="http://json-schema.org/draft-07/schema",an="DomainV1alpha1",On="A Domain groups a collection of systems that share terminology, domain models, business purpose, or documentation, i.e. form a bounded context.",Nn=[{apiVersion:"backstage.io/v1alpha1",kind:"Domain",metadata:{name:"artists",description:"Everything about artists"},spec:{owner:"artist-relations-team"}}],Fn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Domain"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1}}}}}],ra={$schema:ln,$id:an,description:On,examples:Nn,allOf:Fn};const En=Dt(ra);var aa="http://json-schema.org/draft-07/schema",oa="GroupV1alpha1",na="A group describes an organizational entity, such as for example a team, a business unit, or a loose collection of people in an interest group. Members of these groups are modeled in the catalog as kind User.",pa=[{apiVersion:"backstage.io/v1alpha1",kind:"Group",metadata:{name:"infrastructure",description:"The infra business unit"},spec:{type:"business-unit",profile:{displayName:"Infrastructure",email:"infrastructure@example.com",picture:"https://example.com/groups/bu-infrastructure.jpeg"},parent:"ops",children:["backstage","other"]}}],Pa=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Group"]},spec:{type:"object",required:["type","children"],properties:{type:{type:"string",description:"The type of group. There is currently no enforced set of values for this field, so it is left up to the adopting organization to choose a nomenclature that matches their org hierarchy.",examples:["team","business-unit","product-area","root"],minLength:1},profile:{type:"object",description:"Optional profile information about the group, mainly for display purposes. All fields of this structure are also optional. The email would be a group email of some form, that the group may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the group, and that a browser could fetch and render on a group page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Infrastructure"],minLength:1},email:{type:"string",description:"An email where this entity can be reached.",examples:["infrastructure@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this entity.",examples:["https://example.com/groups/bu-infrastructure.jpeg"],minLength:1}}},parent:{type:"string",description:"The immediate parent group in the hierarchy, if any. Not all groups must have a parent; the catalog supports multi-root hierarchies. Groups may however not have more than one parent. This field is an entity reference.",examples:["ops"],minLength:1},children:{type:"array",description:"The immediate child groups of this group in the hierarchy (whose parent field points to this group). The list must be present, but may be empty if there are no child groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["backstage","other"],minLength:1}},members:{type:"array",description:"The users that are members of this group. The entries of this array are entity references.",items:{type:"string",examples:["jdoe"],minLength:1}}}}}}],qn={$schema:aa,$id:oa,description:na,examples:pa,allOf:Pa};const ya=Dt(qn);var q="http://json-schema.org/draft-07/schema",Le="LocationV1alpha1",et="A location is a marker that references other places to look for catalog data.",U=[{apiVersion:"backstage.io/v1alpha1",kind:"Location",metadata:{name:"org-data"},spec:{type:"url",targets:["http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-consultants.yaml"]}}],Z=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Location"]},spec:{type:"object",required:[],properties:{type:{type:"string",description:"The single location type, that's common to the targets specified in the spec. If it is left out, it is inherited from the location type that originally read the entity data.",examples:["url"],minLength:1},target:{type:"string",description:"A single target as a string. Can be either an absolute path/URL (depending on the type), or a relative path such as ./details/catalog-info.yaml which is resolved relative to the location of this Location entity itself.",examples:["./details/catalog-info.yaml"],minLength:1},targets:{type:"array",description:"A list of targets as strings. They can all be either absolute paths/URLs (depending on the type), or relative paths such as ./details/catalog-info.yaml which are resolved relative to the location of this Location entity itself.",items:{type:"string",examples:["./details/catalog-info.yaml","http://github.com/myorg/myproject/org-data-dump/catalog-info-staff.yaml"],minLength:1}},presence:{type:"string",description:"Whether the presence of the location target is required and it should be considered an error if it can not be found",default:"required",examples:["required"],enum:["required","optional"]}}}}}],P={$schema:q,$id:Le,description:et,examples:U,allOf:Z};const $=Dt(P),N="ownedBy",oe="ownerOf",pe="consumesApi",te="apiConsumedBy",Se="providesApi",We="apiProvidedBy",Qe="dependsOn",kt="dependencyOf",Lt="parentOf",tn="childOf",on="memberOf",vn="hasMember",cn="partOf",gn="hasPart";var yn="http://json-schema.org/draft-07/schema",Bn="ResourceV1alpha1",Qn="A resource describes the infrastructure a system needs to operate, like BigTable databases, Pub/Sub topics, S3 buckets or CDNs. Modelling them together with components and systems allows to visualize resource footprint, and create tooling around them.",jn=[{apiVersion:"backstage.io/v1alpha1",kind:"Resource",metadata:{name:"artists-db",description:"Stores artist details"},spec:{type:"database",owner:"artist-relations-team",system:"artist-engagement-portal"}}],Kn=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["Resource"]},spec:{type:"object",required:["type","owner"],properties:{type:{type:"string",description:"The type of resource.",examples:["database","s3-bucket","cluster"],minLength:1},owner:{type:"string",description:"An entity reference to the owner of the resource.",examples:["artist-relations-team","user:john.johnson"],minLength:1},dependsOn:{type:"array",description:"An array of references to other entities that the resource depends on to function.",items:{type:"string",minLength:1}},system:{type:"string",description:"An entity reference to the system that the resource belongs to.",minLength:1}}}}}],Dn={$schema:yn,$id:Bn,description:Qn,examples:jn,allOf:Kn};const Jn=Dt(Dn);var fn="http://json-schema.org/draft-07/schema",wn="SystemV1alpha1",sa="A system is a collection of resources and components. The system may expose or consume one or several APIs. It is viewed as abstraction level that provides potential consumers insights into exposed features without needing a too detailed view into the details of all components. This also gives the owning team the possibility to decide about published artifacts and APIs.",ua=[{apiVersion:"backstage.io/v1alpha1",kind:"System",metadata:{name:"artist-engagement-portal",description:"Handy tools to keep artists in the loop"},spec:{owner:"artist-relations-team",domain:"artists"}}],Ia=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["System"]},spec:{type:"object",required:["owner"],properties:{owner:{type:"string",description:"An entity reference to the owner of the component.",examples:["artist-relations-team","user:john.johnson"],minLength:1},domain:{type:"string",description:"An entity reference to the domain that the system belongs to.",examples:["artists"],minLength:1}}}}}],Na={$schema:fn,$id:wn,description:sa,examples:ua,allOf:Ia};const za=Dt(Na);var Fa="http://json-schema.org/draft-07/schema",xa="UserV1alpha1",Da="A user describes a person, such as an employee, a contractor, or similar. Users belong to Group entities in the catalog. These catalog user entries are connected to the way that authentication within the Backstage ecosystem works. See the auth section of the docs for a discussion of these concepts.",Ga=[{apiVersion:"backstage.io/v1alpha1",kind:"User",metadata:{name:"jdoe"},spec:{profile:{displayName:"Jenny Doe",email:"jenny-doe@example.com",picture:"https://example.com/staff/jenny-with-party-hat.jpeg"},memberOf:["team-b","employees"]}}],ja=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["backstage.io/v1alpha1","backstage.io/v1beta1"]},kind:{enum:["User"]},spec:{type:"object",required:["memberOf"],properties:{profile:{type:"object",description:"Optional profile information about the user, mainly for display purposes. All fields of this structure are also optional. The email would be a primary email of some form, that the user may wish to be used for contacting them. The picture is expected to be a URL pointing to an image that's representative of the user, and that a browser could fetch and render on a profile page or similar.",properties:{displayName:{type:"string",description:"A simple display name to present to users.",examples:["Jenny Doe"],minLength:1},email:{type:"string",description:"An email where this user can be reached.",examples:["jenny-doe@example.com"],minLength:1},picture:{type:"string",description:"The URL of an image that represents this user.",examples:["https://example.com/staff/jenny-with-party-hat.jpeg"],minLength:1}}},memberOf:{type:"array",description:"The list of groups that the user is a direct member of (i.e., no transitive memberships are listed here). The list must be present, but may be empty if the user is not member of any groups. The items are not guaranteed to be ordered in any particular way. The entries of this array are entity references.",items:{type:"string",examples:["team-b","employees"],minLength:1}}}}}}],Xa={$schema:Fa,$id:xa,description:Da,examples:Ga,allOf:ja};const cr=Dt(Xa),nr="backstage.io/managed-by-location",Oa="backstage.io/managed-by-origin-location",ia="backstage.io/source-location",la=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i;function Qa(je){if(typeof je!="string")throw new TypeError(`Unable to parse location ref '${je}', unexpected argument ${typeof je}`);const ue=je.indexOf(":");if(ue<0)throw new TypeError(`Unable to parse location ref '${je}', expected '<type>:<target>', e.g. 'url:https://host/path'`);const Ct=je.substring(0,ue).trim(),Rn=je.substring(ue+1).trim();if(!Ct||!Rn)throw new TypeError(`Unable to parse location ref '${je}', expected '<type>:<target>', e.g. 'url:https://host/path'`);if(Ct==="http"||Ct==="https")throw new TypeError(`Invalid location ref '${je}', please prefix it with 'url:', e.g. 'url:${je}'`);if(la.test(Rn))throw new TypeError(`Invalid location ref '${je}', target is a javascript: URL`);return{type:Ct,target:Rn}}function Ba(je){const{type:ue,target:Ct}=je;if(ue){if(!Ct)throw new TypeError("Unable to stringify location ref, empty target")}else throw new TypeError("Unable to stringify location ref, empty type");if(la.test(Ct))throw new TypeError(`Invalid location ref '${ue}:${Ct}', target is a javascript: URL`);return`${ue}:${Ct}`}function ar(je){var ue,Ct,Rn,Un,ea;const fa=(ea=(Ct=(ue=je.metadata)==null?void 0:ue.annotations)==null?void 0:Ct[ia])!=null?ea:(Un=(Rn=je.metadata)==null?void 0:Rn.annotations)==null?void 0:Un[nr];if(!fa)throw new Error(`Entity '${ve(je)}' is missing location`);return Qa(fa)}},53907:(xn,Yt,e)=>{"use strict";e.d(Yt,{CX:()=>Pa,WY:()=>Ct,uC:()=>aa,xP:()=>Nn,C4:()=>ra,KN:()=>oe,gr:()=>We,II:()=>Dn,wQ:()=>bo,Td:()=>nt,aq:()=>ct,eE:()=>An,_i:()=>st,gN:()=>ya,YM:()=>xa,sn:()=>Ne,$_:()=>an,Jv:()=>Qe,pM:()=>$,CJ:()=>nr,jJ:()=>cn,bg:()=>Uo});var i=e(2784),p=e(13980),g=e.n(p),j=e(18473),k=e(82394),o=e.n(k),z=e(57032),He=e(30705),Ze=e(30195),a=e(9850),xe=e.n(a),Ee=e(12782),se=e.n(Ee);const Y=null;function Fe(d,n){let s,E=!1;const w={};try{s=n!=null&&n.key?d.getConfig(n.key):d;for(const ye of Y){const Ye=s.getOptionalNumber(ye);Ye!==void 0&&(w[ye]=Ye,E=!0)}}catch(ye){throw new InputError(`Failed to read duration from config, ${ye}`)}try{if(!E){const Ye=Y.map(qe=>`'${qe}'`).join(", ");throw new Error(`Needs one or more of ${Ye}`)}const ye=s.keys().filter(Ye=>!Y.includes(Ye));if(ye.length){const Ye=ye.length===1?"property":"properties",qe=ye.map(Ht=>`'${Ht}'`).join(", "),xt=Y.map(Ht=>`'${Ht}'`).join(", ");throw new Error(`Unknown ${Ye} ${qe}; expected one or more of ${xt}`)}}catch(ye){let Ye="Failed to read duration from config";throw n!=null&&n.key&&(Ye+=` at '${n.key}'`),new InputError(`${Ye}, ${ye}`)}return w}var ge=Object.defineProperty,_e=(d,n,s)=>n in d?ge(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Q=(d,n,s)=>(_e(d,typeof n!="symbol"?n+"":n,s),s);const be=/^[a-z][a-z0-9]*(?:[-_][a-z][a-z0-9]*)*$/i;function M(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function c(d){if(d===null)return"null";if(Array.isArray(d))return"array";const n=typeof d;return n==="number"&&isNaN(d)?"nan":n==="string"&&d===""?"empty-string":n}const S={type(d,n,s,E){return`Invalid type in config for key '${d}' in '${n}', got ${s}, wanted ${E}`},missing(d){return`Missing required config value at '${d}'`},convert(d,n,s){return`Unable to convert config value for key '${d}' in '${n}' to a ${s}`}};class _{constructor(n,s="mock-config",E,w=""){this.data=n,this.context=s,this.fallback=E,this.prefix=w,Q(this,"filteredKeys"),Q(this,"notifiedFilteredKeys",new Set)}static fromConfigs(n){return n.length===0?new _(void 0):n.reduce((s,{data:E,context:w,filteredKeys:ye,deprecatedKeys:Ye})=>{const qe=new _(E,w,s);if(qe.filteredKeys=ye,Ye)for(const{key:xt,description:Ht}of Ye)console.warn(`The configuration key '${xt}' of ${w} is deprecated and may be removed soon. ${Ht||""}`);return qe},void 0)}has(n){var s,E;return this.readValue(n)!==void 0?!0:(E=(s=this.fallback)==null?void 0:s.has(n))!=null?E:!1}keys(){var n,s;const E=this.data?Object.keys(this.data):[],w=(s=(n=this.fallback)==null?void 0:n.keys())!=null?s:[];return[...new Set([...E,...w])]}get(n){const s=this.getOptional(n);if(s===void 0)throw new Error(S.missing(this.fullKey(n!=null?n:"")));return s}getOptional(n){var s,E;const w=xe()(this.readValue(n)),ye=(s=this.fallback)==null?void 0:s.getOptional(n);return w===void 0?ye:ye===void 0?w:se()({},{value:ye},{value:w},(Ye,qe)=>!M(qe)||!M(Ye)?qe:void 0).value}getConfig(n){const s=this.getOptionalConfig(n);if(s===void 0)throw new Error(S.missing(this.fullKey(n)));return s}getOptionalConfig(n){var s;const E=this.readValue(n),w=(s=this.fallback)==null?void 0:s.getOptionalConfig(n);if(M(E))return this.copy(E,n,w);if(E!==void 0)throw new TypeError(S.type(this.fullKey(n),this.context,c(E),"object"));return w}getConfigArray(n){const s=this.getOptionalConfigArray(n);if(s===void 0)throw new Error(S.missing(this.fullKey(n)));return s}getOptionalConfigArray(n){var s;const E=this.readConfigValue(n,w=>{if(!Array.isArray(w))return{expected:"object-array"};for(const[ye,Ye]of w.entries())if(!M(Ye))return{expected:"object-array",value:Ye,key:`${n}[${ye}]`};return!0});if(E)return E.map((w,ye)=>this.copy(w,`${n}[${ye}]`))}getNumber(n){const s=this.getOptionalNumber(n);if(s===void 0)throw new Error(S.missing(this.fullKey(n)));return s}getOptionalNumber(n){const s=this.readConfigValue(n,w=>typeof w=="number"||typeof w=="string"||{expected:"number"});if(typeof s=="number"||s===void 0)return s;const E=Number(s);if(!Number.isFinite(E))throw new Error(S.convert(this.fullKey(n),this.context,"number"));return E}getBoolean(n){const s=this.getOptionalBoolean(n);if(s===void 0)throw new Error(S.missing(this.fullKey(n)));return s}getOptionalBoolean(n){const s=this.readConfigValue(n,w=>typeof w=="boolean"||typeof w=="number"||typeof w=="string"||{expected:"boolean"});if(typeof s=="boolean"||s===void 0)return s;const E=String(s).trim();if(/^(?:y|yes|true|1|on)$/i.test(E))return!0;if(/^(?:n|no|false|0|off)$/i.test(E))return!1;throw new Error(S.convert(this.fullKey(n),this.context,"boolean"))}getString(n){const s=this.getOptionalString(n);if(s===void 0)throw new Error(S.missing(this.fullKey(n)));return s}getOptionalString(n){return this.readConfigValue(n,s=>typeof s=="string"&&s!==""||{expected:"string"})}getStringArray(n){const s=this.getOptionalStringArray(n);if(s===void 0)throw new Error(S.missing(this.fullKey(n)));return s}getOptionalStringArray(n){return this.readConfigValue(n,s=>{if(!Array.isArray(s))return{expected:"string-array"};for(const[E,w]of s.entries())if(typeof w!="string"||w==="")return{expected:"string-array",value:w,key:`${n}[${E}]`};return!0})}fullKey(n){return`${this.prefix}${this.prefix?".":""}${n}`}copy(n,s,E){const w=new _(n,this.context,E,this.fullKey(s));return w.filteredKeys=this.filteredKeys,w}readConfigValue(n,s){var E,w;const ye=this.readValue(n);if(ye===void 0)return(w=this.fallback)==null?void 0:w.readConfigValue(n,s);const Ye=s(ye);if(Ye!==!0){const{key:qe=n,value:xt=ye,expected:Ht}=Ye;throw new TypeError(S.type(this.fullKey(qe),this.context,c(xt),Ht))}return ye}readValue(n){const s=n?n.split("."):[];for(const w of s)if(!be.test(w))throw new TypeError(`Invalid config key '${n}'`);if(this.data===void 0)return;let E=this.data;for(const[w,ye]of s.entries())if(M(E))E=E[ye];else if(E!==void 0){const Ye=this.fullKey(s.slice(0,w).join("."));throw new TypeError(S.type(Ye,this.context,c(E),"object"))}return E}}var b=e(73557),m=e(16060),ve=e(64279),ee=e(83487),he=e(34519),J=e.n(he),ne=e(72164),re=e(24991),Pe=Object.defineProperty,Pt=(d,n,s)=>n in d?Pe(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,T=(d,n,s)=>(Pt(d,typeof n!="symbol"?n+"":n,s),s);class rn{constructor(...n){T(this,"holders"),this.holders=n}get(n){for(const s of this.holders){const E=s.get(n);if(E)return E}}}const de=(0,j.CT)("api-context"),Bt=d=>{var n;const{apis:s,children:E}=d,w=(n=(0,i.useContext)(de))==null?void 0:n.atVersion(1),ye=w?new rn(s,w):s;return i.createElement(de.Provider,{value:(0,j.EI)({1:ye}),children:E})};Bt.propTypes={apis:g().shape({get:g().func.isRequired}).isRequired,children:g().node};var ut=Object.defineProperty,rt=(d,n,s)=>n in d?ut(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,bt=(d,n,s)=>(rt(d,typeof n!="symbol"?n+"":n,s),s);class ke{constructor(n){this.factories=n,bt(this,"apis",new Map)}static validateFactories(n,s){for(const E of s){const w=[E],ye=new Set;for(;w.length;){const Ye=w.shift(),qe=n.get(Ye);if(qe)for(const xt of Object.values(qe.deps)){if(xt.id===E.id)throw new Error(`Circular dependency of api factory for ${E}`);ye.has(xt)||(ye.add(xt),w.push(xt))}}}}get(n){return this.load(n)}load(n,s=[]){const E=this.apis.get(n.id);if(E)return E;const w=this.factories.get(n);if(!w)return;if(s.includes(w.api))throw new Error(`Circular dependency of api factory for ${w.api}`);const ye=this.loadDeps(n,w.deps,[...s,w.api]),Ye=w.factory(ye);return this.apis.set(n.id,Ye),Ye}loadDeps(n,s,E){const w={};for(const ye in s)if(s.hasOwnProperty(ye)){const Ye=s[ye],qe=this.load(Ye,E);if(!qe)throw new Error(`No API factory available for dependency ${Ye} of dependent ${n}`);w[ye]=qe}return w}}var _t=Object.defineProperty,at=(d,n,s)=>n in d?_t(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,zt=(d,n,s)=>(at(d,typeof n!="symbol"?n+"":n,s),s),Ot=(d=>(d[d.default=10]="default",d[d.app=50]="app",d[d.static=100]="static",d))(Ot||{});class Zt{constructor(){zt(this,"factories",new Map)}register(n,s){const E=Ot[n],w=this.factories.get(s.api.id);return w&&w.priority>=E?!1:(this.factories.set(s.api.id,{priority:E,factory:s}),!0)}get(n){const s=this.factories.get(n.id);if(s)return s.factory}getAllApis(){const n=new Set;for(const{factory:s}of this.factories.values())n.add(s.api);return n}}function dt(d){return new Promise((n,s)=>{const E=d.width||500,w=d.height||700,ye=window.screen.width/2-E/2,Ye=window.screen.height/2-w/2,qe=window.open(d.url,d.name,`menubar=no,location=no,resizable=no,scrollbars=no,status=no,width=${E},height=${w},top=${Ye},left=${ye}`);let xt="";if(!qe||typeof qe.closed=="undefined"||qe.closed){const Tn=new Error("Failed to open auth popup.");Tn.name="PopupRejectedError",s(Tn);return}const Ht=Tn=>{if(Tn.source!==qe||Tn.origin!==d.origin)return;const{data:ca}=Tn;if(ca.type==="config_info"){xt=ca.targetOrigin;return}if(ca.type!=="authorization_response")return;const Wn=ca;if("error"in Wn){const da=new Error(Wn.error.message);da.name=Wn.error.name,s(da)}else n(Wn.response);$n()},Gn=setInterval(()=>{if(qe.closed){const Tn=`Login failed, ${xt&&xt!==window.location.origin?`Incorrect app origin, expected ${xt}`:"popup was closed"}`,ca=new Error(Tn);ca.name="PopupClosedError",s(ca),$n()}},100);function $n(){window.removeEventListener("message",Ht),clearInterval(Gn)}window.addEventListener("message",Ht)})}var gt=Object.defineProperty,Ut=(d,n,s)=>n in d?gt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,qt=(d,n,s)=>(Ut(d,typeof n!="symbol"?n+"":n,s),s);let yt=!1;function Ft(d){return[...d].join(" ")}class I{constructor(n){qt(this,"discoveryApi"),qt(this,"environment"),qt(this,"provider"),qt(this,"joinScopesFunc"),qt(this,"authRequester"),qt(this,"sessionTransform"),qt(this,"enableExperimentalRedirectFlow"),qt(this,"popupOptions");var s;const{configApi:E,discoveryApi:w,environment:ye,provider:Ye,joinScopes:qe=Ft,oauthRequestApi:xt,sessionTransform:Ht=$n=>$n,popupOptions:Gn}=n;!yt&&!E&&(console.warn("DEPRECATION WARNING: Authentication providers require a configApi instance to configure the authentication flow. Please provide one to the authentication provider constructor."),yt=!0),this.enableExperimentalRedirectFlow=E&&(s=E.getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?s:!1,this.authRequester=xt.createAuthRequester({provider:Ye,onAuthRequest:async $n=>this.enableExperimentalRedirectFlow?this.executeRedirect($n):this.showPopup($n)}),this.discoveryApi=w,this.environment=ye,this.provider=Ye,this.joinScopesFunc=qe,this.sessionTransform=Ht,this.popupOptions=Gn}async createSession(n){return n.instantPopup?this.enableExperimentalRedirectFlow?this.executeRedirect(n.scopes):this.showPopup(n.scopes):this.authRequester(n.scopes)}async refreshSession(n){const s=await fetch(await this.buildUrl("/refresh",{optional:!0,...n&&{scope:this.joinScopesFunc(n)}}),{headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(w=>{throw new Error(`Auth refresh request failed, ${w}`)});if(!s.ok){const w=new Error(`Auth refresh request failed, ${s.statusText}`);throw w.status=s.status,w}const E=await s.json();if(E.error){const w=new Error(E.error.message);throw E.error.name&&(w.name=E.error.name),w}return await this.sessionTransform(E)}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(s=>{throw new Error(`Logout request failed, ${s}`)});if(!n.ok){const s=new Error(`Logout request failed, ${n.statusText}`);throw s.status=n.status,s}}async showPopup(n){var s,E,w,ye,Ye,qe,xt,Ht;const Gn=this.joinScopesFunc(n),$n=await this.buildUrl("/start",{scope:Gn,origin:window.location.origin,flow:"popup"}),Tn=(E=(s=this.popupOptions)==null?void 0:s.size)!=null&&E.fullscreen?window.screen.width:((ye=(w=this.popupOptions)==null?void 0:w.size)==null?void 0:ye.width)||450,ca=(qe=(Ye=this.popupOptions)==null?void 0:Ye.size)!=null&&qe.fullscreen?window.screen.height:((Ht=(xt=this.popupOptions)==null?void 0:xt.size)==null?void 0:Ht.height)||730,Wn=await dt({url:$n,name:`${this.provider.title} Login`,origin:new URL($n).origin,width:Tn,height:ca});return await this.sessionTransform(Wn)}async executeRedirect(n){const s=this.joinScopesFunc(n);return window.location.href=await this.buildUrl("/start",{scope:s,origin:window.location.origin,redirectUrl:window.location.href,flow:"redirect"}),new Promise(()=>{})}async buildUrl(n,s){const E=await this.discoveryApi.getBaseUrl("auth"),w=this.buildQueryString({...s,env:this.environment});return`${E}/${this.provider.id}${n}${w}`}buildQueryString(n){if(!n)return"";const s=Object.entries(n).map(([E,w])=>{if(typeof w=="string")return`${encodeURIComponent(E)}=${encodeURIComponent(w)}`;if(w)return encodeURIComponent(E)}).filter(Boolean).join("&");return s?`?${s}`:""}}var W=Object.defineProperty,O=(d,n,s)=>n in d?W(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,D=(d,n,s)=>(O(d,typeof n!="symbol"?n+"":n,s),s);class ae{constructor(n){D(this,"discoveryApi"),D(this,"environment"),D(this,"provider");const{discoveryApi:s,environment:E,provider:w}=n;this.discoveryApi=s,this.environment=E,this.provider=w}async createSession(){const n=await this.buildUrl("/start"),s=await dt({url:n,name:`${this.provider.title} Login`,origin:new URL(n).origin,width:450,height:730});return{...s,id:s.profile.email}}async refreshSession(){}async removeSession(){const n=await fetch(await this.buildUrl("/logout"),{method:"POST",headers:{"x-requested-with":"XMLHttpRequest"},credentials:"include"}).catch(s=>{throw new Error(`Logout request failed, ${s}`)});if(!n.ok){const s=new Error(`Logout request failed, ${n.statusText}`);throw s.status=n.status,s}}async buildUrl(n){return`${await this.discoveryApi.getBaseUrl("auth")}/${this.provider.id}${n}?env=${this.environment}`}}function fe(d,n){for(const s of n)if(!d.has(s))return!1;return!0}class Ke{constructor(n){this.options=n}sessionExistsAndHasScope(n,s){if(!n)return!1;if(!s||this.options.sessionScopes===void 0)return!0;const E=this.options.sessionScopes(n);return fe(E,s)}getExtendedScope(n,s){const E=new Set(this.options.defaultScopes);if(n&&this.options.sessionScopes!==void 0){const w=this.options.sessionScopes(n);for(const ye of w)E.add(ye)}if(s)for(const w of s)E.add(w);return E}}var ft=Object.defineProperty,Je=(d,n,s)=>n in d?ft(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,wt=(d,n,s)=>(Je(d,typeof n!="symbol"?n+"":n,s),s);class nn{constructor(){wt(this,"isClosed",!1),wt(this,"terminatingError"),wt(this,"observable",new(o())(n=>this.isClosed?(this.terminatingError?n.error(this.terminatingError):n.complete(),()=>{}):(this.subscribers.add(n),()=>{this.subscribers.delete(n)}))),wt(this,"subscribers",new Set)}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.subscribers.forEach(s=>s.next(n))}error(n){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(s=>s.error(n))}complete(){if(this.isClosed)throw new Error("PublishSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,s,E){const w=typeof n=="function"?{next:n,error:s,complete:E}:n;return this.observable.subscribe(w)}}class Ae{constructor(n){wt(this,"isClosed"),wt(this,"currentValue"),wt(this,"terminatingError"),wt(this,"observable"),wt(this,"subscribers",new Set),this.isClosed=!1,this.currentValue=n,this.terminatingError=void 0,this.observable=new(o())(s=>this.isClosed?(this.terminatingError?s.error(this.terminatingError):s.complete(),()=>{}):(s.next(this.currentValue),this.subscribers.add(s),()=>{this.subscribers.delete(s)}))}[Symbol.observable](){return this}get closed(){return this.isClosed}next(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.currentValue=n,this.subscribers.forEach(s=>s.next(n))}error(n){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.terminatingError=n,this.subscribers.forEach(s=>s.error(n))}complete(){if(this.isClosed)throw new Error("BehaviorSubject is closed");this.isClosed=!0,this.subscribers.forEach(n=>n.complete())}subscribe(n,s,E){const w=typeof n=="function"?{next:n,error:s,complete:E}:n;return this.observable.subscribe(w)}}var Te=Object.defineProperty,vt=(d,n,s)=>n in d?Te(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Tt=(d,n,s)=>(vt(d,typeof n!="symbol"?n+"":n,s),s);class At{constructor(){Tt(this,"subject",new Ae(z.S.SignedOut)),Tt(this,"signedIn",!1)}setIsSignedIn(n){this.signedIn!==n&&(this.signedIn=n,this.subject.next(this.signedIn?z.S.SignedIn:z.S.SignedOut))}sessionState$(){return this.subject}}var Wt=Object.defineProperty,St=(d,n,s)=>n in d?Wt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Ue=(d,n,s)=>(St(d,typeof n!="symbol"?n+"":n,s),s);class Xe{constructor(n){Ue(this,"connector"),Ue(this,"helper"),Ue(this,"sessionScopesFunc"),Ue(this,"sessionShouldRefreshFunc"),Ue(this,"stateTracker",new At),Ue(this,"refreshPromise"),Ue(this,"currentSession");const{connector:s,defaultScopes:E=new Set,sessionScopes:w,sessionShouldRefresh:ye}=n;this.connector=s,this.sessionScopesFunc=w,this.sessionShouldRefreshFunc=ye,this.helper=new Ke({sessionScopes:w,defaultScopes:E})}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes)){if(!this.sessionShouldRefreshFunc(this.currentSession))return this.currentSession;try{const E=await this.collapsedSessionRefresh(n.scopes),w=this.sessionScopesFunc(this.currentSession),ye=this.sessionScopesFunc(E);return fe(ye,w)&&(this.currentSession=E),E}catch(E){if(n.optional)return;throw E}}if(!this.currentSession&&!n.instantPopup)try{const s=await this.collapsedSessionRefresh(n.scopes);return this.currentSession=s,this.getSession(n)}catch{}if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,await this.connector.removeSession(),this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}async collapsedSessionRefresh(n){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.connector.refreshSession(this.helper.getExtendedScope(this.currentSession,n));try{const s=await this.refreshPromise;return this.stateTracker.setIsSignedIn(!0),s}finally{delete this.refreshPromise}}}var Mt=Object.defineProperty,le=(d,n,s)=>n in d?Mt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Be=(d,n,s)=>(le(d,typeof n!="symbol"?n+"":n,s),s);class ie{constructor(n){Be(this,"connector"),Be(this,"helper"),Be(this,"stateTracker",new At),Be(this,"currentSession");const{connector:s,defaultScopes:E=new Set,sessionScopes:w}=n;this.connector=s,this.helper=new Ke({sessionScopes:w,defaultScopes:E})}setSession(n){this.currentSession=n,this.stateTracker.setIsSignedIn(Boolean(n))}async getSession(n){if(this.helper.sessionExistsAndHasScope(this.currentSession,n.scopes))return this.currentSession;if(!n.optional)return this.currentSession=await this.connector.createSession({...n,scopes:this.helper.getExtendedScope(this.currentSession,n.scopes)}),this.stateTracker.setIsSignedIn(!0),this.currentSession}async removeSession(){this.currentSession=void 0,this.stateTracker.setIsSignedIn(!1)}sessionState$(){return this.stateTracker.sessionState$()}}var Ge=Object.defineProperty,tt=(d,n,s)=>n in d?Ge(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,ot=(d,n,s)=>(tt(d,typeof n!="symbol"?n+"":n,s),s);class Rt{constructor(n){ot(this,"manager"),ot(this,"storageKey"),ot(this,"schema"),ot(this,"sessionShouldRefreshFunc"),ot(this,"helper");const{manager:s,storageKey:E,schema:w,sessionScopes:ye,sessionShouldRefresh:Ye=()=>!1}=n;this.manager=s,this.storageKey=E,this.schema=w,this.sessionShouldRefreshFunc=Ye,this.helper=new Ke({sessionScopes:ye,defaultScopes:new Set})}setSession(n){this.manager.setSession(n),this.saveSession(n)}async getSession(n){const{scopes:s}=n,E=this.loadSession();if(this.helper.sessionExistsAndHasScope(E,s)&&!this.sessionShouldRefreshFunc(E))return this.manager.setSession(E),E;const w=await this.manager.getSession(n);return this.saveSession(w),w}async removeSession(){localStorage.removeItem(this.storageKey),await this.manager.removeSession()}sessionState$(){return this.manager.sessionState$()}loadSession(){try{const n=localStorage.getItem(this.storageKey);if(n){const s=JSON.parse(n,(E,w)=>(w==null?void 0:w.__type)==="Set"?new Set(w.__value):w);try{return this.schema.parse(s)}catch(E){throw console.log(`Failed to load session from local storage because it did not conform to the expected schema, ${E}`),E}}return}catch{localStorage.removeItem(this.storageKey);return}}saveSession(n){if(n===void 0){localStorage.removeItem(this.storageKey);return}try{this.schema.parse(n)}catch(s){console.warn(`Failed to save session to local storage because it did not conform to the expected schema, ${s}`);return}localStorage.setItem(this.storageKey,JSON.stringify(n,(s,E)=>E instanceof Set?{__type:"Set",__value:Array.from(E)}:E))}}var en=Object.defineProperty,Ce=(d,n,s)=>n in d?en(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Me=(d,n,s)=>(Ce(d,typeof n!="symbol"?n+"":n,s),s);const R={id:"oauth2",title:"Your Identity Provider",icon:()=>null};class B{constructor(n){Me(this,"sessionManager"),Me(this,"scopeTransform"),this.sessionManager=n.sessionManager,this.scopeTransform=n.scopeTransform}static create(n){const{configApi:s,discoveryApi:E,environment:w="development",provider:ye=R,oauthRequestApi:Ye,defaultScopes:qe=[],scopeTransform:xt=Tn=>Tn,popupOptions:Ht}=n,Gn=new I({configApi:s,discoveryApi:E,environment:w,provider:ye,oauthRequestApi:Ye,sessionTransform({backstageIdentity:Tn,...ca}){var Wn;const da={...ca,providerInfo:{idToken:ca.providerInfo.idToken,accessToken:ca.providerInfo.accessToken,scopes:B.normalizeScopes(xt,ca.providerInfo.scope),expiresAt:ca.providerInfo.expiresInSeconds?new Date(Date.now()+ca.providerInfo.expiresInSeconds*1e3):void 0}};if(Tn){const Ha=(Wn=Tn.expiresInSeconds)!=null?Wn:ca.providerInfo.expiresInSeconds;da.backstageIdentity={token:Tn.token,identity:Tn.identity,expiresAt:Ha?new Date(Date.now()+Ha*1e3):void 0}}return da},popupOptions:Ht}),$n=new Xe({connector:Gn,defaultScopes:new Set(qe),sessionScopes:Tn=>Tn.providerInfo.scopes,sessionShouldRefresh:Tn=>{var ca,Wn;let da=1/0;return(ca=Tn.providerInfo)!=null&&ca.expiresAt&&(da=Math.min(da,(Tn.providerInfo.expiresAt.getTime()-Date.now())/1e3)),(Wn=Tn.backstageIdentity)!=null&&Wn.expiresAt&&(da=Math.min(da,(Tn.backstageIdentity.expiresAt.getTime()-Date.now())/1e3)),da<60*5}});return new B({sessionManager:$n,scopeTransform:xt})}async signIn(){await this.getAccessToken()}async signOut(){await this.sessionManager.removeSession()}sessionState$(){return this.sessionManager.sessionState$()}async getAccessToken(n,s){var E;const w=B.normalizeScopes(this.scopeTransform,n),ye=await this.sessionManager.getSession({...s,scopes:w});return(E=ye==null?void 0:ye.providerInfo.accessToken)!=null?E:""}async getIdToken(n={}){var s;const E=await this.sessionManager.getSession({...n,scopes:new Set(["openid"])});return(s=E==null?void 0:E.providerInfo.idToken)!=null?s:""}async getBackstageIdentity(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.backstageIdentity}async getProfile(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.profile}static normalizeScopes(n,s){if(!s)return new Set;const E=Array.isArray(s)?s:s.split(/[\s|,]/).filter(Boolean);return new Set(n(E))}}const X={id:"github",title:"GitHub",icon:()=>null};class nt{static create(n){const{configApi:s,discoveryApi:E,environment:w="development",provider:ye=X,oauthRequestApi:Ye,defaultScopes:qe=["read:user"]}=n;return B.create({configApi:s,discoveryApi:E,oauthRequestApi:Ye,provider:ye,environment:w,defaultScopes:qe})}}const mt={id:"gitlab",title:"GitLab",icon:()=>null};class ct{static create(n){const{configApi:s,discoveryApi:E,environment:w="development",provider:ye=mt,oauthRequestApi:Ye,defaultScopes:qe=["read_user"]}=n;return B.create({configApi:s,discoveryApi:E,oauthRequestApi:Ye,provider:ye,environment:w,defaultScopes:qe})}}const jt={id:"google",title:"Google",icon:()=>null},dn="https://www.googleapis.com/auth/";class An{static create(n){const{configApi:s,discoveryApi:E,oauthRequestApi:w,environment:ye="development",provider:Ye=jt,defaultScopes:qe=["openid",`${dn}userinfo.email`,`${dn}userinfo.profile`]}=n;return B.create({configApi:s,discoveryApi:E,oauthRequestApi:w,provider:Ye,environment:ye,defaultScopes:qe,scopeTransform(xt){return xt.map(Ht=>Ht==="openid"?Ht:Ht==="profile"||Ht==="email"?`${dn}userinfo.${Ht}`:Ht.startsWith(dn)?Ht:`${dn}${Ht}`)}})}}const bn={id:"okta",title:"Okta",icon:()=>null},F=new Set(["openid","profile","email","phone","address","groups","offline_access"]),H="okta.";class Ne{static create(n){const{configApi:s,discoveryApi:E,environment:w="development",provider:ye=bn,oauthRequestApi:Ye,defaultScopes:qe=["openid","email","profile","offline_access"]}=n;return B.create({configApi:s,discoveryApi:E,oauthRequestApi:Ye,provider:ye,environment:w,defaultScopes:qe,scopeTransform(xt){return xt.map(Ht=>F.has(Ht)||Ht.startsWith(H)?Ht:`${H}${Ht}`)}})}}const it=Ze.z.object({profile:Ze.z.object({email:Ze.z.string().optional(),displayName:Ze.z.string().optional(),picture:Ze.z.string().optional()}),backstageIdentity:Ze.z.object({token:Ze.z.string(),identity:Ze.z.object({type:Ze.z.literal("user"),userEntityRef:Ze.z.string(),ownershipEntityRefs:Ze.z.array(Ze.z.string())})})}),Gt={id:"saml",title:"SAML",icon:()=>null};class Dt{constructor(n){this.sessionManager=n}static create(n){const{discoveryApi:s,environment:E="development",provider:w=Gt}=n,ye=new ae({discoveryApi:s,environment:E,provider:w}),Ye=new ie({connector:ye}),qe=new Rt({manager:Ye,storageKey:`${w.id}Session`,schema:it});return new Dt(qe)}sessionState$(){return this.sessionManager.sessionState$()}async signIn(){await this.getBackstageIdentity({})}async signOut(){await this.sessionManager.removeSession()}async getBackstageIdentity(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.backstageIdentity}async getProfile(n={}){const s=await this.sessionManager.getSession(n);return s==null?void 0:s.profile}}var mn=Object.defineProperty,un=(d,n,s)=>n in d?mn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Cn=(d,n,s)=>(un(d,typeof n!="symbol"?n+"":n,s),s);const Oe={id:"microsoft",title:"Microsoft",icon:()=>null},$e=class Ir{constructor(n){Cn(this,"oauth2"),Cn(this,"configApi"),Cn(this,"environment"),Cn(this,"provider"),Cn(this,"oauthRequestApi"),Cn(this,"discoveryApi"),Cn(this,"scopeTransform");const{configApi:s,environment:E="development",provider:w=Oe,oauthRequestApi:ye,discoveryApi:Ye,defaultScopes:qe=["openid","offline_access","profile","email","User.Read"],scopeTransform:xt=Ht=>Ht.concat("offline_access")}=n;this.configApi=s,this.environment=E,this.provider=w,this.oauthRequestApi=ye,this.discoveryApi=Ye,this.scopeTransform=xt,this.oauth2={[Ir.MicrosoftGraphID]:B.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform,defaultScopes:qe})}}static create(n){return new Ir(n)}microsoftGraph(){return this.oauth2[Ir.MicrosoftGraphID]}static resourceForScopes(n){var s;const E=[...new Set(n.split(" ").map(Ir.resourceForScope).filter(ye=>ye!=="openid"))];if(E.length>1)return Promise.reject(new Error(`Requested access token with scopes from multiple Azure resources: ${E.join(", ")}. Access tokens can only have a single audience.`));const w=(s=E[0])!=null?s:Ir.MicrosoftGraphID;return Promise.resolve(w)}static resourceForScope(n){var s;const E=(s=n.match(/^(?<resourceURI>.*)\/(?<scp>[^\/]*)$/))==null?void 0:s.groups;if(E){const{resourceURI:w}=E;return w.replace(/^api:\/\//,"")}switch(n){case"email":case"openid":case"offline_access":case"profile":return"openid";default:return Ir.MicrosoftGraphID}}async getAccessToken(n,s){const E=n===void 0?Ir.MicrosoftGraphID:await Ir.resourceForScopes(Array.isArray(n)?n.join(" "):n);return E in this.oauth2||(this.oauth2[E]=B.create({configApi:this.configApi,discoveryApi:this.discoveryApi,oauthRequestApi:this.oauthRequestApi,provider:this.provider,environment:this.environment,scopeTransform:this.scopeTransform})),this.oauth2[E].getAccessToken(n,s)}getIdToken(n){return this.microsoftGraph().getIdToken(n)}getProfile(n){return this.microsoftGraph().getProfile(n)}getBackstageIdentity(n){return this.microsoftGraph().getBackstageIdentity(n)}signIn(){return this.microsoftGraph().signIn()}signOut(){return this.microsoftGraph().signOut()}sessionState$(){return this.microsoftGraph().sessionState$()}};Cn($e,"MicrosoftGraphID","00000003-0000-0000-c000-000000000000");let st=$e;const Qt={id:"onelogin",title:"onelogin",icon:()=>null},Xt=new Set(["openid","profile","email","phone","address","groups","offline_access"]),ln="onelogin.";class an{static create(n){const{configApi:s,discoveryApi:E,environment:w="development",provider:ye=Qt,oauthRequestApi:Ye}=n;return B.create({configApi:s,discoveryApi:E,oauthRequestApi:Ye,provider:ye,environment:w,defaultScopes:["openid","email","profile","offline_access"],scopeTransform(qe){return qe.map(xt=>Xt.has(xt)||xt.startsWith(ln)?xt:`${ln}${xt}`)}})}}const On={id:"bitbucket",title:"Bitbucket",icon:()=>null};class Nn{static create(n){const{configApi:s,discoveryApi:E,environment:w="development",provider:ye=On,oauthRequestApi:Ye,defaultScopes:qe=["team"]}=n;return B.create({configApi:s,discoveryApi:E,oauthRequestApi:Ye,provider:ye,environment:w,defaultScopes:qe})}}const Fn={id:"bitbucketServer",title:"Bitbucket Server",icon:()=>null};class ra{static create(n){const{configApi:s,discoveryApi:E,environment:w="development",provider:ye=Fn,oauthRequestApi:Ye,defaultScopes:qe=["PROJECT_ADMIN"]}=n;return B.create({configApi:s,discoveryApi:E,oauthRequestApi:Ye,provider:ye,environment:w,defaultScopes:qe})}}const En={id:"atlassian",title:"Atlassian",icon:()=>null};class aa{static create(n){const{configApi:s,discoveryApi:E,environment:w="development",provider:ye=En,oauthRequestApi:Ye}=n;return B.create({configApi:s,discoveryApi:E,oauthRequestApi:Ye,provider:ye,environment:w})}}var oa=Object.defineProperty,na=(d,n,s)=>n in d?oa(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,pa=(d,n,s)=>(na(d,typeof n!="symbol"?n+"":n,s),s);class Pa{constructor(){pa(this,"subject",new nn)}post(n){this.subject.next(n)}alert$(){return this.subject}}class qn{constructor(n){this.actualApis=n}static fromApis(n){return new qn(n)}captureEvent(n){this.actualApis.forEach(s=>{try{s.captureEvent(n)}catch{}})}}class ya{captureEvent(n){}}var q=Object.defineProperty,Le=(d,n,s)=>n in d?q(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,et=(d,n,s)=>(Le(d,typeof n!="symbol"?n+"":n,s),s);const U="theme";class Z{constructor(n){this.themes=n,et(this,"activeThemeId"),et(this,"subject",new Ae(void 0))}static createWithStorage(n){var s;const E=new Z(n);if(!window.localStorage)return E;const w=(s=window.localStorage.getItem(U))!=null?s:void 0;return E.setActiveThemeId(w),E.activeThemeId$().subscribe(ye=>{ye?window.localStorage.setItem(U,ye):window.localStorage.removeItem(U)}),window.addEventListener("storage",ye=>{var Ye;if(ye.key===U){const qe=(Ye=localStorage.getItem(U))!=null?Ye:void 0;E.setActiveThemeId(qe)}}),E}getInstalledThemes(){return this.themes.slice()}activeThemeId$(){return this.subject}getActiveThemeId(){return this.activeThemeId}setActiveThemeId(n){this.activeThemeId=n,this.subject.next(n)}}const P="Invalid discovery URL pattern,";class ${constructor(n){this.parts=n}static compile(n){const s=n.split(/\{\{\s*pluginId\s*\}\}/),E=s.join("pluginId");let w;try{w=new URL(E)}catch{throw new Error(`${P} URL '${E}' is invalid`)}if(w.hash)throw new Error(`${P} URL must not have a hash`);if(w.search)throw new Error(`${P} URL must not have a query`);if(E.endsWith("/"))throw new Error(`${P} URL must not end with a slash`);return new $(s)}async getBaseUrl(n){return this.parts.join(encodeURIComponent(n))}}class N{constructor(n,s){this.endpoints=n,this.defaultEndpoint=s}static fromConfig(n,s){var E,w;const ye=(E=s==null?void 0:s.pathPattern)!=null?E:"/api/{{ pluginId }}",Ye=n.getString("backend.baseUrl"),qe=(w=n.getOptionalConfigArray("discovery.endpoints"))==null?void 0:w.flatMap(xt=>{const Ht=typeof xt.get("target")=="object"?xt.getString("target.external"):xt.getString("target"),Gn=$.compile(Ht);return xt.getStringArray("plugins").map($n=>[$n,Gn])});return new N(new Map(qe),$.compile(`${Ye}${ye}`))}async getBaseUrl(n){const s=this.endpoints.get(n);return s?s.getBaseUrl(n):this.defaultEndpoint.getBaseUrl(n)}}class oe{constructor(n,s){this.alertApi=n,this.errorApi=s}post(n,s){return s!=null&&s.hidden||this.alertApi.post({message:n.message,severity:"error"}),this.errorApi.post(n,s)}error$(){return this.errorApi.error$()}}var pe=Object.defineProperty,te=(d,n,s)=>n in d?pe(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Se=(d,n,s)=>(te(d,typeof n!="symbol"?n+"":n,s),s);class We{constructor(){Se(this,"subject",new nn)}post(n,s){this.subject.next({error:n,context:s})}error$(){return this.subject}}class Qe{static forward(n,s){window.addEventListener("unhandledrejection",E=>{n.post(E.reason,s)})}}var kt=Object.defineProperty,Lt=(d,n,s)=>n in d?kt(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,tn=(d,n,s)=>(Lt(d,typeof n!="symbol"?n+"":n,s),s);function on(d){if(d.length<3)throw new Error(`The '${d}' feature flag must have a minimum length of three characters.`);if(d.length>150)throw new Error(`The '${d}' feature flag must not exceed 150 characters.`);if(!d.match(/^[a-z]+[a-z0-9-]+$/))throw new Error(`The '${d}' feature flag must start with a lowercase letter and only contain lowercase letters, numbers and hyphens. Examples: feature-flag-one, alpha, release-2020`)}class vn{constructor(){tn(this,"registeredFeatureFlags",[]),tn(this,"flags")}registerFlag(n){on(n.name),this.registeredFeatureFlags.push(n)}getRegisteredFlags(){return this.registeredFeatureFlags.slice()}isActive(n){return this.flags||(this.flags=this.load()),this.flags.get(n)===z.F.Active}save(n){this.flags||(this.flags=this.load()),n.merge||this.flags.clear();for(const[E,w]of Object.entries(n.states))this.flags.set(E,w);const s=Array.from(this.flags.entries()).filter(([,E])=>E===z.F.Active);window.localStorage.setItem("featureFlags",JSON.stringify(Object.fromEntries(s)))}load(){try{const n=window.localStorage.getItem("featureFlags");if(!n)return new Map;const s=JSON.parse(n);if(typeof s!="object"||s===null||Array.isArray(s))return new Map;const E=Object.entries(s).filter(([w,ye])=>(on(w),ye===z.F.Active));return new Map(E)}catch{return new Map}}}function cn(d){var n;let s=d.baseImplementation||e.g.fetch;const E=[(n=d.middleware)!=null?n:[]].flat().reverse();for(const w of E)s=w.apply(s);return{fetch:s}}class gn{constructor(n,s,E,w){this.identityApi=n,this.allowUrl=s,this.headerName=E,this.headerValue=w}static create(n){var s,E;const w=yn(n),ye=((s=n.header)==null?void 0:s.name)||"authorization",Ye=((E=n.header)==null?void 0:E.value)||(qe=>`Bearer ${qe}`);return new gn(n.identityApi,w,ye,Ye)}apply(n){return async(s,E)=>{const w=new Request(s,E),{token:ye}=await this.identityApi.getCredentials();return w.headers.get(this.headerName)||typeof ye!="string"||!ye||!this.allowUrl(w.url)?n(s,E):(w.headers.set(this.headerName,this.headerValue(ye)),n(w))}}}function yn(d){return d.allowUrl?d.allowUrl:d.urlPrefixAllowlist?Bn(d.urlPrefixAllowlist):d.config?Bn([d.config.getString("backend.baseUrl")]):()=>!1}function Bn(d){const n=d.map(s=>s.replace(/\/$/,""));return s=>n.some(E=>s===E||s.startsWith(`${E}/`))}function Qn(d,n){return!n||n==="/"?d:`${d.replace(/\/$/,"")}/${n.replace(/^\//,"")}`}class jn{constructor(n){this.discoveryApi=n}apply(n){return async(s,E)=>{const w=new Request(s,E),ye="plugin://";if(!w.url.startsWith(ye))return n(s,E);const{hostname:Ye,pathname:qe,search:xt,hash:Ht,username:Gn,password:$n}=new URL(`http://${w.url.substring(ye.length)}`);let Tn=await this.discoveryApi.getBaseUrl(Ye);if(Gn||$n){const Wn=new URL(Tn),da=`${Gn}${$n?`:${$n}`:""}@`;Tn=`${Wn.protocol}//${da}${Wn.host}${Wn.pathname}`}const ca=`${Qn(Tn,qe)}${xt}${Ht}`;return n(ca,typeof s=="string"||Kn(s)?E:s)}}}function Kn(d){return typeof d=="object"&&(d==null?void 0:d.constructor)===URL}class Dn{static resolvePluginProtocol(n){return new jn(n.discoveryApi)}static injectIdentityAuth(n){return gn.create(n)}constructor(){}}var Jn=Object.defineProperty,fn=(d,n,s)=>n in d?Jn(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,wn=(d,n,s)=>(fn(d,typeof n!="symbol"?n+"":n,s),s);function sa(d,n){for(const s of n)if(!d.has(s))return!1;return!0}function ua(d,...n){const s=new Set(d);for(const E of n)for(const w of E)s.add(w);return s}class Ia{constructor(){wn(this,"requests",[]),wn(this,"subject",new Ae(this.getCurrentPending()))}request(n){return new Promise((s,E)=>{this.requests.push({scopes:n,resolve:s,reject:E}),this.subject.next(this.getCurrentPending())})}resolve(n,s){this.requests=this.requests.filter(E=>sa(n,E.scopes)?(E.resolve(s),!1):!0),this.subject.next(this.getCurrentPending())}reject(n){this.requests.forEach(s=>s.reject(n)),this.requests=[],this.subject.next(this.getCurrentPending())}pending(){return this.subject}getCurrentPending(){const n=this.requests.length===0?void 0:this.requests.slice(1).reduce((s,E)=>ua(s,E.scopes),this.requests[0].scopes);return{scopes:n,resolve:s=>{n&&this.resolve(n,s)},reject:s=>{n&&this.reject(s)}}}}var Na=Object.defineProperty,za=(d,n,s)=>n in d?Na(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Fa=(d,n,s)=>(za(d,typeof n!="symbol"?n+"":n,s),s);class xa{constructor(){Fa(this,"subject",new Ae([])),Fa(this,"currentRequests",[]),Fa(this,"handlerCount",0)}createAuthRequester(n){const s=new Ia,E=this.handlerCount;return this.handlerCount++,s.pending().subscribe({next:w=>{const ye=this.currentRequests.slice(),Ye=this.makeAuthRequest(w,n);Ye?ye[E]=Ye:delete ye[E],this.currentRequests=ye,this.subject.next(ye.filter(Boolean))}}),w=>s.request(w)}makeAuthRequest(n,s){const{scopes:E}=n;if(E)return{provider:s.provider,trigger:async()=>{const w=await s.onAuthRequest(E);n.resolve(w)},reject:()=>{const w=new Error("Login failed, rejected by user");w.name="RejectedError",n.reject(w)}}}authRequest$(){return this.subject}}var Da=Object.defineProperty,Ga=(d,n,s)=>n in d?Da(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,ja=(d,n,s)=>(Ga(d,typeof n!="symbol"?n+"":n,s),s);const Xa=new Map,cr=class Qr{constructor(n,s){this.namespace=n,this.errorApi=s,ja(this,"subscribers",new Set),ja(this,"observable",new(o())(E=>(this.subscribers.add(E),()=>{this.subscribers.delete(E)})))}static create(n){var s;return new Qr((s=n.namespace)!=null?s:"",n.errorApi)}static addStorageEventListener(){window.addEventListener("storage",n=>{var s;for(const[E,w]of Xa.entries())(s=n.key)!=null&&s.startsWith(E)&&w.handleStorageChange(n.key)})}get(n){return this.snapshot(n).value}snapshot(n){let s,E="absent";try{const w=localStorage.getItem(this.getKeyName(n));w&&(s=JSON.parse(w,(ye,Ye)=>(typeof Ye=="object"&&Ye!==null&&Object.freeze(Ye),Ye)),E="present")}catch{this.errorApi.post(new Error(`Error when parsing JSON config from storage for: ${n}`))}return{key:n,value:s,presence:E}}forBucket(n){const s=`${this.namespace}/${n}`;return Xa.has(s)||Xa.set(s,new Qr(s,this.errorApi)),Xa.get(s)}async set(n,s){localStorage.setItem(this.getKeyName(n),JSON.stringify(s)),this.notifyChanges(n)}async remove(n){localStorage.removeItem(this.getKeyName(n)),this.notifyChanges(n)}observe$(n){return Qr.hasSubscribed||(Qr.addStorageEventListener(),Qr.hasSubscribed=!0),this.observable.filter(({key:s})=>s===n)}handleStorageChange(n){if(!(n!=null&&n.startsWith(this.namespace)))return;const s=n==null?void 0:n.slice(`${this.namespace}/`.length);s.includes("/")||this.notifyChanges(decodeURIComponent(s))}getKeyName(n){return`${this.namespace}/${encodeURIComponent(n)}`}notifyChanges(n){const s=this.snapshot(n);for(const E of this.subscribers)E.next(s)}};ja(cr,"hasSubscribed",!1);let nr=cr;const Oa=(0,i.createContext)(void 0);function ia(){const[d]=(0,b.is)(i.createElement(b.AW,{index:!0,element:i.createElement("div",null)}));return!d.index}const la=(d,n)=>{try{const s=(0,m.fp)(n,{pathname:d}),E=s==null?void 0:s.filter(xt=>{var Ht;return((Ht=xt==null?void 0:xt.route.routeRefs)==null?void 0:Ht.size)>0}).pop(),w=E==null?void 0:E.route;if(!w||w.path===""&&d!=="/")return;let ye;w.routeRefs.size===1&&(ye=w.routeRefs.values().next().value);let Ye;w.plugins.size===1&&(Ye=w.plugins.values().next().value);const qe=Object.entries((E==null?void 0:E.params)||{}).reduce((xt,[Ht,Gn])=>(Gn!==void 0&&Ht!=="*"&&(xt[Ht]=Gn),xt),{});return{extension:"App",pluginId:(Ye==null?void 0:Ye.getId())||"root",...ye?{routeRef:ye.id}:{},_routeNodeType:w.element,params:qe}}catch{return}},Qa=({pathname:d,search:n,hash:s,attributes:E})=>{const w=(0,He.z$)();return(0,i.useEffect)(()=>{w.captureEvent("navigate",`${d}${n}${s}`,{attributes:E})},[w,d,n,s,E]),null},Ba=({routeObjects:d})=>{const{pathname:n,search:s,hash:E}=(0,b.TH)(),{params:w,...ye}=la(n,d)||{params:{}};return i.createElement(He.fC,{attributes:ye},i.createElement(Qa,{pathname:n,search:s,hash:E,attributes:w}))};function ar(d){return ia()?je(d):""}function je(d){var n;let{pathname:s}=new URL((n=d.getOptionalString("app.baseUrl"))!=null?n:"/","http://sample.dev");return s=s.replace(/\/*$/,""),s}function ue({component:d,appIdentityProxy:n,children:s}){const[E,w]=(0,i.useState)(),ye=(0,z.u)(z.p),Ye=je(ye);return E?(n.setTarget(E,{signOutTargetUrl:Ye||"/"}),i.createElement(i.Fragment,null,s)):i.createElement(d,{onSignInSuccess:w})}function Ct(d){const{Router:n,SignInPage:s}=(0,He.qD)().getComponents(),E=(0,z.u)(z.p),w=je(E),ye=`${w}/*`,Ye=(0,i.useContext)(Oa);if(!Ye)throw new Error("AppRouter must be rendered within the AppProvider");const{routeObjects:qe,appIdentityProxy:xt}=Ye;return s?ia()?i.createElement(n,null,i.createElement(Ba,{routeObjects:qe}),i.createElement(ue,{component:s,appIdentityProxy:xt},i.createElement(b.Z5,null,i.createElement(b.AW,{path:ye,element:i.createElement(i.Fragment,null,d.children)})))):i.createElement(n,{basename:w},i.createElement(Ba,{routeObjects:qe}),i.createElement(ue,{component:s,appIdentityProxy:xt},d.children)):(xt.setTarget({getUserId:()=>"guest",getIdToken:async()=>{},getProfile:()=>({email:"guest@example.com",displayName:"Guest"}),getProfileInfo:async()=>({email:"guest@example.com",displayName:"Guest"}),getBackstageIdentity:async()=>({type:"user",userEntityRef:"user:default/guest",ownershipEntityRefs:["user:default/guest"]}),getCredentials:async()=>({}),signOut:async()=>{}},{signOutTargetUrl:w||"/"}),ia()?i.createElement(n,null,i.createElement(Ba,{routeObjects:qe}),i.createElement(b.Z5,null,i.createElement(b.AW,{path:ye,element:i.createElement(i.Fragment,null,d.children)}))):i.createElement(n,{basename:w},i.createElement(Ba,{routeObjects:qe}),d.children))}(0,He.R5)(Ct,"core.type","AppRouter");function Rn(d){const n={};for(const E in d.collectors)d.collectors.hasOwnProperty(E)&&(n[E]=d.collectors[E]());const s=[{node:i.Children.toArray(d.root),parent:void 0,contexts:{}}];for(;s.length!==0;){const{node:E,parent:w,contexts:ye}=s.shift();i.Children.forEach(E,Ye=>{if(!(0,i.isValidElement)(Ye))return;const qe={};for(const xt in n)if(n.hasOwnProperty(xt)){const Ht=n[xt];qe[xt]=Ht.visit(Ht.accumulator,Ye,w,ye[xt])}for(const xt of d.discoverers){const Ht=xt(Ye);Ht&&s.push({node:Ht,parent:Ye,contexts:qe})}})}return Object.fromEntries(Object.entries(n).map(([E,w])=>[E,w.accumulator]))}function Un(d,n){return()=>({accumulator:d(),visit:n})}function ea(d){var n;return(n=d.props)==null?void 0:n.children}function fa(d){var n,s,E;if((n=d.props)!=null&&n.path&&((s=d.props)!=null&&s.element))return(E=d.props)==null?void 0:E.element}const Za=Un(()=>new Set,(d,n)=>{const s=(0,He.IY)(n,"core.plugin");s&&d.add(s)}),Ka=d=>{const{children:n}=d,s=(0,z.u)(z.f),E="with"in d?s.isActive(d.with):!s.isActive(d.without);return i.createElement(i.Fragment,null,E?n:null)};(0,He.R5)(Ka,"core.featureFlagged",!0);const _a={caseSensitive:!1,path:"*",element:"match-all",routeRefs:new Set,plugins:new Set};function Ua(d){var n,s;const E=d;return E!=null&&E.type?(s=(n=E.type.displayName)!=null?n:E.type.name)!=null?s:String(E.type):String(E)}const Ma=d=>{const n=new Set;return d&&n.add(d),n};function qa(d,n=new Array){return i.Children.forEach(d,s=>{if(!(0,i.isValidElement)(s))return;const E=(0,He.IY)(s,"core.mountPoint");if(E){const w=(0,He.IY)(s,"core.plugin");n.push({routeRef:E,plugin:w})}qa(s.props.children,n)}),n}const h=Un(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,n,s,E)=>{var w,ye,Ye,qe,xt,Ht,Gn;if(E!=null&&E.isElementAncestor)return E;if((s==null?void 0:s.props.element)===n)return{...E,isElementAncestor:!0};const $n=(w=n.props)==null?void 0:w.path,Tn=(0,He.IY)(n,"core.mountPoint");if(Tn&&$n)throw new Error(`Path property may not be set directly on a routable extension "${Ua(n)}"`);const ca=(Ye=(ye=E==null?void 0:E.obj)==null?void 0:ye.children)!=null?Ye:d.objects;if($n!==void 0){if(typeof $n!="string")throw new Error(`Element path must be a string at "${Ua(n)}"`);const Wn=$n.startsWith("/")?$n.slice(1):$n,da=n.props.element;if((0,He.IY)(n,"core.gatherMountPoints")){if(da)throw new Error(`Mount point gatherers may not have an element prop "${Ua(n)}"`);const Ha={path:Wn,element:"gathered",routeRefs:new Set,caseSensitive:Boolean((qe=n.props)==null?void 0:qe.caseSensitive),children:[_a],plugins:new Set};return ca.push(Ha),{obj:Ha,gatherPath:Wn,routeRef:E==null?void 0:E.routeRef,gatherRouteRef:E==null?void 0:E.routeRef}}if(da){const[Ha,...ga]=qa(da);if(ga.length>0)throw new Error(`Route element with path "${$n}" may not contain multiple routable extensions`);if(!Ha)return E;const{routeRef:sr,plugin:Lr}=Ha,Co={path:Wn,element:"mounted",routeRefs:new Set([sr]),caseSensitive:Boolean((xt=n.props)==null?void 0:xt.caseSensitive),children:[_a],plugins:Ma(Lr)};return ca.push(Co),d.paths.set(sr,Wn),d.parents.set(sr,E==null?void 0:E.routeRef),{obj:Co,routeRef:sr!=null?sr:E==null?void 0:E.routeRef,gatherPath:Wn,gatherRouteRef:E==null?void 0:E.gatherRouteRef}}}if(Tn){if((E==null?void 0:E.gatherPath)===void 0)throw new Error(`Routable extension "${Ua(n)}" with mount point "${Tn}" must be assigned a path`);(Ht=E==null?void 0:E.obj)==null||Ht.routeRefs.add(Tn);const Wn=(0,He.IY)(n,"core.plugin");return Wn&&((Gn=E==null?void 0:E.obj)==null||Gn.plugins.add(Wn)),d.paths.set(Tn,E.gatherPath),d.parents.set(Tn,E==null?void 0:E.gatherRouteRef),{...E,routeRef:Tn}}return E}),l=Un(()=>({paths:new Map,parents:new Map,objects:new Array}),(d,n,s,E)=>{var w,ye,Ye,qe,xt;if((s==null?void 0:s.props.element)===n)return E;let Ht=E==null?void 0:E.obj,Gn=E==null?void 0:E.routeRef,$n=E==null?void 0:E.sticky;const Tn=(w=n.props)==null?void 0:w.path,ca=(ye=Ht==null?void 0:Ht.children)!=null?ye:d.objects,Wn=Boolean((Ye=n.props)==null?void 0:Ye.caseSensitive);let da=E==null?void 0:E.path;if((0,He.IY)(n,"core.gatherMountPoints")){if(!Tn)throw new Error("Mount point gatherer must have a path");da=Tn}const Ha=(qe=n.props)==null?void 0:qe.element;let ga=(0,He.IY)(n,"core.mountPoint");if(!ga&&(0,i.isValidElement)(Ha)&&(ga=(0,He.IY)(Ha,"core.mountPoint")),ga){let Lr=Tn;if(da&&(Lr?da=void 0:Lr=da),!Lr)throw new Error("Mounted routable extension must have a path");d.paths.set(ga,Lr),Gn&&$n?(d.parents.set(ga,Gn),Tn&&(Gn=ga,$n=!1)):(d.parents.set(ga,Gn),Gn=ga),Tn?(Ht={caseSensitive:Wn,path:Tn,element:"mounted",routeRefs:new Set([ga]),children:[_a],plugins:Ma((0,He.IY)(n.props.element,"core.plugin"))},ca.push(Ht)):Ht==null||Ht.routeRefs.add(ga)}if((0,He.IY)(n,"core.gatherMountPoints")&&($n=!0),(0,He.IY)(n,"core.gatherMountPoints")){if(!Tn)throw new Error("Mount point gatherer must have a path");ga||(Ht={caseSensitive:Wn,path:Tn,element:"gathered",routeRefs:new Set,children:[_a],plugins:((xt=E==null?void 0:E.obj)==null?void 0:xt.plugins)||new Set},ca.push(Ht))}return{obj:Ht,path:da,routeRef:Gn,sticky:$n}}),y=Un(()=>new Set,(d,n)=>{if(n.type===Ka){const s=n.props;d.add("with"in s?s.with:s.without)}}),G=(0,j.uW)("route-ref-type",()=>Symbol("route-ref-type"));function Re(d){return d[G]==="absolute"}function lt(d){return d[G]==="sub"}function It(d){return d[G]==="external"}function Vt(...d){const n=d.join("/").replace(/\/\/+/g,"/");return n!=="/"&&n.endsWith("/")?n.slice(0,-1):n}function Sn(d,n,s){let E,w="";if(Re(d))E=d;else if(lt(d))E=d.parent,w=d.path;else if(It(d)){const qe=s.get(d);if(!qe)return[void 0,""];if(Re(qe))E=qe;else if(lt(qe))E=qe.parent,w=qe.path;else throw new Error(`ExternalRouteRef was bound to invalid target, ${qe}`)}else throw d[G]?new Error(`Unknown or invalid route ref type, ${d[G]}`):new Error(`Unknown object passed to useRouteRef, got ${d}`);if(!E)return[void 0,""];const ye=n.get(E);if(ye===void 0)return[void 0,""];const Ye=Vt(ye,w);return[E,Ye]}function kn(d,n,s,E,w){var ye;const Ye=(ye=(0,m.fp)(w,n))!=null?ye:[],qe=Array();let xt=-1;for(let $n=d;$n&&(xt=Ye.findIndex(Tn=>Tn.route.routeRefs.has($n)),xt===-1);$n=E.get($n))qe.unshift($n);qe.length===0&&(xt-=1);const Ht=xt===-1?"":Ye[xt].pathname,Gn=qe.slice(0,-1).map($n=>{const Tn=s.get($n);if(Tn===void 0)throw new Error(`No path for ${$n}`);if(Tn.includes(":"))throw new Error(`Cannot route to ${d} with parent ${$n} as it has parameters`);return Tn});return`${Vt(Ht,...Gn)}/`}class Zn{constructor(n,s,E,w,ye){this.routePaths=n,this.routeParents=s,this.routeObjects=E,this.routeBindings=w,this.appBasePath=ye}resolve(n,s){const[E,w]=Sn(n,this.routePaths,this.routeBindings);if(!E)return;let ye;typeof s=="string"?ye=this.trimPath(s):s.pathname?ye={...s,pathname:this.trimPath(s.pathname)}:ye=s;const Ye=this.appBasePath+kn(E,ye,this.routePaths,this.routeParents,this.routeObjects);return(...[xt])=>{const Ht=xt&&J()(xt,Gn=>typeof Gn=="string"?Gn.replaceAll(/[&?#;\/]/g,$n=>encodeURIComponent($n)):Gn);return Vt(Ye,(0,m.Gn)(w,Ht))}}trimPath(n){return n&&(n.startsWith(this.appBasePath)?n.slice(this.appBasePath.length):n)}}const Aa=(0,j.CT)("routing-context"),Va=({routePaths:d,routeParents:n,routeObjects:s,routeBindings:E,basePath:w="",children:ye})=>{const Ye=new Zn(d,n,s,E,w),qe=(0,j.EI)({1:Ye});return i.createElement(Aa.Provider,{value:qe},ye)};function rr(d,n){const s=new Set(n.values());s.delete(void 0);for(const E of n.keys()){if(s.has(E))continue;let w=E,ye="";for(;w;){const qe=d.get(w);if(qe===void 0)throw new Error(`No path for ${w}`);ye=Vt(qe,ye),w=n.get(w)}const Ye=ye.match(/:(\w+)/g);if(Ye){for(let qe=0;qe<Ye.length;qe++)for(let xt=qe+1;xt<Ye.length;xt++)if(Ye[xt]===Ye[qe])throw new Error(`Parameter ${Ye[xt]} is duplicated in path ${ye}`)}}}function or(d,n){for(const s of n)if(s.externalRoutes){for(const[E,w]of Object.entries(s.externalRoutes))if(!w.optional&&!d.has(w))throw new Error(`External route '${E}' of the '${s.getId()}' plugin must be bound to a target route. See https://backstage.io/link?bind-routes for details.`)}}const qr=(0,j.CT)("app-context"),eo=({appContext:d,children:n})=>{const s=(0,j.EI)({1:d});return i.createElement(qr.Provider,{value:s,children:n})};var Zr=Object.defineProperty,to=(d,n,s)=>n in d?Zr(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Ur=(d,n,s)=>(to(d,typeof n!="symbol"?n+"":n,s),s);function kr(d){return new Error(`Tried to access IdentityApi ${d} before app was loaded`)}function Dr(d){console.warn(`WARNING: Call to ${d} is deprecated and will break in the future`)}class ur{constructor(){Ur(this,"target"),Ur(this,"waitForTarget"),Ur(this,"resolveTarget",()=>{}),Ur(this,"signOutTargetUrl","/"),this.waitForTarget=new Promise(n=>{this.resolveTarget=n})}setTarget(n,s){this.target=n,this.signOutTargetUrl=s.signOutTargetUrl,this.resolveTarget(n)}getUserId(){if(!this.target)throw kr("getUserId");if(!this.target.getUserId)throw new Error("IdentityApi does not implement getUserId");return Dr("getUserId"),this.target.getUserId()}getProfile(){if(!this.target)throw kr("getProfile");if(!this.target.getProfile)throw new Error("IdentityApi does not implement getProfile");return Dr("getProfile"),this.target.getProfile()}async getProfileInfo(){return this.waitForTarget.then(n=>n.getProfileInfo())}async getBackstageIdentity(){const n=await this.waitForTarget.then(s=>s.getBackstageIdentity());return n.userEntityRef.match(/^.*:.*\/.*$/)||console.warn(`WARNING: The App IdentityApi provided an invalid userEntityRef, '${n.userEntityRef}'. It must be a full Entity Reference of the form '<kind>:<namespace>/<name>'.`),n}async getCredentials(){return this.waitForTarget.then(n=>n.getCredentials())}async getIdToken(){return this.waitForTarget.then(n=>{if(!n.getIdToken)throw new Error("IdentityApi does not implement getIdToken");return Dr("getIdToken"),n.getIdToken()})}async signOut(){await this.waitForTarget.then(n=>n.signOut()),window.location.href=this.signOutTargetUrl}}function Pr(d,n,s){if(d!==void 0){const w=s.find(ye=>ye.id===d);if(w)return w}if(n){const w=s.find(ye=>ye.variant==="dark");if(w)return w}const E=s.find(w=>w.variant==="light");return E||s[0]}const _r=()=>{const d=(0,i.useMemo)(()=>window.matchMedia("(prefers-color-scheme: dark)"),[]),[n,s]=(0,i.useState)(d.matches);return(0,i.useEffect)(()=>{const E=w=>{s(w.matches)};return d.addListener(E),()=>{d.removeListener(E)}},[d]),n};function Ar({children:d}){const n=(0,z.u)(z.n),s=(0,ne.Z)(n.activeThemeId$(),n.getActiveThemeId()),E=Boolean(window.matchMedia)?_r():!1,w=Pr(s,E,n.getInstalledThemes());if(!w)throw new Error("App has no themes");return i.createElement(w.Provider,{children:d})}const Wr=async()=>Nr();function Nr(d=/*__APP_INJECTED_CONFIG_MARKER__*/"[{\"context\":\"app\",\"deprecatedKeys\":[],\"data\":{\"app\":{\"baseUrl\":\"http://localhost:7007\"},\"backend\":{\"baseUrl\":\"http://localhost:7007\"},\"techdocs\":{\"builder\":\"local\"},\"integrations\":{\"github\":[{\"host\":\"github.com\"}]},\"auth\":{\"environment\":\"development\",\"providers\":{\"github\":{}}}}}]"/*__INJECTED_END__*/){const n=[{context:"app-config.yaml",data:{app:{title:"Scaffolded Backstage App",baseUrl:"http://localhost:3000"},organization:{name:"My Company"},backend:{baseUrl:"http://localhost:7007"},integrations:{github:[{host:"github.com"}]},techdocs:{builder:"external"},catalog:{import:{entityFilename:"catalog-info.yaml",pullRequestBranchName:"backstage-integration"}}}},{context:"app-config.local.yaml",data:{integrations:{github:[{host:"github.com"}]}}}];if(!n)throw new Error("No static configuration provided");if(!Array.isArray(n))throw new Error("Static configuration has invalid format");const s=n.slice();if(d!=="__app_injected_runtime_config__".toLocaleUpperCase("en-US"))try{const w=JSON.parse(d);Array.isArray(w)?s.push(...w):s.push({data:w,context:"env"})}catch(w){throw new Error(`Failed to load runtime configuration, ${w}`)}const E=window.__APP_CONFIG__;return E&&s.push({context:"window",data:E}),s}var no=Object.defineProperty,ao=(d,n,s)=>n in d?no(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,ro=(d,n,s)=>(ao(d,typeof n!="symbol"?n+"":n,s),s);class oo{constructor(){ro(this,"apis",[])}add(n,s){return this.apis.push([n.id,s]),s}build(){return new dr(new Map(this.apis))}}class dr{constructor(n){this.apis=n}static builder(){return new oo}static from(n){return new dr(new Map(n.map(([s,E])=>[s.id,E])))}static with(n,s){return new dr(new Map([[n.id,s]]))}with(n,s){return new dr(new Map([...this.apis,[n.id,s]]))}get(n){return this.apis.get(n.id)}}function io(d){const n=new Map;return d&&d({bind:(E,w)=>{for(const[ye,Ye]of Object.entries(w)){const qe=E[ye];if(!qe)throw new Error(`Key ${ye} is not an existing external route`);if(!Ye&&!qe.optional)throw new Error(`External route ${ye} is required but was undefined`);Ye&&n.set(qe,Ye)}}}),n}var Fr=(d,n,s)=>{if(!n.has(d))throw TypeError("Cannot "+s)},Ya=(d,n,s)=>(Fr(d,n,"read from private field"),s?s.call(d):n.get(d)),$r=(d,n,s)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,s)},Mr=(d,n,s,E)=>(Fr(d,n,"write to private field"),E?E.call(d,s):n.set(d,s),s),br,mr,Sr;const pr="language",ir="en",so=class Jo{constructor(n,s){$r(this,br,void 0),$r(this,mr,void 0),$r(this,Sr,void 0),Mr(this,br,n),Mr(this,mr,s),Mr(this,Sr,new Ae({language:Ya(this,mr)}))}static create(n){var s,E;const w=(s=n==null?void 0:n.availableLanguages)!=null?s:[ir];if(w.length!==new Set(w).size)throw new Error(`Supported languages may not contain duplicates, got '${w.join("', '")}'`);if(!w.includes(ir))throw new Error(`Supported languages must include '${ir}'`);const ye=(E=n==null?void 0:n.defaultLanguage)!=null?E:ir;if(!w.includes(ye))throw new Error(`Initial language must be one of the supported languages, got '${ye}'`);return new Jo(w,ye)}static createWithStorage(n){const s=Jo.create(n);if(!window.localStorage)return s;const E=window.localStorage.getItem(pr),{languages:w}=s.getAvailableLanguages();return E&&w.includes(E)&&s.setLanguage(E),s.language$().subscribe(({language:ye})=>{ye!==window.localStorage.getItem(pr)&&window.localStorage.setItem(pr,ye)}),window.addEventListener("storage",ye=>{var Ye;if(ye.key===pr){const qe=(Ye=localStorage.getItem(pr))!=null?Ye:void 0;qe&&s.setLanguage(qe)}}),s}getAvailableLanguages(){return{languages:Ya(this,br).slice()}}setLanguage(n){const s=n!=null?n:ir;if(s!==Ya(this,mr)){if(s&&!Ya(this,br).includes(s))throw new Error(`Failed to change language to '${s}', available languages are '${Ya(this,br).join("', '")}'`);Mr(this,mr,s),Ya(this,Sr).next({language:s})}}getLanguage(){return{language:Ya(this,mr)}}language$(){return Ya(this,Sr)}};br=new WeakMap,mr=new WeakMap,Sr=new WeakMap;let lo=so;function co(d){const n=d;if(n.$$type!=="@backstage/TranslationResource")throw new Error(`Invalid translation resource, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation resource, bad version '${n.version}'`);return n}function uo(d){const n=d;if(n.$$type!=="@backstage/TranslationRef")throw new Error(`Invalid translation ref, bad type '${n.$$type}'`);if(n.version!=="v1")throw new Error(`Invalid translation ref, bad version '${n.version}'`);return n}var Kr=(d,n,s)=>{if(!n.has(d))throw TypeError("Cannot "+s)},f=(d,n,s)=>(Kr(d,n,"read from private field"),s?s.call(d):n.get(d)),A=(d,n,s)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,s)},L=(d,n,s,E)=>(Kr(d,n,"write to private field"),E?E.call(d,s):n.set(d,s),s),K=(d,n,s)=>(Kr(d,n,"access private method"),s),me,De,ze,Ve,ht,Nt,$t,sn,Pn,hn,In,Xn,_n,ta,ma,zn;function Mn(d){return Object.fromEntries(Object.entries(d).filter(n=>n[1]!==null))}class Vn{constructor(n){this.onLoad=n,A(this,Ve),A(this,me,new Set),A(this,De,new Map),A(this,ze,new Map)}addTranslationResource(n){const s=co(n);for(const E of s.resources){const w=K(this,Ve,ht).call(this,E.language,s.id);f(this,ze).has(w)||f(this,ze).set(w,E.loader)}}needsLoading(n,s){const E=K(this,Ve,ht).call(this,n,s);return f(this,ze).get(E)?!f(this,me).has(E):!1}async load(n,s){const E=K(this,Ve,ht).call(this,n,s),w=f(this,ze).get(E);if(!w||f(this,me).has(E))return;const ye=f(this,De).get(E);if(ye){await ye;return}const Ye=w().then(qe=>{this.onLoad({language:n,namespace:s,messages:qe.messages}),f(this,me).add(E)},qe=>{throw f(this,me).add(E),qe});f(this,De).set(E,Ye),await Ye}}me=new WeakMap,De=new WeakMap,ze=new WeakMap,Ve=new WeakSet,ht=function(d,n){return`${d}/${n}`};const Ea=class zi{constructor(n,s,E){A(this,In),A(this,_n),A(this,ma),A(this,Nt,void 0),A(this,$t,void 0),A(this,sn,void 0),A(this,Pn,new Set),A(this,hn,new Set),L(this,Nt,n),L(this,$t,s),L(this,sn,E)}static create(n){const{languages:s}=n.languageApi.getAvailableLanguages(),E=(0,re.Fs)({fallbackLng:ir,supportedLngs:s,interpolation:{escapeValue:!1},ns:[],defaultNS:!1,fallbackNS:!1,initImmediate:!1});if(E.init(),!E.isInitialized)throw new Error("i18next was unexpectedly not initialized");const{language:w}=n.languageApi.getLanguage();w!==ir&&E.changeLanguage(w);const ye=new Vn(xt=>{E.addResourceBundle(xt.language,xt.namespace,Mn(xt.messages),!1,!0)}),Ye=(n==null?void 0:n.resources)||[];for(let xt=Ye.length-1;xt>=0;xt--){const Ht=Ye[xt];Ht.$$type==="@backstage/TranslationResource"?ye.addTranslationResource(Ht):Ht.$$type==="@backstage/TranslationMessages"&&E.addResourceBundle(ir,Ht.id,Mn(Ht.messages),!0,!1)}const qe=new zi(E,ye,n.languageApi.getLanguage().language);return n.languageApi.language$().subscribe(({language:xt})=>{var Ht;K(Ht=qe,In,Xn).call(Ht,xt)}),qe}getTranslation(n){const s=uo(n);return K(this,ma,zn).call(this,s),K(this,_n,ta).call(this,s)}translation$(n){const s=uo(n);return K(this,ma,zn).call(this,s),new(o())(E=>{let w={};const ye=()=>{w={};const qe=w;f(this,$t).load(f(this,sn),s.id).then(()=>{if(qe===w){const xt=K(this,_n,ta).call(this,s);xt.ready&&E.next(xt)}},xt=>{qe===w&&E.error(Array.isArray(xt)?xt[0]:xt)})},Ye=()=>{const qe=K(this,_n,ta).call(this,s);qe.ready?E.next(qe):ye()};return f(this,$t).needsLoading(f(this,sn),s.id)&&ye(),f(this,hn).add(Ye),()=>{f(this,hn).delete(Ye)}})}};Nt=new WeakMap,$t=new WeakMap,sn=new WeakMap,Pn=new WeakMap,hn=new WeakMap,In=new WeakSet,Xn=function(d){f(this,sn)!==d&&(L(this,sn,d),f(this,Nt).changeLanguage(d),f(this,hn).forEach(n=>n()))},_n=new WeakSet,ta=function(d){return f(this,$t).needsLoading(f(this,sn),d.id)?{ready:!1}:{ready:!0,t:f(this,Nt).getFixedT(null,d.id)}},ma=new WeakSet,zn=function(d){if(f(this,Pn).has(d.id))return;f(this,Pn).add(d.id);const n=d.getDefaultMessages();f(this,Nt).addResourceBundle(ir,d.id,n,!0,!1);const s=d.getDefaultResource();s&&f(this,$t).addTranslationResource(s)};let Sa=Ea;function va(d){const n=new URL(d);return n.protocol=document.location.protocol,n.hostname=document.location.hostname,n.port=document.location.port,n.toString().replace(/\/$/,"")}function ba(d){const n=_.fromConfigs(d),s=n.getOptionalString("app.baseUrl"),E=n.getOptionalString("backend.baseUrl");let w=d,ye,Ye;if(s&&E){const qe=new URL(s).origin,xt=new URL(E).origin;if(qe===xt){const Ht=va(E);E!==Ht&&(ye=Ht)}}if(s){const qe=va(s);s!==qe&&(Ye=qe)}return(Ye||ye)&&(w=w.concat({data:{app:Ye&&{baseUrl:Ye},backend:ye&&{baseUrl:ye}},context:"relative-resolver"})),w}var wa=Object.defineProperty,Rr=(d,n,s)=>n in d?wa(d,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[n]=s,Ra=(d,n,s)=>(Rr(d,typeof n!="symbol"?n+"":n,s),s),Eo=(d,n,s)=>{if(!n.has(d))throw TypeError("Cannot "+s)},vo=(d,n,s)=>(Eo(d,n,"read from private field"),s?s.call(d):n.get(d)),yo=(d,n,s)=>{if(n.has(d))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(d):n.set(d,s)},xo=(d,n,s,E)=>(Eo(d,n,"write to private field"),E?E.call(d,s):n.set(d,s),s),zr;function Qo(d,n,s){var E;const w=Boolean(d),ye=(0,ve.default)(d||(()=>Promise.resolve([])));let Ye;if(w&&ye.loading){const{Progress:Ht}=n;Ye=i.createElement(Ht,null)}else if(ye.error){const{BootErrorPage:Ht}=n;Ye=i.createElement(Ht,{step:"load-config",error:ye.error})}const{ThemeProvider:qe=Ar}=n;return Ye?{node:i.createElement(Bt,{apis:dr.with(z.n,s)},i.createElement(qe,null,Ye))}:{api:_.fromConfigs((E=ye.value)!=null&&E.length?ba(ye.value):[])}}class qo{constructor(n){this.app=n}getPlugins(){return this.app.getPlugins()}getSystemIcon(n){return this.app.getSystemIcon(n)}getSystemIcons(){return this.app.getSystemIcons()}getComponents(){return this.app.getComponents()}}class Bo{constructor(n){Ra(this,"apiHolder"),Ra(this,"configApi"),Ra(this,"apis"),Ra(this,"icons"),Ra(this,"plugins"),Ra(this,"featureFlags"),Ra(this,"components"),Ra(this,"themes"),Ra(this,"configLoader"),Ra(this,"defaultApis"),Ra(this,"bindRoutes"),Ra(this,"appLanguageApi"),Ra(this,"translationResources"),Ra(this,"appIdentityProxy",new ur),Ra(this,"apiFactoryRegistry"),yo(this,zr,!1);var s,E,w,ye,Ye,qe,xt,Ht,Gn;this.apis=(s=n.apis)!=null?s:[],this.icons=n.icons,this.plugins=new Set((E=n.plugins)!=null?E:[]),this.featureFlags=(w=n.featureFlags)!=null?w:[],this.components=n.components,this.themes=n.themes,this.configLoader=(ye=n.configLoader)!=null?ye:Wr,this.defaultApis=(Ye=n.defaultApis)!=null?Ye:[],this.bindRoutes=n.bindRoutes,this.apiFactoryRegistry=new Zt,this.appLanguageApi=lo.createWithStorage({defaultLanguage:(qe=n.__experimentalTranslations)==null?void 0:qe.defaultLanguage,availableLanguages:(xt=n.__experimentalTranslations)==null?void 0:xt.availableLanguages}),this.translationResources=(Gn=(Ht=n.__experimentalTranslations)==null?void 0:Ht.resources)!=null?Gn:[]}getPlugins(){return Array.from(this.plugins)}getSystemIcon(n){return this.icons[n]}getSystemIcons(){return this.icons}getComponents(){return this.components}createRoot(n){const s=this.getProvider();return()=>i.createElement(s,null,n)}getProvider(){if(vo(this,zr))throw new Error("app.getProvider() or app.createRoot() has already been called, and can only be called once");xo(this,zr,!0);const n=new qo(this);let s=!1;return({children:w})=>{const ye=(0,i.useRef)(!0),Ye=(0,i.useMemo)(()=>Z.createWithStorage(this.themes),[]),{routing:qe,featureFlags:xt,routeBindings:Ht}=(0,i.useMemo)(()=>{const Wn=ia();Wn&&console.warn(`
DEPRECATION WARNING: React Router Beta is deprecated and support for it will be removed in a future release.
                     Please migrate to use React Router v6 stable.
                     See https://backstage.io/docs/tutorials/react-router-stable-migration
`);const da=Rn({root:w,discoverers:[ea,fa],collectors:{routing:Wn?l:h,collectedPlugins:Za,featureFlags:y}});return da.collectedPlugins.forEach(Ha=>this.plugins.add(Ha)),this.verifyPlugins(this.plugins),this.getApiHolder(),{...da,routeBindings:io(this.bindRoutes)}},[w]);s||(s=!0,rr(qe.paths,qe.parents),or(Ht,this.plugins));const Gn=Qo(this.configLoader,this.components,Ye),$n="api"in Gn;if($n){const{api:Wn}=Gn;this.configApi=Wn}if("node"in Gn)return Gn.node;if($n&&ye.current){ye.current=!1;const Wn=this.getApiHolder().get(z.f);if(Wn){for(const ga of this.featureFlags)Wn.registerFlag({...ga,pluginId:""});for(const ga of this.plugins.values())if("getFeatureFlags"in ga)for(const sr of ga.getFeatureFlags())Wn.registerFlag({name:sr.name,pluginId:ga.getId()});else for(const sr of ga.output())sr.type==="feature-flag"&&Wn.registerFlag({name:sr.name,pluginId:ga.getId()});const da=Wn.getRegisteredFlags(),Ha=new Set(da.map(ga=>ga.name));for(const ga of xt)Ha.has(ga)||Wn.registerFlag({name:ga,pluginId:""})}}const{ThemeProvider:Tn=Ar,Progress:ca}=this.components;return i.createElement(Bt,{apis:this.getApiHolder()},i.createElement(eo,{appContext:n},i.createElement(Tn,null,i.createElement(Va,{routePaths:qe.paths,routeParents:qe.parents,routeObjects:qe.objects,routeBindings:Ht,basePath:ar(Gn.api)},i.createElement(Oa.Provider,{value:{routeObjects:qe.objects,appIdentityProxy:this.appIdentityProxy}},i.createElement(i.Suspense,{fallback:i.createElement(ca,null)},w))))))}}getRouter(){return Ct}getApiHolder(){if(this.apiHolder){for(const n of this.plugins)for(const s of n.getApis())this.apiFactoryRegistry.get(s.api)||this.apiFactoryRegistry.register("default",s);return ke.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder}this.apiFactoryRegistry.register("static",{api:z.n,deps:{},factory:()=>Z.createWithStorage(this.themes)}),this.apiFactoryRegistry.register("static",{api:z.p,deps:{},factory:()=>{if(!this.configApi)throw new Error("Tried to access config API before config was loaded");return this.configApi}}),this.apiFactoryRegistry.register("static",{api:z.t,deps:{},factory:()=>this.appIdentityProxy}),this.apiFactoryRegistry.register("static",{api:ee.IB,deps:{},factory:()=>this.appLanguageApi}),this.apiFactoryRegistry.register("default",{api:ee.op,deps:{languageApi:ee.IB},factory:({languageApi:n})=>Sa.create({languageApi:n,resources:this.translationResources})}),this.apiFactoryRegistry.register("default",{api:z.f,deps:{},factory:()=>new vn});for(const n of this.defaultApis)this.apiFactoryRegistry.register("default",n);for(const n of this.plugins)for(const s of n.getApis())if(!this.apiFactoryRegistry.register("default",s))throw new Error(`Plugin ${n.getId()} tried to register duplicate or forbidden API factory for ${s.api}`);for(const n of this.apis)if(!this.apiFactoryRegistry.register("app",n))throw new Error(`Duplicate or forbidden API factory for ${n.api} in app`);return ke.validateFactories(this.apiFactoryRegistry,this.apiFactoryRegistry.getAllApis()),this.apiHolder=new ke(this.apiFactoryRegistry),this.apiHolder}verifyPlugins(n){const s=new Set;for(const E of n){const w=E.getId();if(s.has(w))throw new Error(`Duplicate plugin found '${w}'`);s.add(w)}}}zr=new WeakMap;function Uo(d){return new Bo(d)}let _o=!1;const bo=d=>{const n=(0,He.qD)(),{NotFoundErrorPage:s}=n.getComponents(),E=(0,i.useMemo)(()=>ia(),[]),ye=[...(0,He.vJ)(d.children,Ye=>Ye.getElements().flatMap(qe=>{var xt;let Ht=qe.props.path;if(Ht==="")return[];Ht=(xt=Ht==null?void 0:Ht.replace(/\/\*$/,""))!=null?xt:"/";let Gn=E?qe:qe.props.element;return!E&&!Gn&&(Gn=qe,_o||(console.warn("DEPRECATION WARNING: All elements within <FlatRoutes> must be of type <Route> with an element prop. Existing usages of <Navigate key=[path] to=[to] /> should be replaced with <Route path=[path] element={<Navigate to=[to] />} />."),_o=!0)),[{path:Ht,element:Gn,children:qe.props.children?[{path:Ht==="/"?"/":"*",element:qe.props.children}]:void 0}]}).sort((qe,xt)=>xt.path.localeCompare(qe.path)).map(qe=>({...qe,path:qe.path==="/"?"/":`${qe.path}/*`}))),{path:"*",element:i.createElement(s,null)}];return(0,b.V$)(ye)};(0,He.R5)(bo,"core.type","FlatRoutes")},49558:(xn,Yt,e)=>{"use strict";e.d(Yt,{in:()=>gn,qE:()=>Na,Oo:()=>Ei,hB:()=>lc,db:()=>us,Oi:()=>ar,VY:()=>Ao,yW:()=>fi,bj:()=>Ba,XF:()=>je,mn:()=>Re,NX:()=>ue,SX:()=>It,zG:()=>ds,ub:()=>Zn,mf:()=>Fs,yu:()=>Ya,fy:()=>ms,h4:()=>To,M6:()=>L,i9:()=>Ml,aR:()=>li,rJ:()=>Ra,Oh:()=>$l,hu:()=>Zi,Fw:()=>sn,rU:()=>Oa,Qj:()=>la,nU:()=>hn,SA:()=>_r,J3:()=>ta,Or:()=>zn,T3:()=>Io,g9:()=>kl,Ex:()=>Mn,Gk:()=>Mr,tn:()=>ci,Ph:()=>s,YE:()=>rl,v7:()=>Ui,Hz:()=>No,R6:()=>Bi,tR:()=>nl,oz:()=>_l,BV:()=>vl,k2:()=>Li,BT:()=>sl,dh:()=>Co,vK:()=>ga,Kq:()=>da,wA:()=>sr,VC:()=>Lr,Pd:()=>Ha,xT:()=>is,uw:()=>As,qt:()=>vs,oZ:()=>ic,iA:()=>hi,tB:()=>ps,GB:()=>dr,sidebarConfig:()=>Or,r0:()=>Fo,mZ:()=>mo,Pf:()=>Ro});var i=e(57032),p=e(30705),g=e(61837),j=e(37265),k=e(90436),o=e(87685),z=e(99688),He=e(19928),Ze=e.n(He),a=e(2784),xe=e(27429),Ee=e(77277),se=e(8629),Y=e(49429),Fe=e(38724),ge=e(79249),_e=e(43434),Q=e(79692),be=e(60364),M=e(41128),c=e(15459),S=e(12420),_=e(76600),b=e(41547),m=e(86689),ve=e(72779),ee=e.n(ve),he=e(76635),J=e(73557),ne=e(39857),re=e(16060),Pe=e(95544),Pt=e(56553),T=e(26639),rn=e(39595),de=e(80030),Bt=e(19353),ut=e(95074),rt=e(41156),bt=e(88188),ke=e(13725),_t=e(11105),at=e(97963),zt=e(46506),Ot=e.n(zt),Zt=e(54073),dt=e.n(Zt),gt=e(10368),Ut=e(76985),qt=e(39829),yt=e(19574),Ft=e.n(yt),I=e(72164),W=e(93657),O=e(60905);const D=e.p+"static/missingAnnotation.67f79e98..svg",ae=e.p+"static/noInformation.4b426325..svg",fe=e.p+"static/createComponent.975d1e1e..svg",Ke=e.p+"static/noBuild.1715fa71..svg";var ft=e(11776),Je=e(38402),wt=e(49378),nn=e(27616),Ae=e(8284),Te=e(70660),vt=e(91750),Tt=e(38016),At=e(32407),Wt=e(28156),St=e(85256),Ue=e(28316),Xe=e(35292),Mt=e(48049),le=e(51209),Be=e(3806),ie=e(32272),Ge=e(15277),tt=e.n(Ge),ot=e(58985),Rt=e(67358),en=e(94339),Ce=e(14503),Me=e(24579),R=e(32552),B=e(27597),X=e(35585),nt=e(21324),mt=e(7089),ct=e(42494),jt=e(74603),dn=e(56939),An=e(12231),bn=e(73698),F=e(72379),H=e(74600),Ne=e.n(H),it=e(37390),Gt=e(97485),Dt=e(15584),mn=e(89571),un=e(86136),Cn=e(50758),Oe=e(79784),$e=e(19126),st=e.n($e),Qt=e(80079),Xt=e(18671),ln=e(6487),an=e(99152),On=e(67222),Nn=e(21070),Fn=e(90324),ra=e(98281),En=e(33375),aa=e(44233),oa=e(27604),na=e(36444),pa=e(37971),Pa=e(59709),qn=e(17373),ya=e(3702),q=e(93111),Le=e(4614),et=e(44311);const U=e.p+"static/mic-drop.fe3ef4d0..svg";var Z=e(16173),P=e(50023),$=e(4190),N=e(44882),oe=e(18473),pe=e(57998),te=e(83543),Se=e(59797),We=e(26739),Qe=e(86619),kt=e(98989),Lt=e(30195),tn=e(63955),on=e(74828),vn=e(45455),cn=e.n(vn);function gn(t){const[r,u]=(0,a.useState)([]),v=(0,i.u)(i.l),{anchorOrigin:C={vertical:"top",horizontal:"center"},transientTimeoutMs:x}=t,V=x!=null?x:5e3;(0,a.useEffect)(()=>{const Ie=v.alert$().subscribe(pt=>u(Et=>Et.concat(pt)));return()=>{Ie.unsubscribe()}},[v]);const[ce]=r;if((0,a.useEffect)(()=>{if(ce&&ce.display==="transient"){const Ie=setTimeout(()=>{u(pt=>{const Et=pt.filter(Jt=>Jt!==ce);return Et.length===pt.length?pt:Et})},V);return()=>clearTimeout(Ie)}},[ce,V]),r.length===0)return null;const we=()=>{u(Ie=>Ie.filter(pt=>pt!==ce))};return a.createElement(j.Z,{open:!0,anchorOrigin:C},a.createElement(z.Z,{action:a.createElement(g.Z,{color:"inherit",size:"small",onClick:we,"data-testid":"error-button-close"},a.createElement(o.Z,null)),severity:ce.severity},a.createElement(k.Z,{component:"span"},String(ce.message),r.length>1&&a.createElement("em",null,` (${r.length-1} older ${Ze()("message",r.length-1)})`))))}const yn="@backstage/autologout:lastSeenOnline",Bn=({enableEffect:t,autologoutIsEnabled:r,idleTimeoutSeconds:u,lastSeenOnlineStore:v,identityApi:C})=>{useEffect(()=>{if(r&&t){const x=v.get();if(x){const ce=Math.ceil(new Date().getTime()/1e3),we=Math.ceil(x.getTime()/1e3);ce-we>u&&C.signOut()}v.save(new Date)}else v.delete()},[r,t,C,u,v])},Qn=t=>{const{idleTimer:r,setOpen:u,open:v,promptTimeoutMillis:C,remainingTime:x,setRemainingTime:V}=t;useEffect(()=>{const pt=setInterval(()=>{V(Math.ceil(r.getRemainingTime()))},500);return()=>{clearInterval(pt)}},[r,V]);const ce=()=>{u(!1),r.activate()},Ie=Math.max(x-C/1e3,0)>1?"seconds":"second";return React.createElement(Dialog,{open:v,"data-testid":"inactivity-prompt-dialog"},React.createElement(DialogTitle,null,"Logging out due to inactivity"),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,"You are about to be disconnected in"," ",React.createElement("b",null,Math.ceil(x/1e3)," ",Ie),". Are you still there?")),React.createElement(DialogActions,null,React.createElement(Button$1,{onClick:ce,color:"secondary",variant:"contained",size:"small"},"Yes! Don't log me out")))};class jn{constructor(r){this.key=r}save(r){localStorage.setItem(this.key,r.toJSON())}delete(){localStorage.removeItem(this.key)}get(){const r=localStorage.getItem(this.key);return r!==null?new Date(Date.parse(r)):null}}const Kn=({idleTimeoutMinutes:t,events:r,useWorkerTimers:u,logoutIfDisconnected:v,promptBeforeIdleSeconds:C,promptOpen:x,setPromptOpen:V,remainingTimeCountdown:ce,setRemainingTimeCountdown:we,identityApi:Ie,lastSeenOnlineStore:pt})=>{const Et=C*1e3,Jt=Et>0,Kt=async()=>{V(!0),we(Et)},pn=()=>{V(!1),we(0),Ie.signOut()},Ln=()=>{V(!1),we(0)},Hn=(ka,er)=>{pt.save(new Date)},ha=useIdleTimer({timeout:t*60*1e3,events:r,crossTab:!0,name:"autologout-timer",timers:u?workerTimers:void 0,onIdle:pn,onActive:Jt?Ln:void 0,onAction:v?Hn:void 0,onPrompt:Jt?Kt:void 0,promptBeforeIdle:Jt?Et:void 0,syncTimers:1e3});return React.createElement(React.Fragment,null,Jt&&React.createElement(Qn,{idleTimer:ha,open:x,setOpen:V,remainingTime:ce,setRemainingTime:we,promptTimeoutMillis:Et}))},Dn={enabled:!0,idleTimeoutMinutes:.5,promptBeforeIdleSeconds:10,useWorkerTimers:!0,logoutIfDisconnected:!0},Jn=null,fn=(t,r)=>{var u,v,C,x,V,ce,we,Ie,pt,Et;return{enabled:(v=(u=t.getOptionalBoolean("auth.autologout.enabled"))!=null?u:r.enabled)!=null?v:Dn.enabled,idleTimeoutMinutes:(x=(C=t.getOptionalNumber("auth.autologout.idleTimeoutMinutes"))!=null?C:r.idleTimeoutMinutes)!=null?x:Dn.idleTimeoutMinutes,promptBeforeIdleSeconds:(ce=(V=t.getOptionalNumber("auth.autologout.promptBeforeIdleSeconds"))!=null?V:r.promptBeforeIdleSeconds)!=null?ce:Dn.promptBeforeIdleSeconds,useWorkerTimers:(Ie=(we=t.getOptionalBoolean("auth.autologout.useWorkerTimers"))!=null?we:r.useWorkerTimers)!=null?Ie:Dn.useWorkerTimers,logoutIfDisconnected:(Et=(pt=t.getOptionalBoolean("auth.autologout.logoutIfDisconnected"))!=null?pt:r.logoutIfDisconnected)!=null?Et:Dn.logoutIfDisconnected}},wn=t=>{const r=useApi(identityApiRef),u=useApi(configApiRef),[v,C]=useState(!1);useEffect(()=>{async function Ln(Hn){(await Hn.getCredentials()).token?C(!0):C(!1)}Ln(r)},[r]);const{enabled:x,idleTimeoutMinutes:V,promptBeforeIdleSeconds:ce,logoutIfDisconnected:we,useWorkerTimers:Ie}=useMemo(()=>fn(u,t),[u,t]);useEffect(()=>{if(V<.5)throw new Error("\u274C idleTimeoutMinutes property should be >= 0.5 minutes (30 seconds).");if(ce<0)throw new Error("\u274C promptBeforeIdleSeconds property should be >= 0 seconds. Set to 0 to disable the prompt.");if(V*60<=ce)throw new Error("\u274C promptBeforeIdleSeconds should be smaller than idleTimeoutMinutes")},[V,ce]);const pt=useMemo(()=>new jn(yn),[]),[Et,Jt]=useState(!1),[Kt,pn]=useState(0);return Bn({enableEffect:we,autologoutIsEnabled:x&&v,idleTimeoutSeconds:V*60,lastSeenOnlineStore:pt,identityApi:r}),!x||!v?null:React.createElement(Kn,{idleTimeoutMinutes:V,promptBeforeIdleSeconds:ce,useWorkerTimers:Ie,events:Jn,logoutIfDisconnected:we,promptOpen:Et,setPromptOpen:Jt,remainingTimeCountdown:Kt,setRemainingTimeCountdown:pn,identityApi:r,lastSeenOnlineStore:pt})};function sa(t){let r=0;for(let v=0;v<t.length;v++)r=t.charCodeAt(v)+((r<<5)-r);let u="#";for(let v=0;v<3;v++){const C=r>>v*8&255;u+=`00${C.toString(16)}`.slice(-2)}return u}function ua(t){var r;const u=t.trim().split(" "),v=(r=u[0])!=null?r:"",C=u.length>1?u[u.length-1]:"";return v&&C?`${v.charAt(0)}${C.charAt(0)}`:v.charAt(0)}const Ia=(0,Q.Z)(t=>({avatar:{width:"4rem",height:"4rem",color:t.palette.common.white},avatarText:{fontWeight:t.typography.fontWeightBold,letterSpacing:"1px",textTransform:"uppercase"}}),{name:"BackstageAvatar"});function Na(t){const{displayName:r,picture:u,customStyles:v}=t,C=Ia();let x={...v};const V={fontFamily:x.fontFamily,fontSize:x.fontSize,fontWeight:x.fontWeight};return u||(x={backgroundColor:sa(r||""),...v}),a.createElement(_e.Z,{alt:r,src:u,className:C.avatar,style:x},r&&a.createElement(k.Z,{variant:"h6",component:"span",className:C.avatarText,style:V},ua(r)))}function za(){const[t]=(0,J.is)(a.createElement(J.AW,{index:!0,element:a.createElement("div",null)}));return!t.index}const Fa=(0,Q.Z)({visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",height:1,width:1},externalLink:{position:"relative"}},{name:"Link"}),xa=t=>/^([a-z+.-]+):/.test(t),Da=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,Ga=window.open;if(Ga&&!Ga.__backstage){const t=function(...u){const v=String(u[0]);if(Da.test(v))throw new Error("Rejected window.open() with a javascript: URL as a security precaution");return Ga.apply(this,u)};t.__backstage=!0,window.open=t}const ja=()=>{try{return(0,i.u)(i.p).getOptionalString("app.baseUrl")}catch{return}},Xa=()=>{var t;const r="http://sample.dev",u=(t=ja())!=null?t:"/",{pathname:v}=new URL(u,r);return(0,he.trimEnd)(v,"/")},cr=t=>{let r=String(t);const u=Xa(),v=xa(r),C=r.startsWith(u);return!v&&!C&&(r=u.concat(r)),r},nr=t=>{var r;return t instanceof Array?t.map(nr).join(" ").trim():typeof t=="object"&&t?nr((r=t==null?void 0:t.props)==null?void 0:r.children):["string","number"].includes(typeof t)?String(t):""},Oa=a.forwardRef(({onClick:t,noTrack:r,...u},v)=>{const C=Fa(),x=(0,p.z$)(),V=za()?cr(u.to):u.to,ce=nr(u.children)||V,we=xa(V),Ie=we&&!!/^https?:/.exec(V);if(Da.test(V))throw new Error("Link component rejected javascript: URL as a security precaution");const pt=Et=>{t==null||t(Et),r||x.captureEvent("click",ce,{attributes:{to:V}})};return we?a.createElement(m.Z,{...Ie?{target:"_blank",rel:"noopener"}:{},...u,...u["aria-label"]?{"aria-label":`${u["aria-label"]}, Opens in a new window`}:{},ref:v,href:V,onClick:pt,className:ee()(C.externalLink,u.className)},u.children,a.createElement(k.Z,{component:"span",className:C.visuallyHidden},", Opens in a new window")):a.createElement(m.Z,{...u,ref:v,component:ne.rU,to:V,onClick:pt})}),ia=a.forwardRef((t,r)=>a.createElement(Oa,{ref:r,...t,color:"initial"})),la=a.forwardRef((t,r)=>a.createElement(Ee.Z,{ref:r,component:ia,...t})),Qa=null;function Ba(t){const{text:r,tooltipDelay:u=1e3,tooltipText:v="Text copied to clipboard","aria-label":C="Copy text"}=t,x=(0,i.u)(i.r),[V,ce]=(0,a.useState)(!1),[{error:we},Ie]=(0,ut.Z)();(0,a.useEffect)(()=>{we&&x.post(we)},[we,x]);const pt=Et=>{Et.stopPropagation(),ce(!0),Ie(r)};return a.createElement(a.Fragment,null,a.createElement(de.ZP,{id:"copy-test-tooltip",title:v,placement:"top",leaveDelay:u,onClose:()=>ce(!1),open:V},a.createElement(g.Z,{onClick:pt,"aria-label":C},a.createElement(Bt.Z,null))))}function ar(t){const{text:r,language:u,showLineNumbers:v=!1,highlightedNumbers:C,customStyle:x,showCopyCodeButton:V=!1}=t,ce=(0,be.Z)(),we=ce.palette.type==="dark"?T.Z:rn.Z,Ie=ce.palette.type==="dark"?"#256bf3":"#e6ffed";return a.createElement(Pe.Z,{position:"relative"},a.createElement(Pt.Z,{customStyle:x,language:u,style:we,showLineNumbers:v,wrapLines:!0,lineNumberStyle:{color:ce.palette.textVerySubtle},lineProps:pt=>C!=null&&C.includes(pt)?{style:{backgroundColor:Ie}}:{}},r),V&&a.createElement(Pe.Z,{position:"absolute",top:0,right:0},a.createElement(Ba,{text:r})))}function je(t){const{title:r,to:u}=t,v=(0,rt.Z)(C=>C.breakpoints.down("xs"));return u?v?a.createElement(g.Z,{component:ne.rU,color:"primary",title:r,size:"small",to:u},a.createElement(bt.Z,null)):a.createElement(Ee.Z,{component:ne.rU,variant:"contained",color:"primary",to:u},r):null}var ue;(t=>{(r=>{r.TOP_BOTTOM="TB",r.BOTTOM_TOP="BT",r.LEFT_RIGHT="LR",r.RIGHT_LEFT="RL"})(t.Direction||(t.Direction={})),(r=>{r.UP_LEFT="UL",r.UP_RIGHT="UR",r.DOWN_LEFT="DL",r.DOWN_RIGHT="DR"})(t.Alignment||(t.Alignment={})),(r=>{r.NETWORK_SIMPLEX="network-simplex",r.TIGHT_TREE="tight-tree",r.LONGEST_PATH="longest-path"})(t.Ranker||(t.Ranker={})),(r=>{r.LEFT="l",r.RIGHT="r",r.CENTER="c"})(t.LabelPosition||(t.LabelPosition={}))})(ue||(ue={}));const Ct=(0,Q.Z)(t=>({node:{fill:t.palette.primary.light,stroke:t.palette.primary.light},text:{fill:t.palette.primary.contrastText}}),{name:"BackstageDependencyGraphDefaultNode"});function Rn({node:{id:t}}){const r=Ct(),[u,v]=a.useState(0),[C,x]=a.useState(0),V=a.useRef(null);a.useLayoutEffect(()=>{if(V.current){let{height:pt,width:Et}=V.current.getBBox();pt=Math.round(pt),Et=Math.round(Et),(pt!==C||Et!==u)&&(v(Et),x(pt))}},[u,C]);const ce=10,we=u+ce*2,Ie=C+ce*2;return a.createElement("g",null,a.createElement("rect",{className:r.node,width:we,height:Ie,rx:10}),a.createElement("text",{ref:V,className:r.text,y:Ie/2,x:we/2,textAnchor:"middle",alignmentBaseline:"middle"},t))}const Un="arrow-marker",ea="node",fa="edge",Za="label",Ka=(0,gt.Z)(t=>({node:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphNode"}),_a=t=>a.createElement(Rn,{...t});function Ua({render:t=_a,setNode:r,node:u}){const{width:v,height:C,x=0,y:V=0}=u,ce=u,we=Ka(),Ie=a.useRef(null);return a.useLayoutEffect(()=>{if(Ie.current){let{height:pt,width:Et}=Ie.current.getBBox();pt=Math.round(pt),Et=Math.round(Et),(pt!==C||Et!==v)&&r(u.id,{...u,height:pt,width:Et})}},[u,v,C,r]),a.createElement("g",{ref:Ie,"data-testid":ea,className:we.node,transform:`translate(${x-v/2},${V-C/2})`},t({node:ce}))}const Ma=(0,gt.Z)(t=>({text:{fill:t.palette.textContrast}}),{name:"BackstageDependencyGraphDefaultLabel"});function qa({edge:{label:t}}){const r=Ma();return a.createElement("text",{className:r.text,textAnchor:"middle"},t)}const h=(0,gt.Z)(t=>({path:{strokeWidth:1,stroke:t.palette.textSubtle,fill:"none",transition:`${t.transitions.duration.shortest}ms`},label:{transition:`${t.transitions.duration.shortest}ms`}}),{name:"BackstageDependencyGraphEdge"}),l=t=>a.createElement(qa,{...t});function y({render:t=l,setEdge:r,id:u,edge:v,curve:C}){const{x=0,y:V=0,width:ce,height:we,points:Ie}=v,pt=v,Et=h(),Jt=a.useRef(null);a.useLayoutEffect(()=>{if(Jt.current){let{height:Ln,width:Hn}=Jt.current.getBBox();Ln=Math.round(Ln),Hn=Math.round(Hn),(Ln!==we||Hn!==ce)&&r(u,{...v,height:Ln,width:Hn})}},[v,we,ce,r,u]);let Kt="";const pn=a.useMemo(()=>Ut.Z().x(Ln=>Ln.x).y(Ln=>Ln.y).curve(qt[C]),[C]);if(Ie){const Ln=Ie.filter(Hn=>Ft()(Hn.x)&&Ft()(Hn.y));Kt=pn(Ln)||""}return a.createElement(a.Fragment,null,Kt&&a.createElement("path",{"data-testid":fa,className:Et.path,d:Kt}),pt.label?a.createElement("g",{ref:Jt,"data-testid":Za,className:Et.label,transform:`translate(${x},${V})`},t({edge:pt})):null)}const G="workspace";function Re(t){var r,u;const{edges:v,nodes:C,renderNode:x,direction:V=ue.Direction.TOP_BOTTOM,align:ce,nodeMargin:we=50,edgeMargin:Ie=10,rankMargin:pt=50,paddingX:Et=0,paddingY:Jt=0,acyclicer:Kt,ranker:pn=ue.Ranker.NETWORK_SIMPLEX,labelPosition:Ln=ue.LabelPosition.RIGHT,labelOffset:Hn=10,edgeRanks:ha=1,edgeWeight:ka=1,renderLabel:er,defs:Yn,zoom:Ta="enabled",curve:Wa="curveMonotoneX",fit:tr="grow",...Cr}=t,Vr=(0,at.Z)(),[hr,Hr]=a.useState(100),[Yr,Mo]=a.useState(100),Ca=a.useRef(new(Ot()).graphlib.Graph),[Jr,fr]=a.useState(((r=Ca.current.graph())==null?void 0:r.width)||0),[wr,po]=a.useState(((u=Ca.current.graph())==null?void 0:u.height)||0),[go,xr]=a.useState([]),[Br,Yo]=a.useState([]),ho=Math.max(Jr,hr),Xr=Math.max(wr,Yr),cc=Math.min(wr,Yr),uc=tr==="grow"?Xr:cc,dc=a.useMemo(()=>dt()($a=>{if(!$a)return;const Ja=_t.Z($a),La=_t.Z($a.getElementById(G));function Er(){Ja.call(ke.sP().scaleExtent([1,1/0]).on("zoom",Tr=>{Tr.transform.x=Math.min(0,Math.max(Tr.transform.x,ho-ho*Tr.transform.k)),Tr.transform.y=Math.min(0,Math.max(Tr.transform.y,Xr-Xr*Tr.transform.k)),La.attr("transform",Tr.transform)}))}Ta==="enabled"?Er():Ta==="enable-on-click"&&Ja.on("click",()=>Er());const{width:vr,height:Lo}=$a.getBoundingClientRect();hr!==vr&&Hr(vr),Yr!==Lo&&Mo(Lo)},100),[Yr,hr,ho,Xr,Ta]),Ki=a.useCallback(()=>{const $a=Ca.current.nodes(),Ja=Ca.current.edges();$a.forEach(La=>{C.some(vr=>vr.id===La)||Ca.current.removeNode(La)}),Ja.forEach(La=>{v.some(vr=>vr.from===La.v&&vr.to===La.w)||Ca.current.removeEdge(La.v,La.w)}),C.forEach(La=>{const Er=Ca.current.nodes().find(vr=>La.id===vr);if(Er&&Ca.current.node(Er)){const{width:vr,height:Lo,x:Tr,y:gc}=Ca.current.node(Er);Ca.current.setNode(Er,{...La,width:vr,height:Lo,x:Tr,y:gc})}else Ca.current.setNode(La.id,{...La,width:0,height:0})}),v.forEach(La=>{Ca.current.setEdge(La.from,La.to,{...La,label:La.label,width:0,height:0,labelpos:Ln,labeloffset:Hn,weight:ka,minlen:ha})})},[v,C,Ln,Hn,ka,ha]),fo=a.useMemo(()=>dt()(()=>{Ot().layout(Ca.current);const{height:$a,width:Ja}=Ca.current.graph(),La=Math.max(0,$a||0),Er=Math.max(0,Ja||0);fr(Er),po(La),xr(Ca.current.nodes()),Yo(Ca.current.edges())},250,{leading:!0}),[]);a.useEffect(()=>(Ca.current.setGraph({rankdir:V,align:ce,nodesep:we,edgesep:Ie,ranksep:pt,marginx:Et,marginy:Jt,acyclicer:Kt,ranker:pn}),Ki(),fo(),fo.cancel),[Kt,ce,V,Ie,Et,Jt,we,pt,pn,Ki,fo]);function mc($a,Ja){return Ca.current.setNode($a,Ja),fo(),Ca.current}function pc($a,Ja){return Ca.current.setEdge($a,Ja),fo(),Ca.current}return a.createElement("svg",{ref:dc,...Cr,width:"100%",height:uc,viewBox:`0 0 ${ho} ${Xr}`},a.createElement("defs",null,a.createElement("marker",{id:Un,viewBox:"0 0 24 24",markerWidth:"14",markerHeight:"14",refX:"16",refY:"12",orient:"auto",markerUnits:"strokeWidth"},a.createElement("path",{fill:Vr.palette.textSubtle,d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})),Yn),a.createElement("g",{id:G},a.createElement("svg",{width:Jr,height:wr,y:Xr/2-wr/2,x:ho/2-Jr/2,viewBox:`0 0 ${Jr} ${wr}`},Br.map($a=>{const Ja=Ca.current.edge($a);return Ja?a.createElement(y,{key:`${$a.v}-${$a.w}`,id:$a,setEdge:pc,render:er,edge:Ja,curve:Wa}):null}),go.map($a=>{const Ja=Ca.current.node($a);return Ja?a.createElement(Ua,{key:$a,setNode:mc,render:x,node:Ja}):null}))))}const lt=(0,Q.Z)(t=>{var r,u;return{root:{padding:t.spacing(0),marginBottom:t.spacing(0),marginTop:t.spacing(0),display:"flex",flexFlow:"row nowrap"},topPosition:{position:"relative",marginBottom:t.spacing(6),marginTop:-t.spacing(3),zIndex:"unset"},icon:{fontSize:t.typography.h6.fontSize},content:{width:"100%",maxWidth:"inherit",flexWrap:"nowrap",color:t.palette.banner.text},message:{display:"flex",alignItems:"center","& a":{color:t.palette.banner.link}},button:{color:(r=t.palette.banner.closeButtonColor)!=null?r:"inherit"},info:{backgroundColor:t.palette.banner.info},error:{backgroundColor:t.palette.banner.error},warning:{backgroundColor:(u=t.palette.banner.warning)!=null?u:t.palette.banner.error}}},{name:"BackstageDismissableBanner"}),It=t=>{var r;const{variant:u,message:v,id:C,fixed:x=!1}=t,V=lt(),we=(0,i.u)(i.x).forBucket("notifications"),Ie=(r=we.snapshot("dismissedBanners").value)!=null?r:[],[pt,Et]=(0,a.useState)(new Set(Ie)),Jt=(0,I.Z)(we.observe$("dismissedBanners"));(0,a.useEffect)(()=>{var pn;if(Jt!=null&&Jt.value){const Ln=(pn=Jt==null?void 0:Jt.value)!=null?pn:[];Et(new Set(Ln))}},[Jt==null?void 0:Jt.value]);const Kt=()=>{we.set("dismissedBanners",[...pt,C])};return a.createElement(j.Z,{anchorOrigin:x?{vertical:"bottom",horizontal:"center"}:{vertical:"top",horizontal:"center"},open:!pt.has(C),classes:{root:ee()(V.root,!x&&V.topPosition)}},a.createElement(W.Z,{classes:{root:ee()(V.content,V[u]),message:V.message},message:v,action:[a.createElement(g.Z,{key:"dismiss",title:"Permanently dismiss this message",className:V.button,onClick:Kt},a.createElement(o.Z,{className:V.icon}))]}))},Vt=(0,Q.Z)({generalImg:{width:"95%",zIndex:2,position:"relative",left:"50%",top:"50%",transform:"translate(-50%, 15%)"}},{name:"BackstageEmptyStateImage"}),Sn=({missing:t})=>{const r=Vt();switch(t){case"field":return a.createElement("img",{src:D,className:r.generalImg,alt:"annotation is missing"});case"info":return a.createElement("img",{src:ae,alt:"no Information",className:r.generalImg});case"content":return a.createElement("img",{src:fe,alt:"create Component",className:r.generalImg});case"data":return a.createElement("img",{src:Ke,alt:"no Build",className:r.generalImg});default:return null}},kn=(0,Q.Z)(t=>({root:{backgroundColor:t.palette.background.default,padding:t.spacing(2,0,0,0)},action:{marginTop:t.spacing(2)},imageContainer:{position:"relative"}}),{name:"BackstageEmptyState"});function Zn(t){const{title:r,description:u,missing:v,action:C}=t,x=kn();return a.createElement(O.Z,{container:!0,direction:"row",justifyContent:"space-around",alignItems:"flex-start",className:x.root,spacing:2},a.createElement(O.Z,{item:!0,xs:12,md:6},a.createElement(O.Z,{container:!0,direction:"column"},a.createElement(O.Z,{item:!0,xs:!0},a.createElement(k.Z,{variant:"h5"},r)),a.createElement(O.Z,{item:!0,xs:!0},a.createElement(k.Z,{variant:"body1"},u)),a.createElement(O.Z,{item:!0,xs:!0,className:x.action},C))),a.createElement(O.Z,{item:!0,xs:12,md:6,className:x.imageContainer},typeof v=="string"?a.createElement(Sn,{missing:v}):v.customImage))}const Aa=`apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: example
  description: example.com
  annotations:
    ANNOTATION: value
spec:
  type: website
  lifecycle: production
  owner: user:guest`,Va=/^.*ANNOTATION.*$/m,rr=Aa.match(Va)[0],or=Aa.split(`
`).findIndex(t=>Va.test(t)),qr=(0,Q.Z)(t=>({code:{borderRadius:6,margin:t.spacing(2,0),background:t.palette.type==="dark"?"#444":t.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function eo(t){return Array.from(Array(t+1).keys(),r=>r+or)}function Zr(t){const r=t.map(u=>rr.replace("ANNOTATION",u)).join(`
`);return Aa.replace(rr,r)}function to(t){const r=t.length<=1;return React.createElement(React.Fragment,null,"The ",r?"annotation":"annotations"," ",t.map(u=>React.createElement("code",null,u)).reduce((u,v)=>React.createElement(React.Fragment,null,u,", ",v))," ",r?"is":"are"," missing. You need to add the"," ",r?"annotation":"annotations"," to your component if you want to enable this tool.")}function Ur(t){const{annotation:r,readMoreUrl:u}=t,v=Array.isArray(r)?r:[r],C=u||"https://backstage.io/docs/features/software-catalog/well-known-annotations",x=qr();return React.createElement(Zn,{missing:"field",title:"Missing Annotation",description:to(v),action:React.createElement(React.Fragment,null,React.createElement(Typography,{variant:"body1"},"Add the annotation to your component YAML as shown in the highlighted example below:"),React.createElement(Box,{className:x.code},React.createElement(ar,{text:Zr(v),language:"yaml",showLineNumbers:!0,highlightedNumbers:eo(v.length),customStyle:{background:"inherit",fontSize:"115%"}})),React.createElement(Button$1,{color:"primary",component:Oa,to:C},"Read more"))})}const kr=(0,Q.Z)(t=>({markdown:{"& table":{borderCollapse:"collapse",border:`1px solid ${t.palette.border}`},"& th, & td":{border:`1px solid ${t.palette.border}`,padding:t.spacing(1)},"& td":{wordBreak:"break-word",overflow:"hidden",verticalAlign:"middle",lineHeight:"1",margin:0,padding:t.spacing(3,2,3,2.5),borderBottom:0},"& th":{backgroundColor:t.palette.background.paper},"& tr":{backgroundColor:t.palette.background.paper},"& tr:nth-child(odd)":{backgroundColor:t.palette.background.default},"& a":{color:t.palette.link},"& img":{maxWidth:"100%"}}}),{name:"BackstageMarkdownContent"}),Dr=(t,r)=>r?typeof r=="string"?t+r:a.Children.toArray(r.props.children).reduce(Dr,t):t,ur=({level:t,children:r})=>{const C=a.Children.toArray(r).reduce(Dr,"").toLocaleLowerCase("en-US").replace(/\W/g,"-");return a.createElement(`h${t}`,{id:C},r)},Pr={code:({inline:t,className:r,children:u,...v})=>{const C=String(u).replace(/\n+$/,""),x=/language-(\w+)/.exec(r||"");return!t&&x?a.createElement(ar,{language:x[1],text:C}):a.createElement("code",{className:r,...v},u)},h1:ur,h2:ur,h3:ur,h4:ur,h5:ur,h6:ur};function _r(t){const{content:r,dialect:u="gfm",linkTarget:v,transformLinkUri:C,transformImageUri:x,className:V}=t,ce=kr();return a.createElement(At.D,{remarkPlugins:u==="gfm"?[Wt.Z]:[],className:`${ce.markdown} ${V}`,children:r,components:Pr,linkTarget:v,transformLinkUri:C,transformImageUri:x})}const Ar=(t,r)=>(r.palette.type==="light"?M._j:M.$n)(r.palette[t].light,.6),Wr=(t,r)=>(r.palette.type==="light"?M.$n:M._j)(r.palette[t].light,.9),Nr=(0,Q.Z)(t=>({root:{marginRight:t.spacing(1),fill:({severity:r})=>Ar(r,t)}})),no=({severity:t})=>{const r=Nr({severity:t});return a.createElement(vt.Z,{classes:r})},ao=({severity:t})=>{const r=Nr({severity:t});return a.createElement(Tt.Z,{classes:r})},ro=(0,Q.Z)(t=>({panel:{backgroundColor:({severity:r})=>Wr(r,t),color:({severity:r})=>Ar(r,t),verticalAlign:"middle"},summary:{display:"flex",flexDirection:"row"},summaryText:{color:({severity:r})=>Ar(r,t),fontWeight:t.typography.fontWeightBold},markdownContent:{"& p":{display:"inline"}},message:{width:"100%",display:"block",color:({severity:r})=>Ar(r,t),backgroundColor:({severity:r})=>Wr(r,t)},details:{width:"100%",display:"block",color:t.palette.textContrast,backgroundColor:t.palette.background.default,border:`1px solid ${t.palette.border}`,padding:t.spacing(2),fontFamily:"sans-serif"}}),{name:"BackstageWarningPanel"}),oo=t=>t.charAt(0).toLocaleUpperCase("en-US")+t.slice(1);function dr(t){const{severity:r="warning",title:u,titleFormat:v,message:C,children:x,defaultExpanded:V}=t,ce=ro({severity:r}),we=oo(r)+(u?`: ${u}`:"");return a.createElement(nn.Z,{defaultExpanded:V!=null?V:!1,className:ce.panel,role:"alert"},a.createElement(Ae.Z,{expandIcon:a.createElement(ao,{severity:r}),className:ce.summary},a.createElement(no,{severity:r}),a.createElement(k.Z,{className:ce.summaryText,variant:"subtitle1"},v==="markdown"?a.createElement(_r,{content:we,className:ce.markdownContent}):we)),(C||x)&&a.createElement(Te.Z,null,a.createElement(O.Z,{container:!0},C&&a.createElement(O.Z,{item:!0,xs:12},a.createElement(k.Z,{className:ce.message,variant:"body1"},C)),x&&a.createElement(O.Z,{item:!0,xs:12,className:ce.details},x))))}const io=(0,Q.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageErrorPanel"}),Fr=({error:t,message:r,stack:u,children:v})=>{const C=io();return a.createElement(ft.Z,{dense:!0},a.createElement(Je.Z,{alignItems:"flex-start"},a.createElement(wt.Z,{classes:{secondary:C.text},primary:"Error",secondary:t}),a.createElement(Ba,{text:t})),a.createElement(Je.Z,{alignItems:"flex-start"},a.createElement(wt.Z,{classes:{secondary:C.text},primary:"Message",secondary:r}),a.createElement(Ba,{text:r})),u&&a.createElement(Je.Z,{alignItems:"flex-start"},a.createElement(wt.Z,{classes:{secondary:C.text},primary:"Stack Trace",secondary:u}),a.createElement(Ba,{text:u})),v)};function Ya(t){const{title:r,error:u,defaultExpanded:v,titleFormat:C,children:x}=t;return a.createElement(dr,{severity:"error",title:r!=null?r:u.message,defaultExpanded:v,titleFormat:C},a.createElement(Fr,{error:u.name,message:u.message,stack:u.stack,children:x}))}const $r=(0,Q.Z)(t=>({text:{fontFamily:"monospace",whiteSpace:"pre",overflowX:"auto",marginRight:t.spacing(2)},divider:{margin:t.spacing(2)}}),{name:"BackstageResponseErrorPanel"});function Mr(t){var r;const{title:u,error:v,defaultExpanded:C}=t,x=$r();if(v.name!=="ResponseError")return a.createElement(Ya,{title:u!=null?u:v.message,defaultExpanded:C,error:v});const{body:V,cause:ce}=v,{request:we,response:Ie}=V,pt=`${Ie.statusCode}: ${ce.name}`,Et=we&&`${we.method} ${we.url}`,Jt=ce.message.replace(/\\n/g,`
`),Kt=(r=ce.stack)==null?void 0:r.replace(/\\n/g,`
`),pn=JSON.stringify(V,void 0,2);return a.createElement(Ya,{title:u!=null?u:v.message,defaultExpanded:C,error:{name:pt,message:Jt,stack:Kt}},Et&&a.createElement(Je.Z,{alignItems:"flex-start"},a.createElement(wt.Z,{classes:{secondary:x.text},primary:"Request",secondary:we?`${Et}`:void 0}),a.createElement(Ba,{text:Et})),a.createElement(a.Fragment,null,a.createElement(St.Z,{component:"li",className:x.divider}),a.createElement(Je.Z,{alignItems:"flex-start"},a.createElement(wt.Z,{classes:{secondary:x.text},primary:"Full Error as JSON"})),a.createElement(ar,{language:"json",text:pn,showCopyCodeButton:!0})))}function br(t){const r=document.createElement("div");return r.setAttribute("id",t),r}function mr(t){document.body.insertBefore(t,document.body.lastElementChild.nextElementSibling)}function Sr(t){const r=useRef(null);useEffect(function(){const C=document.querySelector(`#${t}`),x=C||br(t);return C||mr(x),x.appendChild(r.current),function(){r.current.remove(),x.childNodes.length===-1&&x.remove()}},[t]);function u(){return r.current||(r.current=document.createElement("div")),r.current}return u()}const pr="core.calloutSeen";function ir(){const[t,r]=useState(()=>{const v=localStorage.getItem(pr);return v?JSON.parse(v):{}}),u=useCallback((v,C)=>{const x=localStorage.getItem(pr),ce={...x?JSON.parse(x):{},[v]:C};r(ce),localStorage.setItem(pr,JSON.stringify(ce))},[]);return{states:t,setState:u}}function so(t){const{states:r,setState:u}=ir(),v=useCallback(()=>{u(t,!0)},[u,t]);return{seen:r[t]===!0,markSeen:v}}function lo(t){const{seen:r,markSeen:u}=so(t);return{show:r===!1,hide:u}}const co=(0,Q.Z)(t=>({"@keyframes pulsateSlightly":{"0%":{transform:"scale(1.0)"},"100%":{transform:"scale(1.1)"}},"@keyframes pulsateAndFade":{"0%":{transform:"scale(1.0)",opacity:.9},"100%":{transform:"scale(1.5)",opacity:0}},featureWrapper:{position:"relative"},backdrop:{zIndex:2e3,position:"fixed",overflow:"hidden",left:0,right:0,top:0,bottom:0},dot:{position:"absolute",backgroundColor:"transparent",borderRadius:"100%",border:"1px solid rgba(103, 146, 180, 0.98)",boxShadow:"0px 0px 0px 20000px rgba(0, 0, 0, 0.5)",zIndex:2001,transformOrigin:"center center",animation:"$pulsateSlightly 1744ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) alternate infinite"},pulseCircle:{width:"100%",height:"100%",backgroundColor:"transparent",borderRadius:"100%",border:`2px solid ${t.palette.common.white}`,zIndex:2001,transformOrigin:"center center",animation:"$pulsateAndFade 872ms 1.2s cubic-bezier(0.4, 0, 0.2, 1) infinite"},text:{position:"absolute",color:t.palette.common.white,zIndex:2003}}),{name:"BackstageFeatureCalloutCircular"});function uo(t){const{featureId:r,title:u,description:v,children:C}=t,{show:x,hide:V}=lo(r),ce=Sr("core.callout"),we=useRef(null),[Ie,pt]=useState(),Et=co(),Jt=useCallback(()=>{if(we.current){const Kt=we.current.getBoundingClientRect(),pn=Math.max(Kt.width,Kt.height),Ln=800,Hn=Kt.x-(pn-Kt.width)/2-Ln,ha=Kt.y-(pn-Kt.height)/2-Ln,ka=pn+2*Ln,er=450,Yn=Kt.x+Kt.width/2-er,Ta=Kt.y-(pn-Kt.height)/2+pn+20;pt({dotLeft:Hn,dotTop:ha,dotSize:ka,borderWidth:Ln,textTop:Ta,textLeft:Yn,textWidth:er})}},[]);return useEffect(()=>(window.addEventListener("resize",Jt),window.addEventListener("scroll",Jt),()=>{window.removeEventListener("resize",Jt),window.removeEventListener("scroll",Jt)}),[Jt]),useLayoutEffect(Jt,[we.current,Jt]),x?React.createElement(React.Fragment,null,React.createElement(Box,{className:Et.featureWrapper,ref:we},C),createPortal(React.createElement(Box,{className:Et.backdrop},React.createElement(ClickAwayListener,{onClickAway:V},React.createElement(React.Fragment,null,React.createElement(Box,{className:Et.dot,"data-testid":"dot",style:{left:Ie==null?void 0:Ie.dotLeft,top:Ie==null?void 0:Ie.dotTop,width:Ie==null?void 0:Ie.dotSize,height:Ie==null?void 0:Ie.dotSize,borderWidth:Ie==null?void 0:Ie.borderWidth},onClick:V,onKeyDown:V,role:"button",tabIndex:0},React.createElement(Box,{className:Et.pulseCircle})),React.createElement(Box,{className:Et.text,"data-testid":"text",style:{left:Ie==null?void 0:Ie.textLeft,top:Ie==null?void 0:Ie.textTop,width:Ie==null?void 0:Ie.textWidth}},React.createElement(Typography,{variant:"h2",paragraph:!0},u),React.createElement(Typography,null,v))))),ce)):React.createElement(React.Fragment,null,C)}const Kr=(0,Q.Z)(t=>({link:{display:"grid",justifyItems:"center",gridGap:4,textAlign:"center"},disabled:{color:t.palette.text.secondary,cursor:"default"},primary:{color:t.palette.primary.main},secondary:{color:t.palette.secondary.main},label:{textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,letterSpacing:1.2}}),{name:"BackstageIconLinkVertical"});function f({color:t="primary",disabled:r=!1,href:u="#",icon:v=a.createElement(Xe.Z,null),label:C,onClick:x,title:V}){const ce=Kr();return r?a.createElement(Pe.Z,{title:V,className:ee()(ce.link,ce.disabled)},v,a.createElement(k.Z,{variant:"caption",component:"span",className:ce.label},C)):a.createElement(Oa,{title:V,className:ee()(ce.link,ce[t]),to:u,onClick:x},v,a.createElement(k.Z,{variant:"caption",component:"span",className:ce.label},C))}const A=(0,Q.Z)(t=>({links:{margin:t.spacing(2,0),display:"grid",gridAutoFlow:"column",gridAutoColumns:"min-content",gridGap:t.spacing(3)}}),{name:"BackstageHeaderIconLinkRow"});function L(t){const{links:r}=t,u=A();return a.createElement("nav",{className:u.links},r.map((v,C)=>a.createElement(f,{key:C+1,...v})))}const K=t=>{const r=t==="dark"?"16%":"97%";return`
    hsl(0, 0%, ${r}) 0%,
    hsla(0, 0%, ${r}, 0.987) 8.1%,
    hsla(0, 0%, ${r}, 0.951) 15.5%,
    hsla(0, 0%, ${r}, 0.896) 22.5%,
    hsla(0, 0%, ${r}, 0.825) 29%,
    hsla(0, 0%, ${r}, 0.741) 35.3%,
    hsla(0, 0%, ${r}, 0.648) 41.2%,
    hsla(0, 0%, ${r}, 0.55) 47.1%,
    hsla(0, 0%, ${r}, 0.45) 52.9%,
    hsla(0, 0%, ${r}, 0.352) 58.8%,
    hsla(0, 0%, ${r}, 0.259) 64.7%,
    hsla(0, 0%, ${r}, 0.175) 71%,
    hsla(0, 0%, ${r}, 0.104) 77.5%,
    hsla(0, 0%, ${r}, 0.049) 84.5%,
    hsla(0, 0%, ${r}, 0.013) 91.9%,
    hsla(0, 0%, ${r}, 0) 100%
  `},me=100,De=10,ze=(0,Q.Z)(t=>({root:{position:"relative",display:"flex",flexFlow:"row nowrap",alignItems:"center"},container:{overflow:"auto",scrollbarWidth:0,"&::-webkit-scrollbar":{display:"none"}},fade:{position:"absolute",width:me,height:`calc(100% + ${De}px)`,transition:"opacity 300ms",pointerEvents:"none"},fadeLeft:{left:-De,background:`linear-gradient(90deg, ${K(t.palette.type)})`},fadeRight:{right:-De,background:`linear-gradient(270deg, ${K(t.palette.type)})`},fadeHidden:{opacity:0},button:{position:"absolute"},buttonLeft:{left:-t.spacing(2)},buttonRight:{right:-t.spacing(2)}}),{name:"BackstageHorizontalScrollGrid"});function Ve(t){const[[r,u],v]=React.useState([0,0]);return React.useLayoutEffect(()=>{const C=t.current;if(!C){v([0,0]);return}const x=()=>{const V=C.scrollLeft,ce=C.scrollWidth-C.offsetWidth-C.scrollLeft;v([V,ce])};return x(),C.addEventListener("scroll",x),window.addEventListener("resize",x),()=>{C.removeEventListener("scroll",x),window.removeEventListener("resize",x)}},[t]),[r,u]}function ht(t,r,u){const[v,C]=React.useState(0);return React.useLayoutEffect(()=>{if(v===0)return;const x=window.performance.now(),V=requestAnimationFrame(ce=>{if(!t.current)return;const we=ce-x,Ie=Math.abs(v)*we/r,Et=Math.max(u,Ie)*Math.sign(v);t.current.scrollBy({left:Et});const Jt=v-Et;Math.sign(v)!==Math.sign(Jt)?C(0):C(Jt)});return()=>cancelAnimationFrame(V)},[t,v,r,u]),C}function Nt(t){const{scrollStep:r=100,scrollSpeed:u=50,minScrollDistance:v=5,children:C,...x}=t,V=ze(t),ce=React.useRef(),[we,Ie]=Ve(ce),pt=ht(ce,u,v),Et=Jt=>{ce.current&&pt(Jt?r:-r)};return React.createElement(Box,{...x,className:V.root},React.createElement(Grid,{container:!0,direction:"row",wrap:"nowrap",className:V.container,ref:ce},C),React.createElement(Box,{className:classNames(V.fade,V.fadeLeft,{[V.fadeHidden]:we===0})}),React.createElement(Box,{className:classNames(V.fade,V.fadeRight,{[V.fadeHidden]:Ie===0})}),we>0&&React.createElement(IconButton,{title:"Scroll Left",onClick:()=>Et(!1),className:classNames(V.button,V.buttonLeft,{})},React.createElement(ChevronLeftIcon,null)),Ie>0&&React.createElement(IconButton,{title:"Scroll Right",onClick:()=>Et(!0),className:classNames(V.button,V.buttonRight,{})},React.createElement(ChevronRight,null)))}const $t=(0,Q.Z)(t=>({alpha:{color:t.palette.common.white,fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"},beta:{color:"#4d65cc",fontFamily:"serif",fontWeight:"normal",fontStyle:"italic"}}),{name:"BackstageLifecycle"});function sn(t){const r=$t(t),{shorthand:u,alpha:v}=t;return u?a.createElement(k.Z,{component:"span",className:r[v?"alpha":"beta"],style:{fontSize:"120%"}},v?a.createElement(a.Fragment,null,"\u03B1"):a.createElement(a.Fragment,null,"\u03B2")):a.createElement(k.Z,{component:"span",className:r[v?"alpha":"beta"]},v?"Alpha":"Beta")}const Pn=(0,a.lazy)(()=>e.e(8341).then(e.bind(e,28341)).then(t=>({default:t.RealLogViewer})));function hn(t){const{Progress:r}=(0,p.qD)().getComponents();return a.createElement(a.Suspense,{fallback:a.createElement(r,null)},a.createElement(Pn,{...t}))}const In=(0,Q.Z)(t=>({root:{paddingLeft:t.spacing(3)}}),{name:"BackstageLoginRequestListItem"}),Xn=({request:t,busy:r,setBusy:u})=>{const v=In(),[C,x]=(0,a.useState)(),V=async()=>{u(!0);try{await t.trigger()}catch(we){x((0,ie.VZ)(we)?we.message:"An unspecified error occurred")}finally{u(!1)}},ce=t.provider.icon;return a.createElement(Je.Z,{disabled:r,classes:{root:v.root}},a.createElement(Be.Z,null,a.createElement(ce,{fontSize:"large"})),a.createElement(wt.Z,{primary:t.provider.title,secondary:C&&a.createElement(k.Z,{color:"error"},C)}),a.createElement(Ee.Z,{color:"primary",variant:"contained",onClick:V},"Log in"))},_n=(0,Q.Z)(t=>({dialog:{paddingTop:t.spacing(1)},title:{minWidth:0},titleHeading:{fontSize:t.typography.h6.fontSize},contentList:{padding:0},actionButtons:{padding:t.spacing(2,0)}}),{name:"OAuthRequestDialog"});function ta(t){var r;const u=_n(),[v,C]=(0,a.useState)(!1),x=(0,i.u)(i.v),ce=(r=(0,i.u)(i.p).getOptionalBoolean("enableExperimentalRedirectFlow"))!=null?r:!1,we=(0,I.Z)((0,a.useMemo)(()=>x.authRequest$(),[x]),[]),Ie=()=>{we.forEach(pt=>pt.reject())};return a.createElement(se.Z,{open:Boolean(we.length),fullWidth:!0,maxWidth:"xs",classes:{paper:u.dialog},"aria-labelledby":"oauth-req-dialog-title"},a.createElement("main",null,a.createElement(ge.Z,{classes:{root:u.title},id:"oauth-req-dialog-title"},a.createElement(k.Z,{className:u.titleHeading,variant:"h1",variantMapping:{h1:"span"}},"Login Required"),ce?a.createElement(k.Z,null,"This will trigger a http redirect to OAuth Login."):null),a.createElement(Fe.Z,{dividers:!0,classes:{root:u.contentList}},a.createElement(ft.Z,null,we.map(pt=>a.createElement(Xn,{key:pt.provider.title,request:pt,busy:v,setBusy:C}))))),a.createElement(Y.Z,{classes:{root:u.actionButtons}},a.createElement(Ee.Z,{onClick:Ie},"Reject All")))}const ma=(0,Q.Z)({container:{overflow:"visible !important"}},{name:"BackstageOverflowTooltip"});function zn(t){var r;const[u,v]=(0,a.useState)(!1),C=(0,ot.t)(),x=ma(),V=ce=>{C()&&v(ce)};return a.createElement(de.ZP,{title:(r=t.title)!=null?r:t.text||"",placement:t.placement,disableHoverListener:!u},a.createElement(tt(),{text:t.text,line:t.line,onToggled:V,containerClassName:x.container}))}function Mn(t){const r=(0,be.Z)(),[u,v]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const C=setTimeout(()=>v(!0),r.transitions.duration.short);return()=>clearTimeout(C)},[r.transitions.duration.short]),u?a.createElement(Rt.Z,{...t,"data-testid":"progress"}):a.createElement(Pe.Z,{display:"none"})}const Vn=(0,Q.Z)(t=>({root:{maxWidth:"fit-content",padding:t.spacing(2,2,2,2.5)},boxTitle:{margin:0,color:t.palette.textSubtle},arrow:{color:t.palette.textSubtle}}),{name:"BackstageBottomLink"});function Ea(t){const{link:r,title:u,onClick:v}=t,C=Vn();return a.createElement(Pe.Z,null,a.createElement(St.Z,null),a.createElement(Oa,{to:r,onClick:v,underline:"none"},a.createElement(Pe.Z,{display:"flex",alignItems:"center",className:C.root},a.createElement(Pe.Z,{className:C.boxTitle,fontWeight:"fontWeightBold",m:1},a.createElement(k.Z,null,a.createElement("strong",null,u))),a.createElement(B.Z,{className:C.arrow}))))}const Sa=t=>{const{slackChannel:r}=t;if(r){if(typeof r=="string")return a.createElement(k.Z,null,"Please contact ",r," for help.");if(!r.href)return a.createElement(k.Z,null,"Please contact ",r.name," for help.")}else return null;return a.createElement(la,{to:r.href,variant:"contained"},r.name)},va=class extends a.Component{constructor(r){super(r),this.state={error:void 0,errorInfo:void 0}}componentDidCatch(r,u){console.error(`ErrorBoundary, error: ${r}, info: ${u}`),this.setState({error:r,errorInfo:u})}render(){const{slackChannel:r,children:u}=this.props,{error:v}=this.state;return v?a.createElement(Ya,{title:"Something Went Wrong",error:v},a.createElement(Sa,{slackChannel:r})):u}},ba=(0,Q.Z)(t=>({noPadding:{padding:0,"&:last-child":{paddingBottom:0}},header:{padding:t.spacing(2,2,2,2.5)},headerTitle:{fontWeight:t.typography.fontWeightBold},headerSubheader:{paddingTop:t.spacing(1)},headerAvatar:{},headerAction:{},headerContent:{},subheader:{display:"flex"}}),{name:"BackstageInfoCard"}),wa=(0,c.Z)(t=>({root:{display:"inline-block",padding:t.spacing(8,8,0,0),float:"right"}}),{name:"BackstageInfoCardCardActionsTopRight"})(Ce.Z),Rr={card:{flex:{display:"flex",flexDirection:"column"},fullHeight:{display:"flex",flexDirection:"column",height:"100%"},gridItem:{display:"flex",flexDirection:"column",height:"calc(100% - 10px)",marginBottom:"10px",breakInside:"avoid-page","@media print":{height:"auto"}}},cardContent:{fullHeight:{flex:1},gridItem:{flex:1}}};function Ra(t){const{title:r,subheader:u,divider:v=!0,deepLink:C,slackChannel:x,errorBoundaryProps:V,variant:ce,children:we,headerStyle:Ie,headerProps:pt,icon:Et,action:Jt,actionsClassName:Kt,actions:pn,cardClassName:Ln,actionsTopRight:Hn,className:ha,noPadding:ka,titleTypographyProps:er}=t,Yn=ba();let Ta={},Wa={};ce&&ce.split(/[\s]+/g).forEach(hr=>{Ta={...Ta,...Rr.card[hr]},Wa={...Wa,...Rr.cardContent[hr]}});const tr=()=>!u&&!Et?null:a.createElement("div",{className:Yn.headerSubheader,"data-testid":"info-card-subheader"},u&&a.createElement("div",{className:Yn.subheader},u),Et),Cr=V||(x?{slackChannel:x}:{});return a.createElement(en.Z,{style:Ta,className:ha},a.createElement(va,{...Cr},r&&a.createElement(R.Z,{classes:{root:Yn.header,title:Yn.headerTitle,subheader:Yn.headerSubheader,avatar:Yn.headerAvatar,action:Yn.headerAction,content:Yn.headerContent},title:r,subheader:tr(),action:Jt,style:{...Ie},titleTypographyProps:er,...pt}),Hn&&a.createElement(wa,null,Hn),v&&a.createElement(St.Z,null),a.createElement(Me.Z,{className:ee()(Ln,{[Yn.noPadding]:ka}),style:Wa},we),pn&&a.createElement(Ce.Z,{className:Kt},pn),C&&a.createElement(Ea,{...C})))}const Eo=(0,Q.Z)(t=>({root:{position:"relative",lineHeight:0},overlay:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -60%)",fontSize:t.typography.pxToRem(45),fontWeight:t.typography.fontWeightBold,color:t.palette.textContrast},description:{fontSize:"100%",top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",wordBreak:"break-all",display:"inline-block"},circle:{width:"80%",transform:"translate(10%, 0)"},colorUnknown:{}}),{name:"BackstageGauge"}),vo={fractional:!0,inverse:!1,unit:"%",max:100},yo=({palette:t,value:r,inverse:u,max:v})=>{if(isNaN(r))return"#ddd";const C=v||vo.max,x=u?C-r:r;return x<C/3?t.status.error:x<C*(2/3)?t.status.warning:t.status.ok};function xo(t){const[r,u]=useState(null),{getColor:v=yo}=t,C=Eo(t),{palette:x}=useTheme(),{value:V,fractional:ce,inverse:we,unit:Ie,max:pt,description:Et}={...vo,...t},Jt=ce?Math.round(V*pt):V,Kt=pt!==100?Math.round(V):Jt,[pn,Ln]=useState(!1);return useEffect(()=>{const Hn=r,ha=()=>Ln(!0),ka=()=>Ln(!1);return Hn&&Et?(Hn.addEventListener("mouseenter",ha),Hn.addEventListener("mouseleave",ka),()=>{Hn.removeEventListener("mouseenter",ha),Hn.removeEventListener("mouseleave",ka)}):()=>{Ln(!1)}},[Et,r]),React.createElement(Box,{ref:u,className:C.root},React.createElement(Circle,{strokeLinecap:"butt",percent:Jt,strokeWidth:12,trailWidth:12,strokeColor:v({palette:x,value:Kt,inverse:we,max:pt}),className:C.circle}),Et&&pn?React.createElement(Box,{className:C.description},Et):React.createElement(Box,{className:C.overlay},isNaN(V)?"N/A":`${Kt}${Ie}`))}const zr=(0,Q.Z)({root:{height:"100%",width:250}},{name:"BackstageGaugeCard"});function Qo(t){const r=zr(t),{title:u,subheader:v,progress:C,inverse:x,deepLink:V,description:ce,icon:we,variant:Ie,getColor:pt}=t,Et={inverse:x,description:ce,getColor:pt,value:C};return React.createElement(Box,{className:r.root},React.createElement(Ra,{title:u,subheader:v,deepLink:V,variant:Ie,icon:we},React.createElement(xo,{...Et})))}function qo(t){const{value:r,getColor:u=yo,width:v="thick"}=t,{palette:C}=useTheme();if(isNaN(r))return null;let x=Math.round(r*100*100)/100;x>100&&(x=100);const V=v==="thick"?4:1,ce=u({palette:C,value:x,inverse:!1,max:100});return React.createElement(Tooltip,{title:`${x}%`},React.createElement(Typography,{component:"span"},React.createElement(Line,{percent:x,strokeWidth:V,trailWidth:V,strokeColor:ce})))}const Bo=(0,Q.Z)(t=>(0,S.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageClosedDropdown"}),Uo=()=>{const t=Bo();return a.createElement(F.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M7.5 8L6 9.5L12.0703 15.5703L18.1406 9.5L16.6406 8L12.0703 12.5703L7.5 8Z",fill:"#616161"}))},_o=(0,Q.Z)(t=>(0,S.Z)({icon:{position:"absolute",right:t.spacing(.5),pointerEvents:"none"}}),{name:"BackstageOpenedDropdown"}),bo=()=>{const t=_o();return a.createElement(F.Z,{className:t.icon,fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M16.5 16L18 14.5L11.9297 8.42969L5.85938 14.5L7.35938 16L11.9297 11.4297L16.5 16Z",fill:"#616161"}))},d=(0,c.Z)(t=>(0,S.Z)({root:{"label + &":{marginTop:t.spacing(3)},"&.Mui-focused > div[role=button]":{borderColor:t.palette.primary.main}},input:{borderRadius:t.shape.borderRadius,position:"relative",backgroundColor:t.palette.background.paper,border:"1px solid #ced4da",fontSize:t.typography.body1.fontSize,padding:t.spacing(1.25,3.25,1.25,1.5),transition:t.transitions.create(["border-color","box-shadow"]),fontFamily:"Helvetica Neue","&:focus":{background:t.palette.background.paper,borderRadius:t.shape.borderRadius}}}),{name:"BackstageSelectInputBase"})(jt.Z),n=(0,Q.Z)(t=>(0,S.Z)({formControl:{margin:t.spacing(1,0),maxWidth:300},label:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},formLabel:{transform:"initial",fontWeight:"bold",fontSize:t.typography.body2.fontSize,fontFamily:t.typography.fontFamily,color:t.palette.text.primary,"&.Mui-focused":{color:t.palette.text.primary}},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},checkbox:{},root:{display:"flex",flexDirection:"column"}}),{name:"BackstageSelect"});function s(t){const{multiple:r,items:u,label:v,placeholder:C,selected:x,onChange:V,triggerReset:ce,native:we=!1,disabled:Ie=!1,margin:pt}=t,Et=n(),[Jt,Kt]=(0,a.useState)(x||(r?[]:"")),[pn,Ln]=(0,a.useState)(!1);(0,a.useEffect)(()=>{Kt(r?[]:"")},[ce,r]),(0,a.useEffect)(()=>{Kt(x||(r?[]:""))},[x,r]);const Hn=Yn=>{Kt(Yn.target.value),V(Yn.target.value)},ha=Yn=>{if(Ie){Yn.preventDefault();return}Ln(Ta=>r&&!(Yn.target instanceof HTMLElement)?!0:!Ta)},ka=()=>{Ln(!1)},er=Yn=>()=>{const Ta=Jt.filter(Wa=>Wa!==Yn);Kt(Ta),V(Ta)};return a.createElement(Pe.Z,{className:Et.root},a.createElement(ct.Z,{className:Et.formControl},a.createElement(dn.Z,{className:Et.formLabel},v),a.createElement(bn.Z,{"aria-label":v,value:Jt,native:we,disabled:Ie,"data-testid":"select",displayEmpty:!0,multiple:r,margin:pt,onChange:Hn,open:pn,onOpen:ha,onClose:ka,input:a.createElement(d,null),label:v,renderValue:Yn=>{var Ta;return r&&Jt.length!==0?a.createElement(Pe.Z,{className:Et.chips},Yn.map(Wa=>{const tr=u.find(Cr=>Cr.value===Wa);return tr?a.createElement(mt.Z,{key:tr==null?void 0:tr.value,label:tr==null?void 0:tr.label,clickable:!0,onDelete:er(Wa),className:Et.chip}):!1})):a.createElement(k.Z,null,Jt.length===0?C||"":(Ta=u.find(Wa=>Wa.value===Yn))==null?void 0:Ta.label)},IconComponent:()=>pn?a.createElement(bo,null):a.createElement(Uo,null),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},getContentAnchorEl:null}},C&&!r&&a.createElement(An.Z,{value:[]},C),we?u&&u.map(Yn=>a.createElement("option",{value:Yn.value,key:Yn.value},Yn.label)):u&&u.map(Yn=>a.createElement(An.Z,{key:Yn.value,value:Yn.value},r&&a.createElement(nt.Z,{color:"primary",checked:Jt.includes(Yn.value)||!1,className:Et.checkbox}),Yn.label)))))}const E=()=>{},w=a.createContext({stepperLength:0,stepIndex:0,setStepIndex:E,stepHistory:[],setStepHistory:E,onStepChange:E});function ye(t){const{children:r,elevated:u,onStepChange:v,activeStep:C=0}=t,[x,V]=useState(C),[ce,we]=useState([0]);useEffect(()=>{V(C)},[C]);const Ie=[];let pt;return Children.forEach(r,Et=>{isValidElement(Et)&&(Et.props.end?pt=Et:Ie.push(Et))}),React.createElement(React.Fragment,null,React.createElement(w.Provider,{value:{stepIndex:x,setStepIndex:V,stepHistory:ce,setStepHistory:we,onStepChange:v,stepperLength:Children.count(r)}},React.createElement(MuiStepper,{activeStep:x,orientation:"vertical",elevation:u?2:0},Ie)),x>=Children.count(r)-1&&pt)}const Ye=(0,Q.Z)(t=>({root:{marginTop:t.spacing(3),"& button":{marginRight:t.spacing(1)}}}),{name:"BackstageSimpleStepperFooter"}),qe=({text:t,handleClick:r})=>React.createElement(Button$1,{onClick:r},t||"Reset"),xt=({text:t,handleClick:r,disabled:u,last:v,stepIndex:C})=>React.createElement(Button$1,{variant:"contained",color:"primary",disabled:u,"data-testid":`nextButton-${C}`,onClick:r},t||(v?"Finish":"Next")),Ht=({text:t,handleClick:r,disabled:u,stepIndex:v})=>React.createElement(Button$1,{variant:"outlined",color:"primary",disabled:u,"data-testid":`skipButton-${v}`,onClick:r},t||"Skip"),Gn=({text:t,handleClick:r,disabled:u,stepIndex:v})=>React.createElement(Button$1,{onClick:r,"data-testid":`backButton-${v}`,disabled:u},t||"Back"),$n=({actions:t={},children:r})=>{const u=Ye(),{stepperLength:v,stepIndex:C,setStepIndex:x,stepHistory:V,setStepHistory:ce,onStepChange:we}=useContext(w),Ie=(Kt,pn)=>{pn&&pn(),we&&we(C,Kt),x(Kt)},pt=()=>{const Kt=t.nextStep?t.nextStep(C,v-1):C+1;Ie(Kt,t.onNext),ce([...V,Kt])},Et=()=>{V.pop(),Ie(V[V.length-1],t.onBack),ce([...V])},Jt=()=>{Ie(0,t.onRestart),ce([0])};return React.createElement(Box,{className:u.root},[void 0,!0].includes(t.showBack)&&C!==0&&React.createElement(Gn,{text:t.backText,handleClick:Et,disabled:C===0,stepIndex:C}),t.showSkip&&React.createElement(Ht,{text:t.skipText,handleClick:pt,disabled:!!v&&C>=v||!!t.canSkip&&!t.canSkip(),stepIndex:C}),[void 0,!0].includes(t.showNext)&&React.createElement(xt,{text:t.nextText,handleClick:pt,disabled:!!v&&C>=v||!!t.canNext&&!t.canNext(),stepIndex:C}),t.showRestart&&C!==0&&React.createElement(qe,{text:t.restartText,handleClick:Jt,stepIndex:C}),r)},Tn=(0,Q.Z)(t=>({end:{padding:t.spacing(3)}}),{name:"SimpleStepperStep"});function ca(t){const{title:r,children:u,end:v,actions:C,...x}=t,V=Tn();return v?React.createElement(Box,{className:V.end},React.createElement(Typography,{variant:"h6"},r),u,React.createElement($n,{actions:{...C||{},showNext:!1}})):React.createElement(MuiStep,{...x},React.createElement(StepLabel,null,React.createElement(Typography,{variant:"h6"},r)),React.createElement(StepContent,null,u,React.createElement($n,{actions:C})))}const Wn=(0,Q.Z)(t=>({status:{fontWeight:t.typography.fontWeightMedium,"&::before":{width:"0.7em",height:"0.7em",display:"inline-block",marginRight:t.spacing(1),borderRadius:"50%",content:'""'}},ok:{"&::before":{backgroundColor:t.palette.status.ok}},warning:{"&::before":{backgroundColor:t.palette.status.warning}},error:{"&::before":{backgroundColor:t.palette.status.error}},pending:{"&::before":{backgroundColor:t.palette.status.pending}},running:{"&::before":{backgroundColor:t.palette.status.running}},aborted:{"&::before":{backgroundColor:t.palette.status.aborted}}}),{name:"BackstageStatus"});function da(t){const r=Wn(t);return a.createElement(k.Z,{component:"span",className:ee()(r.status,r.ok),"aria-label":"Status ok","aria-hidden":"true",...t})}function Ha(t){const r=Wn(t);return a.createElement(k.Z,{component:"span",className:ee()(r.status,r.warning),"aria-label":"Status warning","aria-hidden":"true",...t})}function ga(t){const r=Wn(t);return a.createElement(k.Z,{component:"span",className:ee()(r.status,r.error),"aria-label":"Status error","aria-hidden":"true",...t})}function sr(t){const r=Wn(t);return a.createElement(k.Z,{component:"span",className:ee()(r.status,r.pending),"aria-label":"Status pending","aria-hidden":"true",...t})}function Lr(t){const r=Wn(t);return a.createElement(k.Z,{component:"span",className:ee()(r.status,r.running),"aria-label":"Status running","aria-hidden":"true",...t})}function Co(t){const r=Wn(t);return a.createElement(k.Z,{component:"span",className:ee()(r.status,r.aborted),"aria-label":"Status aborted","aria-hidden":"true",...t})}const ji=t=>(0,S.Z)({root:{fontWeight:t.typography.fontWeightBold,whiteSpace:"nowrap",paddingRight:t.spacing(4),border:"0",verticalAlign:"top"}}),Vi={root:{border:"0",verticalAlign:"top"}},Hi=t=>(0,S.Z)({root:{margin:t.spacing(0,0,-1,0)}}),Yi=t=>(0,S.Z)({root:{padding:t.spacing(0,0,1,0)},random:{}}),Ji=(0,c.Z)(ji,{name:"BackstageMetadataTableTitleCell"})(Dt.Z),Xi=(0,c.Z)(Vi,{name:"BackstageMetadataTableCell"})(Dt.Z),Qi=({dense:t,children:r})=>a.createElement(it.Z,{size:t?"small":"medium"},a.createElement(Gt.Z,null,r)),qi=({title:t,children:r,...u})=>a.createElement(mn.Z,null,t&&a.createElement(Ji,null,t),a.createElement(Xi,{colSpan:t?1:2,...u},r)),ei=(0,c.Z)(Hi,{name:"BackstageMetadataTableList"})(({classes:t,children:r})=>a.createElement(ft.Z,{disablePadding:!0,className:t.root},r)),ti=(0,c.Z)(Yi,{name:"BackstageMetadataTableListItem"})(({classes:t,children:r})=>a.createElement(Je.Z,{className:t.root},r)),ni=(0,S.Z)({root:{margin:"0 0",listStyleType:"none"}}),es=t=>(0,S.Z)({root:{...ni.root,paddingLeft:t.spacing(1)}}),ai=(0,c.Z)(ni,{name:"BackstageStructuredMetadataTableList"})(({classes:t,children:r})=>a.createElement(ei,{classes:t},r)),ri=(0,c.Z)(es,{name:"BackstageStructuredMetadataTableNestedList"})(({classes:t,children:r})=>a.createElement(ei,{classes:t},r));function ts(t,r,u){const v=t.map((C,x)=>a.createElement(ti,{key:x},$o(C,r,u)));return u?a.createElement(ri,null,v):a.createElement(ai,null,v)}function ns(t,r,u){const v=Object.keys(t).map(C=>{const x=$o(t[C],r,!0);return a.createElement(ti,{key:C},a.createElement(k.Z,{variant:"body2",component:"span"},`${r.titleFormat(C)}: `),x)});return u?a.createElement(ri,null,v):a.createElement(ai,null,v)}function $o(t,r,u){return a.isValidElement(t)?a.createElement(a.Fragment,null,t):t!==null&&typeof t=="object"&&!Array.isArray(t)?ns(t,r,u):Array.isArray(t)?ts(t,r,u):typeof t=="boolean"?a.createElement(a.Fragment,null,t?"\u2705":"\u274C"):a.createElement(k.Z,{variant:"body2",component:"span"},t)}const as=({value:t,options:r})=>a.createElement(a.Fragment,null,$o(t,r,!1)),rs=({title:t,value:r,options:u})=>a.createElement(qi,{title:u.titleFormat(t)},a.createElement(as,{value:r,options:u}));function os(t,r){return Object.keys(t).map(u=>a.createElement(rs,{key:u,title:u,value:t[u],options:r}))}function is(t){const{metadata:r,dense:u=!0,options:v={}}=t,C=os(r,{titleFormat:Ne(),...v});return a.createElement(Qi,{dense:u},C)}function ss(t){return qs.stringify(t,{strictNullHandling:!0})}function oi(t){return qs.parse(t,{ignoreQueryPrefix:!0,strictNullHandling:!0})}function ii(t,r){return oi(t)[r]}function ls(t,r,u){const v={...oi(t),[r]:u};return ss(v)}function hc(t,r=250){const[u,v]=useSearchParams(),C=u.toString(),[x,V]=useState(ii(C,t));return useEffect(()=>{const ce=ii(C,t);V(we=>isEqual(ce,we)?we:ce)},[C,V,t]),useDebouncedEffect(()=>{const ce=ls(C,t,x);C!==ce&&v(ce,{replace:!0})},[v,x,C,t],r),[x,V]}const cs={url:"https://github.com/backstage/backstage/issues",items:[{title:"Support Not Configured",icon:"warning",links:[{title:"Add `app.support` config key",url:"https://github.com/backstage/backstage/blob/master/app-config.yaml"}]}]};function si(){const r=(0,i.b)().get(i.p),u=r==null?void 0:r.getOptionalConfig("app.support");return u?{url:u.getString("url"),items:u.getConfigArray("items").flatMap(v=>{var C;return{title:v.getString("title"),icon:v.getOptionalString("icon"),links:((C=v.getOptionalConfigArray("links"))!=null?C:[]).flatMap(x=>({url:x.getString("url"),title:x.getString("title")}))}})}:cs}function gr(t,r){const v=(0,p.qD)().getSystemIcon(t);return v?a.createElement(v,{...r}):a.createElement(Qt.Z,{...r})}function fc(t){return gr("brokenImage",t)}function us(t){return gr("catalog",t)}function Ec(t){return gr("chat",t)}function vc(t){return gr("dashboard",t)}function ds(t){return gr("docs",t)}function yc(t){return gr("email",t)}function ms(t){return gr("github",t)}function _c(t){return gr("group",t)}function Po(t){return gr("help",t)}function ps(t){return gr("user",t)}function bc(t){return gr("warning",t)}const gs=(0,Q.Z)({popoverList:{minWidth:260,maxWidth:400},menuItem:{whiteSpace:"normal"}},{name:"BackstageSupportButton"}),hs=({icon:t})=>{var r;const u=(0,p.qD)(),v=t&&(r=u.getSystemIcon(t))!=null?r:Po;return a.createElement(v,null)},fs=({link:t})=>{var r;return a.createElement(Oa,{to:t.url},(r=t.title)!=null?r:t.url)},Es=({item:t})=>{var r;return a.createElement(An.Z,null,a.createElement(un.Z,null,a.createElement(hs,{icon:t.icon})),a.createElement(wt.Z,{primary:t.title,secondary:(r=t.links)==null?void 0:r.reduce((u,v,C)=>[...u,C>0&&a.createElement("br",{key:C}),a.createElement(fs,{link:v,key:v.url})],[])}))};function vs(t){const{title:r,items:u,children:v}=t,{items:C}=si(),[x,V]=(0,a.useState)(!1),[ce,we]=(0,a.useState)(null),Ie=gs(),pt=(0,rt.Z)(Kt=>Kt.breakpoints.down("sm")),Et=Kt=>{we(Kt.currentTarget),V(!0)},Jt=()=>{V(!1)};return a.createElement(a.Fragment,null,a.createElement(Pe.Z,{display:"flex",ml:1},pt?a.createElement(g.Z,{color:"primary",size:"small",onClick:Et,"data-testid":"support-button","aria-label":"Support"},a.createElement(Po,null)):a.createElement(Ee.Z,{"data-testid":"support-button","aria-label":"Support",color:"primary",onClick:Et,startIcon:a.createElement(Po,null)},"Support")),a.createElement(Oe.ZP,{"data-testid":"support-button-popover",open:x,anchorEl:ce,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClose:Jt},a.createElement(Cn.Z,{className:Ie.popoverList,autoFocusItem:Boolean(ce)},r&&a.createElement(An.Z,{alignItems:"flex-start",className:Ie.menuItem},a.createElement(k.Z,{variant:"subtitle1"},r)),a.Children.map(v,(Kt,pn)=>a.createElement(An.Z,{alignItems:"flex-start",key:`child-${pn}`,className:Ie.menuItem},Kt)),(u!=null?u:C).map((Kt,pn)=>a.createElement(Es,{item:Kt,key:`item-${pn}`}))),a.createElement(Y.Z,null,a.createElement(Ee.Z,{color:"primary",onClick:Jt,"aria-label":"Close"},"Close"))))}const ys=(0,Q.Z)(t=>({root:{gridArea:"pageContent",minWidth:0,paddingTop:t.spacing(3),paddingBottom:t.spacing(3),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},stretch:{display:"flex",flexDirection:"column",flexGrow:1},noPadding:{padding:0}}),{name:"BackstageContent"});function Ao(t){const{className:r,stretch:u,noPadding:v,children:C,...x}=t,V=ys();return a.createElement("article",{...x,className:ee()(V.root,r,{[V.stretch]:u,[V.noPadding]:v})},C)}const _s=(0,Q.Z)(t=>({tabsWrapper:{gridArea:"pageSubheader",backgroundColor:t.palette.background.paper,paddingLeft:t.spacing(3),minWidth:0},defaultTab:{...t.typography.caption,padding:t.spacing(3,3),textTransform:"uppercase",fontWeight:t.typography.fontWeightBold,color:t.palette.text.secondary},selected:{color:t.palette.text.primary},tabRoot:{"&:hover":{backgroundColor:t.palette.background.default,color:t.palette.text.primary}}}),{name:"BackstageHeaderTabs"});function li(t){const{tabs:r,onChange:u,selectedIndex:v}=t,[C,x]=(0,a.useState)(v!=null?v:0),V=_s(),ce=(0,a.useCallback)((we,Ie)=>{v===void 0&&x(Ie),u&&u(Ie)},[v,u]);return(0,a.useEffect)(()=>{v!==void 0&&x(v)},[v]),a.createElement(Pe.Z,{className:V.tabsWrapper},a.createElement(an.Z,{indicatorColor:"primary",textColor:"inherit",variant:"scrollable",scrollButtons:"auto","aria-label":"tabs",onChange:ce,value:C},r.map((we,Ie)=>a.createElement(ln.Z,{...we.tabProps,"data-testid":`header-tab-${Ie}`,label:we.label,key:we.id,value:Ie,className:V.defaultTab,classes:{selected:V.selected,root:V.tabRoot}}))))}function bs(t){var r,u,v,C,x;const V=(0,J.UO)(),we=t.map(({path:Kt,children:pn})=>({caseSensitive:!1,path:`${Kt}/*`,element:pn})).sort((Kt,pn)=>pn.path.replace(/\/\*$/,"").localeCompare(Kt.path.replace(/\/\*$/,""))),Ie=(u=(0,J.V$)(we))!=null?u:(r=t[0])==null?void 0:r.children;let pt=(v=V["*"])!=null?v:"";pt.startsWith("/")||(pt=`/${pt}`);const[Et]=(C=(0,re.fp)(we,pt))!=null?C:[],Jt=Et?t.findIndex(Kt=>`${Kt.path}/*`===Et.route.path):0;return{index:Jt===-1?0:Jt,element:Ie,route:(x=t[Jt])!=null?x:t[0]}}function ci(t){const{routes:r}=t,u=(0,J.s0)(),{index:v,route:C,element:x}=bs(r),V=(0,a.useMemo)(()=>r.map(we=>({id:we.path,label:we.title,tabProps:we.tabProps})),[r]),ce=we=>{let{path:Ie}=r[we];Ie=Ie.replace(/\/\*$/,""),Ie=Ie.replace(/^\//,""),u(Ie)};return a.createElement(a.Fragment,null,a.createElement(li,{tabs:V,selectedIndex:v,onChange:ce}),a.createElement(Ao,null,a.createElement(Xt.q,{title:C==null?void 0:C.title}),x))}const Zo=()=>null;(0,p.R5)(Zo,"core.gatherMountPoints",!0);function ui(t){const r=a.createElement(Zo,{path:"",title:""},a.createElement("div",null)).type;return a.Children.toArray(t).flatMap(u=>{if(!(0,a.isValidElement)(u))return[];if(u.type===a.Fragment)return ui(u.props.children);if(u.type!==r)throw new Error("Child of TabbedLayout must be an TabbedLayout.Route");const{path:v,title:C,children:x,tabProps:V}=u.props;return[{path:v,title:C,children:x,tabProps:V}]})}function Cs(t){const r=ui(t.children);return a.createElement(ci,{routes:r})}Cs.Route=Zo;const Ps=(0,Q.Z)(t=>({value:{marginBottom:t.spacing(.75)},subvalue:{color:t.palette.textSubtle,fontWeight:"normal"}}),{name:"BackstageSubvalueCell"});function As(t){const{value:r,subvalue:u}=t,v=Ps();return a.createElement(a.Fragment,null,a.createElement(Pe.Z,{className:v.value},r),a.createElement(Pe.Z,{className:v.subvalue},u))}const Ss=(0,Q.Z)(t=>({root:{height:"100%",width:"315px",display:"flex",flexDirection:"column",marginRight:t.spacing(3)},value:{fontWeight:"bold",fontSize:18},header:{display:"flex",alignItems:"center",height:t.spacing(7.5),justifyContent:"space-between",borderBottom:`1px solid ${t.palette.grey[500]}`},filters:{display:"flex",flexDirection:"column","& > *":{marginTop:t.spacing(2)}}}),{name:"BackstageTableFilters"}),Rs=t=>{var r;const u=Ss(),{onChangeFilters:v}=t,[C,x]=(0,a.useState)({...t.selectedFilters}),[V,ce]=(0,a.useState)(!1),we=()=>{x({}),ce(Ie=>!Ie)};return(0,a.useEffect)(()=>{v(C)},[C,v]),a.createElement(Pe.Z,{className:u.root},a.createElement(Pe.Z,{className:u.header},a.createElement(Pe.Z,{className:u.value},"Filters"),a.createElement(Ee.Z,{color:"primary",onClick:we},"Clear all")),a.createElement(Pe.Z,{className:u.filters},((r=t.filters)==null?void 0:r.length)&&t.filters.map(Ie=>a.createElement(s,{triggerReset:V,key:Ie.element.label,...Ie.element,selected:C[Ie.element.label],onChange:pt=>x({...C,[Ie.element.label]:pt})}))))};function Os(t){return a.createElement("tbody",{"data-testid":"loading-indicator"},a.createElement("tr",null,a.createElement("td",{colSpan:t.colSpan},a.createElement(Pe.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",minHeight:"15rem"}},a.createElement(Le.Z,{size:"5rem"})))))}const di={Add:(0,a.forwardRef)((t,r)=>a.createElement(Nn.Z,{...t,ref:r})),Check:(0,a.forwardRef)((t,r)=>a.createElement(ra.Z,{...t,ref:r})),Clear:(0,a.forwardRef)((t,r)=>a.createElement(En.Z,{...t,ref:r})),Delete:(0,a.forwardRef)((t,r)=>a.createElement(aa.Z,{...t,ref:r})),DetailPanel:(0,a.forwardRef)((t,r)=>a.createElement(le.Z,{...t,ref:r})),Edit:(0,a.forwardRef)((t,r)=>a.createElement(oa.Z,{...t,ref:r})),Export:(0,a.forwardRef)((t,r)=>a.createElement(ya.Z,{...t,ref:r})),Filter:(0,a.forwardRef)((t,r)=>a.createElement(na.Z,{...t,ref:r})),FirstPage:(0,a.forwardRef)((t,r)=>a.createElement(pa.Z,{...t,ref:r})),LastPage:(0,a.forwardRef)((t,r)=>a.createElement(Pa.Z,{...t,ref:r})),NextPage:(0,a.forwardRef)((t,r)=>a.createElement(le.Z,{...t,ref:r})),PreviousPage:(0,a.forwardRef)((t,r)=>a.createElement(Mt.Z,{...t,ref:r})),ResetSearch:(0,a.forwardRef)((t,r)=>a.createElement(En.Z,{...t,ref:r})),Search:(0,a.forwardRef)((t,r)=>a.createElement(na.Z,{...t,ref:r})),SortArrow:(0,a.forwardRef)((t,r)=>a.createElement(Fn.Z,{...t,ref:r})),ThirdStateCheck:(0,a.forwardRef)((t,r)=>a.createElement(qn.Z,{...t,ref:r})),ViewColumn:(0,a.forwardRef)((t,r)=>a.createElement(q.Z,{...t,ref:r}))};function mi(t,r){const u=r.split(".");let v=t[u[0]];for(let C=1;C<u.length;++C){if(v===void 0)return v;const x=u[C];v=v[x]}return v}const ws=(0,c.Z)(t=>({header:{padding:t.spacing(1,2,1,2.5),borderTop:`1px solid ${t.palette.grey.A100}`,borderBottom:`1px solid ${t.palette.grey.A100}`,fontWeight:t.typography.fontWeightBold,position:"static",wordBreak:"normal"}}),{name:"BackstageTableHeader"})(On.W$),pi=(0,c.Z)(t=>({root:{padding:t.spacing(3,0,2.5,2.5)},title:{"& > h6":{fontWeight:t.typography.fontWeightBold}},searchField:{paddingRight:t.spacing(2)}}),{name:"BackstageTableToolbar"})(On.UW),Ts=(0,Q.Z)(t=>({root:{display:"flex",alignItems:"center",justifyContent:"space-between"},title:{fontWeight:t.typography.fontWeightBold,fontSize:18,whiteSpace:"nowrap"}}),{name:"BackstageTableFiltersContainer"}),Is=(0,Q.Z)(()=>({root:{display:"flex",alignItems:"start"}}),{name:"BackstageTable"});function Ds(t,r){return t.map(u=>{var v;const C=(v=u.headerStyle)!=null?v:{};let x=u.cellStyle||{};if(u.highlight)if(C.color=r.palette.textContrast,typeof x=="object")x.fontWeight=r.typography.fontWeightBold;else{const V=x;x=(ce,we,Ie)=>({...V(ce,we,Ie),fontWeight:r.typography.fontWeightBold})}return{...u,headerStyle:C,cellStyle:x}})}function Ms(t,r){return(0,he.transform)(t,(u,v,C)=>{(0,he.isEqual)(v,r[C])||(u[C]=v)})}const gi={search:"",filtersOpen:!1,filters:{}};function Ls(t){const{toolbarRef:r,setSearch:u,hasFilters:v,selectedFiltersLength:C,toggleFilters:x}=t,V=Ts(),ce=(0,a.useCallback)(we=>{t.onSearchChanged(we),u(we)},[t,u]);return v?a.createElement(Pe.Z,{className:V.root},a.createElement(Pe.Z,{className:V.root},a.createElement(g.Z,{onClick:x,"aria-label":"filter list"},a.createElement(na.Z,null)),a.createElement(k.Z,{className:V.title},"Filters (",C,")")),a.createElement(pi,{...t,ref:r,onSearchChanged:ce})):a.createElement(pi,{...t,ref:r,onSearchChanged:ce})}function hi(t){const{data:r,columns:u,emptyContent:v,options:C,title:x,subtitle:V,localization:ce,filters:we,initialState:Ie,onStateChange:pt,components:Et,isLoading:Jt,...Kt}=t,pn=Is(),Ln=(0,be.Z)(),Hn={...gi,...Ie},[ha,ka]=(0,a.useState)(Hn.filtersOpen),er=(0,a.useCallback)(()=>ka(fr=>!fr),[ka]),[Yn,Ta]=(0,a.useState)(Hn.filters),[Wa,tr]=(0,a.useState)(Hn.search);(0,a.useEffect)(()=>{if(pt){const fr=Ms({search:Wa,filtersOpen:ha,filters:Yn},gi);pt(fr)}},[Wa,ha,Yn,pt]);const Cr=(0,a.useCallback)(fr=>{var wr;return(wr=u.find(po=>po.title===fr))==null?void 0:wr.field},[u]),Vr=(0,a.useMemo)(()=>{if(typeof r=="function"||!Yn)return r;const fr=Object.values(Yn);return r&&fr.flat().length?r.filter(po=>!!Object.entries(Yn).filter(([,go])=>!!go.length).every(([go,xr])=>{const Br=mi(po,Cr(go));return Array.isArray(Br)&&Array.isArray(xr)?Br.some(Yo=>xr.includes(Yo)):Array.isArray(Br)?Br.includes(xr):Array.isArray(xr)?xr.includes(Br):Br===xr})):r},[r,Yn,Cr]),hr=Object.values(Yn).flat().length,Hr=!!(we!=null&&we.length),Yr=(0,a.useCallback)(fr=>a.createElement(Ls,{setSearch:tr,hasFilters:Hr,selectedFiltersLength:hr,toggleFilters:er,...fr}),[er,Hr,hr,tr]),Mo=typeof r!="function"&&r.length===0,Ca=u.length,Jr=(0,a.useMemo)(()=>xs({hasNoRows:Mo,emptyContent:v,columnCount:Ca,loading:Jt}),[Mo,v,Ca,Jt]);return a.createElement(Pe.Z,{className:pn.root},ha&&r&&typeof r!="function"&&(we==null?void 0:we.length)&&a.createElement(Rs,{filters:Bs(we,r,u),selectedFilters:Yn,onChangeFilters:Ta}),a.createElement(On.ZP,{components:{Header:ws,Body:Jr,Toolbar:Yr,...Et},options:{headerStyle:{textTransform:"uppercase"},...C},columns:Ds(u,Ln),icons:di,title:a.createElement(a.Fragment,null,a.createElement(k.Z,{variant:"h5",component:"h2"},x),V&&a.createElement(k.Z,{color:"textSecondary",variant:"body1"},V)),data:Vr,style:{width:"100%"},localization:{toolbar:{searchPlaceholder:"Filter",searchTooltip:"Filter"},...ce},...Kt}))}hi.icons=Object.freeze(di);function xs({columnCount:t,emptyContent:r,hasNoRows:u,loading:v}){return C=>v?a.createElement(Os,{colSpan:t}):r&&u?a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{colSpan:t},r))):a.createElement(On.os,{...C})}function Bs(t,r,u){const v=x=>{const V=new Set,ce=we=>{we!=null&&V.add(we)};return r&&r.forEach(we=>{var Ie;const pt=mi(we,(Ie=u.find(Et=>Et.title===x))==null?void 0:Ie.field);Array.isArray(pt)?pt.forEach(ce):ce(pt)}),V},C=x=>({placeholder:"All results",label:x.column,multiple:x.type==="multiple-select",items:[...v(x.column)].sort().map(V=>({label:V,value:V}))});return t.map(x=>({type:x.type,element:C(x)}))}function Us(t,r){const u=t[t.length-1];if(u)return u>=.9?r.palette.status.ok:u>=.5?r.palette.status.warning:r.palette.status.error}function Cc(t){var r;const u=useTheme();return t.data?React.createElement(Sparklines,{width:120,height:30,min:0,max:1,...t},t.title&&React.createElement("title",null,t.title),React.createElement(SparklinesLine,{color:(r=t.color)!=null?r:Us(t.data,u)})):null}const $s=t=>(0,Q.Z)(r=>({container:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",alignItems:"center",marginBottom:r.spacing(2),textAlign:t.textAlign},leftItemsBox:{flex:"1 1 auto",minWidth:0,overflow:"visible"},rightItemsBox:{flex:"0 1 auto",display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"center",marginLeft:r.spacing(1),minWidth:0,overflow:"visible"},description:{},title:{display:"inline-flex",marginBottom:0}}),{name:"BackstageContentHeader"}),Zs=({title:t="Unknown page",className:r})=>a.createElement(k.Z,{variant:"h4",component:"h2",className:r,"data-testid":"header-title"},t);function fi(t){const{description:r,title:u,titleComponent:v=void 0,children:C,textAlign:x="left"}=t,V=$s({textAlign:x})(),ce=v||a.createElement(Zs,{title:u,className:V.title});return a.createElement(a.Fragment,null,a.createElement(Xt.q,{title:u}),a.createElement(Pe.Z,{className:V.container},a.createElement(Pe.Z,{className:V.leftItemsBox},ce,r&&a.createElement(k.Z,{className:V.description,variant:"body2"},r)),a.createElement(Pe.Z,{className:V.rightItemsBox},C)))}const ks=(0,Q.Z)(t=>({micDrop:{maxWidth:"60%",bottom:t.spacing(2),right:t.spacing(2),[t.breakpoints.down("xs")]:{maxWidth:"96%",bottom:"unset",right:"unset",margin:t.spacing(10,"auto",4)}}}),{name:"BackstageErrorPageMicDrop"}),Ws=()=>{const t=ks();return a.createElement("img",{src:U,className:t.micDrop,alt:"Girl dropping mic from her hands"})},Ns=(0,Q.Z)(t=>({container:{padding:t.spacing(8),[t.breakpoints.down("xs")]:{padding:t.spacing(2)}},title:{paddingBottom:t.spacing(5),[t.breakpoints.down("xs")]:{paddingBottom:t.spacing(4),fontSize:t.typography.h3.fontSize}},subtitle:{color:t.palette.textSubtle}}),{name:"BackstageErrorPage"});function Fs(t){const{status:r,statusMessage:u,additionalInfo:v,supportUrl:C}=t,x=Ns(),V=(0,J.s0)(),ce=si();return a.createElement(O.Z,{container:!0,spacing:0,className:x.container},a.createElement(O.Z,{item:!0,xs:12,sm:8,md:4},a.createElement(k.Z,{"data-testid":"error",variant:"body1",className:x.subtitle},"ERROR ",r,": ",u),a.createElement(k.Z,{variant:"body1",className:x.subtitle},v),a.createElement(k.Z,{variant:"h2",className:x.title},"Looks like someone dropped the mic!"),a.createElement(k.Z,{variant:"h6"},a.createElement(Oa,{to:"#","data-testid":"go-back-link",onClick:()=>V(-1)},"Go back"),"... or please"," ",a.createElement(Oa,{to:C||ce.url},"contact support")," if you think this is a bug.")),a.createElement(Ws,null))}const Ks=(0,c.Z)({root:{textDecoration:"underline",cursor:"pointer"}},{name:"BackstageBreadcrumbsClickableText"})(k.Z),ko=(0,c.Z)({root:{textDecoration:"underline",color:"inherit"}},{name:"BackstageBreadcrumbsStyledBox"})(Pe.Z);function Ei(t){const{children:r,...u}=t,[v,C]=a.useState(null),x=a.Children.toArray(r),[V,ce,...we]=x,Ie=we.length?we.pop():x[x.length-1],pt=x.length>3,Et=pn=>{C(pn.currentTarget)},Jt=()=>{C(null)},Kt=Boolean(v);return a.createElement(a.Fragment,null,a.createElement(Z.Z,{"aria-label":"breadcrumb",...u},x.length>1&&a.createElement(ko,{clone:!0},V),x.length>2&&a.createElement(ko,{clone:!0},ce),pt&&a.createElement(Ks,{onClick:Et},"..."),a.createElement(Pe.Z,{style:{fontStyle:"italic"}},Ie)),a.createElement(Oe.ZP,{open:Kt,anchorEl:v,onClose:Jt,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},a.createElement(ft.Z,null,we.map((pn,Ln)=>a.createElement(Je.Z,{key:Ln,button:!0},a.createElement(ko,{clone:!0},pn))))))}const So=72,vi=24,yi=18,Or={drawerWidthClosed:So,drawerWidthOpen:224,defaultOpenDelayMs:100,defaultCloseDelayMs:0,defaultFadeDuration:200,logoHeight:32,iconContainerWidth:So,iconSize:So-vi*2,iconPadding:vi,selectedIndicatorWidth:3,userBadgePadding:yi,userBadgeDiameter:So-yi*2,mobileSidebarHeight:56},zs=t=>({...Or,...t,iconContainerWidth:Or.drawerWidthClosed,iconSize:Or.drawerWidthClosed-Or.iconPadding*2,userBadgeDiameter:Or.drawerWidthClosed-Or.userBadgePadding*2}),_i={drawerWidthClosed:0,drawerWidthOpen:202,defaultOpenDelayMs:Or.defaultOpenDelayMs+200},Gs=t=>({..._i,...t}),js="@backstage/core/sidebar-intro-dismissed",lr=(0,a.createContext)({sidebarConfig:Or,submenuConfig:_i}),Wo=(0,a.createContext)({isHoveredOn:!1,setIsHoveredOn:()=>{}}),bi={isOpen:!1,setOpen:()=>{}},Ci=(0,a.createContext)(bi),Pi=(0,oe.CT)("sidebar-open-state-context");function Ai(t){const{children:r,value:u}=t;return a.createElement(Ci.Provider,{value:u},a.createElement(Pi.Provider,{value:(0,oe.EI)({1:u})},r))}const mo=()=>{const t=(0,a.useContext)(Pi),r=(0,a.useContext)(Ci);if(t===void 0)return r||bi;const u=t.atVersion(1);if(u===void 0)throw new Error("No context found for version 1.");return u},Si=(0,a.createContext)({selectedMenuItemIndex:-1,setSelectedMenuItemIndex:()=>{}}),Ri={isPinned:!0,toggleSidebarPinState:()=>{},isMobile:!1},Oi=(0,a.createContext)(Ri),wi=(0,oe.CT)("sidebar-pin-state-context");function Vs(t){const{children:r,value:u}=t;return a.createElement(Oi.Provider,{value:u},a.createElement(wi.Provider,{value:(0,oe.EI)({1:u})},r))}const Ro=()=>{const t=(0,a.useContext)(wi),r=(0,a.useContext)(Oi);if(t===void 0)return r||Ri;const u=t.atVersion(1);if(u===void 0)throw new Error("No context found for version 1.");return u},Hs=(0,Q.Z)(t=>({root:{flexGrow:0,margin:t.spacing(0,2),color:t.palette.navigation.color},selected:r=>({color:`${t.palette.navigation.selectedColor}!important`,borderTop:`solid ${r.sidebarConfig.selectedIndicatorWidth}px ${t.palette.navigation.indicator}`,marginTop:"-1px"}),label:{display:"none"}})),Ys=t=>{const{to:r,label:u,icon:v,value:C}=t,{sidebarConfig:x}=(0,a.useContext)(lr),V=Hs({sidebarConfig:x}),ce=(0,J.TH)(),{selectedMenuItemIndex:we,setSelectedMenuItemIndex:Ie}=(0,a.useContext)(Si),pt=(Jt,Kt)=>{Ie(Kt===we?-1:Kt)},Et=C===we&&we>=0||C!==we&&!(we>=0)&&r===ce.pathname;return a.createElement(pe.Z,{"aria-label":u,label:u,icon:v,component:Oa,to:r||ce.pathname,onChange:pt,value:C,selected:Et,classes:V})},No=t=>{const{children:r,to:u,label:v,icon:C,value:x}=t,{isMobile:V}=Ro();return V?a.createElement(Ys,{to:u,label:v,icon:C,value:x}):a.createElement(a.Fragment,null,r)},Ti=(0,Q.Z)(t=>({root:{position:"fixed",backgroundColor:t.palette.navigation.background,color:t.palette.navigation.color,bottom:0,left:0,right:0,zIndex:t.zIndex.snackbar,borderTop:"1px solid #383838","@media print":{display:"none"}},overlay:r=>({background:t.palette.navigation.background,width:"100%",bottom:`${r.sidebarConfig.mobileSidebarHeight}px`,height:`calc(100% - ${r.sidebarConfig.mobileSidebarHeight}px)`,flex:"0 1 auto",overflow:"auto"}),overlayHeader:{display:"flex",color:t.palette.navigation.color,alignItems:"center",justifyContent:"space-between",padding:t.spacing(2,3)},overlayHeaderClose:{color:t.palette.navigation.color},marginMobileSidebar:r=>({marginBottom:`${r.sidebarConfig.mobileSidebarHeight}px`})})),Js=t=>(0,he.orderBy)(t,({props:{priority:r}})=>Number.isInteger(r)?r:-1,"desc"),Xs=a.createElement(No).type,Qs=({children:t,label:r="Menu",open:u,onClose:v})=>{const{sidebarConfig:C}=(0,a.useContext)(lr),x=Ti({sidebarConfig:C});return a.createElement($.ZP,{anchor:"bottom",open:u,onClose:v,ModalProps:{BackdropProps:{classes:{root:x.marginMobileSidebar}}},classes:{root:x.marginMobileSidebar,paperAnchorBottom:x.overlay}},a.createElement(Pe.Z,{className:x.overlayHeader},a.createElement(k.Z,{variant:"h3"},r),a.createElement(g.Z,{onClick:v,classes:{root:x.overlayHeaderClose}},a.createElement(o.Z,null))),a.createElement(Pe.Z,{component:"nav"},t))},el=t=>{const{sidebarConfig:r}=(0,a.useContext)(lr),{children:u}=t,v=Ti({sidebarConfig:r}),C=(0,J.TH)(),[x,V]=(0,a.useState)(-1);(0,a.useEffect)(()=>{V(-1)},[C.pathname]);let ce=(0,p.vJ)(u,Ie=>Ie.getElements().filter(pt=>pt.type===Xs));if(u)ce.length?ce=Js(ce):ce.push(a.createElement(No,{key:"default_menu",icon:a.createElement(N.Z,null)},u));else return null;const we=x>=0&&!ce[x].props.to;return a.createElement(Ai,{value:{isOpen:!0,setOpen:()=>{}}},a.createElement(Si.Provider,{value:{selectedMenuItemIndex:x,setSelectedMenuItemIndex:V}},a.createElement(Qs,{label:ce[x]&&ce[x].props.label,open:we,onClose:()=>V(-1)},ce[x]&&ce[x].props.children),a.createElement(P.Z,{className:v.root,"data-testid":"mobile-sidebar-root",component:"nav"},ce)))},Ii={getSidebarPinState(){let t;try{t=JSON.parse(window.localStorage.getItem("sidebarPinState")||"true")}catch{return!0}return!!t},setSidebarPinState(t){return window.localStorage.setItem("sidebarPinState",JSON.stringify(t))}},tl=(0,Q.Z)(t=>({root:{width:"100%",transition:"padding-left 0.1s ease-out",isolation:"isolate",[t.breakpoints.up("sm")]:{paddingLeft:r=>r.isPinned?r.sidebarConfig.drawerWidthOpen:r.sidebarConfig.drawerWidthClosed},[t.breakpoints.down("xs")]:{paddingBottom:r=>r.sidebarConfig.mobileSidebarHeight},"@media print":{padding:"0px !important"}},content:{zIndex:0,isolation:"isolate","&:focus":{outline:0}}}),{name:"BackstageSidebarPage"}),Di=(0,a.createContext)({content:{contentRef:void 0}});function nl(t){const[r,u]=(0,a.useState)(()=>Ii.getSidebarPinState()),{sidebarConfig:v}=(0,a.useContext)(lr),C=(0,a.useRef)(null),x=(0,a.useMemo)(()=>({content:{contentRef:C}}),[C]);(0,a.useEffect)(()=>{Ii.setSidebarPinState(r)},[r]);const V=(0,rt.Z)(Ie=>Ie.breakpoints.down("xs"),{noSsr:!0}),ce=()=>u(!r),we=tl({isPinned:r,sidebarConfig:v});return a.createElement(Vs,{value:{isPinned:r,toggleSidebarPinState:ce,isMobile:V}},a.createElement(Di.Provider,{value:x},a.createElement(Pe.Z,{className:we.root},t.children)))}function Fo(){const{content:t}=(0,a.useContext)(Di);return{focusContent:(0,a.useCallback)(()=>{var u,v;(v=(u=t==null?void 0:t.contentRef)==null?void 0:u.current)==null||v.focus()},[t]),contentRef:t==null?void 0:t.contentRef}}const Mi=(0,Q.Z)(t=>({drawer:{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",left:0,top:0,bottom:0,zIndex:t.zIndex.appBar,background:t.palette.navigation.background,overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest}),"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"},"@media print":{display:"none"}},drawerWidth:r=>({width:r.sidebarConfig.drawerWidthClosed}),drawerOpen:r=>({width:r.sidebarConfig.drawerWidthOpen,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shorter})}),visuallyHidden:{top:0,position:"absolute",zIndex:1e3,transform:"translateY(-200%)","&:focus":{transform:"translateY(5px)"}}}),{name:"BackstageSidebar"}),al=t=>{const{sidebarConfig:r}=(0,a.useContext)(lr),{openDelayMs:u=r.defaultOpenDelayMs,closeDelayMs:v=r.defaultCloseDelayMs,disableExpandOnHover:C,children:x}=t,V=Mi({sidebarConfig:r}),ce=(0,rt.Z)(ha=>ha.breakpoints.down("md"),{noSsr:!0}),[we,Ie]=(0,a.useState)(0),pt=(0,a.useRef)(),{isPinned:Et,toggleSidebarPinState:Jt}=Ro(),Kt=()=>{Et||C||(pt.current&&(clearTimeout(pt.current),pt.current=void 0),we!==2&&!ce&&(pt.current=window.setTimeout(()=>{pt.current=void 0,Ie(2)},u),Ie(1)))},pn=()=>{Et||C||(pt.current&&(clearTimeout(pt.current),pt.current=void 0),we===1?Ie(0):we===2&&(pt.current=window.setTimeout(()=>{pt.current=void 0,Ie(0)},v)))},Ln=we===2&&!ce||Et,Hn=ha=>{ha?(Ie(2),Jt()):(Ie(0),Jt())};return a.createElement("nav",{style:{},"aria-label":"sidebar nav"},a.createElement(ol,null),a.createElement(Ai,{value:{isOpen:Ln,setOpen:Hn}},a.createElement(Pe.Z,{className:V.root,"data-testid":"sidebar-root",onMouseEnter:C?()=>{}:Kt,onFocus:C?()=>{}:Kt,onMouseLeave:C?()=>{}:pn,onBlur:C?()=>{}:pn},a.createElement(Pe.Z,{className:ee()(V.drawer,V.drawerWidth,{[V.drawerOpen]:Ln})},x))))},rl=t=>{var r,u;const v=zs((r=t.sidebarOptions)!=null?r:{}),C=Gs((u=t.submenuOptions)!=null?u:{}),{children:x,disableExpandOnHover:V,openDelayMs:ce,closeDelayMs:we}=t,{isMobile:Ie}=Ro();return Ie?a.createElement(el,null,x):a.createElement(lr.Provider,{value:{sidebarConfig:v,submenuConfig:C}},a.createElement(al,{openDelayMs:ce,closeDelayMs:we,disableExpandOnHover:V},x))};function ol(){const{sidebarConfig:t}=(0,a.useContext)(lr),{focusContent:r,contentRef:u}=Fo(),v=Mi({sidebarConfig:t});return u!=null&&u.current?a.createElement(Ee.Z,{onClick:r,variant:"contained",className:ee()(v.visuallyHidden)},"Skip to content"):null}function Oo(t,r,u=!1){const v=new URLSearchParams(r.search).toString(),C=st().parse(v),x=new URLSearchParams(t.search).toString(),V=st().parse(x),ce=u?he.isEqual:he.isMatch;return(0,he.isEqual)(r.pathname,t.pathname)&&ce(V,C)}const il=(0,Q.Z)(t=>{var r,u;return{item:{height:48,width:"100%","&:hover":{background:((r=t.palette.navigation.navItem)==null?void 0:r.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor},display:"flex",alignItems:"center",color:t.palette.navigation.color,padding:t.spacing(2.5),cursor:"pointer",position:"relative",background:"none",border:"none"},itemContainer:{width:"100%"},selected:{background:"#6f6f6f",color:t.palette.common.white},label:{margin:t.spacing(1.75),marginLeft:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis",lineHeight:1},subtitle:{fontSize:10,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"},dropdownArrow:{position:"absolute",right:21},dropdown:{display:"flex",flexDirection:"column",alignItems:"end"},dropdownItem:{width:"100%",padding:"10px 0 10px 0","&:hover":{background:((u=t.palette.navigation.navItem)==null?void 0:u.hoverBackground)||"#6f6f6f",color:t.palette.navigation.selectedColor}},textContent:{color:t.palette.navigation.color,paddingLeft:t.spacing(4),paddingRight:t.spacing(1),fontSize:t.typography.body2.fontSize,whiteSpace:"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}},{name:"BackstageSidebarSubmenuItem"}),sl=t=>{const{title:r,subtitle:u,to:v,icon:C,dropdownItems:x,exact:V}=t,ce=il(),{setIsHoveredOn:we}=(0,a.useContext)(Wo),Ie=()=>{we(!1)},pt=(0,J.WU)(v!=null?v:""),Et=(0,J.TH)();let Jt=Oo(Et,pt,V);const[Kt,pn]=(0,a.useState)(!1),Ln=()=>{pn(!Kt)};return x!==void 0?(x.some(Hn=>{const ha=(0,re.i3)(Hn.to);return Jt=Oo(Et,ha,V),Jt}),a.createElement(Pe.Z,{className:ce.itemContainer},a.createElement(de.ZP,{title:r,enterDelay:500,enterNextDelay:500},a.createElement(Ee.Z,{role:"button",onClick:Ln,onTouchStart:Hn=>Hn.stopPropagation(),className:ee()(ce.item,Jt?ce.selected:void 0)},C&&a.createElement(C,{fontSize:"small"}),a.createElement(k.Z,{variant:"subtitle1",component:"span",className:ce.label},r,a.createElement("br",null),u&&a.createElement(k.Z,{variant:"caption",component:"span",className:ce.subtitle},u)),Kt?a.createElement(Se.Z,{className:ce.dropdownArrow}):a.createElement(te.Z,{className:ce.dropdownArrow}))),x&&Kt&&a.createElement(Pe.Z,{className:ce.dropdown},x.map((Hn,ha)=>a.createElement(de.ZP,{key:ha,title:Hn.title,enterDelay:500,enterNextDelay:500},a.createElement(Oa,{to:Hn.to,underline:"none",className:ce.dropdownItem,onClick:Ie,onTouchStart:ka=>ka.stopPropagation()},a.createElement(k.Z,{component:"span",className:ce.textContent},Hn.title))))))):a.createElement(Pe.Z,{className:ce.itemContainer},a.createElement(de.ZP,{title:r,enterDelay:500,enterNextDelay:500},a.createElement(Oa,{to:v,underline:"none",className:ee()(ce.item,Jt?ce.selected:void 0),onClick:Ie,onTouchStart:Hn=>Hn.stopPropagation()},C&&a.createElement(C,{fontSize:"small"}),a.createElement(k.Z,{variant:"subtitle1",component:"span",className:ce.label},r,a.createElement("br",null),u&&a.createElement(k.Z,{variant:"caption",component:"span",className:ce.subtitle},u)))))},ll=(0,Q.Z)(t=>({root:{zIndex:1e3,position:"relative",overflow:"visible",width:t.spacing(7)+1},drawer:r=>{var u,v;return{display:"flex",flexFlow:"column nowrap",alignItems:"flex-start",position:"fixed",[t.breakpoints.up("sm")]:{marginLeft:r.left,transition:t.transitions.create("margin-left",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})},top:0,bottom:0,padding:0,background:(v=(u=t.palette.navigation.submenu)==null?void 0:u.background)!=null?v:"#404040",overflowX:"hidden",msOverflowStyle:"none",scrollbarWidth:"none",cursor:"default",width:r.submenuConfig.drawerWidthClosed,transitionDelay:`${r.submenuConfig.defaultOpenDelayMs}ms`,"& > *":{flexShrink:0},"&::-webkit-scrollbar":{display:"none"}}},drawerOpen:r=>({width:r.submenuConfig.drawerWidthOpen,[t.breakpoints.down("xs")]:{width:"100%",position:"relative",paddingLeft:t.spacing(3),left:0,top:0}}),title:{fontSize:t.typography.h5.fontSize,fontWeight:t.typography.fontWeightMedium,color:t.palette.common.white,padding:t.spacing(2.5),[t.breakpoints.down("xs")]:{display:"none"}}}),{name:"BackstageSidebarSubmenu"}),Li=t=>{const{isOpen:r}=mo(),{sidebarConfig:u,submenuConfig:v}=(0,a.useContext)(lr),C=r?u.drawerWidthOpen:u.drawerWidthClosed,x=ll({left:C,submenuConfig:v}),{isHoveredOn:V}=(0,a.useContext)(Wo),[ce,we]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{we(V)},[V]),a.createElement(Pe.Z,{className:ee()(x.drawer,{[x.drawerOpen]:ce})},a.createElement(k.Z,{variant:"h5",component:"span",className:x.title},t.title),t.children)},cl=(0,Q.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),ul=()=>{const t=cl();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowBackIosIcon,{style:{fontSize:"12px"}})))},dl=(0,Q.Z)({iconContainer:{display:"flex",position:"relative",width:"100%"},arrow1:{right:"6px",position:"absolute"}}),ml=()=>{const t=dl();return React.createElement(Box,{className:t.iconContainer},React.createElement(Box,{className:t.arrow1},React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})),React.createElement(Box,null,React.createElement(ArrowForwardIosIcon,{style:{fontSize:"12px"}})))},pl=t=>(0,Q.Z)(r=>{var u,v,C,x;return{root:{color:r.palette.navigation.color,display:"flex",flexFlow:"row nowrap",alignItems:"center",height:48,cursor:"pointer"},buttonItem:{background:"none",border:"none",width:"100%",margin:0,padding:0,textAlign:"inherit",font:"inherit",textTransform:"none"},closed:{width:t.drawerWidthClosed,justifyContent:"center"},open:{[r.breakpoints.up("sm")]:{width:t.drawerWidthOpen}},highlightable:{"&:hover":{background:(v=(u=r.palette.navigation.navItem)==null?void 0:u.hoverBackground)!=null?v:"#404040"}},highlighted:{background:(x=(C=r.palette.navigation.navItem)==null?void 0:C.hoverBackground)!=null?x:"#404040"},label:{fontWeight:"bold",whiteSpace:"nowrap",lineHeight:"auto",flex:"3 1 auto",width:"110px",overflow:"hidden","text-overflow":"ellipsis"},iconContainer:{boxSizing:"border-box",height:"100%",width:t.iconContainerWidth,marginRight:-r.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"0"},searchRoot:{marginBottom:12},searchField:{color:"#b5b5b5",fontWeight:r.typography.fontWeightBold,fontSize:r.typography.fontSize},searchFieldHTMLInput:{padding:r.spacing(2,0,2)},searchContainer:{width:t.drawerWidthOpen-t.iconContainerWidth},secondaryAction:{width:r.spacing(6),textAlign:"center",marginRight:r.spacing(1)},closedItemIcon:{width:"100%",justifyContent:"center"},submenuArrow:{display:"flex"},expandButton:{background:"none",border:"none",color:r.palette.navigation.color,width:"100%",cursor:"pointer",position:"relative",height:48},arrows:{position:"absolute",right:10},selected:{"&$root":{borderLeft:`solid ${t.selectedIndicatorWidth}px ${r.palette.navigation.indicator}`,color:r.palette.navigation.selectedColor},"&$closed":{width:t.drawerWidthClosed},"& $closedItemIcon":{paddingRight:t.selectedIndicatorWidth},"& $iconContainer":{marginLeft:-t.selectedIndicatorWidth}}}},{name:"BackstageSidebarItem"});function wo(t){return(0,a.useMemo)(()=>pl(t),[t])()}const gl=(t,r)=>(0,p.vJ)(t.props.children,u=>{let v=!1;return u.getElements().forEach(({props:{to:C,dropdownItems:x}})=>{if(!v){if(x!=null&&x.length){x.forEach(({to:V})=>v=v||Oo(r,(0,re.i3)(V)));return}C&&(v=Oo(r,(0,re.i3)(C)))}}),v},[r.pathname]);function Ko(t){return t.to===void 0}const hl=a.createElement(Li).type,fl=a.forwardRef(function({to:r,end:u,style:v,className:C,activeStyle:x,caseSensitive:V,activeClassName:ce="active","aria-current":we="page",...Ie},pt){let{pathname:Et}=(0,J.TH)(),{pathname:Jt}=(0,J.WU)(r);V||(Et=Et.toLocaleLowerCase("en-US"),Jt=Jt.toLocaleLowerCase("en-US"));let Kt=Et===Jt;!Kt&&!u&&(Kt=Et.startsWith(`${Jt}/`));const pn=Kt?we:void 0;return a.createElement(ne.rU,{...Ie,to:r,ref:pt,"aria-current":pn,style:{...v,...Kt?x:void 0},className:ee()([typeof C!="function"?C:void 0,Kt?ce:void 0])})}),xi=(0,a.forwardRef)((t,r)=>{const{icon:u,text:v,hasNotifications:C=!1,hasSubmenu:x=!1,disableHighlight:V=!1,onClick:ce,noTrack:we,children:Ie,className:pt,...Et}=t,{sidebarConfig:Jt}=(0,a.useContext)(lr),Kt=wo(Jt),{isOpen:pn}=mo(),Ln=!pn&&x?{display:"flex",marginLeft:"20px"}:{lineHeight:"0"},Hn=a.createElement(Pe.Z,{style:Ln},a.createElement(u,{fontSize:"small"}),!pn&&x?a.createElement(kt.Z,{fontSize:"small"}):a.createElement(a.Fragment,null)),ha=a.createElement(We.Z,{color:"secondary",variant:"dot",overlap:"circular",invisible:!C,className:ee()({[Kt.closedItemIcon]:!pn})},Hn),ka=a.createElement(a.Fragment,null,a.createElement(Pe.Z,{"data-testid":"login-button",className:Kt.iconContainer},ha),v&&a.createElement(k.Z,{variant:"subtitle2",component:"span",className:Kt.label},v),a.createElement("div",{className:Kt.secondaryAction},Ie)),er=pn?ka:ha,Yn={onClick:ce,className:ee()(pt,Kt.root,pn?Kt.open:Kt.closed,Ko(t)&&Kt.buttonItem,{[Kt.highlightable]:!V})},Ta=(0,p.z$)(),{pathname:Wa}=(0,J.WU)(!Ko(t)&&t.to?t.to:""),tr=(0,a.useCallback)(Cr=>{if(!we){const Vr="click",hr=v!=null?v:"Sidebar Item",Hr=Wa?{attributes:{to:Wa}}:void 0;Ta.captureEvent(Vr,hr,Hr)}ce==null||ce(Cr)},[Ta,v,Wa,we,ce]);return Ko(t)?a.createElement(Ee.Z,{role:"button","aria-label":v,...Yn,ref:r,onClick:tr},er):a.createElement(fl,{...Yn,activeClassName:Kt.selected,to:t.to?t.to:"",ref:r,"aria-label":v||t.to,...Et,onClick:tr},er)}),El=({children:t,...r})=>{const{sidebarConfig:u}=(0,a.useContext)(lr),v=wo(u),[C,x]=(0,a.useState)(!1),V=(0,J.TH)(),ce=gl(t,V),we=(0,rt.Z)(Jt=>Jt.breakpoints.down("sm")),Ie=()=>{x(!0)},pt=()=>{x(!1)},Et=()=>we?C?a.createElement(Se.Z,{fontSize:"small",className:v.submenuArrow}):a.createElement(te.Z,{fontSize:"small",className:v.submenuArrow}):!C&&a.createElement(kt.Z,{fontSize:"small",className:v.submenuArrow});return a.createElement(Wo.Provider,{value:{isHoveredOn:C,setIsHoveredOn:x}},a.createElement("div",{"data-testid":"item-with-submenu",onMouseLeave:pt,onTouchStart:C?pt:Ie,onMouseEnter:Ie,className:ee()(C&&v.highlighted)},a.createElement(xi,{hasSubmenu:!0,className:ce?v.selected:"",...r},Et()),C&&t))},Bi=(0,a.forwardRef)((t,r)=>{const[u]=(0,p.vJ)(t.children,v=>v.getElements().filter(C=>C.type===hl));return u?a.createElement(El,{...t},u):a.createElement(xi,{...t,ref:r})});function Pc(t){const{sidebarConfig:r}=useContext(lr),[u,v]=useState(""),C=wo(r),x=t.icon?t.icon:SearchIcon,V=()=>{t.onSearch(u),v("")},ce=Et=>{Et.key==="Enter"&&(Et.preventDefault(),V())},we=Et=>{v(Et.target.value)},Ie=Et=>{Et.preventDefault(),Et.stopPropagation()},pt=Et=>{V(),Et.preventDefault()};return React.createElement(Box,{className:C.searchRoot},React.createElement(Bi,{icon:x,to:t.to,onClick:pt,disableHighlight:!0},React.createElement(TextField,{placeholder:"Search",value:u,onClick:Ie,onChange:we,onKeyDown:ce,className:C.searchContainer,InputProps:{disableUnderline:!0,className:C.searchField},inputProps:{className:C.searchFieldHTMLInput}})))}const vl=(0,_.Z)("div")({flex:1},{name:"BackstageSidebarSpace"}),Ac=(0,_.Z)("div")({height:8},{name:"BackstageSidebarSpacer"}),Ui=(0,_.Z)("hr")(({theme:t})=>({height:1,width:"100%",background:"#383838",border:"none",margin:t.spacing(1.2,0)}),{name:"BackstageSidebarDivider"}),yl=t=>({overflowY:"auto","&::-webkit-scrollbar":{backgroundColor:t.palette.background.default,width:"5px",borderRadius:"5px"},"&::-webkit-scrollbar-thumb":{backgroundColor:t.palette.text.secondary,borderRadius:"5px"}}),_l=(0,_.Z)("div")(({theme:t})=>{const r=yl(t);return{flex:"0 1 auto",overflowX:"hidden",width:"calc(100% - 5px)",minHeight:"48px",overflowY:"hidden","@media (hover: none)":r,"&:hover":r}}),Sc=()=>{const{sidebarConfig:t}=useContext(lr),r=wo(t),{isOpen:u,setOpen:v}=mo();if(useMediaQuery(V=>V.breakpoints.down("md"),{noSsr:!0}))return null;const x=()=>{v(!u)};return React.createElement(Button$1,{role:"button",onClick:x,className:r.expandButton,"aria-label":"Expand Sidebar","data-testid":"sidebar-expand-button"},React.createElement(Box,{className:r.arrows},u?React.createElement(ul,null):React.createElement(ml,null)))},bl=(0,Q.Z)(t=>({introCard:r=>({color:"#b5b5b5",fontSize:12,width:r.sidebarConfig.drawerWidthOpen,marginTop:t.spacing(2.25),marginBottom:t.spacing(1.5),paddingLeft:r.sidebarConfig.iconPadding,paddingRight:r.sidebarConfig.iconPadding}),introDismiss:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginTop:t.spacing(1.5)},introDismissLink:{color:"#dddddd",display:"flex",alignItems:"center",marginBottom:t.spacing(.5),"&:hover":{color:t.palette.linkHover,transition:t.transitions.create("color",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.shortest})}},introDismissText:{fontSize:"0.7rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:1},introDismissIcon:{width:18,height:18,marginRight:t.spacing(1.5)}}),{name:"BackstageSidebarIntro"});function Cl(t){const{sidebarConfig:r}=useContext(lr),u=bl({sidebarConfig:r}),{text:v,onClose:C}=t,x=()=>C();return React.createElement(Box,{className:u.introCard},React.createElement(Typography,{variant:"subtitle2"},v),React.createElement(Box,{className:u.introDismiss},React.createElement(IconButton,{onClick:x,className:u.introDismissLink},React.createElement(CloseIcon,{className:u.introDismissIcon}),React.createElement(Typography,{component:"span",className:u.introDismissText},"Dismiss"))))}const $i=t=>{const{text:r,onDismiss:u}=t,[v,C]=useState(!1),x=()=>{C(!0)};return React.createElement(Collapse,{in:!v,onExited:u},React.createElement(Cl,{text:r,onClose:x}))},Pl=null,Al="And your recently viewed plugins will pop up here!";function Rc(t){const{isOpen:r}=mo(),u={starredItemsDismissed:!1,recentlyViewedItemsDismissed:!1},{value:v,set:C}=useLocalStorageValue(js),{starredItemsDismissed:x,recentlyViewedItemsDismissed:V}=v!=null?v:{},ce=()=>{C(Ie=>({...u,...Ie,starredItemsDismissed:!0}))},we=()=>{C(Ie=>({...u,...Ie,recentlyViewedItemsDismissed:!0}))};return r?React.createElement(React.Fragment,null,!x&&React.createElement(React.Fragment,null,React.createElement($i,{text:Pl,onDismiss:ce}),React.createElement(Ui,null)),!V&&React.createElement($i,{text:Al,onDismiss:we})):null}const Sl=(0,Q.Z)(t=>({header:{gridArea:"pageHeader",padding:t.spacing(3),width:"100%",boxShadow:t.shadows[4],position:"relative",zIndex:100,display:"flex",flexDirection:"row",alignItems:"center",backgroundImage:t.page.backgroundImage,backgroundPosition:"center",backgroundSize:"cover",[t.breakpoints.down("sm")]:{flexWrap:"wrap"}},leftItemsBox:{maxWidth:"100%",flexGrow:1},rightItemsBox:{width:"auto",alignItems:"center"},title:{color:t.page.fontColor,wordBreak:"break-word",fontSize:t.typography.h3.fontSize,marginBottom:0},subtitle:{color:t.page.fontColor,opacity:.8,display:"inline-block",marginTop:t.spacing(1),maxWidth:"75ch"},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:t.spacing(1),color:t.page.fontColor},breadcrumb:{color:t.page.fontColor},breadcrumbType:{fontSize:"inherit",opacity:.7,marginRight:-t.spacing(.3),marginBottom:t.spacing(.3)},breadcrumbTitle:{fontSize:"inherit",marginLeft:-t.spacing(.3),marginBottom:t.spacing(.3)}}),{name:"BackstageHeader"}),Rl=({type:t,typeLink:r,classes:u,pageTitle:v})=>t?r?a.createElement(Ei,{className:u.breadcrumb},a.createElement(Oa,{to:r},t),a.createElement(k.Z,null,v)):a.createElement(k.Z,{className:u.type},t):null,Ol=({pageTitle:t,classes:r,tooltip:u})=>{const{contentRef:v}=Fo(),C=a.createElement(k.Z,{ref:v,tabIndex:-1,className:r.title,variant:"h1"},t);return u?a.createElement(de.ZP,{title:u,placement:"top-start"},C):C},wl=({classes:t,subtitle:r})=>r?typeof r!="string"?a.createElement(a.Fragment,null,r):a.createElement(k.Z,{className:t.subtitle,variant:"subtitle2",component:"span"},r):null;function To(t){const{children:r,pageTitleOverride:u,style:v,subtitle:C,title:x,tooltip:V,type:ce,typeLink:we}=t,Ie=Sl(),Et=(0,i.u)(i.p).getOptionalString("app.title")||"Backstage",Jt=u||x,Kt=x||u,pn=`${Jt} | %s | ${Et}`,Ln=`${Jt} | ${Et}`;return a.createElement(a.Fragment,null,a.createElement(Xt.q,{titleTemplate:pn,defaultTitle:Ln}),a.createElement("header",{style:v,className:Ie.header},a.createElement(Pe.Z,{className:Ie.leftItemsBox},a.createElement(Rl,{classes:Ie,type:ce,typeLink:we,pageTitle:Kt}),a.createElement(Ol,{classes:Ie,pageTitle:Kt,tooltip:V}),a.createElement(wl,{classes:Ie,subtitle:C})),a.createElement(O.Z,{container:!0,className:Ie.rightItemsBox,spacing:4},r)))}const Tl=({label:t,secondaryLabel:r,icon:u,disabled:v=!1,onClick:C})=>React.createElement(Fragment,null,React.createElement(ListItem,{"data-testid":"header-action-item",disabled:v,button:!0,onClick:x=>{C&&C(x)}},u&&React.createElement(ListItemIcon,null,u),React.createElement(ListItemText,{primary:t,secondary:r})));function Oc(t){const{palette:{common:{white:r}}}=useTheme(),{actionItems:u}=t,[v,C]=React.useState(!1),x=React.useRef(null);return React.createElement(Fragment,null,React.createElement(IconButton,{onClick:()=>C(!0),"data-testid":"header-action-menu",ref:x,style:{color:r,height:56,width:56,marginRight:-4,padding:0}},React.createElement(MoreVert,null)),React.createElement(Popover,{open:v,anchorEl:x.current,anchorOrigin:{horizontal:"right",vertical:"bottom"},transformOrigin:{horizontal:"right",vertical:"top"},onClose:()=>C(!1)},React.createElement(List,null,u.map((V,ce)=>React.createElement(Tl,{key:`header-action-menu-${ce}`,...V})))))}const Il=(0,Q.Z)(t=>({root:{textAlign:"left"},label:{color:t.page.fontColor,fontWeight:t.typography.fontWeightBold,letterSpacing:0,fontSize:t.typography.fontSize,marginBottom:t.spacing(1)/2,lineHeight:1},value:{color:(0,M.Fq)(t.page.fontColor,.8),fontSize:t.typography.fontSize,lineHeight:1}}),{name:"BackstageHeaderLabel"}),Dl=({value:t,className:r,typographyRootComponent:u})=>a.createElement(k.Z,{component:u!=null?u:typeof t=="string"?"p":"span",className:r},t);function Ml(t){const{label:r,value:u,url:v,contentTypograpyRootComponent:C}=t,x=Il(),V=a.createElement(Dl,{className:x.value,value:u||"<Unknown>",typographyRootComponent:C});return a.createElement(O.Z,{item:!0},a.createElement(k.Z,{component:"span",className:x.root},a.createElement(k.Z,{className:x.label},r),v?a.createElement(Oa,{to:v},V):V))}const Ll=t=>(0,S.Z)({root:{color:t.palette.common.white,padding:t.spacing(2,2,3),backgroundImage:t.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),xl=(0,Q.Z)(Ll,{name:"BackstageItemCardHeader"});function Zi(t){const{title:r,subtitle:u,children:v}=t,C=xl(t);return a.createElement(Pe.Z,{className:C.root},u&&a.createElement(k.Z,{variant:"subtitle2",component:"h3"},u),r&&a.createElement(k.Z,{variant:"h6",component:"h4"},r),v)}function wc(t){const{description:r,tags:u,title:v,type:C,subtitle:x,label:V,onClick:ce,href:we}=t;return React.createElement(Card,null,React.createElement(CardMedia,null,React.createElement(Zi,{title:v,subtitle:x||C})),React.createElement(CardContent,null,u!=null&&u.length?React.createElement(Box,null,u.map((Ie,pt)=>React.createElement(Chip,{size:"small",label:Ie,key:pt}))):null,r),React.createElement(CardActions,null,!we&&React.createElement(la,{to:"#",onClick:ce,color:"primary"},V),we&&React.createElement(la,{to:we,color:"primary"},V)))}const Bl=t=>(0,S.Z)({root:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(22em, 1fr))",gridAutoRows:"1fr",gridGap:t.spacing(2)}}),Ul=(0,Q.Z)(Bl,{name:"BackstageItemCardGrid"});function $l(t){const{children:r,...u}=t,v=Ul(u);return a.createElement(Pe.Z,{className:v.root,...u},r)}const Zl=(0,Q.Z)(t=>({root:{display:"grid",gridTemplateAreas:"'pageHeader pageHeader pageHeader' 'pageSubheader pageSubheader pageSubheader' 'pageNav pageContent pageSidebar'",gridTemplateRows:"max-content auto 1fr",gridTemplateColumns:"auto 1fr auto",overflowY:"auto",height:"100vh",[t.breakpoints.down("xs")]:{height:"100%"},"@media print":{display:"block",height:"auto",overflowY:"inherit"}}}),{name:"BackstagePage"});function Io(t){const{themeId:r,children:u}=t,v=Zl();return a.createElement(b.Z,{theme:C=>({...C,page:C.getPageTheme({themeId:r})})},a.createElement("main",{className:v.root},u))}function kl(t){const{themeId:r,children:u,...v}=t;return a.createElement(Io,{themeId:r},a.createElement(To,{...v}),u)}const Wl=Lt.z.object({providerInfo:Lt.z.object({}).catchall(Lt.z.unknown()).optional(),profile:Lt.z.object({email:Lt.z.string().optional(),displayName:Lt.z.string().optional(),picture:Lt.z.string().optional()}),backstageIdentity:Lt.z.object({token:Lt.z.string(),identity:Lt.z.object({type:Lt.z.literal("user"),userEntityRef:Lt.z.string(),ownershipEntityRefs:Lt.z.array(Lt.z.string())})})});var Nl=Object.defineProperty,Fl=(t,r,u)=>r in t?Nl(t,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[r]=u,zo=(t,r,u)=>(Fl(t,typeof r!="symbol"?r+"":r,u),u);const ki={defaultTokenExpiryMillis:5*60*1e3,tokenExpiryMarginMillis:5*60*1e3};function Kl(t){const r=new Date(Date.now()+ki.defaultTokenExpiryMillis);if(!t)return r;const[u,v,C]=t.split("."),x=JSON.parse(window.atob(v));return typeof x.exp!="number"?r:new Date(x.exp*1e3-ki.tokenExpiryMarginMillis)}class zl{constructor(r){zo(this,"options"),zo(this,"abortController"),zo(this,"state"),this.options=r,this.abortController=new AbortController,this.state={type:"empty"}}async start(){await this.getSessionAsync()}getUserId(){const{backstageIdentity:r}=this.getSessionSync(),u=r.identity.userEntityRef,v=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(u);if(!v)throw new TypeError(`Invalid user entity reference "${u}"`);return v[3]}async getIdToken(){return(await this.getSessionAsync()).backstageIdentity.token}getProfile(){return this.getSessionSync().profile}async getProfileInfo(){return(await this.getSessionAsync()).profile}async getBackstageIdentity(){return(await this.getSessionAsync()).backstageIdentity.identity}async getCredentials(){return{token:(await this.getSessionAsync()).backstageIdentity.token}}async signOut(){this.abortController.abort()}getSessionSync(){if(this.state.type==="active")return this.state.session;if(this.state.type==="fetching"&&this.state.previous)return this.state.previous;throw new Error("No session available. Try reloading your browser page.")}async getSessionAsync(){if(this.state.type==="fetching")return this.state.promise;if(this.state.type==="active"&&new Date<this.state.expiresAt)return this.state.session;const r=this.state.type==="active"?this.state.session:void 0,u=this.fetchSession().then(v=>(this.state={type:"active",session:v,expiresAt:Kl(v.backstageIdentity.token)},v),v=>{throw this.state={type:"failed",error:v},v});return this.state={type:"fetching",promise:u,previous:r},u}async fetchSession(){const r=await this.options.discoveryApi.getBaseUrl("auth"),u=typeof this.options.headers=="function"?await this.options.headers():this.options.headers,v=new Headers(u);v.set("X-Requested-With","XMLHttpRequest");const C=await fetch(`${r}/${this.options.provider}/refresh`,{signal:this.abortController.signal,headers:v,credentials:"include"});if(!C.ok)throw await ResponseError.fromResponse(C);return Wl.parse(await C.json())}}const Tc=t=>{const r=useApi(discoveryApiRef),[{status:u,error:v},{execute:C}]=useAsync(async()=>{const x=new zl({provider:t.provider,discoveryApi:r,headers:t.headers});await x.start(),t.onSignInSuccess(x)});return useMountEffect(C),u==="loading"?React.createElement(Mn,null):v?React.createElement(Ya,{title:"You do not appear to be signed in. Please try reloading the browser page.",error:v}):null};class Go{getUserId(){return"guest"}async getIdToken(){}getProfile(){return{email:"guest@example.com",displayName:"Guest"}}async getProfileInfo(){return{email:"guest@example.com",displayName:"Guest"}}async getBackstageIdentity(){const r="user:default/guest";return{type:"user",userEntityRef:r,ownershipEntityRefs:[r]}}async getCredentials(){return{}}async signOut(){}}function Gl(t){const[r,u,v]=t.split(".");return JSON.parse(window.atob(u))}class jo{constructor(r){this.result=r}getUserId(){return this.result.userId}static fromResult(r){return new jo(r)}async getIdToken(){var r,u;return(u=(r=this.result).getIdToken)==null?void 0:u.call(r)}getProfile(){return this.result.profile}async getProfileInfo(){return this.result.profile}async getBackstageIdentity(){const r=await this.getIdToken();if(!r){const C=`user:default/${this.getUserId()}`;return{type:"user",userEntityRef:C,ownershipEntityRefs:[C]}}const{sub:u,ent:v}=Gl(r);return{type:"user",userEntityRef:u,ownershipEntityRefs:v!=null?v:[]}}async getCredentials(){var r,u;return{token:await((u=(r=this.result).getIdToken)==null?void 0:u.call(r))}}async signOut(){var r,u;return(u=(r=this.result).signOut)==null?void 0:u.call(r)}}var jl=Object.defineProperty,Vl=(t,r,u)=>r in t?jl(t,r,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[r]=u,Hl=(t,r,u)=>(Vl(t,typeof r!="symbol"?r+"":r,u),u);class Gr{constructor(r,u,v){this.identity=r,this.authApi=u,this.profile=v,Hl(this,"profilePromise")}static createGuest(){return new Go}static fromLegacy(r){return jo.fromResult(r)}static create(r){return new Gr(r.identity,r.authApi,r.profile)}getUserId(){const r=this.identity.userEntityRef,u=/^([^:/]+:)?([^:/]+\/)?([^:/]+)$/.exec(r);if(!u)throw new TypeError(`Invalid user entity reference "${r}"`);return u[3]}async getIdToken(){return(await this.authApi.getBackstageIdentity()).token}getProfile(){if(!this.profile)throw new Error("The identity API does not implement synchronous profile fetching, use getProfileInfo() instead");return this.profile}async getProfileInfo(){if(this.profilePromise)return await this.profilePromise;try{return this.profilePromise=this.authApi.getProfile(),await this.profilePromise}catch(r){throw this.profilePromise=void 0,r}}async getBackstageIdentity(){return this.identity}async getCredentials(){return{token:(await this.authApi.getBackstageIdentity()).token}}async signOut(){return this.authApi.signOut()}}const Vo=(0,Q.Z)({container:{padding:0,listStyle:"none"},item:{display:"flex",flexDirection:"column",width:"100%",maxWidth:"400px",margin:0,padding:0}},{name:"BackstageSignInPage"}),Do=({children:t})=>{const r=Vo();return a.createElement(O.Z,{component:"li",item:!0,classes:r},t)},Yl={Component:({config:t,onSignInStarted:r,onSignInSuccess:u,onSignInFailure:v})=>{const{apiRef:C,title:x,message:V}=t,ce=(0,i.u)(C),we=(0,i.u)(i.r),Ie=async()=>{try{r();const pt=await ce.getBackstageIdentity({instantPopup:!0});if(!pt)throw v(),new Error(`The ${x} provider is not configured to support sign-in`);const Et=await ce.getProfile();u(Gr.create({identity:pt.identity,profile:Et,authApi:ce}))}catch(pt){v(),we.post(new ie.SP("Login failed",pt))}};return a.createElement(Do,null,a.createElement(Ra,{variant:"fullHeight",title:x,actions:a.createElement(Ee.Z,{color:"primary",variant:"outlined",onClick:Ie},"Sign In")},a.createElement(k.Z,{variant:"body1"},V)))},loader:async(t,r)=>{const u=t.get(r),v=await u.getBackstageIdentity({optional:!0});if(!v)return;const C=await u.getProfile();return Gr.create({identity:v.identity,profile:C,authApi:u})}},Jl={Component:({onSignInStarted:t,onSignInSuccess:r})=>a.createElement(Do,null,a.createElement(Ra,{title:"Guest",variant:"fullHeight",actions:a.createElement(Ee.Z,{color:"primary",variant:"outlined",onClick:()=>{t(),r(new Go)}},"Enter")},a.createElement(k.Z,{variant:"body1"},"Enter as a Guest User.",a.createElement("br",null),"You will not have a verified identity,",a.createElement("br",null),"meaning some features might be unavailable."))),loader:async()=>new Go},Xl=/^[a-z0-9_\-]+\.[a-z0-9_\-]+\.[a-z0-9_\-]+$/i,Ql=(0,Q.Z)(t=>({form:{display:"flex",flexFlow:"column nowrap"},button:{alignSelf:"center",marginTop:t.spacing(2)}}),{name:"BackstageCustomProvider"}),Wi=t=>{const{ref:r,...u}=t;return{inputRef:r,...u}},ql={Component:({onSignInStarted:t,onSignInSuccess:r})=>{const u=Ql(),{register:v,handleSubmit:C,formState:x}=(0,tn.cI)({mode:"onChange"}),{errors:V}=x,ce=({userId:we,idToken:Ie})=>{t(),r(Gr.fromLegacy({userId:we,getIdToken:Ie!==void 0?async()=>Ie:void 0,profile:{email:`${we}@example.com`}}))};return a.createElement(Do,null,a.createElement(Ra,{title:"Custom User",variant:"fullHeight"},a.createElement(k.Z,{variant:"body1"},"Enter your own User ID and credentials.",a.createElement("br",null),"This selection will not be stored."),a.createElement("form",{className:u.form,onSubmit:C(ce)},a.createElement(ct.Z,null,a.createElement(Qe.Z,{...Wi(v("userId",{required:!0})),label:"User ID",margin:"normal",error:Boolean(V.userId)}),V.userId&&a.createElement(on.Z,{error:!0},V.userId.message)),a.createElement(ct.Z,null,a.createElement(Qe.Z,{...Wi(v("idToken",{required:!1,validate:we=>!we||Xl.test(we)||"Token is not a valid OpenID Connect JWT Token"})),label:"ID Token (optional)",margin:"normal",autoComplete:"off",error:Boolean(V.idToken)}),V.idToken&&a.createElement(on.Z,{error:!0},V.idToken.message)),a.createElement(Ee.Z,{type:"submit",color:"primary",variant:"outlined",className:u.button,disabled:!(x!=null&&x.isDirty)||!cn()(V)},"Continue"))))},loader:async()=>{}};class Ho{constructor(r){this.config=r}static from(r){return new Ho(r)}getUserId(){if(!this.config.identityApi.getUserId)throw new Error("SignOutProxy IdentityApi.getUserId is not implemented");return this.config.identityApi.getUserId()}getIdToken(){if(!this.config.identityApi.getIdToken)throw new Error("SignOutProxy IdentityApi.getIdToken is not implemented");return this.config.identityApi.getIdToken()}getProfile(){if(!this.config.identityApi.getProfile)throw new Error("SignOutProxy IdentityApi.getProfile is not implemented");return this.config.identityApi.getProfile()}getProfileInfo(){return this.config.identityApi.getProfileInfo()}getBackstageIdentity(){return this.config.identityApi.getBackstageIdentity()}getCredentials(){return this.config.identityApi.getCredentials()}signOut(){return this.config.signOut()}}const jr="@backstage/core:SignInPage:provider",Ni={guest:Jl,custom:ql,common:Yl};function Fi(t,r){if(t in r)throw new Error(`"${t}" ID is duplicated. IDs of identity providers have to be unique.`)}function ec(t){return t.reduce((u,v)=>{if(typeof v=="string")return Fi(v,u),u[v]={components:Ni[v],id:v},u;const{id:C}=v;return Fi(C,u),u[C]={components:Ni.common,id:C,config:v},u},{})}const tc=(t,r)=>{const u=useApi(errorApiRef),v=useApiHolder(),[C,x]=useState(!0),V=useCallback(we=>{r(Ho.from({identityApi:we,signOut:async()=>{var Ie;localStorage.removeItem(jr),await((Ie=we.signOut)==null?void 0:Ie.call(we))}}))},[r]);useLayoutEffect(()=>{var we;if(!C)return;const Ie=localStorage.getItem(jr);if(Ie===null){x(!1);return}const pt=t[Ie];if(!pt){x(!1);return}let Et=!1;return pt.components.loader(v,(we=pt.config)==null?void 0:we.apiRef).then(Jt=>{if(Et){localStorage.removeItem(jr);return}Jt?V(Jt):x(!1)}).catch(Jt=>{localStorage.removeItem(jr),!Et&&(u.post(Jt),x(!1))}),()=>{Et=!0}},[C,u,r,v,t,V]);const ce=useMemo(()=>Object.keys(t).map(we=>{const Ie=t[we],{Component:pt}=Ie.components,Et=pn=>{V(pn)},Jt=()=>{var pn;localStorage.setItem(jr,((pn=Ie==null?void 0:Ie.config)==null?void 0:pn.id)||Ie.id)},Kt=()=>{localStorage.removeItem(jr)};return React.createElement(pt,{key:Ie.id,config:Ie.config,onSignInStarted:Jt,onSignInSuccess:Et,onSignInFailure:Kt})}),[t,V]);return[C,ce]},nc=({onSignInSuccess:t,providers:r=[],title:u,align:v="left"})=>{const C=useApi(configApiRef),x=Vo(),V=ec(r),[ce,we]=tc(V,t);return ce?React.createElement(Mn,null):React.createElement(Io,{themeId:"home"},React.createElement(To,{title:C.getString("app.title")}),React.createElement(Ao,null,u&&React.createElement(fi,{title:u,textAlign:v}),React.createElement(Grid,{container:!0,justifyContent:v==="center"?v:"flex-start",spacing:2,component:"ul",classes:x},we)))},ac=({provider:t,auto:r,onSignInSuccess:u})=>{const v=Vo(),C=useApi(t.apiRef),x=useApi(configApiRef),[V,ce]=useState(),[we,Ie]=useState(!1),pt=async({checkExisting:Et,showPopup:Jt})=>{try{let Kt;if(Et&&(Kt=await C.getBackstageIdentity({optional:!0})),!Kt&&(Jt||r)&&(Ie(!0),Kt=await C.getBackstageIdentity({instantPopup:!0}),!Kt))throw new Error(`The ${t.title} provider is not configured to support sign-in`);if(!Kt){Ie(!0);return}const pn=await C.getProfile();u(Gr.create({identity:Kt.identity,authApi:C,profile:pn}))}catch(Kt){ce(Kt),Ie(!0)}};return useMountEffect(()=>pt({checkExisting:!0})),we?React.createElement(Io,{themeId:"home"},React.createElement(To,{title:x.getString("app.title")}),React.createElement(Ao,null,React.createElement(Grid,{container:!0,justifyContent:"center",spacing:2,component:"ul",classes:v},React.createElement(Do,null,React.createElement(Ra,{variant:"fullHeight",title:t.title,actions:React.createElement(Button$1,{color:"primary",variant:"outlined",onClick:()=>{pt({showPopup:!0})}},"Sign In")},React.createElement(Typography,{variant:"body1"},t.message),V&&V.name!=="PopupRejectedError"&&React.createElement(Typography,{variant:"body1",color:"error"},V.message)))))):React.createElement(Mn,null)};function Uc(t){return"provider"in t?React.createElement(ac,{...t}):React.createElement(nc,{...t})}const rc=(0,Q.Z)(t=>({root:{padding:t.spacing(0,2,0,2.5),minHeight:t.spacing(3)},indicator:{backgroundColor:t.palette.info.main,height:t.spacing(.3)}}),{name:"BackstageTabbedCard"}),oc=(0,c.Z)(t=>({root:{padding:t.spacing(2,2,2,2.5),display:"inline-block"},title:{fontWeight:700},subheader:{paddingTop:t.spacing(1)}}),{name:"BackstageTabbedCardBoldHeader"})(R.Z);function ic(t){const{slackChannel:r,errorBoundaryProps:u,children:v,title:C,deepLink:x,value:V,onChange:ce}=t,we=rc(),[Ie,pt]=(0,a.useState)(0),Et=ce||((pn,Ln)=>pt(Ln));let Jt;V?a.Children.map(v,pn=>{a.isValidElement(pn)&&(pn==null?void 0:pn.props.value)===V&&(Jt=pn==null?void 0:pn.props.children)}):a.Children.map(v,(pn,Ln)=>{a.isValidElement(pn)&&Ln===Ie&&(Jt=pn==null?void 0:pn.props.children)});const Kt=u||(r?{slackChannel:r}:{});return a.createElement(en.Z,null,a.createElement(va,{...Kt},C&&a.createElement(oc,{title:C}),a.createElement(an.Z,{classes:we,value:V||Ie,onChange:Et},v),a.createElement(St.Z,null),a.createElement(Me.Z,null,Jt),x&&a.createElement(Ea,{...x})))}const sc=(0,Q.Z)(t=>({root:{minWidth:t.spacing(6),minHeight:t.spacing(3),margin:t.spacing(0,2,0,0),padding:t.spacing(.5,0,.5,0),textTransform:"none","&:hover":{opacity:1,backgroundColor:"transparent",color:t.palette.text.primary}},selected:{fontWeight:t.typography.fontWeightBold}}),{name:"BackstageCardTab"});function lc(t){const{children:r,...u}=t,v=sc();return a.createElement(ln.Z,{disableRipple:!0,classes:v,...u})}},83487:(xn,Yt,e)=>{"use strict";e.d(Yt,{FB:()=>_e,IB:()=>be,iH:()=>c,op:()=>Q});var i=e(2784),p=e(57032);function g(S){return{$$type:"@backstage/TranslationMessages",id:S.ref.id,full:Boolean(S.full),messages:S.messages}}function j(S){return{$$type:"@backstage/TranslationResource",version:"v1",id:S.ref.id,resources:Object.entries(S.translations).map(([_,b])=>({language:_,loader:()=>b().then(m=>{const ve=m.default;return{messages:(ve==null?void 0:ve.$$type)==="@backstage/TranslationMessages"?ve.messages:ve}})}))}}var k=Object.defineProperty,o=(S,_,b)=>_ in S?k(S,_,{enumerable:!0,configurable:!0,writable:!0,value:b}):S[_]=b,z=(S,_,b)=>(o(S,typeof _!="symbol"?_+"":_,b),b),He=(S,_,b)=>{if(!_.has(S))throw TypeError("Cannot "+b)},Ze=(S,_,b)=>(He(S,_,"read from private field"),b?b.call(S):_.get(S)),a=(S,_,b)=>{if(_.has(S))throw TypeError("Cannot add the same private member more than once");_ instanceof WeakSet?_.add(S):_.set(S,b)},xe=(S,_,b,m)=>(He(S,_,"write to private field"),m?m.call(S,b):_.set(S,b),b),Ee,se,Y;function Fe(S){const _=new Array;function b(m,ve){for(const[ee,he]of Object.entries(m))typeof he=="string"?_.push([ve+ee,he]):b(he,`${ve}${ee}.`)}return b(S,""),Object.fromEntries(_)}class ge{constructor(_){a(this,Ee,void 0),a(this,se,void 0),a(this,Y,void 0),z(this,"$$type","@backstage/TranslationRef"),z(this,"version","v1"),xe(this,Ee,_.id),xe(this,se,Fe(_.messages))}get id(){return Ze(this,Ee)}get T(){throw new Error("Not implemented")}getDefaultMessages(){return Ze(this,se)}setDefaultResource(_){xe(this,Y,_)}getDefaultResource(){return Ze(this,Y)}toString(){return`TranslationRef{id=${this.id}}`}}Ee=new WeakMap,se=new WeakMap,Y=new WeakMap;function _e(S){const _=new ge(S);return S.translations&&_.setDefaultResource(j({ref:_,translations:S.translations})),_}const Q=(0,p.c)({id:"core.translation"}),be=(0,p.c)({id:"core.applanguage"}),M=new WeakSet,c=S=>{const _=(0,p.u)(p.r),b=(0,p.u)(Q),[m,ve]=(0,i.useState)(()=>b.getTranslation(S)),ee=(0,i.useMemo)(()=>b.translation$(S),[b,S]),he=(0,i.useCallback)(ne=>{if(!M.has(S)){const re=`Failed to load translation resource '${S.id}'; caused by ${ne}`;console.error(re),_.post(new Error(re)),M.add(S)}},[_,S]);(0,i.useEffect)(()=>{const ne=ee.subscribe({next(re){re.ready&&ve(re)},error(re){he(re)}});return()=>{ne.unsubscribe()}},[ee,he]);const J=(0,i.useRef)(!0);if((0,i.useEffect)(()=>{J.current?J.current=!1:ve(b.getTranslation(S))},[b,S]),!m.ready)throw new Promise(ne=>{const re=ee.subscribe({next(Pe){Pe.ready&&(re.unsubscribe(),ne())},error(Pe){re.unsubscribe(),he(Pe),ne()}})});return{t:m.t}}},57032:(xn,Yt,e)=>{"use strict";e.d(Yt,{F:()=>b,S:()=>He,a:()=>be,b:()=>g,c:()=>z,d:()=>a,e:()=>Ee,f:()=>m,g:()=>Ze,h:()=>Y,i:()=>Fe,j:()=>ge,k:()=>_e,l:()=>Q,m:()=>se,n:()=>M,o:()=>xe,p:()=>c,q:()=>S,r:()=>_,s:()=>ve,t:()=>ee,u:()=>j,v:()=>he,x:()=>J});var i=e(2784),p=e(18473);function g(){const ne=(0,p.Vt)("api-context");if(!ne)throw new Error("API context is not available");const re=ne.atVersion(1);if(!re)throw new Error("ApiContext v1 not available");return re}function j(ne){const Pe=g().get(ne);if(!Pe)throw new Error(`No implementation available for ${ne}`);return Pe}function k(ne){return function(Pe){const Pt=rn=>{const de=g(),Bt={};for(const ut in ne)if(ne.hasOwnProperty(ut)){const rt=ne[ut],bt=de.get(rt);if(!bt)throw new Error(`No implementation available for ${rt}`);Bt[ut]=bt}return React.createElement(Pe,{...rn,...Bt})},T=Pe.displayName||Pe.name||"Component";return Pt.displayName=`withApis(${T})`,Pt}}class o{constructor(re){if(this.config=re,!re.id.split(".").flatMap(Pt=>Pt.split("-")).every(Pt=>Pt.match(/^[a-z][a-z0-9]*$/)))throw new Error(`API id must only contain period separated lowercase alphanum tokens with dashes, got '${re.id}'`)}get id(){return this.config.id}get T(){throw new Error(`tried to read ApiRef.T of ${this}`)}toString(){return`apiRef{${this.config.id}}`}}function z(ne){return new o(ne)}var He=(ne=>(ne.SignedIn="SignedIn",ne.SignedOut="SignedOut",ne))(He||{});const Ze=z({id:"core.auth.google"}),a=z({id:"core.auth.github"}),xe=z({id:"core.auth.okta"}),Ee=z({id:"core.auth.gitlab"}),se=z({id:"core.auth.microsoft"}),Y=z({id:"core.auth.onelogin"}),Fe=z({id:"core.auth.bitbucket"}),ge=z({id:"core.auth.bitbucket-server"}),_e=z({id:"core.auth.atlassian"}),Q=z({id:"core.alert"}),be=z({id:"core.analytics"}),M=z({id:"core.apptheme"}),c=z({id:"core.config"}),S=z({id:"core.discovery"}),_=z({id:"core.error"});var b=(ne=>(ne[ne.None=0]="None",ne[ne.Active=1]="Active",ne))(b||{});const m=z({id:"core.featureflags"}),ve=z({id:"core.fetch"}),ee=z({id:"core.identity"}),he=z({id:"core.oauthrequest"}),J=z({id:"core.storage"})},30705:(xn,Yt,e)=>{"use strict";e.d(Yt,{CO:()=>Zt,IY:()=>Q,NT:()=>m,Oi:()=>bt,P4:()=>Ot,R5:()=>_e,Rz:()=>Pe,YO:()=>dt,fC:()=>z,ni:()=>He,qD:()=>Y,rx:()=>Ft,tg:()=>rt,vJ:()=>qt,x8:()=>ut,z$:()=>se});var i=e(18473),p=e(2784),g=e(57032),j=e(73557);const k=(0,i.CT)("analytics-context"),o=()=>{const I=(0,p.useContext)(k);if(I===void 0)return{routeRef:"unknown",pluginId:"root",extension:"App"};const W=I.atVersion(1);if(W===void 0)throw new Error("No context found for version 1.");return W},z=I=>{const{attributes:W,children:O}=I,ae={...o(),...W},fe=(0,i.EI)({1:ae});return p.createElement(k.Provider,{value:fe},O)};function He(I,W){return"id"in I?{api:I,deps:{},factory:()=>W}:I}const Ze=(0,i.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),a="_ROUTABLE-EXTENSION-RENDERED";class xe{constructor(W,O={routeRef:"unknown",pluginId:"root",extension:"App"}){this.analyticsApi=W,this.context=O,Ze.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{Ze.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...Ze.mostRecentGatheredNavigation,...Ze.mostRecentRoutableExtensionRender}),Ze.mostRecentGatheredNavigation=void 0,Ze.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),Ze.beforeUnloadRegistered=!0)}setContext(W){this.context=W}captureEvent(W,O,{value:D,attributes:ae}={}){const{_routeNodeType:fe,...Ke}=this.context;if(W===a){Ze.mostRecentGatheredNavigation&&(Ze.mostRecentRoutableExtensionRender={context:{...Ke,extension:"App"}});return}if(Ze.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...Ze.mostRecentGatheredNavigation,...Ze.mostRecentRoutableExtensionRender})}catch(ft){console.warn("Error during analytics event capture. %o",ft)}Ze.mostRecentGatheredNavigation=void 0,Ze.mostRecentRoutableExtensionRender=void 0}if(W==="navigate"&&fe==="gathered"&&Ke.pluginId==="root"){Ze.mostRecentGatheredNavigation={action:W,subject:O,value:D,attributes:ae,context:Ke};return}try{this.analyticsApi.captureEvent({action:W,subject:O,value:D,attributes:ae,context:Ke})}catch(ft){console.warn("Error during analytics event capture. %o",ft)}}}function Ee(){try{return(0,g.u)(g.a)}catch{return{captureEvent:()=>{}}}}function se(){const I=(0,p.useRef)(null),W=o(),O=Ee();function D(){return I.current===null&&(I.current=new xe(O)),I.current}const ae=D();return ae.setContext(W),ae}const Y=()=>{const I=(0,i.Vt)("app-context");if(!I)throw new Error("App context is not available");const W=I.atVersion(1);if(!W)throw new Error("AppContext v1 not available");return W},Fe=(0,i.uW)("component-data-store",()=>new WeakMap),ge="__backstage_data";function _e(I,W,O){var D;const ae=I;let fe=(D=ae[ge])!=null?D:Fe.get(I);if(fe||(fe={map:new Map},Object.defineProperty(ae,ge,{enumerable:!1,configurable:!0,writable:!1,value:fe}),Fe.set(I,fe)),fe.map.has(W)){const Ke=I.displayName||I.name;throw new Error(`Attempted to attach duplicate data "${W}" to component "${Ke}"`)}fe.map.set(W,O)}function Q(I,W){var O;if(!I)return;const D=I.type;if(!D)return;const ae=(O=D[ge])!=null?O:Fe.get(D);if(ae)return ae.map.get(W)}const be=(0,i.uW)("route-ref-type",()=>Symbol("route-ref-type"));var M=Object.defineProperty,c=(I,W,O)=>W in I?M(I,W,{enumerable:!0,configurable:!0,writable:!0,value:O}):I[W]=O,S=(I,W,O)=>(c(I,typeof W!="symbol"?W+"":W,O),O),_;class b{constructor(W,O){this.id=W,this.params=O,S(this,_,"absolute")}get title(){return this.id}toString(){return`routeRef{type=absolute,id=${this.id}}`}}_=be;function m(I){var W;return new b(I.id,(W=I.params)!=null?W:[])}var ve=Object.defineProperty,ee=(I,W,O)=>W in I?ve(I,W,{enumerable:!0,configurable:!0,writable:!0,value:O}):I[W]=O,he=(I,W,O)=>(ee(I,typeof W!="symbol"?W+"":W,O),O),J;const ne=/^\w+$/;class re{constructor(W,O,D,ae){this.id=W,this.path=O,this.parent=D,this.params=ae,he(this,J,"sub")}toString(){return`routeRef{type=sub,id=${this.id}}`}}J=be;function Pe(I){const{id:W,path:O,parent:D}=I,ae=O.split("/").filter(ft=>ft.startsWith(":")).map(ft=>ft.substring(1)),fe=[...D.params,...ae];if(D.params.some(ft=>ae.includes(ft)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!O.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${O}'`);if(O.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${O}'`);for(const ft of ae)if(!ne.test(ft))throw new Error(`SubRouteRef path has invalid param, got '${ft}'`);return new re(W,O,D,fe)}var Pt=Object.defineProperty,T=(I,W,O)=>W in I?Pt(I,W,{enumerable:!0,configurable:!0,writable:!0,value:O}):I[W]=O,rn=(I,W,O)=>(T(I,typeof W!="symbol"?W+"":W,O),O),de;class Bt{constructor(W,O,D){this.id=W,this.params=O,this.optional=D,rn(this,de,"external")}toString(){return`routeRef{type=external,id=${this.id}}`}}de=be;function ut(I){var W;return new Bt(I.id,(W=I.params)!=null?W:[],Boolean(I.optional))}function rt(I){const{pathname:W}=(0,j.TH)(),O=(0,i.Vt)("routing-context");if(!O)throw new Error("Routing context is not available");const D=O.atVersion(1),ae=(0,p.useMemo)(()=>D&&D.resolve(I,{pathname:W}),[D,I,W]);if(!O)throw new Error("useRouteRef used outside of routing context");if(!D)throw new Error("RoutingContext v1 not available");const fe="optional"in I&&I.optional;if(!ae&&!fe)throw new Error(`No path for ${I}`);return ae}function bt(I){return(0,j.UO)()}var ke=Object.defineProperty,_t=(I,W,O)=>W in I?ke(I,W,{enumerable:!0,configurable:!0,writable:!0,value:O}):I[W]=O,at=(I,W,O)=>(_t(I,typeof W!="symbol"?W+"":W,O),O);class zt extends p.Component{constructor(){super(...arguments),at(this,"state",{error:void 0}),at(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(W){return{error:W}}render(){const{error:W}=this.state,{app:O,plugin:D}=this.props,{ErrorBoundaryFallback:ae}=O.getComponents();return W?p.createElement(ae,{error:W,resetError:this.handleErrorReset,plugin:D}):this.props.children}}function Ot(I){const{component:W,mountPoint:O,name:D}=I;return dt({component:{lazy:()=>W().then(ae=>{const fe=ft=>{const Je=se();try{rt(O)}catch(wt){if(typeof wt=="object"&&wt!==null){const{message:nn}=wt;if(typeof nn=="string"&&nn.startsWith("No path for "))throw new Error(`Routable extension component with mount point ${O} was not discovered in the app element tree. Routable extension components may not be rendered by other components and must be directly available as an element within the App provider component.`)}throw wt}return(0,p.useEffect)(()=>{Je.captureEvent(a,"")},[Je]),p.createElement(ae,{...ft})},Ke=D||ae.displayName||ae.name||"LazyComponent";return fe.displayName=`RoutableExtension(${Ke})`,fe},ae=>Ke=>{const ft=Y(),{BootErrorPage:Je}=ft.getComponents();return p.createElement(Je,{step:"load-chunk",error:ae})})},data:{"core.mountPoint":O},name:D})}function Zt(I){const{component:W,name:O}=I;return dt({component:W,name:O})}function dt(I){const{data:W={},name:O}=I;O||console.warn("Declaring extensions without name is DEPRECATED. Make sure that all usages of createReactExtension, createComponentExtension and createRoutableExtension provide a name.");let D;if("lazy"in I.component){const fe=I.component.lazy;D=(0,p.lazy)(()=>fe().then(Ke=>({default:Ke})))}else D=I.component.sync;const ae=O||D.displayName||D.name||"Component";return{expose(fe){const Ke=ft=>{const Je=Y(),{Progress:wt}=Je.getComponents(),nn=W==null?void 0:W["core.mountPoint"];return p.createElement(p.Suspense,{fallback:p.createElement(wt,null)},p.createElement(zt,{app:Je,plugin:fe},p.createElement(z,{attributes:{pluginId:fe.getId(),...O&&{extension:O},...nn&&{routeRef:nn.id}}},p.createElement(D,{...ft}))))};_e(Ke,"core.plugin",fe),_e(Ke,"core.extensionName",O);for(const[ft,Je]of Object.entries(W))_e(Ke,ft,Je);return Ke.displayName=`Extension(${ae})`,Ke}}}function gt(I,W,O,D){return p.Children.toArray(I).flatMap(ae=>{if(!(0,p.isValidElement)(ae))return[];if(ae.type===p.Fragment)return gt(ae.props.children,W,O,D);if(Q(ae,"core.featureFlagged")){const fe=ae.props;return("with"in fe?W.isActive(fe.with):!W.isActive(fe.without))?gt(ae.props.children,W,O,D):[]}if(O===void 0||O(ae))return[ae];if(D)throw new Error(D);return gt(ae.props.children,W,O,D)})}class Ut{constructor(W,O){this.node=W,this.featureFlagsApi=O}selectByComponentData(W){const O=gt(this.node,this.featureFlagsApi,D=>Q(D,W.key)!==void 0,W.withStrictError);return new Ut(O,this.featureFlagsApi)}findComponentData(W){return gt(this.node,this.featureFlagsApi,D=>Q(D,W.key)!==void 0).map(D=>Q(D,W.key)).filter(D=>D!==void 0)}getElements(){return gt(this.node,this.featureFlagsApi)}}function qt(I,W,O=[]){const D=(0,g.u)(g.f),ae=new Ut(I,D);return(0,p.useMemo)(()=>W(ae),[I,...O])}class yt{constructor(W){this.config=W}getId(){return this.config.id}getApis(){var W;return(W=this.config.apis)!=null?W:[]}getFeatureFlags(){var W,O;return(O=(W=this.config.featureFlags)==null?void 0:W.slice())!=null?O:[]}get routes(){var W;return(W=this.config.routes)!=null?W:{}}get externalRoutes(){var W;return(W=this.config.externalRoutes)!=null?W:{}}provide(W){return W.expose(this)}toString(){return`plugin{${this.config.id}}`}}function Ft(I){return new yt(I)}},32272:(xn,Yt,e)=>{"use strict";e.d(Yt,{BD:()=>j,SP:()=>_,VL:()=>he,VZ:()=>g,dR:()=>Q});var i=e(24852),p=e.n(i);function g(J){if(typeof J!="object"||J===null||Array.isArray(J))return!1;const ne=J;return!(typeof ne.name!="string"||ne.name===""||typeof ne.message!="string")}function j(J){if(typeof J!="object"||J===null||Array.isArray(J))throw new Error(`Encountered invalid error, not an object, got '${J}'`);const ne=J;if(typeof ne.name!="string"||ne.name==="")throw new Error(`Encountered error object without a name, got '${J}'`);if(typeof ne.message!="string")throw new Error(`Encountered error object without a message, got '${J}'`)}function k(J,ne){const Pe={name:"Unknown",message:"<no reason given>",...serializeError$1(J)};return ne!=null&&ne.includeStack||delete Pe.stack,Pe}function o(J){const ne=(0,i.deserializeError)(J);return J.stack||(ne.stack=void 0),ne}function z(J){if(g(J)){const ne=String(J);return ne!=="[object Object]"?ne:`${J.name}: ${J.message}`}return`unknown error '${J}'`}var He=Object.defineProperty,Ze=(J,ne,re)=>ne in J?He(J,ne,{enumerable:!0,configurable:!0,writable:!0,value:re}):J[ne]=re,a=(J,ne,re)=>(Ze(J,typeof ne!="symbol"?ne+"":ne,re),re);class xe extends Error{constructor(ne,re){var Pe;let Pt=ne;if(re!==void 0){const T=z(re);Pt?Pt+=`; caused by ${T}`:Pt=`caused by ${T}`}super(Pt),a(this,"cause"),(Pe=Error.captureStackTrace)==null||Pe.call(Error,this,this.constructor),(!this.name||this.name==="Error")&&this.constructor.name!=="Error"&&(this.name=this.constructor.name),this.cause=g(re)?re:void 0}}var Ee=Object.defineProperty,se=(J,ne,re)=>ne in J?Ee(J,ne,{enumerable:!0,configurable:!0,writable:!0,value:re}):J[ne]=re,Y=(J,ne,re)=>(se(J,typeof ne!="symbol"?ne+"":ne,re),re);class Fe extends null{constructor(){super(...arguments),Y(this,"name","InputError")}}class ge extends null{constructor(){super(...arguments),Y(this,"name","AuthenticationError")}}class _e extends null{constructor(){super(...arguments),Y(this,"name","NotAllowedError")}}class Q extends xe{constructor(){super(...arguments),Y(this,"name","NotFoundError")}}class be extends null{constructor(){super(...arguments),Y(this,"name","ConflictError")}}class M extends null{constructor(){super(...arguments),Y(this,"name","NotModifiedError")}}class c extends null{constructor(){super(...arguments),Y(this,"name","NotImplementedError")}}class S extends null{}class _ extends xe{constructor(ne,re){super(ne,re),this.name=g(re)?re.name:"Error"}}async function b(J){var ne;try{const re=await J.text();if(re){if((ne=J.headers.get("content-type"))!=null&&ne.startsWith("application/json"))try{const Pe=JSON.parse(re);if(Pe.error&&Pe.response)return Pe}catch{}return{error:{name:"Error",message:`Request failed with status ${J.status} ${J.statusText}, ${re}`},response:{statusCode:J.status}}}}catch{}return{error:{name:"Error",message:`Request failed with status ${J.status} ${J.statusText}`},response:{statusCode:J.status}}}var m=Object.defineProperty,ve=(J,ne,re)=>ne in J?m(J,ne,{enumerable:!0,configurable:!0,writable:!0,value:re}):J[ne]=re,ee=(J,ne,re)=>(ve(J,typeof ne!="symbol"?ne+"":ne,re),re);class he extends Error{constructor(ne){super(ne.message),ee(this,"response"),ee(this,"body"),ee(this,"cause"),this.name="ResponseError",this.response=ne.response,this.body=ne.data,this.cause=ne.cause}static async fromResponse(ne){const re=await b(ne),Pe=re.response.statusCode||ne.status,Pt=re.error.name||ne.statusText,T=`Request failed with ${Pe} ${Pt}`,rn=o(re.error);return new he({message:T,response:ne,data:re,cause:rn})}}},49462:(xn,Yt,e)=>{"use strict";e.d(Yt,{Om:()=>o,ae:()=>be,nW:()=>c,q3:()=>M,zN:()=>Q});var i=e(57032),p=e(30705),g=e(1854),j=e(73250),k=e(2784);const o=(0,i.c)({id:"core.scmauth"});var z=(S,_,b)=>{if(!_.has(S))throw TypeError("Cannot "+b)},He=(S,_,b)=>(z(S,_,"read from private field"),b?b.call(S):_.get(S)),Ze=(S,_,b)=>{if(_.has(S))throw TypeError("Cannot add the same private member more than once");_ instanceof WeakSet?_.add(S):_.set(S,b)},a=(S,_,b,m)=>(z(S,_,"write to private field"),m?m.call(S,b):_.set(S,b),b),xe,Ee,se,Y,Fe;class ge{constructor(_){Ze(this,xe,void 0),a(this,xe,_)}async getCredentials(_){const b=new URL(_.url),m=He(this,xe).find(ve=>ve.isUrlSupported(b));if(!m)throw new Error(`No auth provider available for '${_.url}', see https://backstage.io/link?scm-auth`);return m.getCredentials(_)}}xe=new WeakMap;const _e=class yr{constructor(_,b,m,ve){Ze(this,Ee,void 0),Ze(this,se,void 0),Ze(this,Y,void 0),Ze(this,Fe,void 0),a(this,Ee,b),a(this,se,m),a(this,Y,ve),a(this,Fe,_)}static createDefaultApiFactory(){return(0,p.ni)({api:o,deps:{github:i.d,gitlab:i.e,azure:i.m,bitbucket:i.i},factory:({github:_,gitlab:b,azure:m,bitbucket:ve})=>yr.merge(yr.forGithub(_),yr.forGitlab(b),yr.forAzure(m),yr.forBitbucket(ve))})}static forAuthApi(_,b){return new yr("generic",_,b.host,b.scopeMapping)}static forGithub(_,b){var m;const ve=(m=b==null?void 0:b.host)!=null?m:"github.com";return new yr("github",_,ve,{default:["repo","read:org","read:user"],repoWrite:["gist"]})}static forGitlab(_,b){var m;const ve=(m=b==null?void 0:b.host)!=null?m:"gitlab.com";return new yr("gitlab",_,ve,{default:["read_user","read_api","read_repository"],repoWrite:["write_repository","api"]})}static forAzure(_,b){var m;const ve=(m=b==null?void 0:b.host)!=null?m:"dev.azure.com";return new yr("azure",_,ve,{default:["vso.build","vso.code","vso.graph","vso.project","vso.profile"],repoWrite:["vso.code_manage"]})}static forBitbucket(_,b){var m;const ve=(m=b==null?void 0:b.host)!=null?m:"bitbucket.org";return new yr("bitbucket",_,ve,{default:["account","team","pullrequest","snippet","issue"],repoWrite:["pullrequest:write","snippet:write","issue:write"]})}static merge(..._){return new ge(_)}isUrlSupported(_){return _.host===He(this,se)}getAdditionalScopesForProvider(_){var b,m;return!(_!=null&&_.customScopes)||He(this,Fe)==="generic"?[]:(m=(b=_.customScopes)==null?void 0:b[He(this,Fe)])!=null?m:[]}async getCredentials(_){const{url:b,additionalScope:m,...ve}=_,ee=He(this,Y).default.slice();m!=null&&m.repoWrite&&ee.push(...He(this,Y).repoWrite);const he=this.getAdditionalScopesForProvider(m);he.length&&ee.push(...he);const J=[...new Set(ee)],ne=await He(this,Ee).getAccessToken(J,ve);return{token:ne,headers:{Authorization:`Bearer ${ne}`}}}};Ee=new WeakMap,se=new WeakMap,Y=new WeakMap,Fe=new WeakMap;let Q=_e;class be{static fromConfig(_){return g.Lx.fromConfig(_)}}const M=(0,i.c)({id:"integration.scmintegrations"}),c=S=>{var _;const{type:b}=S,m=(0,p.qD)(),ve=j.Z,ee=b&&(_=m.getSystemIcon(b))!=null?_:ve;return k.createElement(ee,null)}},1854:(xn,Yt,e)=>{"use strict";e.d(Yt,{BT:()=>Jn,Lx:()=>qa,MY:()=>oe,ah:()=>ue});var i=e(82717),p=e.n(i),g=e(76635),j=e.n(g),k=e(96279),o=e.n(k),z=e(72872),He=e(89393),Ze=e(26228),a=e(48834).Buffer;function xe(h){const l=new URL("http://example.com");return l.host=h,l.host===h}function Ee(h){try{return new URL(h),!0}catch{return!1}}function se(h,l){return{list(){return h},byUrl(y){try{const G=typeof y=="string"?new URL(y):y;return h.find(Re=>l(Re)===G.host)}catch{return}},byHost(y){return h.find(G=>l(G)===y)}}}function Y(h){const{url:l,base:y,lineNumber:G}=h;try{return new URL(l),l}catch{}let Re;if(l.startsWith("/")){const{filepath:lt}=p()(y);Re=new URL(y);const It=(0,g.trimEnd)(Re.pathname.substring(0,Re.pathname.length-lt.length),"/");Re.pathname=`${It}${l}`}else Re=new URL(l,y);return Re.search=new URL(y).search,G&&(Re.hash=`L${G}`),Re.toString()}const Fe="amazonaws.com";function ge(h){var l;const y=h.getOptionalString("endpoint"),G=(l=h.getOptionalBoolean("s3ForcePathStyle"))!=null?l:!1;let Re,lt;if(y){try{const Zn=new URL(y);Re=Zn.host,lt=Zn.pathname}catch{throw new Error(`invalid awsS3 integration config, endpoint '${y}' is not a valid URL`)}if(lt!=="/")throw new Error(`invalid awsS3 integration config, endpoints cannot contain path, got '${y}'`)}else Re=Fe;const It=h.getOptionalString("accessKeyId"),Vt=h.getOptionalString("secretAccessKey"),Sn=h.getOptionalString("roleArn"),kn=h.getOptionalString("externalId");return{host:Re,endpoint:y,s3ForcePathStyle:G,accessKeyId:It,secretAccessKey:Vt,roleArn:Sn,externalId:kn}}function _e(h){const l=h.map(ge);return l.some(y=>y.host===Fe)||l.push({host:Fe}),l}var Q=Object.defineProperty,be=(h,l,y)=>l in h?Q(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,M=(h,l,y)=>(be(h,typeof l!="symbol"?l+"":l,y),y);const c=class{constructor(l){this.integrationConfig=l}get type(){return"awsS3"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){return Y(l)}resolveEditUrl(l){return l}};M(c,"factory",({config:h})=>{var l;const y=_e((l=h.getOptionalConfigArray("integrations.awsS3"))!=null?l:[]);return se(y.map(G=>new c(G)),G=>G.config.host)});let S=c;var _=(h,l,y)=>{if(!l.has(h))throw TypeError("Cannot "+y)},b=(h,l,y)=>(_(h,l,"read from private field"),y?y.call(h):l.get(h)),m=(h,l,y)=>{if(l.has(h))throw TypeError("Cannot add the same private member more than once");l instanceof WeakSet?l.add(h):l.set(h,y)},ve=(h,l,y,G)=>(_(h,l,"write to private field"),G?G.call(h,y):l.set(h,y),y),ee,he,J,ne,re,Pe,Pt;const T="GB",rn=class Gi{constructor(l,y,G,Re,lt,It){m(this,ee,void 0),m(this,he,void 0),m(this,J,void 0),m(this,ne,void 0),m(this,re,void 0),m(this,Pe,void 0),m(this,Pt,(...Vt)=>{const Sn=new URL(b(this,ee));return Sn.pathname=Vt.map(kn=>encodeURIComponent(kn)).join("/"),Sn}),ve(this,ee,l),ve(this,he,y),ve(this,J,G),ve(this,ne,Re),ve(this,re,lt),ve(this,Pe,It)}static fromRepoUrl(l){var y;const G=new URL(l);let Re,lt,It;const Vt=G.pathname.split("/").map(Aa=>decodeURIComponent(Aa));if(Vt[2]==="_git"?(Re=Vt[1],lt=It=Vt[3]):Vt[3]==="_git"?(Re=Vt[1],lt=Vt[2],It=Vt[4]):Vt[4]==="_git"&&(Re=`${Vt[1]}/${Vt[2]}`,lt=Vt[3],It=Vt[5]),!Re||!lt||!It)throw new Error("Azure URL must point to a git repository");const Sn=(y=G.searchParams.get("path"))!=null?y:void 0;let kn;const Zn=G.searchParams.get("version");if(Zn){if(Zn.slice(0,2)!=="GB")throw new Error("Azure URL version must point to a git branch");kn=Zn.slice(2)}return new Gi(G.origin,Re,lt,It,Sn,kn)}toRepoUrl(){let l;return b(this,J)===b(this,ne)?l=b(this,Pt).call(this,b(this,he),"_git",b(this,ne)):l=b(this,Pt).call(this,b(this,he),b(this,J),"_git",b(this,ne)),b(this,re)&&l.searchParams.set("path",b(this,re)),b(this,Pe)&&l.searchParams.set("version",T+b(this,Pe)),l.toString()}toFileUrl(){if(!b(this,re))throw new Error("Azure URL must point to a specific path to be able to download a file");const l=b(this,Pt).call(this,b(this,he),b(this,J),"_apis","git","repositories",b(this,ne),"items");return l.searchParams.set("api-version","6.0"),l.searchParams.set("path",b(this,re)),b(this,Pe)&&l.searchParams.set("version",b(this,Pe)),l.toString()}toArchiveUrl(){const l=b(this,Pt).call(this,b(this,he),b(this,J),"_apis","git","repositories",b(this,ne),"items");return l.searchParams.set("recursionLevel","full"),l.searchParams.set("download","true"),l.searchParams.set("api-version","6.0"),b(this,re)&&l.searchParams.set("scopePath",b(this,re)),b(this,Pe)&&l.searchParams.set("version",b(this,Pe)),l.toString()}toCommitsUrl(){const l=b(this,Pt).call(this,b(this,he),b(this,J),"_apis","git","repositories",b(this,ne),"commits");return l.searchParams.set("api-version","6.0"),b(this,Pe)&&l.searchParams.set("searchCriteria.itemVersion.version",b(this,Pe)),l.toString()}getOwner(){return b(this,he)}getProject(){return b(this,J)}getRepo(){return b(this,ne)}getPath(){return b(this,re)}getRef(){return b(this,Pe)}};ee=new WeakMap,he=new WeakMap,J=new WeakMap,ne=new WeakMap,re=new WeakMap,Pe=new WeakMap,Pt=new WeakMap;let de=rn;const Bt="dev.azure.com",ut=["clientId","clientSecret","tenantId","personalAccessToken"],rt=new Map([["ClientSecret",["clientId","clientSecret","tenantId"]],["ManagedIdentity",["clientId"]],["PersonalAccessToken",["personalAccessToken"]]]);function bt(h){for(const l of rt.entries()){const[y,G]=l,Re=ut.filter(lt=>!G.includes(lt));if(G.every(lt=>h[lt]!==void 0)&&Re.every(lt=>h[lt]===void 0))return{kind:y,organizations:h.organizations,...G.reduce((lt,It)=>(lt[It]=h[It],lt),{})}}throw new Error("is not a valid credential")}function ke(h){var l,y,G,Re;const lt=(l=h.getOptionalString("host"))!=null?l:Bt;let It=(y=h.getOptionalConfigArray("credentials"))==null?void 0:y.map(kn=>({organizations:kn.getOptionalStringArray("organizations"),personalAccessToken:kn.getOptionalString("personalAccessToken"),tenantId:kn.getOptionalString("tenantId"),clientId:kn.getOptionalString("clientId"),clientSecret:kn.getOptionalString("clientSecret")}));const Vt=h.getOptionalString("token");if(h.getOptional("credential")!==void 0&&h.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'credential' and 'credentials' cannot be used together. Use 'credentials' instead.");if(h.getOptional("token")!==void 0&&h.getOptional("credentials")!==void 0)throw new Error("Invalid Azure integration config, 'token' and 'credentials' cannot be used together. Use 'credentials' instead.");if(Vt!==void 0){const kn=[{personalAccessToken:Vt}];It=(G=It==null?void 0:It.concat(kn))!=null?G:kn}if(h.getOptional("credential")!==void 0){const kn=[{organizations:h.getOptionalStringArray("credential.organizations"),token:h.getOptionalString("credential.token"),tenantId:h.getOptionalString("credential.tenantId"),clientId:h.getOptionalString("credential.clientId"),clientSecret:h.getOptionalString("credential.clientSecret")}];It=(Re=It==null?void 0:It.concat(kn))!=null?Re:kn}if(!xe(lt))throw new Error(`Invalid Azure integration config, '${lt}' is not a valid host`);let Sn;if(It!==void 0){const kn=It==null?void 0:It.reduce((Zn,Aa,Va)=>{let rr;try{bt(Aa)}catch(or){rr=or.message}return rr!==void 0&&Zn.push(`credential at position ${Va+1} ${rr}`),Zn},Array.of()).concat(Object.entries(It.filter(Zn=>Zn.organizations!==void 0&&Zn.organizations.length>0).reduce((Zn,Aa,Va)=>{var rr;return(rr=Aa.organizations)==null||rr.forEach(or=>{Zn[or]||(Zn[or]=[]),Zn[or].push(Va+1)}),Zn},{})).filter(([Zn,Aa])=>Aa.length>1).reduce((Zn,[Aa,Va])=>(Zn.push(`organization ${Aa} is specified multiple times in credentials at positions ${Va.slice(0,Va.length-1).join(", ")} and ${Va[Va.length-1]}`),Zn),Array.of()));if((kn==null?void 0:kn.length)>0)throw new Error(`Invalid Azure integration config for ${lt}: ${kn.join("; ")}`);if(Sn=It.map(Zn=>bt(Zn)),Sn.some(Zn=>Zn.kind!=="PersonalAccessToken")&&lt!==Bt)throw new Error(`Invalid Azure integration config for ${lt}, only personal access tokens can be used with hosts other than ${Bt}`);if(Sn.filter(Zn=>Zn.organizations===void 0||Zn.organizations.length===0).length>1)throw new Error(`Invalid Azure integration config for ${lt}, you cannot specify multiple credentials without organizations`)}return{host:lt,credentials:Sn}}function _t(h){const l=h.map(ke);return l.some(y=>y.host===Bt)||l.push({host:Bt}),l}var at=Object.defineProperty,zt=(h,l,y)=>l in h?at(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Ot=(h,l,y)=>(zt(h,typeof l!="symbol"?l+"":l,y),y);const Zt=class{constructor(l){this.integrationConfig=l}get type(){return"azure"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){var y;const{url:G,base:Re}=l;if(Ee(G))return G;try{const lt=de.fromRepoUrl(Re),It=new URL(Re),Vt=new URL(`https://a.com${(y=lt.getPath())!=null?y:""}`),Sn=new URL(G,Vt).pathname;return It.searchParams.set("path",Sn),l.lineNumber&&(It.searchParams.set("line",String(l.lineNumber)),It.searchParams.set("lineEnd",String(l.lineNumber+1)),It.searchParams.set("lineStartColumn","1"),It.searchParams.set("lineEndColumn","1")),It.toString()}catch{return new URL(G,Re).toString()}}resolveEditUrl(l){return l}};Ot(Zt,"factory",({config:h})=>{var l;const y=_t((l=h.getOptionalConfigArray("integrations.azure"))!=null?l:[]);return se(y.map(G=>new Zt(G)),G=>G.config.host)});let dt=Zt;function gt(h){return de.fromRepoUrl(h).toFileUrl()}function Ut(h){return de.fromRepoUrl(h).toArchiveUrl()}function qt(h){return de.fromRepoUrl(h).toCommitsUrl()}var yt=Object.defineProperty,Ft=(h,l,y)=>l in h?yt(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,I=(h,l,y)=>(Ft(h,typeof l!="symbol"?l+"":l,y),y);const W=null;class O{constructor(l){this.credential=l,I(this,"azureDevOpsScope","499b84ac-1321-427f-aa17-267ca6975798/.default"),I(this,"cached")}static fromAzureDevOpsCredential(l){switch(l.kind){case"PersonalAccessToken":return O.fromPersonalAccessTokenCredential(l);case"ClientSecret":return O.fromTokenCredential(new ClientSecretCredential(l.tenantId,l.clientId,l.clientSecret));case"ManagedIdentity":return O.fromTokenCredential(new ManagedIdentityCredential(l.clientId));default:throw new Error(`Credential kind '${l.kind}' not supported`)}}static fromTokenCredential(l){return new O(l)}static fromPersonalAccessTokenCredential(l){return new O(l.personalAccessToken)}async getCredentials(){if(this.cached===void 0||this.cached.expiresAt!==void 0&&Date.now()>this.cached.expiresAt)if(typeof this.credential=="string")this.cached={headers:{Authorization:`Basic ${btoa(`:${this.credential}`)}`},type:"pat",token:this.credential};else{const l=await this.credential.getToken(this.azureDevOpsScope);if(!l)throw new Error("Failed to retrieve access token");this.cached={expiresAt:l.expiresOnTimestamp-W,headers:{Authorization:`Bearer ${l.token}`},type:"bearer",token:l.token}}return this.cached}}class D{constructor(l){this.providers=l}static fromIntegrations(l){const y=l.azure.list().reduce((G,Re)=>{var lt;return(lt=Re.config.credentials)==null||lt.forEach(It=>{var Vt;if(It.organizations===void 0||It.organizations.length===0)G.get(Re.config.host)===void 0&&G.set(Re.config.host,O.fromAzureDevOpsCredential(It));else{const Sn=O.fromAzureDevOpsCredential(It);(Vt=It.organizations)==null||Vt.forEach(kn=>{G.set(`${Re.config.host}/${kn}`,Sn)})}}),Re.config.host==="dev.azure.com"&&G.get(Re.config.host)===void 0&&G.set(Re.config.host,O.fromTokenCredential(new DefaultAzureCredential)),G},new Map);return new D(y)}forAzureDevOpsServerOrganization(l){const y=l.pathname.split("/").filter(G=>G!=="");if(l.host!=="dev.azure.com"&&y.length>0){if(y[0]!=="tfs")return this.providers.get(`${l.host}/${y[0]}`);if(y[0]==="tfs"&&y.length>1)return this.providers.get(`${l.host}/${y[1]}`)}}forAzureDevOpsOrganization(l){const y=l.pathname.split("/").filter(G=>G!=="");if(l.host==="dev.azure.com"&&y.length>0)return this.providers.get(`${l.host}/${y[0]}`)}forHost(l){return this.providers.get(l.host)}async getCredentials(l){var y,G;const Re=new URL(l.url),lt=(G=(y=this.forAzureDevOpsOrganization(Re))!=null?y:this.forAzureDevOpsServerOrganization(Re))!=null?G:this.forHost(Re);if(lt!==void 0)return lt.getCredentials(l)}}async function ae(h,l){var y;const G=l?{...l}:{},Re=(y=h.credentials)==null?void 0:y.filter(lt=>lt.organizations===void 0||lt.organizations.length===0)[0];if(Re){const It=await O.fromAzureDevOpsCredential(Re).getCredentials();return{headers:{...It==null?void 0:It.headers,...G}}}return{headers:G}}const fe="bitbucket.org",Ke="https://api.bitbucket.org/2.0";function ft(h){var l;const y=(l=h.getOptionalString("host"))!=null?l:fe;let G=h.getOptionalString("apiBaseUrl");const Re=h.getOptionalString("token"),lt=h.getOptionalString("username"),It=h.getOptionalString("appPassword");if(!xe(y))throw new Error(`Invalid Bitbucket integration config, '${y}' is not a valid host`);return G?G=(0,g.trimEnd)(G,"/"):y===fe?G=Ke:G=`https://${y}/rest/api/1.0`,{host:y,apiBaseUrl:G,token:Re,username:lt,appPassword:It}}function Je(h){const l=h.map(ft);return l.some(y=>y.host===fe)||l.push({host:fe,apiBaseUrl:Ke}),l}var wt=Object.defineProperty,nn=(h,l,y)=>l in h?wt(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Ae=(h,l,y)=>(nn(h,typeof l!="symbol"?l+"":l,y),y);const Te=class{constructor(l){this.integrationConfig=l}get type(){return"bitbucket"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const y=Y(l);if(!l.lineNumber)return y;const G=new URL(y);return this.integrationConfig.host==="bitbucket.org"?G.hash=`lines-${l.lineNumber}`:G.hash=`${l.lineNumber}`,G.toString()}resolveEditUrl(l){const y=p()(l),G=new URL(l);return G.searchParams.set("mode","edit"),G.searchParams.set("spa","0"),G.searchParams.set("at",y.ref),G.toString()}};Ae(Te,"factory",({config:h})=>{var l,y,G;const Re=Je((G=h.getOptionalConfigArray("integrations.bitbucket"))!=null?G:[...(l=h.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?l:[],...(y=h.getOptionalConfigArray("integrations.bitbucketServer"))!=null?y:[]]);return se(Re.map(lt=>new Te(lt)),lt=>lt.config.host)});let vt=Te;async function Tt(h,l){const{name:y,owner:G,resource:Re}=parseGitUrl(h),lt=Re==="bitbucket.org";let It=lt?`${l.apiBaseUrl}/repositories/${G}/${y}`:`${l.apiBaseUrl}/projects/${G}/repos/${y}/default-branch`,Vt=await fetch(It,St(l));if(Vt.status===404&&!lt&&(It=`${l.apiBaseUrl}/projects/${G}/repos/${y}/branches/default`,Vt=await fetch(It,St(l))),!Vt.ok){const kn=`Failed to retrieve default branch from ${It}, ${Vt.status} ${Vt.statusText}`;throw new Error(kn)}let Sn;if(lt)Sn=(await Vt.json()).mainbranch.name;else{const{displayId:kn}=await Vt.json();Sn=kn}if(!Sn)throw new Error(`Failed to read default branch from ${It}. Response ${Vt.status} ${Vt.json()}`);return Sn}async function At(h,l){const{name:y,owner:G,ref:Re,protocol:lt,resource:It,filepath:Vt}=parseGitUrl(h),Sn=It==="bitbucket.org";let kn=Re;kn||(kn=await Tt(h,l));const Zn=Vt?`&path=${encodeURIComponent(decodeURIComponent(Vt))}`:"";return Sn?`${lt}://${It}/${G}/${y}/get/${kn}.tar.gz`:`${l.apiBaseUrl}/projects/${G}/repos/${y}/archive?format=tgz&at=${kn}&prefix=${G}-${y}${Zn}`}function Wt(h,l){try{const{owner:y,name:G,ref:Re,filepathtype:lt,filepath:It}=parseGitUrl(h);if(!y||!G||lt!=="browse"&&lt!=="raw"&&lt!=="src")throw new Error("Invalid Bitbucket URL or file path");const Vt=It.replace(/^\//,"");if(l.host==="bitbucket.org"){if(!Re)throw new Error("Invalid Bitbucket URL or file path");return`${l.apiBaseUrl}/repositories/${y}/${G}/src/${Re}/${Vt}`}return`${l.apiBaseUrl}/projects/${y}/repos/${G}/raw/${Vt}?at=${Re}`}catch(y){throw new Error(`Incorrect URL: ${h}, ${y}`)}}function St(h){const l={};if(h.token)l.Authorization=`Bearer ${h.token}`;else if(h.username&&h.appPassword){const y=a.from(`${h.username}:${h.appPassword}`,"utf8");l.Authorization=`Basic ${y.toString("base64")}`}return{headers:l}}const Ue="bitbucket.org",Xe="https://api.bitbucket.org/2.0";function Mt(h){const l=Ue,y=Xe,G=h.getString("username"),Re=h.getString("appPassword");return{host:l,apiBaseUrl:y,username:G,appPassword:Re}}function le(h){const l=h.map(Mt);return l.length===0&&l.push({host:Ue,apiBaseUrl:Xe}),l}var Be=Object.defineProperty,ie=(h,l,y)=>l in h?Be(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Ge=(h,l,y)=>(ie(h,typeof l!="symbol"?l+"":l,y),y);const tt=class{constructor(l){this.integrationConfig=l}get type(){return"bitbucketCloud"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const y=Y(l);if(l.lineNumber){const G=new URL(y);return G.hash=`lines-${l.lineNumber}`,G.toString()}return y}resolveEditUrl(l){const y=p()(l),G=new URL(l);return G.searchParams.set("mode","edit"),G.searchParams.set("at",y.ref),G.toString()}};Ge(tt,"factory",({config:h})=>{var l;const y=le((l=h.getOptionalConfigArray("integrations.bitbucketCloud"))!=null?l:[]);return se(y.map(G=>new tt(G)),G=>G.config.host)});let ot=tt;async function Rt(h,l){const{name:y,owner:G}=parseGitUrl(h),Re=`${l.apiBaseUrl}/repositories/${G}/${y}`,lt=await fetch(Re,Me(l));if(!lt.ok){const Sn=`Failed to retrieve default branch from ${Re}, ${lt.status} ${lt.statusText}`;throw new Error(Sn)}const Vt=(await lt.json()).mainbranch.name;if(!Vt)throw new Error(`Failed to read default branch from ${Re}. Response ${lt.status} ${lt.json()}`);return Vt}async function en(h,l){const{name:y,owner:G,ref:Re,protocol:lt,resource:It}=parseGitUrl(h);let Vt=Re;return Vt||(Vt=await Rt(h,l)),`${lt}://${It}/${G}/${y}/get/${Vt}.tar.gz`}function Ce(h,l){try{const{owner:y,name:G,ref:Re,filepathtype:lt,filepath:It}=parseGitUrl(h);if(!y||!G||lt!=="src"&&lt!=="raw")throw new Error("Invalid Bitbucket Cloud URL or file path");const Vt=It.replace(/^\//,"");if(!Re)throw new Error("Invalid Bitbucket Cloud URL or file path");return`${l.apiBaseUrl}/repositories/${y}/${G}/src/${Re}/${Vt}`}catch(y){throw new Error(`Incorrect URL: ${h}, ${y}`)}}function Me(h){const l={};if(h.username&&h.appPassword){const y=a.from(`${h.username}:${h.appPassword}`,"utf8");l.Authorization=`Basic ${y.toString("base64")}`}return{headers:l}}function R(h){const l=h.getString("host");let y=h.getOptionalString("apiBaseUrl");const G=h.getOptionalString("token"),Re=h.getOptionalString("username"),lt=h.getOptionalString("password");if(!xe(l))throw new Error(`Invalid Bitbucket Server integration config, '${l}' is not a valid host`);return y?y=(0,g.trimEnd)(y,"/"):y=`https://${l}/rest/api/1.0`,{host:l,apiBaseUrl:y,token:G,username:Re,password:lt}}function B(h){return h.map(R)}var X=Object.defineProperty,nt=(h,l,y)=>l in h?X(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,mt=(h,l,y)=>(nt(h,typeof l!="symbol"?l+"":l,y),y);const ct=class{constructor(l){this.integrationConfig=l}get type(){return"bitbucketServer"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const y=Y(l);if(l.lineNumber){const G=new URL(y);return G.hash=l.lineNumber.toString(),G.toString()}return y}resolveEditUrl(l){return l.includes("?")?l.substring(0,l.indexOf("?")):l}};mt(ct,"factory",({config:h})=>{var l;const y=B((l=h.getOptionalConfigArray("integrations.bitbucketServer"))!=null?l:[]);return se(y.map(G=>new ct(G)),G=>G.config.host)});let jt=ct;async function dn(h,l){const{name:y,owner:G}=parseGitUrl(h);let Re=`${l.apiBaseUrl}/projects/${G}/repos/${y}/default-branch`,lt=await fetch(Re,F(l));if(lt.status===404&&(Re=`${l.apiBaseUrl}/projects/${G}/repos/${y}/branches/default`,lt=await fetch(Re,F(l))),!lt.ok){const Sn=`Failed to retrieve default branch from ${Re}, ${lt.status} ${lt.statusText}`;throw new Error(Sn)}const{displayId:It}=await lt.json(),Vt=It;if(!Vt)throw new Error(`Failed to read default branch from ${Re}. Response ${lt.status} ${lt.json()}`);return Vt}async function An(h,l){const{name:y,owner:G,ref:Re,filepath:lt}=parseGitUrl(h);let It=Re;It||(It=await dn(h,l));const Vt=lt?`&path=${encodeURIComponent(decodeURIComponent(lt))}`:"";return`${l.apiBaseUrl}/projects/${G}/repos/${y}/archive?format=tgz&at=${It}&prefix=${G}-${y}${Vt}`}function bn(h,l){try{const{owner:y,name:G,ref:Re,filepathtype:lt,filepath:It}=parseGitUrl(h);if(!y||!G||lt!=="browse"&&lt!=="raw"&&lt!=="src")throw new Error("Invalid Bitbucket Server URL or file path");const Vt=It.replace(/^\//,"");return`${l.apiBaseUrl}/projects/${y}/repos/${G}/raw/${Vt}?at=${Re}`}catch(y){throw new Error(`Incorrect URL: ${h}, ${y}`)}}function F(h){const l={};if(h.token)l.Authorization=`Bearer ${h.token}`;else if(h.username&&h.password){const y=a.from(`${h.username}:${h.password}`,"utf8");l.Authorization=`Basic ${y.toString("base64")}`}return{headers:l}}function H(h){const l=h.getString("host");let y=h.getOptionalString("baseUrl"),G=h.getOptionalString("cloneUrl"),Re=h.getOptionalString("gitilesBaseUrl");const lt=h.getOptionalString("username"),It=h.getOptionalString("password");if(xe(l)){if(y&&!Ee(y))throw new Error(`Invalid Gerrit integration config, '${y}' is not a valid baseUrl`);if(G&&!Ee(G))throw new Error(`Invalid Gerrit integration config, '${G}' is not a valid cloneUrl`);if(Re&&!Ee(Re))throw new Error(`Invalid Gerrit integration config, '${Re}' is not a valid gitilesBaseUrl`)}else throw new Error(`Invalid Gerrit integration config, '${l}' is not a valid host`);return y?y=(0,g.trimEnd)(y,"/"):y=`https://${l}`,Re?Re=(0,g.trimEnd)(Re,"/"):Re=`https://${l}`,G?G=(0,g.trimEnd)(G,"/"):G=y,{host:l,baseUrl:y,cloneUrl:G,gitilesBaseUrl:Re,username:lt,password:It}}function Ne(h){return h.map(H)}const it=")]}'";function Gt(h,l){const y=new URL(h.gitilesBaseUrl),G=new URL(l),lt=G.pathname.substring(G.pathname.startsWith("/a/")?2:0).replace(y.pathname,"").split("/").filter(Aa=>!!Aa),It=lt.indexOf("+");if(It<=0)throw new Error(`Unable to parse project from url: ${l}`);const Vt=(0,g.trimStart)(lt.slice(0,It).join("/"),"/"),Sn=lt.indexOf("heads");if(Sn<=0)throw new Error(`Unable to parse branch from url: ${l}`);const kn=lt[Sn+1],Zn=lt.slice(Sn+2).join("/");return{branch:kn,filePath:Zn===""?"/":Zn,project:Vt}}function Dt(h,l,y,G){return`${h.gitilesBaseUrl}/${l}/+/refs/heads/${y}/${(0,g.trimStart)(G,"/")}`}function mn(h,l,y,G){const Re=G==="/"||G===""?".tar.gz":`/${G}.tar.gz`;return`${Cn(h)}/${l}/+archive/refs/heads/${y}${Re}`}function un(h){return h.password?"/a/":"/"}function Cn(h){if(!h.baseUrl||!h.gitilesBaseUrl)throw new Error("Unexpected Gerrit config values. baseUrl or gitilesBaseUrl not set.");if(h.gitilesBaseUrl.startsWith(h.baseUrl))return h.gitilesBaseUrl.replace(h.baseUrl.concat("/"),h.baseUrl.concat(un(h)));if(h.password)throw new Error("Since the baseUrl (Gerrit) is not part of the gitilesBaseUrl, an authentication URL could not be constructed.");return h.gitilesBaseUrl}function Oe(h,l){const{branch:y,project:G}=Gt(h,l);return`${h.baseUrl}${un(h)}projects/${encodeURIComponent(G)}/branches/${y}`}function $e(h,l){const{project:y}=Gt(h,l);return`${h.cloneUrl}${un(h)}${y}`}function st(h,l){const{branch:y,filePath:G,project:Re}=Gt(h,l);return`${h.baseUrl}${un(h)}projects/${encodeURIComponent(Re)}/branches/${y}/files/${encodeURIComponent(G)}/content`}function Qt(h){return`${h.baseUrl}${un(h)}projects/`}function Xt(h){const l={};if(!h.password)return l;const y=a.from(`${h.username}:${h.password}`,"utf8");return l.Authorization=`Basic ${y.toString("base64")}`,{headers:l}}async function ln(h){const l=await h.text();if(l.startsWith(it))try{return JSON.parse(l.slice(it.length))}catch(y){throw new Error(`Invalid response from Gerrit: ${l.slice(0,10)} - ${y}`)}throw new Error(`Gerrit JSON body prefix missing. Found: ${l.slice(0,10)}`)}var an=Object.defineProperty,On=(h,l,y)=>l in h?an(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Nn=(h,l,y)=>(On(h,typeof l!="symbol"?l+"":l,y),y);const Fn=class{constructor(l){this.integrationConfig=l}get type(){return"gerrit"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){const{url:y,base:G,lineNumber:Re}=l;let lt;if(y.startsWith("/")){const{branch:It,project:Vt}=Gt(this.config,G);return Dt(this.config,Vt,It,y)}return y?lt=new URL(y,G):lt=new URL(G),Re&&(lt.hash=Re.toString()),lt.toString()}resolveEditUrl(l){return l}};Nn(Fn,"factory",({config:h})=>{var l;const y=Ne((l=h.getOptionalConfigArray("integrations.gerrit"))!=null?l:[]);return se(y.map(G=>new Fn(G)),G=>G.config.host)});let ra=Fn;function En(h){const l=h.getString("host");let y=h.getOptionalString("baseUrl");const G=h.getOptionalString("username"),Re=h.getOptionalString("password");if(!xe(l))throw new Error(`Invalid Gitea integration config, '${l}' is not a valid host`);return y?y=(0,g.trimEnd)(y,"/"):y=`https://${l}`,{host:l,baseUrl:y,username:G,password:Re}}function aa(h,l){const y=qn(h,l);return`${y.url}/${y.owner}/${y.name}/_edit/${y.ref}/${y.path}`}function oa(h,l){const y=qn(h,l);return`${y.url}/api/v1/repos/${y.owner}/${y.name}/contents/${y.path}?ref=${y.ref}`}function na(h,l){const y=qn(h,l);return`${y.url}/api/v1/repos/${y.owner}/${y.name}/archive/${y.ref}.tar.gz`}function pa(h,l){const y=qn(h,l);return`${y.url}/api/v1/repos/${y.owner}/${y.name}/git/commits/${y.ref}`}function Pa(h){const l={},{username:y,password:G}=h;return G?(y?l.Authorization=`basic ${a.from(`${y}:${G}`).toString("base64")}`:l.Authorization=`token ${G}`,{headers:l}):l}function qn(h,l){var y;const G=(y=h.baseUrl)!=null?y:`https://${h.host}`;try{const[Re,lt,It,Vt,Sn,kn,...Zn]=l.replace(G,"").split("/"),Aa=Zn.join("/").replace(/^\//,"");return{url:G,owner:lt,name:It,ref:kn,path:Aa}}catch(Re){throw new Error(`Incorrect URL: ${l}, ${Re}`)}}var ya=Object.defineProperty,q=(h,l,y)=>l in h?ya(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Le=(h,l,y)=>(q(h,typeof l!="symbol"?l+"":l,y),y);const et=class{constructor(l){this.config=l}get type(){return"gitea"}get title(){return this.config.host}resolveUrl(l){return Y(l)}resolveEditUrl(l){return aa(this.config,l)}};Le(et,"factory",({config:h})=>{var l;const G=((l=h.getOptionalConfigArray("integrations.gitea"))!=null?l:[]).map(Re=>En(Re));return se(G.map(Re=>new et(Re)),Re=>Re.config.host)});let U=et;const Z="github.com",P="https://api.github.com",$="https://raw.githubusercontent.com";function N(h){var l,y;const G=(l=h.getOptionalString("host"))!=null?l:Z;let Re=h.getOptionalString("apiBaseUrl"),lt=h.getOptionalString("rawBaseUrl");const It=h.getOptionalString("token"),Vt=(y=h.getOptionalConfigArray("apps"))==null?void 0:y.map(Sn=>({appId:Sn.getNumber("appId"),clientId:Sn.getString("clientId"),clientSecret:Sn.getString("clientSecret"),webhookSecret:Sn.getString("webhookSecret"),privateKey:Sn.getString("privateKey"),allowedInstallationOwners:Sn.getOptionalStringArray("allowedInstallationOwners")}));if(!xe(G))throw new Error(`Invalid GitHub integration config, '${G}' is not a valid host`);return Re?Re=(0,g.trimEnd)(Re,"/"):G===Z&&(Re=P),lt?lt=(0,g.trimEnd)(lt,"/"):G===Z&&(lt=$),{host:G,apiBaseUrl:Re,rawBaseUrl:lt,token:It,apps:Vt}}function oe(h){const l=h.map(N);return l.some(y=>y.host===Z)||l.push({host:Z,apiBaseUrl:P,rawBaseUrl:$}),l}function pe(h,l,y){try{const{owner:G,name:Re,ref:lt,filepathtype:It,filepath:Vt}=parseGitUrl(h);if(!G||!Re||!lt||It!=="blob"&&It!=="raw"&&It!=="tree")throw new Error("Invalid GitHub URL or file path");const Sn=Vt.replace(/^\//,"");return Se(l,y)==="api"?`${l.apiBaseUrl}/repos/${G}/${Re}/contents/${Sn}?ref=${lt}`:`${l.rawBaseUrl}/${G}/${Re}/${lt}/${Sn}`}catch(G){throw new Error(`Incorrect URL: ${h}, ${G}`)}}function te(h,l){const y={};return Se(h,l)==="api"&&(y.Accept="application/vnd.github.v3.raw"),l.token&&(y.Authorization=`token ${l.token}`),{headers:y}}function Se(h,l){return h.apiBaseUrl&&(l.token||!h.rawBaseUrl)?"api":"raw"}var We=Object.defineProperty,Qe=(h,l,y)=>l in h?We(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,kt=(h,l,y)=>(Qe(h,typeof l!="symbol"?l+"":l,y),y);class Lt{constructor(){kt(this,"tokenCache",new Map),kt(this,"isExpired",l=>Ze.ou.local()>l)}async getOrCreateToken(l,y,G){let Re=this.tokenCache.get(l);if((!Re||this.isExpired(Re.expiresAt))&&(Re=await G(),Re.expiresAt=Re.expiresAt.minus({minutes:10}),this.tokenCache.set(l,Re)),!this.appliesToRepo(Re,y))throw new Error(`The Backstage GitHub application used in the ${l} organization does not have access to a repository with the name ${y}`);return{accessToken:Re.token}}appliesToRepo(l,y){return y===void 0?!0:l.repositories!==void 0?l.repositories.includes(y):!0}}const tn={Accept:"application/vnd.github.machine-man-preview+json"};class on{constructor(l,y){kt(this,"appClient"),kt(this,"baseUrl"),kt(this,"baseAuthConfig"),kt(this,"cache",new Lt),kt(this,"allowedInstallationOwners"),this.allowedInstallationOwners=l.allowedInstallationOwners,this.baseUrl=y,this.baseAuthConfig={appId:l.appId,privateKey:l.privateKey.replace(/\\n/gm,`
`)},this.appClient=new He.v({baseUrl:y,headers:tn,authStrategy:z.i,auth:this.baseAuthConfig})}async getInstallationCredentials(l,y){var G;return this.allowedInstallationOwners&&!((G=this.allowedInstallationOwners)!=null&&G.includes(l))?{accessToken:void 0}:this.cache.getOrCreateToken(l,y,async()=>{var Re;const{installationId:lt,suspended:It}=await this.getInstallationData(l);if(It)throw new Error(`The GitHub application for ${l} is suspended`);const Vt=await this.appClient.apps.createInstallationAccessToken({installation_id:lt,headers:tn});let Sn;if(Vt.data.repository_selection==="selected"){const kn=new He.v({baseUrl:this.baseUrl,auth:Vt.data.token}),Zn=await kn.paginate(kn.apps.listReposAccessibleToInstallation);Sn=((Re=Zn.repositories)!=null?Re:Zn).map(Va=>Va.name)}return{token:Vt.data.token,expiresAt:Ze.ou.fromISO(Vt.data.expires_at),repositories:Sn}})}getInstallations(){return this.appClient.paginate(this.appClient.apps.listInstallations)}async getInstallationData(l){const G=(await this.getInstallations()).find(lt=>{var It;return lt.account&&"login"in lt.account&&((It=lt.account.login)==null?void 0:It.toLocaleLowerCase("en-US"))===l.toLocaleLowerCase("en-US")});if(G)return{installationId:G.id,suspended:Boolean(G.suspended_by)};const Re=new Error(`No app installation found for ${l} in ${this.baseAuthConfig.appId}`);throw Re.name="NotFoundError",Re}}class vn{constructor(l){kt(this,"apps");var y,G;this.apps=(G=(y=l.apps)==null?void 0:y.map(Re=>new on(Re,l.apiBaseUrl)))!=null?G:[]}async getAllInstallations(){return this.apps.length?(await Promise.all(this.apps.map(y=>y.getInstallations()))).flat():[]}async getAppToken(l,y){if(this.apps.length===0)return;const G=await Promise.all(this.apps.map(Vt=>Vt.getInstallationCredentials(l,y).then(Sn=>({credentials:Sn,error:void 0}),Sn=>({credentials:void 0,error:Sn})))),Re=G.find(Vt=>{var Sn;return(Sn=Vt.credentials)==null?void 0:Sn.accessToken});if(Re)return Re.credentials.accessToken;const It=G.map(Vt=>Vt.error).find(Vt=>(Vt==null?void 0:Vt.name)!=="NotFoundError");if(It)throw It}}const cn=class{constructor(l,y){this.githubAppCredentialsMux=l,this.token=y}async getCredentials(l){const y=p()(l.url),G=y.owner||y.name,Re=y.owner?y.name:void 0;let lt="app",It=await this.githubAppCredentialsMux.getAppToken(G,Re);return It||(lt="token",It=this.token),{headers:It?{Authorization:`Bearer ${It}`}:void 0,token:It,type:lt}}};kt(cn,"create",h=>new cn(new vn(h),h.token));let gn=null;class yn{constructor(l){this.providers=l}static fromIntegrations(l){const y=new Map;return l.github.list().forEach(G=>{const Re=gn.create(G.config);y.set(G.config.host,Re)}),new yn(y)}async getCredentials(l){const y=new URL(l.url),G=this.providers.get(y.host);if(!G)throw new Error(`There is no GitHub integration that matches ${l.url}. Please add a configuration for an integration.`);return G.getCredentials(l)}}var Bn=Object.defineProperty,Qn=(h,l,y)=>l in h?Bn(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,jn=(h,l,y)=>(Qn(h,typeof l!="symbol"?l+"":l,y),y);const Kn=class{constructor(l){this.integrationConfig=l}get type(){return"github"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){return Jn(Y(l),"tree")}resolveEditUrl(l){return Jn(l,"edit")}};jn(Kn,"factory",({config:h})=>{var l;const y=oe((l=h.getOptionalConfigArray("integrations.github"))!=null?l:[]);return se(y.map(G=>new Kn(G)),G=>G.config.host)});let Dn=Kn;function Jn(h,l){return h.replace(/\/\/([^/]+)\/([^/]+)\/([^/]+)\/(blob|tree|edit)\//,(y,G,Re,lt)=>`//${G}/${Re}/${lt}/${l}/`)}var fn=Object.defineProperty,wn=(h,l,y)=>l in h?fn(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,sa=(h,l,y)=>(wn(h,typeof l!="symbol"?l+"":l,y),y);const ua=null;class Ia extends Dn{constructor(l){super(l)}get config(){return super.config}}sa(Ia,"factory",Dn.factory);const Na=null,za=null,Fa=null,xa="gitlab.com",Da="https://gitlab.com/api/v4";function Ga(h){const l=h.getString("host");let y=h.getOptionalString("apiBaseUrl");const G=h.getOptionalString("token");let Re=h.getOptionalString("baseUrl");if(y?y=(0,g.trimEnd)(y,"/"):l===xa&&(y=Da),Re?Re=(0,g.trimEnd)(Re,"/"):Re=`https://${l}`,xe(l)){if(!y||!Ee(y))throw new Error(`Invalid GitLab integration config, '${y}' is not a valid apiBaseUrl`);if(!Ee(Re))throw new Error(`Invalid GitLab integration config, '${Re}' is not a valid baseUrl`)}else throw new Error(`Invalid GitLab integration config, '${l}' is not a valid host`);return{host:l,token:G,apiBaseUrl:y,baseUrl:Re}}function ja(h){const l=h.map(Ga);return l.some(y=>y.host===xa)||l.push({host:xa,apiBaseUrl:Da,baseUrl:`https://${xa}`}),l}function Xa(h){let l="";return h.host!==xa&&(l=new URL(h.baseUrl).pathname),trimEnd(l,"/")}async function cr(h,l){const y=await ia(h,l);return Oa(h,y,l).toString()}function nr(h){const{token:l=""}=h;return{headers:{"PRIVATE-TOKEN":l}}}function Oa(h,l,y){try{const G=new URL(h),Re=G.pathname.split("/blob/").slice(1).join("/blob/"),[lt,...It]=Re.split("/"),Vt=Xa(y);return G.pathname=[...Vt?[Vt]:[],"api/v4/projects",l,"repository/files",encodeURIComponent(decodeURIComponent(It.join("/"))),"raw"].join("/"),G.search=`?ref=${lt}`,G}catch(G){throw new Error(`Incorrect url: ${h}, ${G}`)}}async function ia(h,l){const y=new URL(h);if(!y.pathname.includes("/blob/"))throw new Error("Please provide full path to yaml file from GitLab");try{let G=y.pathname.split("/-/blob/")[0].split("/blob/")[0];const Re=Xa(l);Re&&(G=G.replace(Re,""));const lt=new URL(`${y.origin}${Re}/api/v4/projects/${encodeURIComponent(G.replace(/^\//,""))}`),It=await fetch(lt.toString(),nr(l)),Vt=await It.json();if(!It.ok)throw new Error(`GitLab Error '${Vt.error}', ${Vt.error_description}`);return Number(Vt.id)}catch(G){throw new Error(`Could not get GitLab project ID for: ${h}, ${G}`)}}var la=Object.defineProperty,Qa=(h,l,y)=>l in h?la(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Ba=(h,l,y)=>(Qa(h,typeof l!="symbol"?l+"":l,y),y);const ar=class{constructor(l){this.integrationConfig=l}get type(){return"gitlab"}get title(){return this.integrationConfig.host}get config(){return this.integrationConfig}resolveUrl(l){return Y(l)}resolveEditUrl(l){return ue(l,"edit")}};Ba(ar,"factory",({config:h})=>{var l;const y=ja((l=h.getOptionalConfigArray("integrations.gitlab"))!=null?l:[]);return se(y.map(G=>new ar(G)),G=>G.config.host)});let je=ar;function ue(h,l){return h.replace(/\/\-\/(blob|tree|edit)\//,`/-/${l}/`)}var Ct=Object.defineProperty,Rn=(h,l,y)=>l in h?Ct(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Un=(h,l,y)=>(Rn(h,typeof l!="symbol"?l+"":l,y),y);const ea=class{constructor(l){this.token=l}async getCredentials(l){return this.token?{headers:{Authorization:`Bearer ${this.token}`},token:this.token}:{}}};Un(ea,"create",h=>new ea(h.token));let fa=null;class Za{constructor(l){this.providers=l}static fromIntegrations(l){const y=new Map;return l.gitlab.list().forEach(G=>{const Re=fa.create(G.config);y.set(G.config.host,Re)}),new Za(y)}async getCredentials(l){const y=new URL(l.url),G=this.providers.get(y.host);if(!G)throw new Error(`There is no GitLab integration that matches ${l.url}. Please add a configuration for an integration.`);return G.getCredentials(l)}}function Ka(h){if(!h)return{};if(!h.has("clientEmail")&&!h.has("privateKey"))return{};const l=h.getString("privateKey").split("\\n").join(`
`);return{clientEmail:h.getString("clientEmail"),privateKey:l}}var _a=Object.defineProperty,Ua=(h,l,y)=>l in h?_a(h,l,{enumerable:!0,configurable:!0,writable:!0,value:y}):h[l]=y,Ma=(h,l,y)=>(Ua(h,typeof l!="symbol"?l+"":l,y),y);class qa{constructor(l){Ma(this,"byType"),this.byType=l}static fromConfig(l){return new qa({awsS3:S.factory({config:l}),azure:dt.factory({config:l}),bitbucket:vt.factory({config:l}),bitbucketCloud:ot.factory({config:l}),bitbucketServer:jt.factory({config:l}),gerrit:ra.factory({config:l}),github:Dn.factory({config:l}),gitlab:je.factory({config:l}),gitea:U.factory({config:l})})}get awsS3(){return this.byType.awsS3}get azure(){return this.byType.azure}get bitbucket(){return this.byType.bitbucket}get bitbucketCloud(){return this.byType.bitbucketCloud}get bitbucketServer(){return this.byType.bitbucketServer}get gerrit(){return this.byType.gerrit}get github(){return this.byType.github}get gitlab(){return this.byType.gitlab}get gitea(){return this.byType.gitea}list(){return Object.values(this.byType).flatMap(l=>l.list())}byUrl(l){let y=Object.values(this.byType).map(G=>G.byUrl(l)).filter(Boolean);if(y.length>1){const G=y.filter(Re=>!(Re instanceof vt));G.length!==0&&(y=G)}return y[0]}byHost(l){return Object.values(this.byType).map(y=>y.byHost(l)).find(Boolean)}resolveUrl(l){const y=this.byUrl(l.base);return y?y.resolveUrl(l):Y(l)}resolveEditUrl(l){const y=this.byUrl(l);return y?y.resolveEditUrl(l):l}}},71900:(xn,Yt,e)=>{"use strict";e.d(Yt,{Cy:()=>re,DC:()=>fe,OO:()=>Je,RE:()=>he,XQ:()=>ft,Yq:()=>bt,ap:()=>nn,bM:()=>qt,cm:()=>Ft,d1:()=>D,fP:()=>ee,fe:()=>I,gC:()=>wt,hK:()=>ae,hs:()=>W,nE:()=>ke,x1:()=>Ke,zJ:()=>O});var i=e(2784),p=e(73557),g=e(49558),j=e(30705),k=e(57032),o=e(27420),z=e(73495),He=e(78373),Ze=e(99688),a=e(13737),xe=e(60364),Ee=e(90436),se=e(79692),Y=e(95544),Fe=e(8629),ge=e(79249),_e=e(38724),Q=e(99152),be=e(6487),M=e(49429),c=e(77277),S=e(34520),_=e(15933);const b=(0,j.NT)({id:"api-docs"}),m=(0,j.x8)({id:"register-component",optional:!0}),ve=[o.C.columns.createTitleColumn({hidden:!0}),o.C.columns.createNameColumn({defaultKind:"API"}),o.C.columns.createSystemColumn(),o.C.columns.createOwnerColumn(),o.C.columns.createSpecTypeColumn(),o.C.columns.createSpecLifecycleColumn(),o.C.columns.createMetadataDescriptionColumn(),o.C.columns.createTagsColumn()],ee=Ae=>{var Te;const{initiallySelectedFilter:vt="all",columns:Tt,actions:At}=Ae,St=`${(Te=(0,k.u)(k.p).getOptionalString("organization.name"))!=null?Te:"Backstage"} API Explorer`,Ue=(0,j.tg)(m);return i.createElement(g.g9,{themeId:"apis",title:"APIs",subtitle:St,pageTitleOverride:"APIs"},i.createElement(g.VY,null,i.createElement(g.yW,{title:""},i.createElement(g.XF,{title:"Register Existing API",to:Ue==null?void 0:Ue()}),i.createElement(g.qt,null,"All your APIs")),i.createElement(z.UO,null,i.createElement(z._i,null,i.createElement(z._i.Filters,null,i.createElement(z.tW,{initialFilter:"api",hidden:!0}),i.createElement(z.sL,null),i.createElement(z.EW,{initialFilter:vt}),i.createElement(z.dq,null),i.createElement(z.df,null),i.createElement(z.xE,null)),i.createElement(z._i.Content,null,i.createElement(o.C,{columns:Tt||ve,actions:At}))))))},he=Ae=>(0,p.pC)()||i.createElement(ee,{...Ae}),J=(0,k.c)({id:"plugin.api-docs.config"}),ne=Ae=>i.createElement(g.Oi,{text:Ae.definition,language:Ae.language,showCopyCodeButton:!0}),re=()=>{var Ae;const{entity:Te}=(0,He.u)(),vt=(0,k.u)(J),{getApiDefinitionWidget:Tt}=vt;if(!Te)return i.createElement(Ze.Z,{severity:"error"},"Could not fetch the API");const At=Tt(Te),Wt=(Ae=Te.metadata.title)!=null?Ae:Te.metadata.name;return At?i.createElement(g.oZ,{title:Wt},i.createElement(g.hB,{label:At.title,key:"widget"},At.component(Te.spec.definition)),i.createElement(g.hB,{label:"Raw",key:"raw"},i.createElement(ne,{definition:Te.spec.definition,language:At.rawLanguage||Te.spec.type}))):i.createElement(g.oZ,{title:Wt,children:[i.createElement(g.hB,{label:Te.spec.type,key:"raw"},i.createElement(ne,{definition:Te.spec.definition,language:Te.spec.type}))]})},Pe=i.lazy(()=>Promise.all([e.e(1978),e.e(7639),e.e(8847),e.e(4908)]).then(e.bind(e,24908)).then(Ae=>({default:Ae.AsyncApiDefinition}))),Pt=Ae=>i.createElement(i.Suspense,{fallback:i.createElement(g.Ex,null)},i.createElement(Pe,{...Ae})),T=i.lazy(()=>e.e(4526).then(e.bind(e,64526)).then(Ae=>({default:Ae.GraphQlDefinition}))),rn=Ae=>i.createElement(i.Suspense,{fallback:i.createElement(g.Ex,null)},i.createElement(T,{...Ae})),de=i.lazy(()=>Promise.all([e.e(1978),e.e(7639),e.e(7126)]).then(e.bind(e,77126)).then(Ae=>({default:Ae.OpenApiDefinition}))),Bt=Ae=>i.createElement(i.Suspense,{fallback:i.createElement(g.Ex,null)},i.createElement(de,{...Ae})),ut=Ae=>{const Te=(0,xe.Z)();return i.createElement(g.Oi,{customStyle:{backgroundColor:Te.palette.background.default},text:Ae.definition,language:"protobuf",showCopyCodeButton:!0})},rt=Ae=>{const{definition:Te}=Ae,vt=(0,xe.Z)();return i.createElement(g.Oi,{customStyle:{backgroundColor:vt.palette.background.default},text:Te,language:"typescript",showCopyCodeButton:!0})};function bt(){return[{type:"openapi",title:"OpenAPI",rawLanguage:"yaml",component:Ae=>i.createElement(Bt,{definition:Ae})},{type:"asyncapi",title:"AsyncAPI",rawLanguage:"yaml",component:Ae=>i.createElement(Pt,{definition:Ae})},{type:"graphql",title:"GraphQL",rawLanguage:"graphql",component:Ae=>i.createElement(rn,{definition:Ae})},{type:"grpc",title:"gRPC",component:Ae=>i.createElement(ut,{definition:Ae})},{type:"trpc",title:"tRPC",component:Ae=>i.createElement(rt,{definition:Ae})}]}const ke=Ae=>{const{apiEntity:Te}=Ae,Tt=(0,k.u)(J).getApiDefinitionWidget(Te),At=Tt?Tt.title:Te.spec.type;return i.createElement(Ee.Z,{component:"span"},At)},_t=(0,se.Z)(Ae=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",height:"100%"},tabs:{borderRight:`1px solid ${Ae.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"},title:{color:Ae.palette.text.primary,wordBreak:"break-word",fontSize:Ae.typography.h3.fontSize,marginBottom:0},type:{textTransform:"uppercase",fontSize:11,opacity:.8,marginBottom:Ae.spacing(1),color:Ae.palette.text.primary}}));function at(Ae){const{children:Te,value:vt,index:Tt,...At}=Ae,Wt=_t();return i.createElement("div",{role:"tabpanel",hidden:vt!==Tt,id:`vertical-tabpanel-${Tt}`,"aria-labelledby":`vertical-tab-${Tt}`,className:Wt.tabContents,...At},vt===Tt&&i.createElement(Y.Z,{pl:3,pr:3},Te))}function zt(Ae){return{id:`vertical-tab-${Ae}`,"aria-controls":`vertical-tabpanel-${Ae}`}}function Ot(Ae){var Te,vt,Tt;const{open:At,entity:Wt,onClose:St}=Ae,[Ue,Xe]=i.useState(0),Mt=_t();(0,i.useEffect)(()=>{Xe(0)},[At]);const Be=(0,k.u)(J).getApiDefinitionWidget(Wt);let ie=0,Ge=0;return i.createElement(Fe.Z,{fullWidth:!0,maxWidth:"xl",open:At,onClose:St,"aria-labelledby":"api-definition-dialog-title",PaperProps:{className:Mt.fullHeightDialog}},i.createElement(ge.Z,{id:"api-definition-dialog-title",disableTypography:!0},i.createElement(Ee.Z,{className:Mt.type},"API - ",(Te=Be==null?void 0:Be.title)!=null?Te:"Raw"),i.createElement(Ee.Z,{className:Mt.title,variant:"h1"},(vt=Wt.metadata.title)!=null?vt:Wt.metadata.name)),i.createElement(_e.Z,{dividers:!0,className:Mt.root},i.createElement(Q.Z,{orientation:"vertical",variant:"scrollable",value:Ue,onChange:(tt,ot)=>Xe(ot),"aria-label":"API definition options",className:Mt.tabs},Be?i.createElement(be.Z,{label:Be.title,...zt(ie++)}):null,i.createElement(be.Z,{label:"Raw",...zt(ie++)})),Be?i.createElement(at,{value:Ue,index:Ge++},Be.component(Wt.spec.definition)):null,i.createElement(at,{value:Ue,index:Ge++},i.createElement(ne,{definition:Wt.spec.definition,language:(Tt=Be==null?void 0:Be.rawLanguage)!=null?Tt:Wt.spec.type}))),i.createElement(M.Z,null,i.createElement(c.Z,{onClick:St,color:"primary"},"Close")))}function Zt(){return{title:"Type",field:"spec.type",render:Ae=>i.createElement(ke,{apiEntity:Ae})}}const dt=({apiEntity:Ae})=>{const[Te,vt]=(0,i.useState)(!1);return i.createElement(i.Fragment,null,i.createElement(a.Z,{"aria-label":"Toggle API Definition Dialog",onClick:()=>vt(!Te)},i.createElement(_.Z,null)),i.createElement(Ot,{entity:Ae,open:Te,onClose:()=>vt(!1)}))};function gt(){return{title:"API Definition",render:Ae=>i.createElement(dt,{apiEntity:Ae})}}const Ut=[z.u3.columns.createEntityRefColumn({defaultKind:"API"}),z.u3.columns.createSystemColumn(),z.u3.columns.createOwnerColumn(),Zt(),z.u3.columns.createSpecLifecycleColumn(),z.u3.columns.createMetadataDescriptionColumn(),gt()],qt=Ae=>{const{variant:Te="gridItem",columns:vt=Ut}=Ae,{entity:Tt}=(0,He.u)(),{entities:At,loading:Wt,error:St}=(0,z.eK)(Tt,{type:S.Dg});return Wt?i.createElement(g.rJ,{variant:Te,title:"Consumed APIs"},i.createElement(g.Ex,null)):St||!At?i.createElement(g.rJ,{variant:Te,title:"Consumed APIs"},i.createElement(g.GB,{severity:"error",title:"Could not load APIs",message:i.createElement(g.Oi,{text:`${St}`,language:"text"})})):i.createElement(z.u3,{title:"Consumed APIs",variant:Te,emptyContent:i.createElement("div",{style:{textAlign:"center"}},i.createElement(Ee.Z,{variant:"body1"},"This ",Tt.kind.toLocaleLowerCase("en-US")," does not consume any APIs."),i.createElement(Ee.Z,{variant:"body2"},i.createElement(g.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:vt,entities:At})},yt=[z.u3.columns.createEntityRefColumn({defaultKind:"API"}),z.u3.columns.createOwnerColumn(),Zt(),z.u3.columns.createSpecLifecycleColumn(),z.u3.columns.createMetadataDescriptionColumn()],Ft=Ae=>{const{variant:Te="gridItem",columns:vt=yt}=Ae,{entity:Tt}=(0,He.u)(),{entities:At,loading:Wt,error:St}=(0,z.eK)(Tt,{type:S.aS,kind:"API"});return Wt?i.createElement(g.rJ,{variant:Te,title:"APIs"},i.createElement(g.Ex,null)):St||!At?i.createElement(g.rJ,{variant:Te,title:"APIs"},i.createElement(g.GB,{severity:"error",title:"Could not load APIs",message:i.createElement(g.Oi,{text:`${St}`,language:"text"})})):i.createElement(z.u3,{title:"APIs",variant:Te,emptyContent:i.createElement("div",{style:{textAlign:"center"}},i.createElement(Ee.Z,{variant:"body1"},"This ",Tt.kind.toLocaleLowerCase("en-US")," does not contain any APIs."),i.createElement(Ee.Z,{variant:"body2"},i.createElement(g.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#kind-api"},"Learn how to change this."))),columns:vt,entities:At})},I=Ae=>{const{variant:Te="gridItem",columns:vt=Ut}=Ae,{entity:Tt}=(0,He.u)(),{entities:At,loading:Wt,error:St}=(0,z.eK)(Tt,{type:S.M_});return Wt?i.createElement(g.rJ,{variant:Te,title:"Provided APIs"},i.createElement(g.Ex,null)):St||!At?i.createElement(g.rJ,{variant:Te,title:"Provided APIs"},i.createElement(g.GB,{severity:"error",title:"Could not load APIs",message:i.createElement(g.Oi,{text:`${St}`,language:"text"})})):i.createElement(z.u3,{title:"Provided APIs",variant:Te,emptyContent:i.createElement("div",{style:{textAlign:"center"}},i.createElement(Ee.Z,{variant:"body1"},"This ",Tt.kind.toLocaleLowerCase("en-US")," does not provide any APIs."),i.createElement(Ee.Z,{variant:"body2"},i.createElement(g.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:vt,entities:At})},W=Ae=>{const{variant:Te="gridItem"}=Ae,{entity:vt}=(0,He.u)(),{entities:Tt,loading:At,error:Wt}=(0,z.eK)(vt,{type:S.X9});return At?i.createElement(g.rJ,{variant:Te,title:"Consumers"},i.createElement(g.Ex,null)):Wt||!Tt?i.createElement(g.rJ,{variant:Te,title:"Consumers"},i.createElement(g.GB,{severity:"error",title:"Could not load components",message:i.createElement(g.Oi,{text:`${Wt}`,language:"text"})})):i.createElement(z.u3,{title:"Consumers",variant:Te,emptyContent:i.createElement("div",{style:{textAlign:"center"}},i.createElement(Ee.Z,{variant:"body1"},"No component consumes this API."),i.createElement(Ee.Z,{variant:"body2"},i.createElement(g.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specconsumesapis-optional"},"Learn how to change this."))),columns:z.u3.componentEntityColumns,entities:Tt})},O=Ae=>{const{variant:Te="gridItem"}=Ae,{entity:vt}=(0,He.u)(),{entities:Tt,loading:At,error:Wt}=(0,z.eK)(vt,{type:S.Zj});return At?i.createElement(g.rJ,{variant:Te,title:"Providers"},i.createElement(g.Ex,null)):Wt||!Tt?i.createElement(g.rJ,{variant:Te,title:"Providers"},i.createElement(g.GB,{severity:"error",title:"Could not load components",message:i.createElement(g.Oi,{text:`${Wt}`,language:"text"})})):i.createElement(z.u3,{title:"Providers",variant:Te,emptyContent:i.createElement("div",{style:{textAlign:"center"}},i.createElement(Ee.Z,{variant:"body1"},"No component provides this API."),i.createElement(Ee.Z,{variant:"body2"},i.createElement(g.rU,{to:"https://backstage.io/docs/features/software-catalog/descriptor-format#specprovidesapis-optional"},"Learn how to change this."))),columns:z.u3.componentEntityColumns,entities:Tt})},D=(0,j.rx)({id:"api-docs",routes:{root:b},apis:[(0,j.ni)({api:J,deps:{},factory:()=>{const Ae=bt();return{getApiDefinitionWidget:Te=>Ae.find(vt=>vt.type===Te.spec.type)}}})],externalRoutes:{registerApi:m}}),ae=D.provide((0,j.P4)({name:"ApiExplorerPage",component:()=>e.e(6868).then(e.bind(e,36868)).then(Ae=>Ae.ApiExplorerIndexPage),mountPoint:b})),fe=D.provide((0,j.CO)({name:"EntityApiDefinitionCard",component:{lazy:()=>e.e(3895).then(e.bind(e,53895)).then(Ae=>Ae.ApiDefinitionCard)}})),Ke=D.provide((0,j.CO)({name:"EntityConsumedApisCard",component:{lazy:()=>e.e(8359).then(e.bind(e,68359)).then(Ae=>Ae.ConsumedApisCard)}})),ft=D.provide((0,j.CO)({name:"EntityConsumingComponentsCard",component:{lazy:()=>e.e(7771).then(e.bind(e,7771)).then(Ae=>Ae.ConsumingComponentsCard)}})),Je=D.provide((0,j.CO)({name:"EntityProvidedApisCard",component:{lazy:()=>e.e(8359).then(e.bind(e,68359)).then(Ae=>Ae.ProvidedApisCard)}})),wt=D.provide((0,j.CO)({name:"EntityProvidingComponentsCard",component:{lazy:()=>e.e(7771).then(e.bind(e,7771)).then(Ae=>Ae.ProvidingComponentsCard)}})),nn=D.provide((0,j.CO)({name:"EntityHasApisCard",component:{lazy:()=>e.e(8359).then(e.bind(e,68359)).then(Ae=>Ae.HasApisCard)}}))},75650:(xn,Yt,e)=>{"use strict";e.d(Yt,{es:()=>o,j8:()=>k,x7:()=>j});var i=e(5083);const p="catalog-entity",g=(0,i.J$)({name:"catalog.entity.read",attributes:{action:"read"},resourceType:p}),j=(0,i.J$)({name:"catalog.entity.create",attributes:{action:"create"}}),k=(0,i.J$)({name:"catalog.entity.delete",attributes:{action:"delete"},resourceType:p}),o=(0,i.J$)({name:"catalog.entity.refresh",attributes:{action:"update"},resourceType:p}),z=(0,i.J$)({name:"catalog.location.read",attributes:{action:"read"}}),He=(0,i.J$)({name:"catalog.location.create",attributes:{action:"create"}}),Ze=(0,i.J$)({name:"catalog.location.delete",attributes:{action:"delete"}}),a=[g,j,k,o,z,He,Ze]},98487:(xn,Yt,e)=>{"use strict";e.d(Yt,{Az:()=>T,Ho:()=>re,Nm:()=>b,_U:()=>ne,t0:()=>rn,vw:()=>_});var i=e(34520),p=e(49558),g=e(30705),j=e(57032),k=e(79692),o=e(60364),z=e(4614),He=e(72779),Ze=e.n(He),a=e(2784),xe=e(10368),Ee=e(73495),se=e(39412),Y=e(48760),Fe=e(14162),ge=e.n(Fe),_e=e(69294);const Q=(0,xe.Z)(de=>({text:{fill:de.palette.textContrast},secondary:{fill:de.palette.textSubtle}}),{name:"PluginCatalogGraphCustomLabel"});function be({edge:{relations:de}}){const Bt=Q();return a.createElement("text",{className:Bt.text,textAnchor:"middle"},de.map((ut,rt)=>a.createElement("tspan",{key:ut,className:Ze()(rt>0&&Bt.secondary)},rt>0&&a.createElement("tspan",null," / "),ut)))}function M({kind:de,...Bt}){var ut;const bt=(ut=(0,g.qD)().getSystemIcon(`kind:${de.toLocaleLowerCase("en-US")}`))!=null?ut:se.Z;return a.createElement(bt,{...Bt})}const c=(0,k.Z)(de=>({node:{fill:de.palette.grey[300],stroke:de.palette.grey[300],"&.primary":{fill:de.palette.primary.light,stroke:de.palette.primary.light},"&.secondary":{fill:de.palette.secondary.light,stroke:de.palette.secondary.light}},text:{fill:de.palette.getContrastText(de.palette.grey[300]),"&.primary":{fill:de.palette.primary.contrastText},"&.secondary":{fill:de.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}),{name:"PluginCatalogGraphCustomNode"});function S({node:{id:de,entity:Bt,color:ut="default",focused:rt,onClick:bt}}){const ke=c(),[_t,at]=(0,a.useState)(0),[zt,Ot]=(0,a.useState)(0),Zt=(0,a.useRef)(null);(0,a.useLayoutEffect)(()=>{if(Zt.current){let{height:ae,width:fe}=Zt.current.getBBox();ae=Math.round(ae),fe=Math.round(fe),(ae!==zt||fe!==_t)&&(at(fe),Ot(ae))}},[_t,zt]);const{kind:dt,metadata:{name:gt,namespace:Ut=i.zG,title:qt}}=Bt,yt=10,Ft=zt,I=dt?Ft+yt:0,W=I+_t+yt*2,O=zt+yt*2,D=qt!=null?qt:dt&&gt&&Ut?(0,Ee.$3)({kind:dt,name:gt,namespace:Ut}):de;return a.createElement("g",{onClick:bt,className:Ze()(bt&&ke.clickable)},a.createElement("rect",{className:Ze()(ke.node,ut==="primary"&&"primary",ut==="secondary"&&"secondary"),width:W,height:O,rx:10}),dt&&a.createElement(M,{kind:dt,y:yt,x:yt,width:Ft,height:Ft,className:Ze()(ke.text,rt&&"focused",ut==="primary"&&"primary",ut==="secondary"&&"secondary")}),a.createElement("text",{ref:Zt,className:Ze()(ke.text,rt&&"focused",ut==="primary"&&"primary",ut==="secondary"&&"secondary"),y:O/2,x:I+(_t+yt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},D))}const _=[[i.$1,i.S4],[i.Dg,i.X9],[i.Zj,i.M_],[i.aS,i.cz],[i._b,i.wP],[i.KS,i.hr],[i.nP,i.w$]];var b=(de=>(de.TOP_BOTTOM="TB",de.BOTTOM_TOP="BT",de.LEFT_RIGHT="LR",de.RIGHT_LEFT="RL",de))(b||{});const m=ge()(10);function ve(){const de=(0,j.u)(Ee.Ah),Bt=(0,a.useRef)({requestedEntities:new Set,outstandingEntities:new Map,cachedEntities:new Map}),[ut,rt]=(0,a.useState)({}),bt=(0,a.useCallback)(()=>{const{cachedEntities:Zt,requestedEntities:dt}=Bt.current,gt={};dt.forEach(Ut=>{const qt=Zt.get(Ut);qt&&(gt[Ut]=qt)}),rt(gt)},[Bt,rt]),[ke,_t]=(0,_e.default)(async()=>{const{requestedEntities:Zt,outstandingEntities:dt,cachedEntities:gt}=Bt.current;await Promise.all(Array.from(Zt).map(Ut=>m(async()=>{if(gt.has(Ut))return;if(dt.has(Ut)){await dt.get(Ut);return}const qt=de.getEntityByRef(Ut);dt.set(Ut,qt);try{const yt=await qt;yt&&(gt.set(Ut,yt),bt())}finally{dt.delete(Ut)}})))},[Bt,bt]),{loading:at,error:zt}=ke,Ot=(0,a.useCallback)(Zt=>{const dt=new Set(Zt),{requestedEntities:gt}=Bt.current;(dt.size!==gt.size||Array.from(dt).some(Ut=>!gt.has(Ut)))&&(Bt.current.requestedEntities=dt,_t(),bt())},[Bt,_t,bt]);return{entities:ut,loading:at,error:zt,requestEntities:Ot}}function ee({rootEntityRefs:de,filter:{maxDepth:Bt=Number.POSITIVE_INFINITY,relations:ut,kinds:rt}={}}){const{entities:bt,loading:ke,error:_t,requestEntities:at}=ve();return(0,a.useEffect)(()=>{const zt=new Set([...de]),Ot=new Set;let Zt=[...de],dt=0;for(;Zt.length>0&&(!isFinite(Bt)||dt<Bt);){const gt=Zt;for(Zt=[];gt.length>0;){const Ut=gt.shift(),qt=bt[Ut];if(Ot.add(Ut),qt&&qt.relations)for(const yt of qt.relations)(!ut||ut.includes(yt.type))&&(!rt||rt.some(Ft=>yt.targetRef.startsWith(`${Ft.toLocaleLowerCase("en-US")}:`)))&&(Ot.has(yt.targetRef)||(Zt.push(yt.targetRef),zt.add(yt.targetRef)))}++dt}at([...zt])},[bt,de,Bt,ut,rt,at]),{entities:bt,loading:ke,error:_t}}function he({rootEntityRefs:de,maxDepth:Bt=Number.POSITIVE_INFINITY,unidirectional:ut=!0,mergeRelations:rt=!0,kinds:bt,relations:ke,onNodeClick:_t,relationPairs:at=_}){const[zt,Ot]=(0,a.useState)({}),{entities:Zt,loading:dt,error:gt}=ee({rootEntityRefs:de,filter:{maxDepth:Bt,kinds:bt,relations:ke}});return(0,Y.Z)(()=>{var Ut;if(!Zt||Object.keys(Zt).length===0){Ot({});return}const qt=Object.entries(Zt).map(([W,O])=>{const D=de.includes(W),ae={id:W,entity:O,focused:D,color:D?"secondary":"primary",kind:O.kind,name:O.metadata.name,namespace:O.metadata.namespace||i.zG,title:O.metadata.title,spec:O.spec};return _t&&(ae.onClick=fe=>_t(ae,fe)),ae}),yt=[],Ft=new Set,I=[...de];for(;I.length>0;){const W=I.pop(),O=Zt[W];Ft.add(W),O&&((Ut=O==null?void 0:O.relations)==null||Ut.forEach(D=>{var ae;if(Zt[D.targetRef]&&!(ke&&!ke.includes(D.type))&&!(bt&&!bt.some(fe=>D.targetRef.startsWith(`${fe.toLocaleLowerCase("en-US")}:`)))){if(!ut||!Ft.has(D.targetRef))if(rt){const fe=(ae=at.find(([ft,Je])=>ft===D.type||Je===D.type))!=null?ae:[D.type],[Ke]=fe;yt.push({from:Ke===D.type?W:D.targetRef,to:Ke===D.type?D.targetRef:W,relations:fe,label:"visible"})}else yt.push({from:W,to:D.targetRef,relations:[D.type],label:"visible"});Ft.has(D.targetRef)||(I.push(D.targetRef),Ft.add(D.targetRef))}}))}Ot({nodes:qt,edges:yt})},100,[Zt,de,bt,ke,ut,rt,_t,at]),{loading:dt,error:gt,...zt}}const J=(0,k.Z)(de=>({progress:{position:"absolute",left:"50%",top:"50%",marginLeft:"-20px",marginTop:"-20px"},container:{position:"relative",width:"100%",display:"flex",flexDirection:"column"},graph:{width:"100%",flex:1,"& path[marker-end]":{transition:"filter 0.1s ease-in-out"},"& path[marker-end]:hover":{filter:`drop-shadow(2px 2px 4px ${de.palette.primary.dark});`},"& g[data-testid=label]":{transition:"transform 0s"}}}),{name:"PluginCatalogGraphEntityRelationsGraph"}),ne=de=>{const{rootEntityNames:Bt,maxDepth:ut=2,unidirectional:rt=!0,mergeRelations:bt=!0,kinds:ke,relations:_t,direction:at=b.LEFT_RIGHT,onNodeClick:zt,relationPairs:Ot=_,className:Zt,zoom:dt="enabled",renderNode:gt,renderLabel:Ut,curve:qt}=de,yt=(0,o.Z)(),Ft=J(),I=(0,a.useMemo)(()=>(Array.isArray(Bt)?Bt:[Bt]).map(Ke=>(0,i.eE)(Ke)),[Bt]),W=(0,j.u)(j.r),{loading:O,error:D,nodes:ae,edges:fe}=he({rootEntityRefs:I,maxDepth:ut,unidirectional:rt,mergeRelations:bt,kinds:ke,relations:_t,onNodeClick:zt,relationPairs:Ot});return(0,a.useEffect)(()=>{D&&W.post(D)},[W,D]),a.createElement("div",{className:Ze()(Ft.container,Zt)},O&&a.createElement(z.Z,{className:Ft.progress}),ae&&fe&&a.createElement(p.mn,{nodes:ae,edges:fe,renderNode:gt||S,renderLabel:Ut||be,direction:at,className:Ft.graph,paddingX:yt.spacing(4),paddingY:yt.spacing(4),labelPosition:p.NX.LabelPosition.RIGHT,labelOffset:yt.spacing(1),zoom:dt,curve:qt}))},re=(0,g.NT)({id:"catalog-graph"}),Pe=(0,g.x8)({id:"catalog-entity",params:["namespace","kind","name"],optional:!0}),Pt=(0,g.rx)({id:"catalog-graph",routes:{catalogGraph:re},externalRoutes:{catalogEntity:Pe}}),T=Pt.provide((0,g.CO)({name:"EntityCatalogGraphCard",component:{lazy:()=>e.e(9842).then(e.bind(e,59842)).then(de=>de.CatalogGraphCard)}})),rn=Pt.provide((0,g.P4)({name:"CatalogGraphPage",component:()=>e.e(1440).then(e.bind(e,71440)).then(de=>de.CatalogGraphPage),mountPoint:re}))},84241:(xn,Yt,e)=>{"use strict";e.d(Yt,{C:()=>c,a:()=>Ze,c:()=>M,d:()=>xe,g:()=>Ee});var i=e(57032),p=e(30705),g=e(49462),j=e(73495),k=e(89393),o=e(49431),z=e(82717),He=e.n(z);const Ze=(0,i.c)({id:"plugin.catalog-import.service"}),a=(S,_)=>{const b=S.github.byUrl(_);if(!b)return;const{name:m,owner:ve}=He()(_);return{repo:m,owner:ve,githubIntegrationConfig:b.config}};function xe(S){const{ref:_,...b}=S;return{inputRef:_,...b}}function Ee(S){var _;return(_=S.getOptionalString("catalog.import.entityFilename"))!=null?_:"catalog-info.yaml"}function se(S){var _;return(_=S.getOptionalString("catalog.import.pullRequestBranchName"))!=null?_:"backstage-integration"}var Y=Object.defineProperty,Fe=(S,_,b)=>_ in S?Y(S,_,{enumerable:!0,configurable:!0,writable:!0,value:b}):S[_]=b,ge=(S,_,b)=>(Fe(S,typeof _!="symbol"?_+"":_,b),b);class _e{constructor(_){ge(this,"discoveryApi"),ge(this,"identityApi"),ge(this,"scmAuthApi"),ge(this,"scmIntegrationsApi"),ge(this,"catalogApi"),ge(this,"configApi"),this.discoveryApi=_.discoveryApi,this.scmAuthApi=_.scmAuthApi,this.identityApi=_.identityApi,this.scmIntegrationsApi=_.scmIntegrationsApi,this.catalogApi=_.catalogApi,this.configApi=_.configApi}async analyzeUrl(_){var b;if(new URL(_).pathname.match(/\.ya?ml$/)||(b=new URL(_).searchParams.get("path"))!=null&&b.match(/.ya?ml$/)){const ee=await this.catalogApi.addLocation({type:"url",target:_,dryRun:!0});return{type:"locations",locations:[{exists:ee.exists,target:ee.location.target,entities:ee.entities.map(he=>{var J;return{kind:he.kind,namespace:(J=he.metadata.namespace)!=null?J:"default",name:he.metadata.name}})}]}}if(!a(this.scmIntegrationsApi,_)){const ee=this.scmIntegrationsApi.byUrl(_),he=Ee(this.configApi);throw ee?new Error(`The ${ee.title} integration only supports full URLs to ${he} files. Did you try to pass in the URL of a directory instead?`):new Error(`This URL was not recognized as a valid GitHub URL because there was no configured integration that matched the given host name. You could try to paste the full URL to a ${he} file instead.`)}const ve=await this.analyzeLocation({repo:_});if(ve.existingEntityFiles.length>0){const ee=ve.existingEntityFiles.reduce((he,J)=>{var ne;return he[J.location.target]={target:J.location.target,exists:J.isRegistered,entities:[...J.location.target in he?he[J.location.target].entities:[],{name:J.entity.metadata.name,namespace:(ne=J.entity.metadata.namespace)!=null?ne:"default",kind:J.entity.kind}]},he},{});return{type:"locations",locations:Object.values(ee)}}return{type:"repository",integrationType:"github",url:_,generatedEntities:ve.generateEntities.map(ee=>ee.entity)}}async preparePullRequest(){var _;const b=(_=this.configApi.getOptionalString("app.title"))!=null?_:"Backstage",m=this.configApi.getString("app.baseUrl");return{title:`Add ${Ee(this.configApi)} config file`,body:`This pull request adds a **Backstage entity metadata file** to this repository so that the component can be added to the [${b} software catalog](${m}).

After this pull request is merged, the component will become available.

For more information, read an [overview of the Backstage software catalog](https://backstage.io/docs/features/software-catalog/).`}}async submitPullRequest(_){const{repositoryUrl:b,fileContent:m,title:ve,body:ee}=_,he=a(this.scmIntegrationsApi,b);if(he)return await this.submitGitHubPrToRepo({...he,repositoryUrl:b,fileContent:m,title:ve,body:ee});throw new Error("unimplemented!")}async analyzeLocation(_){const{token:b}=await this.identityApi.getCredentials(),m=await fetch(`${await this.discoveryApi.getBaseUrl("catalog")}/analyze-location`,{headers:{"Content-Type":"application/json",...b&&{Authorization:`Bearer ${b}`}},method:"POST",body:JSON.stringify({location:{type:"url",target:_.repo},...this.configApi.getOptionalString("catalog.import.entityFilename")&&{catalogFilename:this.configApi.getOptionalString("catalog.import.entityFilename")}})}).catch(ee=>{throw new Error(`Failed to generate entity definitions, ${ee.message}`)});if(!m.ok)throw new Error(`Failed to generate entity definitions. Received http response ${m.status}: ${m.statusText}`);return await m.json()}async submitGitHubPrToRepo(_){const{owner:b,repo:m,title:ve,body:ee,fileContent:he,repositoryUrl:J,githubIntegrationConfig:ne}=_,{token:re}=await this.scmAuthApi.getCredentials({url:J,additionalScope:{repoWrite:!0}}),Pe=new k.v({auth:re,baseUrl:ne.apiBaseUrl}),Pt=se(this.configApi),T=Ee(this.configApi),rn=await Pe.repos.get({owner:b,repo:m}).catch(ut=>{throw new Error(Q("Couldn't fetch repo data",ut))}),de=await Pe.git.getRef({owner:b,repo:m,ref:`heads/${rn.data.default_branch}`}).catch(ut=>{throw new Error(Q("Couldn't fetch default branch data",ut))});return await Pe.git.createRef({owner:b,repo:m,ref:`refs/heads/${Pt}`,sha:de.data.object.sha}).catch(ut=>{throw new Error(Q(`Couldn't create a new branch with name '${Pt}'`,ut))}),await Pe.repos.createOrUpdateFileContents({owner:b,repo:m,path:T,message:ve,content:o.DS.encode(he),branch:Pt}).catch(ut=>{throw new Error(Q(`Couldn't create a commit with ${T} file added`,ut))}),{link:(await Pe.pulls.create({owner:b,repo:m,title:ve,head:Pt,body:ee,base:rn.data.default_branch}).catch(ut=>{throw new Error(Q(`Couldn't create a pull request for ${Pt} branch`,ut))})).data.html_url,location:`https://${ne.host}/${b}/${m}/blob/${rn.data.default_branch}/${T}`}}}function Q(S,_){return`${S}, received http response status code ${_.status}: ${_.message}`}const be=(0,p.NT)({id:"catalog-import"}),M=(0,p.rx)({id:"catalog-import",apis:[(0,p.ni)({api:Ze,deps:{discoveryApi:i.q,scmAuthApi:g.Om,identityApi:i.t,scmIntegrationsApi:g.q3,catalogApi:j.Ah,configApi:i.p},factory:({discoveryApi:S,scmAuthApi:_,identityApi:b,scmIntegrationsApi:m,catalogApi:ve,configApi:ee})=>new _e({discoveryApi:S,scmAuthApi:_,scmIntegrationsApi:m,identityApi:b,catalogApi:ve,configApi:ee})})],routes:{importPage:be}}),c=M.provide((0,p.P4)({name:"CatalogImportPage",component:()=>e.e(3591).then(e.bind(e,23591)).then(S=>S.ImportPage),mountPoint:be}))},61068:(xn,Yt,e)=>{"use strict";e.d(Yt,{N$:()=>ct});var i=e(18473),p=e(2784),g=e(57032),j=e(30705),k=e(30195),o=e(29641);const z=(0,i.CT)("analytics-context"),He=()=>{const F=useContext(z);if(F===void 0)return{pluginId:"root",extensionId:"App"};const H=F.atVersion(1);if(H===void 0)throw new Error("No context found for version 1.");return H},Ze=F=>{const{attributes:H,children:Ne}=F,Gt={...He(),...H},Dt=createVersionedValueMap({1:Gt});return React.createElement(z.Provider,{value:Dt},Ne)},a=(0,g.c)({id:"core.app-tree"}),xe=(0,g.c)({id:"core.components"});function Ee(F){return(0,g.u)(xe).getComponent(F)}const se=(0,g.c)({id:"core.analytics"}),Y=(0,i.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1})),Fe="_ROUTABLE-EXTENSION-RENDERED";class ge{constructor(H,Ne={pluginId:"root",extensionId:"App"}){this.analyticsApi=H,this.context=Ne,Y.beforeUnloadRegistered||(addEventListener("beforeunload",()=>{Y.mostRecentGatheredNavigation&&(this.analyticsApi.captureEvent({...Y.mostRecentGatheredNavigation,...Y.mostRecentRoutableExtensionRender}),Y.mostRecentGatheredNavigation=void 0,Y.mostRecentRoutableExtensionRender=void 0)},{once:!0,passive:!0}),Y.beforeUnloadRegistered=!0)}setContext(H){this.context=H}captureEvent(H,Ne,{value:it,attributes:Gt}={}){const Dt=this.context;if(H===Fe){Y.mostRecentGatheredNavigation&&(Y.mostRecentRoutableExtensionRender={context:{...Dt,extensionId:"App"}});return}if(Y.mostRecentGatheredNavigation){try{this.analyticsApi.captureEvent({...Y.mostRecentGatheredNavigation,...Y.mostRecentRoutableExtensionRender})}catch(mn){console.warn("Error during analytics event capture. %o",mn)}Y.mostRecentGatheredNavigation=void 0,Y.mostRecentRoutableExtensionRender=void 0}if(H==="navigate"&&Dt.pluginId==="root"){Y.mostRecentGatheredNavigation={action:H,subject:Ne,value:it,attributes:Gt,context:Dt};return}try{this.analyticsApi.captureEvent({action:H,subject:Ne,value:it,attributes:Gt,context:Dt})}catch(mn){console.warn("Error during analytics event capture. %o",mn)}}}function _e(){try{return useApi(se)}catch{return{captureEvent:()=>{}}}}function Q(){const F=useRef(null),H=He(),Ne=_e();function it(){return F.current===null&&(F.current=new ge(Ne)),F.current}const Gt=it();return Gt.setContext(H),Gt}function be(F){const{id:H}=F;return{id:H}}const M=be({id:"core.components.progress"}),c=be({id:"core.components.notFoundErrorPage"}),S=be({id:"core.components.errorBoundaryFallback"}),_={progress:M,notFoundErrorPage:c,errorBoundaryFallback:S};var b=Object.defineProperty,m=(F,H,Ne)=>H in F?b(F,H,{enumerable:!0,configurable:!0,writable:!0,value:Ne}):F[H]=Ne,ve=(F,H,Ne)=>(m(F,typeof H!="symbol"?H+"":H,Ne),Ne);class ee extends p.Component{constructor(){super(...arguments),ve(this,"state",{error:void 0}),ve(this,"handleErrorReset",()=>{this.setState({error:void 0})})}static getDerivedStateFromError(H){return{error:H}}render(){const{error:H}=this.state,{plugin:Ne,children:it,Fallback:Gt}=this.props;return H?p.createElement(Gt,{plugin:Ne,error:H,resetError:this.handleErrorReset}):it}}(0,i.uW)("core-plugin-api:analytics-tracker-events",()=>({mostRecentGatheredNavigation:void 0,mostRecentRoutableExtensionRender:void 0,beforeUnloadRegistered:!1}));const he="_ROUTABLE-EXTENSION-RENDERED",J=F=>{const{disableTracking:H,children:Ne}=F,it=(0,j.z$)();return(0,p.useEffect)(()=>{H||it.captureEvent(he,"")},[it,H]),p.createElement(p.Fragment,null,Ne)};function ne(F){var H;const{node:Ne,routable:it,children:Gt}=F,Dt=Ne.spec.source,mn=Ee(_.progress),un=Ee(_.errorBoundaryFallback),Cn={extensionId:Ne.spec.id,pluginId:(H=Ne.spec.source)==null?void 0:H.id};return p.createElement(p.Suspense,{fallback:p.createElement(mn,null)},p.createElement(ee,{plugin:Dt,Fallback:un},p.createElement(j.fC,{attributes:Cn},p.createElement(J,{disableTracking:!it},Gt))))}function re(F){return{id:F,$$type:"@backstage/ExtensionDataRef",config:{},optional(){return{...this,config:{...this.config,optional:!0}}}}}const Pe={reactElement:re("core.reactElement"),routePath:re("core.routing.path"),routeRef:re("core.routing.ref")};function Pt(F){const H=F;if(H.$$type!=="@backstage/ExtensionDefinition")throw new Error(`Invalid extension definition instance, bad type '${H.$$type}'`);if(H.version!=="v1")throw new Error(`Invalid extension definition instance, bad version '${H.version}'`);return H}function T(F){var H,Ne;return{$$type:"@backstage/ExtensionDefinition",version:"v1",kind:F.kind,namespace:F.namespace,name:F.name,attachTo:F.attachTo,disabled:(H=F.disabled)!=null?H:!1,inputs:(Ne=F.inputs)!=null?Ne:{},output:F.output,configSchema:F.configSchema,factory({inputs:it,...Gt}){return F.factory({inputs:it,...Gt})}}}function rn(F,H){return{$$type:"@backstage/ExtensionInput",extensionData:F,config:{singleton:Boolean(H==null?void 0:H.singleton),optional:Boolean(H==null?void 0:H.optional)}}}function de(F,H){var Ne;const it=Pt(F),{name:Gt,kind:Dt,namespace:mn,...un}=it,Cn=(Ne=it.namespace)!=null?Ne:H==null?void 0:H.namespace,Oe=Gt&&Cn?`${Cn}/${Gt}`:Cn||Gt;if(!Oe)throw new Error(`Extension must declare an explicit namespace or name as it could not be resolved from context, kind=${Dt} namespace=${Cn} name=${Gt}`);return{...un,$$type:"@backstage/Extension",version:"v1",id:Dt?`${Dt}:${Oe}`:Oe}}function Bt(F){var H,Ne,it,Gt;const Dt=((H=F.extensions)!=null?H:[]).map(un=>de(un,{namespace:F.id})),mn=Dt.map(un=>un.id);if(mn.length!==new Set(mn).size){const un=Array.from(new Set(mn.filter((Cn,Oe)=>mn.indexOf(Cn)!==Oe)));throw new Error(`Plugin '${F.id}' provided duplicate extensions: ${un.join(", ")}`)}return{$$type:"@backstage/BackstagePlugin",version:"v1",id:F.id,routes:(Ne=F.routes)!=null?Ne:{},externalRoutes:(it=F.externalRoutes)!=null?it:{},featureFlags:(Gt=F.featureFlags)!=null?Gt:[],extensions:Dt}}function ut(F){var H;return{$$type:"@backstage/ExtensionOverrides",version:"v1",extensions:F.extensions.map(Ne=>de(Ne)),featureFlags:(H=F.featureFlags)!=null?H:[]}}function rt(F){const{factory:H,configSchema:Ne,inputs:it}=F,Gt="api"in F?F.api:H.api;return T({kind:"api",namespace:Gt.id,attachTo:{id:"app",input:"apis"},inputs:it,configSchema:Ne,output:{api:rt.factoryDataRef},factory({config:Dt,inputs:mn}){return typeof H=="function"?{api:H({config:Dt,inputs:mn})}:{api:H}}})}(F=>{F.factoryDataRef=re("core.api.factory")})(rt||(rt={}));function bt(F){const H=F(k.z);return{parse:Ne=>{const it=H.safeParse(Ne);if(it.success)return it.data;throw new Error(it.error.issues.map(ke).join("; "))},schema:(0,o.ZP)(H)}}function ke(F){if(F.code==="invalid_union")return ke(F.unionErrors[0].issues[0]);let H=F.message;return H==="Required"&&(H="Missing required value"),F.path.length&&(H+=` at '${F.path.join(".")}'`),H}function _t(F){var H;const Ne="configSchema"in F?F.configSchema:bt(it=>it.object({path:it.string().default(F.defaultPath)}));return T({kind:"page",namespace:F.namespace,name:F.name,attachTo:(H=F.attachTo)!=null?H:{id:"app/routes",input:"routes"},configSchema:Ne,inputs:F.inputs,disabled:F.disabled,output:{element:Pe.reactElement,path:Pe.routePath,routeRef:Pe.routeRef.optional()},factory({config:it,inputs:Gt,node:Dt}){const mn=lazy(()=>F.loader({config:it,inputs:Gt}).then(un=>({default:()=>un})));return{path:it.path,routeRef:F.routeRef,element:React.createElement(ne,{node:Dt,routable:!0},React.createElement(mn,null))}}})}function at(F){const{routeRef:H,title:Ne,icon:it,namespace:Gt,name:Dt}=F;return T({namespace:Gt,name:Dt,kind:"nav-item",attachTo:{id:"app/nav",input:"items"},configSchema:bt(mn=>mn.object({title:mn.string().default(Ne)})),output:{navTarget:at.targetDataRef},factory:({config:mn})=>({navTarget:{title:mn.title,icon:it,routeRef:H}})})}(F=>{F.targetDataRef=re("core.nav-item.target")})(at||(at={}));function zt(F){const{logoIcon:H,logoFull:Ne}=F;return T({kind:"nav-logo",name:F==null?void 0:F.name,namespace:F==null?void 0:F.namespace,attachTo:{id:"app/nav",input:"logos"},output:{logos:zt.logoElementsDataRef},factory:()=>({logos:{logoIcon:H,logoFull:Ne}})})}(F=>{F.logoElementsDataRef=re("core.nav-logo.logo-elements")})(zt||(zt={}));function Ot(F){var H;return T({kind:"sign-in-page",namespace:F==null?void 0:F.namespace,name:F==null?void 0:F.name,attachTo:(H=F.attachTo)!=null?H:{id:"app/router",input:"signInPage"},configSchema:F.configSchema,inputs:F.inputs,disabled:F.disabled,output:{component:Ot.componentDataRef},factory({config:Ne,inputs:it,node:Gt}){const Dt=(0,p.lazy)(()=>F.loader({config:Ne,inputs:it}).then(mn=>({default:mn})));return{component:mn=>p.createElement(ne,{node:Gt,routable:!0},p.createElement(Dt,{...mn}))}}})}(F=>{F.componentDataRef=re("core.sign-in-page.component")})(Ot||(Ot={}));function Zt(F){return T({kind:"theme",namespace:"app",name:F.id,attachTo:{id:"app",input:"themes"},output:{theme:Zt.themeDataRef},factory:()=>({theme:F})})}(F=>{F.themeDataRef=re("core.theme.theme")})(Zt||(Zt={}));function dt(F){return T({kind:"component",namespace:F.ref.id,name:F.name,attachTo:{id:"app",input:"components"},inputs:F.inputs,disabled:F.disabled,configSchema:F.configSchema,output:{component:dt.componentDataRef},factory({config:H,inputs:Ne,node:it}){let Gt;if("sync"in F.loader)Gt=F.loader.sync({config:H,inputs:Ne});else{const Dt=F.loader.lazy;Gt=(0,p.lazy)(()=>Dt({config:H,inputs:Ne}).then(mn=>({default:mn})))}return{component:{ref:F.ref,impl:Dt=>p.createElement(ne,{node:it},p.createElement(Gt,{...Dt}))}}}})}(F=>{F.componentDataRef=re("core.component.component")})(dt||(dt={}));function gt(F){return T({kind:"translation",namespace:F.resource.id,name:F.name,attachTo:{id:"app",input:"translations"},output:{resource:gt.translationDataRef},factory:()=>({resource:F.resource})})}(F=>{F.translationDataRef=re("core.translation.translation")})(gt||(gt={}));const Ut="eHgtF5hmbrXyiEvo";function qt(F=Error){const{stack:H}=new F(Ut);if(!H)return"<unknown>";const Ne=H.includes(Ut)?H.indexOf(`
`)+1:0,it=H.indexOf(`
`,H.indexOf(`
`,Ne)+1)+1,Gt=H.indexOf(`
`,it),Dt=H.substring(it,Gt).trim();return Dt?Dt.includes("(")?Dt.substring(Dt.indexOf("(")+1,Dt.indexOf(")")):Dt.includes("@")?Dt.substring(Dt.indexOf("@")+1):Dt:"unknown"}var yt=Object.defineProperty,Ft=(F,H,Ne)=>H in F?yt(F,H,{enumerable:!0,configurable:!0,writable:!0,value:Ne}):F[H]=Ne,I=(F,H,Ne)=>(Ft(F,typeof H!="symbol"?H+"":H,Ne),Ne),W=(F,H,Ne)=>{if(!H.has(F))throw TypeError("Cannot "+Ne)},O=(F,H,Ne)=>(W(F,H,"read from private field"),Ne?Ne.call(F):H.get(F)),D=(F,H,Ne)=>{if(H.has(F))throw TypeError("Cannot add the same private member more than once");H instanceof WeakSet?H.add(F):H.set(F,Ne)},ae=(F,H,Ne,it)=>(W(F,H,"write to private field"),it?it.call(F,Ne):H.set(F,Ne),Ne),fe,Ke,ft,Je,wt;function nn(F){const H=F;if(H.$$type!=="@backstage/RouteRef")throw new Error(`Invalid RouteRef, bad type '${H.$$type}'`);return H}class Ae{constructor(H=[],Ne){this.params=H,D(this,Je),I(this,"$$type","@backstage/RouteRef"),I(this,"version","v1"),D(this,fe,void 0),D(this,Ke,void 0),D(this,ft,void 0),ae(this,Ke,H),ae(this,ft,Ne)}getParams(){return O(this,Ke)}getDescription(){return O(this,fe)?O(this,fe):`created at '${O(this,ft)}'`}setId(H){if(!H)throw new Error(`${O(this,Je,wt)} id must be a non-empty string`);if(O(this,fe))throw new Error(`${O(this,Je,wt)} was referenced twice as both '${O(this,fe)}' and '${H}'`);ae(this,fe,H)}toString(){return`${O(this,Je,wt)}{${this.getDescription()}}`}}fe=new WeakMap,Ke=new WeakMap,ft=new WeakMap,Je=new WeakSet,wt=function(){return this.$$type.slice(11)};function Te(F){return new Ae(F==null?void 0:F.params,qt())}var vt=Object.defineProperty,Tt=(F,H,Ne)=>H in F?vt(F,H,{enumerable:!0,configurable:!0,writable:!0,value:Ne}):F[H]=Ne,At=(F,H,Ne)=>(Tt(F,typeof H!="symbol"?H+"":H,Ne),Ne),Wt=(F,H,Ne)=>{if(!H.has(F))throw TypeError("Cannot "+Ne)},St=(F,H,Ne)=>(Wt(F,H,"read from private field"),Ne?Ne.call(F):H.get(F)),Ue=(F,H,Ne)=>{if(H.has(F))throw TypeError("Cannot add the same private member more than once");H instanceof WeakSet?H.add(F):H.set(F,Ne)},Xe=(F,H,Ne,it)=>(Wt(F,H,"write to private field"),it?it.call(F,Ne):H.set(F,Ne),Ne),Mt,le;const Be=/^\w+$/;class ie{constructor(H,Ne,it){this.path=H,At(this,"$$type","@backstage/SubRouteRef"),At(this,"version","v1"),Ue(this,Mt,void 0),Ue(this,le,void 0),Xe(this,Mt,Ne),Xe(this,le,it)}getParams(){return St(this,Mt)}getParent(){return St(this,le)}getDescription(){const H=nn(St(this,le));return`at ${this.path} with parent ${H.getDescription()}`}toString(){return`SubRouteRef{${this.getDescription()}}`}}Mt=new WeakMap,le=new WeakMap;function Ge(F){const{path:H,parent:Ne}=F,Gt=nn(Ne).getParams(),Dt=H.split("/").filter(Cn=>Cn.startsWith(":")).map(Cn=>Cn.substring(1)),mn=[...Gt,...Dt];if(Gt.some(Cn=>Dt.includes(Cn)))throw new Error("SubRouteRef may not have params that overlap with its parent");if(!H.startsWith("/"))throw new Error(`SubRouteRef path must start with '/', got '${H}'`);if(H.endsWith("/"))throw new Error(`SubRouteRef path must not end with '/', got '${H}'`);for(const Cn of Dt)if(!Be.test(Cn))throw new Error(`SubRouteRef path has invalid param, got '${Cn}'`);return new ie(H,mn,Ne)}var tt=Object.defineProperty,ot=(F,H,Ne)=>H in F?tt(F,H,{enumerable:!0,configurable:!0,writable:!0,value:Ne}):F[H]=Ne,Rt=(F,H,Ne)=>(ot(F,typeof H!="symbol"?H+"":H,Ne),Ne);class en extends null{constructor(H,Ne=[],it){super(Ne,it),this.optional=H,this.params=Ne,Rt(this,"$$type","@backstage/ExternalRouteRef")}}function Ce(F){return new en(Boolean(F==null?void 0:F.optional),F==null?void 0:F.params,qt())}function Me(F){const{pathname:H}=useLocation(),Ne=useVersionedContext("routing-context");if(!Ne)throw new Error("Routing context is not available");const it=Ne.atVersion(1),Gt=useMemo(()=>it&&it.resolve(F,{pathname:H}),[it,F,H]);if(!Ne)throw new Error("useRouteRef used outside of routing context");if(!it)throw new Error("RoutingContext v1 not available");const Dt="optional"in F&&F.optional;if(!Gt&&!Dt)throw new Error(`No path for ${F}`);return Gt}function R(F){return useParams()}var B=e(34520),X=e(56563),nt=e(78373);function mt(F,H){const Ne=new Set([...getEntityRelations(F,RELATION_MEMBER_OF,{kind:"group"}),...F?[getCompoundEntityRef(F)]:[]].map(stringifyEntityRef)),it=getEntityRelations(H,RELATION_OWNED_BY).map(stringifyEntityRef);for(const Gt of it)if(Ne.has(Gt))return!0;return!1}function ct(F){const{entity:H,loading:Ne,error:it}=(0,nt.a)(),{allowed:Gt,loading:Dt,error:mn}=(0,X.gI)({permission:F,resourceRef:H?(0,B.eE)(H):void 0});return Ne||Dt?{loading:!0,allowed:!1}:it?{loading:!1,allowed:!1,error:it}:{loading:!1,allowed:Gt,error:mn}}const jt={entityContentTitle:re("catalog.entity-content-title"),entityFilterFunction:re("catalog.entity-filter-function"),entityFilterExpression:re("catalog.entity-filter-expression")};function dn(F){var H,Ne;return createExtension({kind:"entity-card",namespace:F.namespace,name:F.name,attachTo:(H=F.attachTo)!=null?H:{id:"entity-content:catalog/overview",input:"cards"},disabled:(Ne=F.disabled)!=null?Ne:!0,output:{element:coreExtensionData.reactElement,filterFunction:jt.entityFilterFunction.optional(),filterExpression:jt.entityFilterExpression.optional()},inputs:F.inputs,configSchema:createSchemaFromZod(it=>it.object({filter:it.string().optional()})),factory({config:it,inputs:Gt,node:Dt}){const mn=lazy(()=>F.loader({inputs:Gt}).then(un=>({default:()=>un})));return{element:React.createElement(ExtensionBoundary,{node:Dt},React.createElement(mn,null)),...bn({config:it,options:F})}}})}function An(F){var H,Ne;return createExtension({kind:"entity-content",namespace:F.namespace,name:F.name,attachTo:(H=F.attachTo)!=null?H:{id:"page:catalog/entity",input:"contents"},disabled:(Ne=F.disabled)!=null?Ne:!0,output:{element:coreExtensionData.reactElement,path:coreExtensionData.routePath,routeRef:coreExtensionData.routeRef.optional(),title:jt.entityContentTitle,filterFunction:jt.entityFilterFunction.optional(),filterExpression:jt.entityFilterExpression.optional()},inputs:F.inputs,configSchema:createSchemaFromZod(it=>it.object({path:it.string().default(F.defaultPath),title:it.string().default(F.defaultTitle),filter:it.string().optional()})),factory({config:it,inputs:Gt,node:Dt}){const mn=lazy(()=>F.loader({inputs:Gt}).then(un=>({default:()=>un})));return{path:it.path,title:it.title,routeRef:F.routeRef,element:React.createElement(ExtensionBoundary,{node:Dt,routable:!0},React.createElement(mn,null)),...bn({config:it,options:F})}}})}function bn(F){const{options:H,config:Ne}=F;return Ne.filter?{filterExpression:Ne.filter}:typeof H.filter=="string"?{filterExpression:H.filter}:typeof H.filter=="function"?{filterFunction:H.filter}:{}}},78373:(xn,Yt,e)=>{"use strict";e.d(Yt,{A:()=>z,a:()=>a,g:()=>k,u:()=>Ze});var i=e(34520),p=e(30705),g=e(18473),j=e(2784);function k(xe,Ee,se){var Y;let Fe=((Y=xe==null?void 0:xe.relations)==null?void 0:Y.filter(ge=>ge.type===Ee).map(ge=>(0,i.of)(ge.targetRef)))||[];return se!=null&&se.kind&&(Fe=Fe.filter(ge=>ge.kind.toLocaleLowerCase("en-US")===se.kind.toLocaleLowerCase("en-US"))),Fe}const o=(0,g.CT)("entity-context"),z=xe=>{const{children:Ee,entity:se,loading:Y,error:Fe,refresh:ge}=xe,_e={entity:se,loading:Y,error:Fe,refresh:ge};return j.createElement(o.Provider,{value:(0,g.EI)({1:_e})},j.createElement(p.fC,{attributes:{...se?{entityRef:(0,i.eE)(se)}:void 0}},Ee))},He=xe=>React.createElement(z,{entity:xe.entity,loading:!Boolean(xe.entity),error:void 0,refresh:void 0,children:xe.children});function Ze(){const xe=(0,g.Vt)("entity-context");if(!xe)throw new Error("Entity context is not available");const Ee=xe.atVersion(1);if(!Ee)throw new Error("EntityContext v1 not available");if(!Ee.entity)throw new Error("useEntity hook is being called outside of an EntityLayout where the entity has not been loaded. If this is intentional, please use useAsyncEntity instead.");return{entity:Ee.entity}}function a(){const xe=(0,g.Vt)("entity-context");if(!xe)throw new Error("Entity context is not available");const Ee=xe.atVersion(1);if(!Ee)throw new Error("EntityContext v1 not available");const{entity:se,loading:Y,error:Fe,refresh:ge}=Ee;return{entity:se,loading:Y,error:Fe,refresh:ge}}},73495:(xn,Yt,e)=>{"use strict";e.d(Yt,{$3:()=>cn,Ah:()=>B,CR:()=>et,CV:()=>Oe,EW:()=>$r,LH:()=>_a,UO:()=>Pa,U_:()=>Ar,Uh:()=>ya,XI:()=>X,ZW:()=>P,_i:()=>Dt,co:()=>za,df:()=>vn,dq:()=>Ia,dx:()=>Da,eK:()=>q,n8:()=>nt,nN:()=>ar,nl:()=>Sr,p3:()=>An,ph:()=>ir,pp:()=>ao,rI:()=>ja,sL:()=>Za,sk:()=>uo,tW:()=>pe,u3:()=>Un,wi:()=>Fa,wp:()=>qn,xE:()=>fa});var i=e(57032),p=e(30705),g=e(34520),j=e(72579),k=e.n(j),o=e(2784),z=e(82394),He=e.n(z),Ze=e(41156),a=e(60364),xe=e(77277),Ee=e(4190),se=e(95544),Y=e(90436),Fe=e(60905),ge=e(21324),_e=e(5806),Q=e(79692),be=e(86619),M=e(80030),c=e(15223),S=e(42494),_=e(29611),b=e(50581),m=e(61837),ve=e(15459),ee=e(55999),he=e(49378),J=e(54506),ne=e(94339),re=e(24579),Pe=e(38402),Pt=e(86136),T=e(11776),rn=e(9520),de=e(8629),Bt=e(79249),ut=e(38724),rt=e(99152),bt=e(6487),ke=e(49429),_t=e(85256),at=e(12231),zt=e(36444),Ot=e(49558),Zt=e(78373),dt=e(76635),gt=e.n(dt),Ut=e(19126),qt=e.n(Ut),yt=e(73557),Ft=e(69294),I=e(48760),W=e(90736),O=e(64279),D=e(18149),ae=e.n(D),fe=e(829),Ke=e.n(fe),ft=e(72164),Je=e(38016),wt=e(88013),nn=e(99688),Ae=e(19996),Te=e(25505),vt=e(72779),Tt=e.n(vt),At=e(89586),Wt=e(5270),St=e(98685),Ue=e(62367),Xe=e(18473),Mt=e(33375),le=e(21853),Be=e(11640),ie=e(28347),Ge=e(39412),tt=e(27685),ot=e(3440),Rt=e.n(ot),en=e(10921),Ce=e(32272),Me=e(47603),R=e(38408);const B=(0,i.c)({id:"plugin.catalog.service"}),X=(0,i.c)({id:"plugin.catalog.entity-presentation"});function nt(f,A){const{kind:L,namespace:K,name:me,title:De,description:ze,displayName:Ve,type:ht}=mt(f),Nt=(0,g.eE)({kind:L||"unknown",namespace:K||g.zG,name:me||"unknown"}),$t=ct({kind:L,namespace:K,name:me,context:A}),sn=[Ve,De,$t].find(hn=>hn&&typeof hn=="string"),Pn=[sn!==Nt?Nt:void 0,ht,ze].filter(hn=>hn&&typeof hn=="string").join(" | ");return{entityRef:Nt,primaryTitle:sn,secondaryTitle:Pn||void 0,Icon:void 0}}function mt(f){if(typeof f=="string"){let A=f.indexOf(":");const L=f.indexOf("/");L!==-1&&L<A&&(A=-1);const K=A===-1?void 0:f.slice(0,A),me=L===-1?void 0:f.slice(A+1,L),De=f.slice(Math.max(A+1,L+1));return{kind:K,namespace:me,name:De}}if(typeof f=="object"&&f!==null){const A=[k()(f,"kind")].find(ht=>ht&&typeof ht=="string"),L=[k()(f,"metadata.namespace"),k()(f,"namespace")].find(ht=>ht&&typeof ht=="string"),K=[k()(f,"metadata.name"),k()(f,"name")].find(ht=>ht&&typeof ht=="string"),me=[k()(f,"metadata.title")].find(ht=>ht&&typeof ht=="string"),De=[k()(f,"metadata.description")].find(ht=>ht&&typeof ht=="string"),ze=[k()(f,"spec.profile.displayName")].find(ht=>ht&&typeof ht=="string"),Ve=[k()(f,"spec.type")].find(ht=>ht&&typeof ht=="string");return{kind:A,namespace:L,name:K,title:me,description:De,displayName:ze,type:Ve}}return{}}function ct(f){var A,L,K,me,De;const ze=((A=f.kind)==null?void 0:A.toLocaleLowerCase("en-US"))||"unknown",Ve=f.namespace||g.zG,ht=f.name||"unknown",Nt=(K=(L=f.context)==null?void 0:L.defaultKind)==null?void 0:K.toLocaleLowerCase("en-US"),$t=(De=(me=f.context)==null?void 0:me.defaultNamespace)==null?void 0:De.toLocaleLowerCase("en-US");let sn=ht;return($t&&Ve.toLocaleLowerCase("en-US")!==$t||Ve!==g.zG)&&(sn=`${Ve}/${sn}`),Nt&&ze.toLocaleLowerCase("en-US")!==Nt&&(sn=`${ze}:${sn}`),sn}function jt(f,A,L){const[K,me]=(0,o.useState)(f);return(0,o.useEffect)(()=>{me(f);const De=A==null?void 0:A.subscribe({next:ze=>{me(ze)},complete:()=>{De==null||De.unsubscribe()}});return()=>{De==null||De.unsubscribe()}},L),K}function dn(f,A){const K=(0,i.b)().get(X),me=[K,JSON.stringify(f),JSON.stringify(A||null)],De=(0,o.useMemo)(()=>K?K.forEntity(typeof f=="string"||"metadata"in f?f:(0,g.eE)(f),A):{snapshot:nt(f,A)},me);return jt(De.snapshot,De.update$,[De])}const An=(0,i.c)({id:"catalog-react.starred-entities"});var bn=Object.defineProperty,F=(f,A,L)=>A in f?bn(f,A,{enumerable:!0,configurable:!0,writable:!0,value:L}):f[A]=L,H=(f,A,L)=>(F(f,typeof A!="symbol"?A+"":A,L),L);class Ne{constructor(){H(this,"starredEntities",new Set),H(this,"subscribers",new Set),H(this,"observable",new ObservableImpl(A=>(A.next(new Set(this.starredEntities)),this.subscribers.add(A),()=>{this.subscribers.delete(A)})))}async toggleStarred(A){this.starredEntities.delete(A)||this.starredEntities.add(A);for(const L of this.subscribers)L.next(new Set(this.starredEntities))}starredEntitie$(){return this.observable}}const it=f=>{var A,L;const K=(0,Ze.Z)(Ve=>{var ht,Nt;return Ve.breakpoints.down((Nt=(ht=f.options)==null?void 0:ht.drawerBreakpoint)!=null?Nt:"md")}),me=(0,a.Z)(),[De,ze]=(0,o.useState)(!1);return K?o.createElement(o.Fragment,null,o.createElement(xe.Z,{style:{marginTop:me.spacing(1),marginLeft:me.spacing(1)},onClick:()=>ze(!0),startIcon:o.createElement(zt.Z,null)},"Filters"),o.createElement(Ee.ZP,{open:De,onClose:()=>ze(!1),anchor:(L=(A=f.options)==null?void 0:A.drawerAnchor)!=null?L:"left",disableAutoFocus:!0,keepMounted:!0,variant:"temporary"},o.createElement(se.Z,{m:2},o.createElement(Y.Z,{variant:"h6",component:"h2",style:{marginBottom:me.spacing(1)}},"Filters"),f.children))):o.createElement(Fe.Z,{item:!0,lg:2},f.children)},Gt=f=>o.createElement(Fe.Z,{item:!0,xs:12,lg:10},f.children),Dt=f=>o.createElement(Fe.Z,{container:!0,style:{position:"relative"}},f.children);Dt.Filters=it,Dt.Content=Gt;function mn(f){return f.reduce((A,L)=>({...A,...L.getCatalogFilters?L.getCatalogFilters():{}}),{})}function un(f){const A={};return f.forEach(L=>{var K;L instanceof an||L instanceof Nn||L instanceof Fn||L instanceof ra||L instanceof En||L instanceof oa||L instanceof On||L instanceof aa||Object.assign(A,((K=L.getCatalogFilters)==null?void 0:K.call(L))||{})}),A}function Cn(f){return A=>f.every(L=>!L.filterEntity||L.filterEntity(A))}function Oe(f,A){var L;const K=(L=f.metadata.annotations)==null?void 0:L[g.M6];if(K)try{const me=(0,g.Ou)(K),De=A.byUrl(me.target);return{locationTargetUrl:me.target,integrationType:De==null?void 0:De.type}}catch{return}}var $e=Object.defineProperty,st=(f,A,L)=>A in f?$e(f,A,{enumerable:!0,configurable:!0,writable:!0,value:L}):f[A]=L,Qt=(f,A,L)=>(st(f,typeof A!="symbol"?A+"":A,L),L);class Xt{constructor(A){this.value=A}getCatalogFilters(){return{kind:this.value}}toQueryValue(){return this.value}}class ln{constructor(A){this.value=A}getTypes(){return Array.isArray(this.value)?this.value:[this.value]}getCatalogFilters(){return{"spec.type":this.getTypes()}}toQueryValue(){return this.getTypes()}}class an{constructor(A){this.values=A}filterEntity(A){return this.values.every(L=>{var K;return((K=A.metadata.tags)!=null?K:[]).includes(L)})}getCatalogFilters(){return{"metadata.tags":this.values}}toQueryValue(){return this.values}}class On{constructor(A){this.value=A}filterEntity(A){const L=this.toUpperArray(this.value.split(/\s/)),K=this.toUpperArray([A.metadata.tags]),me=this.toUpperArray([A.metadata.name,A.metadata.title]);for(const De of L)if(K.every(ze=>ze!==De)&&me.every(ze=>!ze.includes(De)))return!1;return!0}toUpperArray(A){return A.flat().filter(L=>Boolean(L)).map(L=>L.toLocaleUpperCase("en-US"))}}class Nn{constructor(A){Qt(this,"values"),this.values=A.reduce((L,K)=>{try{return L.push((0,g.eE)((0,g.of)(K,{defaultKind:"Group"}))),L}catch{return L}},[])}getCatalogFilters(){return{"relations.ownedBy":this.values}}filterEntity(A){return this.values.some(L=>(0,Zt.g)(A,g.S4).some(K=>(0,g.eE)(K)===L))}toQueryValue(){return this.values}}class Fn{constructor(A){this.values=A}getCatalogFilters(){return{"spec.lifecycle":this.values}}filterEntity(A){return this.values.some(L=>{var K;return((K=A.spec)==null?void 0:K.lifecycle)===L})}toQueryValue(){return this.values}}class ra{constructor(A){this.values=A}getCatalogFilters(){return{"metadata.namespace":this.values}}filterEntity(A){return this.values.some(L=>A.metadata.namespace===L)}toQueryValue(){return this.values}}class En{constructor(A,L){this.value=A,this.refs=L}static owned(A){return new En("owned",A)}static all(){return new En("all")}static starred(A){return new En("starred",A)}getCatalogFilters(){var A,L,K;return this.value==="owned"?{"relations.ownedBy":(A=this.refs)!=null?A:[]}:this.value==="starred"?{"metadata.name":(K=(L=this.refs)==null?void 0:L.map(me=>(0,g.of)(me).name))!=null?K:[]}:{}}filterEntity(A){var L,K,me,De;if(this.value==="starred")return(K=(L=this.refs)==null?void 0:L.includes((0,g.eE)(A)))!=null?K:!0;if(this.value==="owned"){const ze=(0,Zt.g)(A,g.S4);return(De=(me=this.refs)==null?void 0:me.some(Ve=>ze.some(ht=>(0,g.eE)(ht)===Ve)))!=null?De:!1}return!0}toQueryValue(){return this.value}}class aa{constructor(A,L,K){this.value=A,this.isOwnedEntity=L,this.isStarredEntity=K}filterEntity(A){switch(this.value){case"owned":return this.isOwnedEntity(A);case"starred":return this.isStarredEntity(A);default:return!0}}toQueryValue(){return this.value}}class oa{constructor(A){this.value=A}getCatalogFilters(){return this.value?{"metadata.annotations.backstage.io/orphan":String(this.value)}:{}}filterEntity(A){var L;const K=(L=A.metadata.annotations)==null?void 0:L["backstage.io/orphan"];return K!==void 0&&this.value.toString()===K}}class na{constructor(A){this.value=A}filterEntity(A){var L,K;const me=((K=(L=A==null?void 0:A.status)==null?void 0:L.items)==null?void 0:K.length)>0;return me!==void 0&&this.value===me}}const pa=(0,o.createContext)(void 0),Pa=f=>{const A=(0,W.default)(),L=(0,i.u)(B),[K,me]=(0,o.useState)({}),De=(0,yt.TH)(),ze=f.pagination===!0||typeof f.pagination=="object",Ve=f.pagination&&typeof f.pagination=="object"&&typeof f.pagination.limit=="number"?f.pagination.limit:20,{queryParameters:ht,cursor:Nt}=(0,o.useMemo)(()=>{var Mn;const Vn=qt().parse(De.search,{ignoreQueryPrefix:!0});return{queryParameters:(Mn=Vn.filters)!=null?Mn:{},cursor:typeof Vn.cursor=="string"?Vn.cursor:void 0}},[De]),[$t,sn]=(0,o.useState)(Nt),[Pn,hn]=(0,o.useState)(()=>({appliedFilters:{},entities:[],backendEntities:[],pageInfo:ze?{}:void 0})),[{loading:In,error:Xn},_n]=(0,Ft.default)(async()=>{var Mn;const Vn=(0,dt.compact)(Object.values(K)),Ea=Object.keys(K).reduce((Sa,va)=>{const ba=K[va];return ba!=null&&ba.toQueryValue&&(Sa[va]=ba.toQueryValue()),Sa},{});if(ze)if($t){if($t!==Pn.appliedCursor){const Sa=Cn(Vn),va=await L.queryEntities({cursor:$t,limit:Ve});hn({appliedFilters:K,appliedCursor:$t,backendEntities:va.items,entities:va.items.filter(Sa),pageInfo:va.pageInfo})}}else{const Sa=Cn(Vn),va=mn(Vn),ba=mn((0,dt.compact)(Object.values(Pn.appliedFilters)));if(!(0,dt.isEqual)(ba,va)){const wa=await L.queryEntities({filter:va,limit:Ve,orderFields:[{field:"metadata.name",order:"asc"}]});hn({appliedFilters:K,backendEntities:wa.items,entities:wa.items.filter(Sa),pageInfo:wa.pageInfo})}}else{const Sa=Cn(Vn),va=un(Vn),ba=un((0,dt.compact)(Object.values(Pn.appliedFilters)));if((0,dt.isEqual)(ba,va))hn({appliedFilters:K,backendEntities:Pn.backendEntities,entities:Pn.backendEntities.filter(Sa)});else{const wa=await L.getEntities({filter:va});hn({appliedFilters:K,backendEntities:wa.items,entities:wa.items.filter(Sa)})}}if(A()){const Sa=qt().parse(De.search,{ignoreQueryPrefix:!0}),va=qt().stringify({...Sa,filters:Ea,cursor:$t},{addQueryPrefix:!0,arrayFormat:"repeat"}),ba=`${window.location.pathname}${va}`;(Mn=window.history)==null||Mn.replaceState(null,document.title,ba)}},[L,ht,K,Pn,$t,ze],{loading:!0});(0,I.Z)(_n,10,[K,$t]);const ta=(0,o.useCallback)(Mn=>{sn(void 0),me(Vn=>{const Ea=typeof Mn=="function"?Mn(Vn):Mn;return{...Vn,...Ea}})},[]),ma=(0,o.useMemo)(()=>{var Mn,Vn;if(!ze)return;const Ea=(Mn=Pn.pageInfo)==null?void 0:Mn.prevCursor,Sa=(Vn=Pn.pageInfo)==null?void 0:Vn.nextCursor;return{prev:Ea?()=>sn(Ea):void 0,next:Sa?()=>sn(Sa):void 0}},[ze,Pn.pageInfo]),zn=(0,o.useMemo)(()=>({filters:Pn.appliedFilters,entities:Pn.entities,backendEntities:Pn.backendEntities,updateFilters:ta,queryParameters:ht,loading:In,error:Xn,pageInfo:ma}),[Pn,ta,ht,In,Xn,ma]);return o.createElement(pa.Provider,{value:zn},f.children)};function qn(){const f=(0,o.useContext)(pa);if(!f)throw new Error("useEntityList must be used within EntityListProvider");return f}function ya(){var f;const A=(0,i.u)(B),{filters:{kind:L,type:K},queryParameters:{type:me},updateFilters:De}=qn(),ze=(0,o.useMemo)(()=>[me].flat().filter(Boolean),[me]),[Ve,ht]=(0,o.useState)(ze.length?ze:(f=K==null?void 0:K.getTypes())!=null?f:[]);(0,o.useEffect)(()=>{ze.length&&ht(ze)},[ze]);const[Nt,$t]=(0,o.useState)([]),sn=(0,o.useMemo)(()=>L==null?void 0:L.value,[L]),{error:Pn,loading:hn,value:In}=(0,O.default)(async()=>sn?await A.getEntityFacets({filter:{kind:sn},facets:["spec.type"]}).then(ta=>ta.facets["spec.type"]||[]):[],[sn,A]),Xn=(0,o.useRef)(In);return(0,o.useEffect)(()=>{const _n=Xn.current;if(Xn.current=In,hn||!sn||_n===In||!In)return;const ta=[...new Set(Ke()(In,zn=>-zn.count).map(zn=>zn.value.toLocaleLowerCase("en-US")))];$t(ta);const ma=Ve.filter(zn=>ta.includes(zn));ae()(Ve,ma)||ht(ma)},[hn,sn,Ve,ht,In]),(0,o.useEffect)(()=>{De({type:Ve.length?new ln(Ve):void 0})},[Ve,De]),{loading:hn,error:Pn,availableTypes:Nt,selectedTypes:Ve,setSelectedTypes:ht}}function q(f,A){var L,K;const me=(L=A==null?void 0:A.type)==null?void 0:L.toLocaleLowerCase("en-US"),De=(K=A==null?void 0:A.kind)==null?void 0:K.toLocaleLowerCase("en-US"),ze=(0,i.u)(B),{loading:Ve,value:ht,error:Nt}=(0,O.default)(async()=>{var $t;const sn=($t=f.relations)==null?void 0:$t.filter(hn=>(!me||hn.type.toLocaleLowerCase("en-US")===me)&&(!De||(0,g.of)(hn.targetRef).kind===De));if(!(sn!=null&&sn.length))return[];const{items:Pn}=await ze.getEntitiesByRefs({entityRefs:sn.map(hn=>hn.targetRef)});return Pn.filter(hn=>Boolean(hn))},[f,me,De]);return{entities:ht,loading:Ve,error:Nt}}function Le(f){return typeof f=="string"?f:(0,g.eE)(f)}function et(){const f=(0,i.u)(An),A=(0,ft.Z)((0,o.useMemo)(()=>f.starredEntitie$(),[f]),new Set),L=(0,o.useCallback)(me=>A.has(Le(me)),[A]),K=(0,o.useCallback)(me=>f.toggleStarred(Le(me)).then(),[f]);return{starredEntities:A,toggleStarredEntity:K,isStarredEntity:L}}function U(f){return typeof f=="string"?f:(0,g.eE)(f)}function Z(f){const A=(0,i.u)(An),[L,K]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{const De=A.starredEntitie$().subscribe({next(ze){K(ze.has(U(f)))}});return()=>{De.unsubscribe()}},[f,A]),{toggleStarredEntity:(0,o.useCallback)(()=>A.toggleStarred(U(f)).then(),[f,A]),isStarredEntity:L}}function P(){const f=(0,i.u)(i.t),{loading:A,value:L}=(0,O.default)(async()=>{const{ownershipEntityRefs:me}=await f.getBackstageIdentity();return me},[]),K=(0,o.useMemo)(()=>{const me=new Set(L!=null?L:[]);return De=>{const ze=(0,Zt.g)(De,g.S4).map(g.eE);for(const Ve of ze)if(me.has(Ve))return!0;return!1}},[L]);return{loading:A,isOwnedEntity:K}}function $(){const f=(0,i.u)(B),{error:A,loading:L,value:K}=(0,O.default)(async()=>await f.getEntityFacets({facets:["kind"]}).then(De=>{var ze;return((ze=De.facets.kind)==null?void 0:ze.map(Ve=>Ve.value).sort())||[]}),[f]);return{loading:L,error:A,allKinds:K!=null?K:[]}}function N(f,A,L){let K=f;return A&&(K=K.filter(De=>A.some(ze=>ze.toLocaleLowerCase("en-US")===De.toLocaleLowerCase("en-US")))),L&&!f.some(De=>De.toLocaleLowerCase("en-US")===L.toLocaleLowerCase("en-US"))&&(K=K.concat([L])),K.sort().reduce((De,ze)=>(De[ze.toLocaleLowerCase("en-US")]=ze,De),{})}function oe(f){var A,L;const{filters:K,queryParameters:{kind:me},updateFilters:De}=qn(),ze=(0,o.useMemo)(()=>[me].flat()[0],[me]),[Ve,ht]=(0,o.useState)((L=ze!=null?ze:(A=K.kind)==null?void 0:A.value)!=null?L:f.initialFilter);(0,o.useEffect)(()=>{ze&&ht(ze)},[ze]),(0,o.useEffect)(()=>{var Pn,hn;(Pn=K.kind)!=null&&Pn.value&&ht((hn=K.kind)==null?void 0:hn.value)},[K.kind]),(0,o.useEffect)(()=>{De({kind:Ve?new Xt(Ve):void 0})},[Ve,De]);const{allKinds:Nt,loading:$t,error:sn}=$();return{loading:$t,error:sn,allKinds:Nt!=null?Nt:[],selectedKind:Ve,setSelectedKind:ht}}const pe=f=>{const{allowedKinds:A,hidden:L,initialFilter:K="component"}=f,me=(0,i.u)(i.l),{error:De,allKinds:ze,selectedKind:Ve,setSelectedKind:ht}=oe({initialFilter:K});if((0,o.useEffect)(()=>{De&&me.post({message:"Failed to load entity kinds",severity:"error"})},[De,me]),De)return null;const Nt=N(ze,A,Ve),$t=Object.keys(Nt).map(sn=>({value:sn,label:Nt[sn]}));return L?null:o.createElement(se.Z,{pb:1,pt:1},o.createElement(Ot.Ph,{label:"Kind",items:$t,selected:Ve.toLocaleLowerCase("en-US"),onChange:sn=>ht(String(sn))}))},te=o.createElement(Te.Z,{fontSize:"small"}),Se=o.createElement(Ae.Z,{fontSize:"small"});function We({selected:f}){return o.createElement(ge.Z,{icon:te,checkedIcon:Se,checked:f})}const Qe=(0,o.memo)(f=>{const{selected:A,value:L,availableOptions:K,showCounts:me}=f,De=me?`${L} (${K==null?void 0:K[L]})`:L;return o.createElement(_e.Z,{control:o.createElement(We,{selected:A}),label:De,onClick:ze=>ze.preventDefault()})}),kt=(0,Q.Z)({input:{}},{name:"CatalogReactEntityAutocompletePickerInput"});function Lt(f){const A=kt();return o.createElement(be.Z,{variant:"outlined",...f,className:Tt()(A.input,f.className)})}function tn(f){var A,L;const{label:K,name:me,path:De,showCounts:ze,Filter:Ve,InputProps:ht,initialSelectedOptions:Nt=[]}=f,{updateFilters:$t,filters:sn,queryParameters:{[me]:Pn}}=qn(),hn=(0,i.u)(B),{value:In}=(0,O.default)(async()=>{var Vn;const Ea=De,{facets:Sa}=await hn.getEntityFacets({facets:[Ea],filter:(Vn=sn.kind)==null?void 0:Vn.getCatalogFilters()});return Object.fromEntries(Sa[Ea].map(({value:va,count:ba})=>[va,ba]))},[sn.kind]),Xn=(0,o.useMemo)(()=>[Pn].flat().filter(Boolean),[Pn]),[_n,ta]=(0,o.useState)(Xn.length?Xn:(L=(A=sn[me])==null?void 0:A.values)!=null?L:Nt);(0,o.useEffect)(()=>{Xn.length&&ta(Xn)},[Xn]);const ma=Object.keys(In!=null?In:{}),zn=_n.length&&ma.length;(0,o.useEffect)(()=>{$t({[me]:zn?new Ve(_n):void 0})},[me,zn,_n,Ve,$t]);const Mn=sn[me];return Mn&&typeof Mn=="object"&&!("values"in Mn)||!ma.length||ma.length<=1?null:o.createElement(se.Z,{pb:1,pt:1},o.createElement(Y.Z,{variant:"button",component:"label"},K,o.createElement(wt.ZP,{multiple:!0,disableCloseOnSelect:!0,options:ma,value:_n,onChange:(Vn,Ea)=>ta(Ea),renderOption:(Vn,{selected:Ea})=>o.createElement(Qe,{selected:Ea,value:Vn,availableOptions:In,showCounts:!!ze}),size:"small",popupIcon:o.createElement(Je.Z,{"data-testid":`${String(me)}-picker-expand`}),renderInput:Vn=>o.createElement(Lt,{...Vn,...ht})})))}const on=(0,Q.Z)({input:{}},{name:"CatalogReactEntityLifecyclePicker"}),vn=f=>{const{initialFilter:A=[]}=f,L=on();return o.createElement(tn,{label:"Lifecycle",name:"lifecycles",path:"spec.lifecycle",Filter:Fn,InputProps:{className:L.input},initialSelectedOptions:A})};function cn(f,A){const L=A==null?void 0:A.defaultKind;let K,me,De;return"metadata"in f?(K=f.kind,me=f.metadata.namespace,De=f.metadata.name):(K=f.kind,me=f.namespace,De=f.name),(me===void 0||me==="")&&(me=g.zG),(A==null?void 0:A.defaultNamespace)!==void 0?(A==null?void 0:A.defaultNamespace)===me&&(me=void 0):me===g.zG&&(me=void 0),K=K.toLocaleLowerCase("en-US"),K=L&&L.toLocaleLowerCase("en-US")===K?void 0:K,`${K?`${K}:`:""}${me?`${me}/`:""}${De}`}function gn(f,A){for(const L of["spec.profile.displayName","metadata.title"]){const K=k()(f,L);if(K&&typeof K=="string")return K}return A}function yn({enabled:f}){const A=(0,i.u)(B),[L]=(0,o.useState)(async()=>{if(!f)return[];const K="relations.ownedBy";return A.getEntityFacets({facets:[K]}).then(me=>me.facets[K].map(De=>De.value).map(De=>{const{kind:ze,name:Ve,namespace:ht}=(0,g.of)(De);return{apiVersion:"backstage.io/v1beta1",kind:ze,metadata:{name:Ve,namespace:ht}}}).sort((De,ze)=>(De.metadata.namespace||"").localeCompare(ze.metadata.namespace||"","en-US")||De.metadata.name.localeCompare(ze.metadata.name,"en-US")||De.kind.localeCompare(ze.kind,"en-US"))).catch(()=>[])});return(0,Ft.default)(async(K,me)=>{var De;const ze=await L;if(!ze)return{items:[]};const Ve=(De=me==null?void 0:me.limit)!=null?De:20,{text:ht,start:Nt}=Bn(K),$t=ze.filter(Pn=>Kn(ht,Pn)),sn=Nt+Ve;return{items:$t.slice(0,sn),...jn({entities:$t,limit:sn,payload:{text:ht,start:sn}})}},[L],{loading:!0,value:{items:[]}})}function Bn(f){return Qn(f)&&f.cursor?JSON.parse(atob(f.cursor)):{text:f.text||"",start:0}}function Qn(f){return!!f.cursor}function jn({entities:f,limit:A,payload:L}){return f.length>A?{cursor:btoa(JSON.stringify(L))}:{}}function Kn(f,A){var L;const K=f.trim();return A.kind.includes(K)||((L=A.metadata.namespace)==null?void 0:L.includes(K))||A.metadata.name.includes(K)}function Dn(){const f=(0,i.u)(B);return(0,Ft.default)(async(A,L)=>{var K;const me=A,De=A,ze=(K=L==null?void 0:L.limit)!=null?K:20;if(De.cursor){const ht=await f.queryEntities({cursor:De.cursor,limit:ze});return{cursor:ht.pageInfo.nextCursor,items:[...De.items,...ht.items]}}const Ve=await f.queryEntities({fullTextFilter:{term:me.text||"",fields:["metadata.name","kind","spec.profile.displayname","metadata.title"]},filter:{kind:["User","Group"]},orderFields:[{field:"metadata.name",order:"asc"}],limit:ze});return{cursor:Ve.pageInfo.nextCursor,items:Ve.items}},[],{loading:!0})}function Jn({mode:f,initialSelectedOwnersRefs:A}){const L=f==="owners-only",K=Dn(),me=yn({enabled:L}),[De,ze]=L?me:K;return[De,ze,fn({enabled:!L,initialSelectedOwnersRefs:A})]}function fn({enabled:f,initialSelectedOwnersRefs:A}){const L=(0,o.useRef)({}),K=(0,i.u)(B),[,me]=(0,Ft.default)(async()=>{(await K.getEntitiesByRefs({entityRefs:A})).items.forEach(ze=>{ze&&(L.current[(0,g.eE)(ze)]=ze)})},[]);return(0,At.n)(()=>{f&&A.length>0&&me()}),{getEntity:De=>L.current[De],setEntity:De=>{L.current[(0,g.eE)(De)]=De}}}const wn=(0,Q.Z)({input:{}},{name:"CatalogReactEntityOwnerPicker"}),sa=o.createElement(Te.Z,{fontSize:"small"}),ua=o.createElement(Ae.Z,{fontSize:"small"}),Ia=f=>{var A,L,K;const me=wn(),{mode:De="owners-only"}=f||{},{updateFilters:ze,filters:Ve,queryParameters:{owners:ht}}=qn(),[Nt,$t]=(0,o.useState)(""),sn=(0,o.useMemo)(()=>[ht].flat().filter(Boolean),[ht]),[Pn,hn]=(0,o.useState)(sn.length?sn:(L=(A=Ve.owners)==null?void 0:A.values)!=null?L:[]),[{value:In,loading:Xn},_n,ta]=Jn({mode:De,initialSelectedOwnersRefs:Pn});(0,Wt.b)(()=>_n({text:Nt}),[Nt,_n],250);const ma=(In==null?void 0:In.items)||[];return(0,o.useEffect)(()=>{if(sn.length){const zn=new Nn(sn);hn(zn.values)}},[sn]),(0,o.useEffect)(()=>{ze({owners:Pn.length?new Nn(Pn):void 0})},[Pn,ze]),["user","group"].includes(((K=Ve.kind)==null?void 0:K.value.toLocaleLowerCase("en-US"))||"")?null:o.createElement(se.Z,{pb:1,pt:1},o.createElement(Y.Z,{variant:"button",component:"label"},"Owner",o.createElement(wt.ZP,{multiple:!0,disableCloseOnSelect:!0,loading:Xn,options:ma,value:Pn,getOptionSelected:(zn,Mn)=>typeof Mn=="string"?(0,g.eE)(zn)===Mn:zn===Mn,getOptionLabel:zn=>{const Mn=typeof zn=="string"?ta.getEntity(zn)||(0,g.of)(zn,{defaultKind:"group",defaultNamespace:"default"}):zn;return gn(Mn,cn(Mn))},onChange:(zn,Mn)=>{$t(""),hn(Mn.map(Vn=>{const Ea=typeof Vn=="string"?Vn:(0,g.eE)(Vn);return typeof Vn!="string"&&ta.setEntity(Vn),Ea}))},filterOptions:zn=>zn,renderOption:(zn,{selected:Mn})=>{const Vn=zn.kind.toLocaleLowerCase("en-US")==="group";return o.createElement(_e.Z,{control:o.createElement(ge.Z,{icon:sa,checkedIcon:ua,checked:Mn}),onClick:Ea=>Ea.preventDefault(),label:o.createElement(se.Z,{display:"flex",flexWrap:"wrap",alignItems:"center"},Vn?o.createElement(Ue.Z,{fontSize:"small"}):o.createElement(St.Z,{fontSize:"small"}),"\xA0",gn(zn,cn(zn,{defaultKind:zn.kind})))})},size:"small",popupIcon:o.createElement(Je.Z,{"data-testid":"owner-picker-expand"}),renderInput:zn=>o.createElement(be.Z,{...zn,className:me.input,onChange:Mn=>{$t(Mn.currentTarget.value)},variant:"outlined"}),ListboxProps:{onScroll:zn=>{const Mn=zn.currentTarget;Math.abs(Mn.scrollHeight-Mn.clientHeight-Mn.scrollTop)<1&&(In!=null&&In.cursor)&&_n({items:In.items,cursor:In.cursor})},"data-testid":"owner-picker-listbox"}})))},Na=(0,Q.Z)(f=>({root:{display:"inline-flex",alignItems:"center"},icon:{marginRight:f.spacing(.5),color:f.palette.text.secondary,lineHeight:0}}),{name:"CatalogReactEntityDisplayName"}),za=f=>{const{entityRef:A,hideIcon:L,disableTooltip:K,defaultKind:me,defaultNamespace:De}=f,ze=Na(),{primaryTitle:Ve,secondaryTitle:ht,Icon:Nt}=dn(A,{defaultKind:me,defaultNamespace:De});let $t=o.createElement(o.Fragment,null,Ve);return $t=o.createElement(se.Z,{component:"span",className:ze.root},Nt&&!L?o.createElement(se.Z,{component:"span",className:ze.icon},o.createElement(Nt,{fontSize:"inherit"})):null,$t),ht&&!K&&($t=o.createElement(M.ZP,{enterDelay:1500,title:ht},$t)),$t},Fa=(0,Xe.uW)("catalog:entity-route-ref",()=>(0,p.NT)({id:"catalog:entity",params:["namespace","kind","name"]}));function xa(f){var A,L;return{kind:f.kind.toLocaleLowerCase("en-US"),namespace:(L=(A=f.metadata.namespace)==null?void 0:A.toLocaleLowerCase("en-US"))!=null?L:DEFAULT_NAMESPACE,name:f.metadata.name}}const Da=(0,o.forwardRef)((f,A)=>{var L;const{entityRef:K,defaultKind:me,defaultNamespace:De,title:ze,children:Ve,hideIcon:ht,...Nt}=f,$t=Ga(f.entityRef),sn=(L=Ve!=null?Ve:ze)!=null?L:o.createElement(za,{entityRef:K,defaultKind:me,defaultNamespace:De,hideIcon:ht});return o.createElement(Ot.rU,{...Nt,ref:A,to:$t},sn)});function Ga(f){var A;const L=(0,p.tg)(Fa);let K,me,De;if(typeof f=="string"){const Ve=(0,g.of)(f);K=Ve.kind,me=Ve.namespace,De=Ve.name}else"metadata"in f?(K=f.kind,me=f.metadata.namespace,De=f.metadata.name):(K=f.kind,me=f.namespace,De=f.name);K=K.toLocaleLowerCase("en-US"),me=(A=me==null?void 0:me.toLocaleLowerCase("en-US"))!=null?A:g.zG;const ze={kind:encodeURIComponent(K),namespace:encodeURIComponent(me),name:encodeURIComponent(De)};return L(ze)}function ja(f){const{entityRefs:A,hideIcons:L,...K}=f;return o.createElement(o.Fragment,null,A.map((me,De)=>{const ze=typeof me=="string"?me:(0,g.eE)(me);return o.createElement(o.Fragment,{key:`${De}.${ze}`},De>0&&", ",o.createElement(Da,{...K,entityRef:me,hideIcon:L}))}))}const Xa=f=>{const A=useRouteRef(Fa);return React.createElement(IconButton,{component:Link,"aria-label":"Show",title:"Show details",to:A(getCompoundEntityRef(f.entity))},React.createElement(InfoIcon,null))},cr=f=>React.createElement(IconButton,{component:Link,"aria-label":"Email",title:`Email ${f.email}`,to:`mailto:${f.email}`},React.createElement(EmailIcon,null)),nr=f=>{var A;const L=(A=f.entity.spec.profile)==null?void 0:A.email;return L?React.createElement(cr,{email:L}):null},Oa=f=>{var A;const L=(A=f.entity.spec.profile)==null?void 0:A.email;return L?React.createElement(cr,{email:L}):null},ia=(0,Q.Z)(()=>({popoverPaper:{width:"30em"},descriptionTypography:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}})),la=4,Qa=f=>{var A,L,K,me;const{entityRef:De,children:ze,delayTime:Ve=500}=f,ht=ia(),Nt=useApiHolder(),$t=usePopupState({variant:"popover",popupId:"entity-peek-ahead"}),[sn,Pn]=useState(!1),hn=useMemo(()=>debounce(()=>Pn(!0),Ve),[Ve]),[{loading:In,error:Xn,value:_n},ta]=useAsyncFn(async()=>{const zn=Nt.get(B);if(zn){const Mn=await zn.getEntityByRef(De);if(!Mn)throw new Error(`${De} not found`);return Mn}},[Nt,De]),ma=()=>{Pn(!1),hn.cancel()};return useEffect(()=>{$t.isOpen&&!_n&&!Xn&&!In&&ta()},[$t.isOpen,ta,_n,Xn,In]),React.createElement(React.Fragment,null,React.createElement(Typography,{component:"span",onMouseEnter:hn},React.createElement(Typography,{component:"span","data-testid":"trigger",...bindHover($t)},ze)),sn&&React.createElement(HoverPopover,{PaperProps:{className:ht.popoverPaper},...bindPopover($t),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onMouseLeave:ma},React.createElement(Card,null,React.createElement(CardContent,null,Xn&&React.createElement(ResponseErrorPanel,{error:Xn}),In&&React.createElement(Progress,null),_n&&React.createElement(React.Fragment,null,React.createElement(Typography,{color:"textSecondary"},_n.metadata.namespace),React.createElement(Typography,{variant:"h5",component:"div"},_n.metadata.name),React.createElement(Typography,{color:"textSecondary",gutterBottom:!0},_n.kind),_n.metadata.description&&React.createElement(Typography,{className:ht.descriptionTypography,paragraph:!0},_n.metadata.description),React.createElement(Typography,null,(L=(A=_n.spec)==null?void 0:A.type)==null?void 0:L.toString()),React.createElement(Box,{marginTop:"0.5em"},(_n.metadata.tags||[]).slice(0,la).map(zn=>React.createElement(Chip,{key:zn,size:"small",label:zn})),((K=_n.metadata.tags)==null?void 0:K.length)&&((me=_n.metadata.tags)==null?void 0:me.length)>la&&React.createElement(Tooltip,{title:"Drill into the entity to see all of the tags."},React.createElement(Chip,{key:"other-tags",size:"small",label:"..."}))))),!Xn&&_n&&React.createElement(CardActions,null,React.createElement(React.Fragment,null,isUserEntity(_n)&&React.createElement(Oa,{entity:_n}),isGroupEntity(_n)&&React.createElement(nr,{entity:_n}),React.createElement(Xa,{entity:_n}))))))},Ba=(0,Q.Z)(f=>({searchToolbar:{paddingLeft:0,paddingRight:0},input:{}}),{name:"CatalogReactEntitySearchBar"}),ar=()=>{var f,A;const L=Ba(),{filters:K,updateFilters:me}=qn(),[De,ze]=(0,o.useState)((A=(f=K.text)==null?void 0:f.value)!=null?A:"");return(0,I.Z)(()=>{me({text:De.length?new On(De):void 0})},250,[De,me]),o.createElement(c.Z,{className:L.searchToolbar},o.createElement(S.Z,null,o.createElement(_.Z,{"aria-label":"search",id:"input-with-icon-adornment",className:L.input,placeholder:"Search",autoComplete:"off",onChange:Ve=>ze(Ve.target.value),value:De,startAdornment:o.createElement(b.Z,{position:"start"},o.createElement(le.Z,null)),endAdornment:o.createElement(b.Z,{position:"end"},o.createElement(m.Z,{"aria-label":"clear search",onClick:()=>ze(""),edge:"end",disabled:De.length===0},o.createElement(Mt.Z,null)))})))},je=Object.freeze({createEntityRefColumn(f){const{defaultKind:A}=f;function L(K){var me;return((me=K.metadata)==null?void 0:me.title)||cn(K,{defaultKind:A})}return{title:"Name",highlight:!0,customFilterAndSearch(K,me){return L(me).includes(K)},customSort(K,me){return L(K).localeCompare(L(me))},render:K=>{var me;return o.createElement(Da,{entityRef:K,defaultKind:A,title:(me=K.metadata)==null?void 0:me.title})}}},createEntityRelationColumn(f){const{title:A,relation:L,defaultKind:K,filter:me}=f;function De(Ve){return(0,Zt.g)(Ve,L,me)}function ze(Ve){return De(Ve).map(ht=>cn(ht,{defaultKind:K})).join(", ")}return{title:A,customFilterAndSearch(Ve,ht){return ze(ht).includes(Ve)},customSort(Ve,ht){return ze(Ve).localeCompare(ze(ht))},render:Ve=>o.createElement(ja,{entityRefs:De(Ve),defaultKind:K})}},createOwnerColumn(){return this.createEntityRelationColumn({title:"Owner",relation:g.S4,defaultKind:"group"})},createDomainColumn(){return this.createEntityRelationColumn({title:"Domain",relation:g.cz,defaultKind:"domain",filter:{kind:"domain"}})},createSystemColumn(){return this.createEntityRelationColumn({title:"System",relation:g.cz,defaultKind:"system",filter:{kind:"system"}})},createMetadataDescriptionColumn(){return{title:"Description",field:"metadata.description",render:f=>o.createElement(Ot.Or,{text:f.metadata.description,placement:"bottom-start",line:2})}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"spec.lifecycle"}},createSpecTypeColumn(){return{title:"Type",field:"spec.type"}}}),ue=[je.createEntityRefColumn({defaultKind:"system"}),je.createDomainColumn(),je.createOwnerColumn(),je.createMetadataDescriptionColumn()],Ct=[je.createEntityRefColumn({defaultKind:"component"}),je.createSystemColumn(),je.createOwnerColumn(),je.createSpecTypeColumn(),je.createSpecLifecycleColumn(),je.createMetadataDescriptionColumn()],Rn=(0,Q.Z)(f=>({empty:{padding:f.spacing(2),display:"flex",justifyContent:"center"}})),Un=f=>{const{entities:A,title:L,emptyContent:K,variant:me="gridItem",columns:De,tableOptions:ze={}}=f,Ve=Rn(),ht={minWidth:"0",width:"100%"};return me==="gridItem"&&(ht.height="calc(100% - 10px)"),o.createElement(Ot.iA,{columns:De,title:L,style:ht,emptyContent:K&&o.createElement("div",{className:Ve.empty},K),options:{search:!1,paging:!1,actionsColumnIndex:-1,padding:"dense",draggable:!1,...ze},data:A})};Un.columns=je,Un.systemEntityColumns=ue,Un.componentEntityColumns=Ct;const ea=(0,Q.Z)({input:{}},{name:"CatalogReactEntityTagPicker"}),fa=f=>{const A=ea();return o.createElement(tn,{label:"Tags",name:"tags",path:"metadata.tags",Filter:an,showCounts:f.showCounts,InputProps:{className:A.input}})},Za=f=>{var A;const{hidden:L,initialFilter:K}=f,me=(0,i.u)(i.l),{error:De,availableTypes:ze,selectedTypes:Ve,setSelectedTypes:ht}=ya();if((0,o.useEffect)(()=>{De&&me.post({message:"Failed to load entity types",severity:"error"}),K&&ht([K])},[De,me,K,ht]),ze.length===0||De)return null;const Nt=[{value:"all",label:"all"},...ze.map($t=>({value:$t,label:$t}))];return L?null:o.createElement(se.Z,{pb:1,pt:1},o.createElement(Ot.Ph,{label:"Type",items:Nt,selected:(A=Nt.length>1?Ve[0]:void 0)!=null?A:"all",onChange:$t=>ht($t==="all"?[]:[String($t)])}))},Ka=(0,ve.Z)({root:{color:"#f3ba37"}})(Be.Z),_a=f=>{const{toggleStarredEntity:A,isStarredEntity:L}=Z(f.entity);return o.createElement(m.Z,{"aria-label":"favorite",color:"inherit",...f,onClick:()=>A()},o.createElement(M.ZP,{title:L?"Remove from favorites":"Add to favorites"},L?o.createElement(Ka,null):o.createElement(ie.Z,null)))},Ua=Ge.Z;function Ma(f,A){if(f)return f.toLocaleLowerCase("en-US");if(A)try{return(0,g.of)(A).kind.toLocaleLowerCase("en-US")}catch{return}}function qa(f,A){const L=(0,p.qD)(),K=Ma(f,A);return K&&L.getSystemIcon(`kind:${K}`)||Ua}function h(f){const{kind:A,entityRef:L,...K}=f,me=qa(A,L);return o.createElement(me,{...K})}const l=(0,Q.Z)(f=>({node:{fill:f.palette.grey[300],stroke:f.palette.grey[300],"&.primary":{fill:f.palette.primary.light,stroke:f.palette.primary.light},"&.secondary":{fill:f.palette.secondary.light,stroke:f.palette.secondary.light}},text:{fill:f.palette.getContrastText(f.palette.grey[300]),"&.primary":{fill:f.palette.primary.contrastText},"&.secondary":{fill:f.palette.secondary.contrastText},"&.focused":{fontWeight:"bold"}},clickable:{cursor:"pointer"}}));function y(f){const A=(0,i.u)(B),L=(0,g.eE)(f),{loading:K,error:me,value:De}=(0,O.default)(async()=>{const ze=await A.getEntityAncestors({entityRef:L}),Ve=new Array,ht=new Array;for(const Nt of ze.items){const $t=(0,g.eE)(Nt.entity),sn=$t===ze.rootEntityRef;Ve.push({id:$t,root:sn,...Nt.entity});for(const Pn of Nt.parentEntityRefs)ht.push({from:$t,to:Pn})}return{nodes:Ve,edges:ht}},[L]);return{loading:K,error:me,nodes:(De==null?void 0:De.nodes)||[],edges:(De==null?void 0:De.edges)||[]}}function G({node:f}){const A=l(),L=(0,yt.s0)(),K=(0,p.tg)(Fa),[me,De]=(0,o.useState)(0),[ze,Ve]=(0,o.useState)(0),ht=(0,o.useRef)(null);(0,o.useLayoutEffect)(()=>{if(ht.current){let{height:_n,width:ta}=ht.current.getBBox();_n=Math.round(_n),ta=Math.round(ta),(_n!==ze||ta!==me)&&(De(ta),Ve(_n))}},[me,ze]);const Nt=10,$t=ze,sn=$t+Nt,Pn=sn+me+Nt*2,hn=ze+Nt*2,In=f.metadata.title||(f.kind&&f.metadata.name&&f.metadata.namespace?cn({kind:f.kind,name:f.metadata.name,namespace:f.metadata.namespace||""}):f.id),Xn=()=>{L(K({kind:f.kind,namespace:f.metadata.namespace||g.zG,name:f.metadata.name}))};return o.createElement("g",{onClick:Xn,className:A.clickable},o.createElement("rect",{className:Tt()(A.node,f.root?"secondary":"primary"),width:Pn,height:hn,rx:10}),o.createElement(h,{kind:f.kind,y:Nt,x:Nt,width:$t,height:$t,className:Tt()(A.text,f.root?"secondary":"primary")}),o.createElement("text",{ref:ht,className:Tt()(A.text,f.root?"secondary":"primary"),y:hn/2,x:sn+(me+Nt*2)/2,textAnchor:"middle",alignmentBaseline:"middle"},In))}function Re(f){const{loading:A,error:L,nodes:K,edges:me}=y(f.entity);return A?o.createElement(Ot.Ex,null):L?o.createElement(Ot.Gk,{error:L}):o.createElement(o.Fragment,null,o.createElement(ee.Z,{variant:"h2"},"Ancestry"),o.createElement(ee.Z,{gutterBottom:!0},"This is the ancestry of entities above the current one - as in, the chain(s) of entities down to the current one, where"," ",o.createElement(Ot.rU,{to:"https://backstage.io/docs/features/software-catalog/life-of-an-entity"},"processors emitted")," ","child entities that ultimately led to the current one existing. Note that this is a completely different mechanism from relations."),o.createElement(se.Z,{mt:4},o.createElement(Ot.mn,{nodes:K,edges:me,renderNode:G,direction:Ot.NX.Direction.BOTTOM_TOP,zoom:"enable-on-click"})))}const lt=(0,Q.Z)(f=>({root:{display:"flex",flexDirection:"column"},marginTop:{marginTop:f.spacing(2)},helpIcon:{marginLeft:f.spacing(1),color:f.palette.text.disabled},monospace:{fontFamily:"monospace"}}));function It(f){const A=lt();return o.createElement(he.Z,{...f,primaryTypographyProps:{className:A.monospace},secondaryTypographyProps:{className:A.monospace}})}function Vt(f){const A=lt();return o.createElement(J.Z,{className:A.monospace},f.children)}function Sn(f){return o.createElement(se.Z,{mt:2},o.createElement(ne.Z,{variant:"outlined"},o.createElement(re.Z,null,o.createElement(Y.Z,{variant:"h6",gutterBottom:!0},f.title,f.helpLink&&o.createElement(Aa,{to:f.helpLink})),f.children)))}function kn(f){if(f.match(/^url:https?:\/\//))return f.slice(4);if(f.match(/^https?:\/\//))return f}function Zn(f){const[A,L]=f.entry,K=kn(L);return o.createElement(Pe.Z,null,f.indent&&o.createElement(Pt.Z,null),o.createElement(It,{primary:A,secondary:K?o.createElement(Ot.rU,{to:K},L):L}))}function Aa(f){const A=lt();return o.createElement(Ot.rU,{to:f.to,className:A.helpIcon},o.createElement(tt.Z,{fontSize:"inherit"}))}const Va=(0,Q.Z)({root:{display:"flex",flexDirection:"column"}});function rr(f){var A,L;const K=(0,i.u)(B),me=(0,g.eE)(f),De=(A=f.metadata.annotations)==null?void 0:A[g.P1],ze=(L=f.metadata.annotations)==null?void 0:L[g.q1],{loading:Ve,error:ht,value:Nt}=(0,O.default)(async()=>!De&&!ze?[]:(await K.getEntities({filter:[...De?[{[`metadata.annotations.${g.P1}`]:De}]:[],...ze?[{[`metadata.annotations.${g.q1}`]:ze}]:[]]})).items,[De,ze]);return{loading:Ve,error:ht,location:De,originLocation:ze,colocatedEntities:Nt==null?void 0:Nt.filter($t=>(0,g.eE)($t)!==me)}}function or(f){return o.createElement(T.Z,{dense:!0},f.header&&o.createElement(Zn,{key:"header",entry:f.header}),f.entities.map(A=>o.createElement(Pe.Z,{key:(0,g.eE)(A)},o.createElement(Pt.Z,null,o.createElement(h,{kind:A.kind})),o.createElement(It,{primary:o.createElement(Da,{entityRef:A})}))))}function qr(f){const{entity:A}=f,{loading:L,error:K,location:me,originLocation:De,colocatedEntities:ze}=rr(A);if(L)return o.createElement(Ot.Ex,null);if(K)return o.createElement(Ot.Gk,{error:K});if(!me&&!De)return o.createElement(nn.Z,{severity:"warning"},"Entity had no location information.");if(!(ze!=null&&ze.length))return o.createElement(nn.Z,{severity:"info"},"There were no other entities on this location.");if(me===De)return o.createElement(or,{entities:ze});const Ve=ze.filter(Nt=>{var $t;return(($t=Nt.metadata.annotations)==null?void 0:$t[g.P1])===me}),ht=ze.filter(Nt=>{var $t;return(($t=Nt.metadata.annotations)==null?void 0:$t[g.q1])===De});return o.createElement(o.Fragment,null,Ve.length>0&&o.createElement(or,{entities:Ve,header:["At the same location",me]}),ht.length>0&&o.createElement(or,{entities:ht,header:["At the same origin",De]}))}function eo(f){const A=Va();return o.createElement(o.Fragment,null,o.createElement(ee.Z,{variant:"h2"},"Colocated"),o.createElement(ee.Z,null,"These are the entities that are colocated with this entity - as in, they originated from the same data source (e.g. came from the same YAML file), or from the same origin (e.g. the originally registered URL)."),o.createElement("div",{className:A.root},o.createElement(qr,{entity:f.entity})))}function Zr(f){return Object.fromEntries([...Object.entries(f)].sort((A,L)=>A[0]<L[0]?-1:1))}function to(f){return o.createElement(o.Fragment,null,o.createElement(ee.Z,{variant:"h2"},"Entity as JSON"),o.createElement(ee.Z,null,"This is the raw entity data as received from the catalog, on JSON form."),o.createElement(ee.Z,null,o.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},o.createElement(Ot.Oi,{text:JSON.stringify(Zr(f.entity),void 0,2),language:"json",showCopyCodeButton:!0}))))}const Ur=(0,Q.Z)({root:{display:"flex",flexDirection:"column"}});function kr(f){var A,L,K;const me=Ur(),{apiVersion:De,kind:ze,metadata:Ve,spec:ht,relations:Nt=[],status:$t={}}=f.entity,sn=Rt()(Ke()(Nt,hn=>hn.targetRef),"type"),Pn=(0,g.eE)(f.entity);return o.createElement(o.Fragment,null,o.createElement(ee.Z,{variant:"h2"},"Overview"),o.createElement("div",{className:me.root},o.createElement(Sn,{title:"Identity"},o.createElement(T.Z,{dense:!0},o.createElement(Pe.Z,null,o.createElement(It,{primary:"apiVersion",secondary:De})),o.createElement(Pe.Z,null,o.createElement(It,{primary:"kind",secondary:ze})),(ht==null?void 0:ht.type)&&o.createElement(Pe.Z,null,o.createElement(It,{primary:"spec.type",secondary:(A=ht.type)==null?void 0:A.toString()})),Ve.uid&&o.createElement(Pe.Z,null,o.createElement(It,{primary:"uid",secondary:Ve.uid}),o.createElement(rn.Z,null,o.createElement(Ot.bj,{text:Ve.uid}))),Ve.etag&&o.createElement(Pe.Z,null,o.createElement(It,{primary:"etag",secondary:Ve.etag}),o.createElement(rn.Z,null,o.createElement(Ot.bj,{text:Ve.etag}))),o.createElement(Pe.Z,null,o.createElement(It,{primary:"entityRef",secondary:Pn}),o.createElement(rn.Z,null,o.createElement(Ot.bj,{text:Pn}))))),o.createElement(Sn,{title:"Metadata"},!!Object.keys(Ve.annotations||{}).length&&o.createElement(T.Z,{dense:!0,subheader:o.createElement(Vt,null,"Annotations",o.createElement(Aa,{to:"https://backstage.io/docs/features/software-catalog/well-known-annotations"}))},Object.entries(Ve.annotations).map(hn=>o.createElement(Zn,{key:hn[0],indent:!0,entry:hn}))),!!Object.keys(Ve.labels||{}).length&&o.createElement(T.Z,{dense:!0,subheader:o.createElement(Vt,null,"Labels")},Object.entries(Ve.labels).map(hn=>o.createElement(Zn,{key:hn[0],indent:!0,entry:hn}))),!!((L=Ve.tags)!=null&&L.length)&&o.createElement(T.Z,{dense:!0,subheader:o.createElement(Vt,null,"Tags")},Ve.tags.map((hn,In)=>o.createElement(Pe.Z,{key:`${hn}-${In}`},o.createElement(Pt.Z,null),o.createElement(It,{primary:hn}))))),!!Nt.length&&o.createElement(Sn,{title:"Relations",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-relations"},Object.entries(sn).map(([hn,In],Xn)=>o.createElement("div",{key:Xn},o.createElement(T.Z,{dense:!0,subheader:o.createElement(Vt,null,hn)},In.map(_n=>o.createElement(Pe.Z,{key:_n.targetRef},o.createElement(Pt.Z,null,o.createElement(h,{entityRef:_n.targetRef})),o.createElement(It,{primary:o.createElement(Da,{entityRef:_n.targetRef})}))))))),!!((K=$t.items)!=null&&K.length)&&o.createElement(Sn,{title:"Status",helpLink:"https://backstage.io/docs/features/software-catalog/well-known-statuses"},$t.items.map((hn,In)=>o.createElement("div",{key:In},o.createElement(Y.Z,null,hn.level,": ",hn.type),o.createElement(se.Z,{ml:2},hn.message))))))}function Dr(f){return o.createElement(o.Fragment,null,o.createElement(ee.Z,{variant:"h2"},"Entity as YAML"),o.createElement(ee.Z,null,"This is the raw entity data as received from the catalog, on YAML form."),o.createElement(ee.Z,null,o.createElement("div",{style:{fontSize:"75%"},"data-testid":"code-snippet"},o.createElement(Ot.Oi,{text:en.ZP.stringify(Zr(f.entity)),language:"yaml",showCopyCodeButton:!0}))))}const ur=(0,Q.Z)(f=>({fullHeightDialog:{height:"calc(100% - 64px)"},root:{display:"flex",flexGrow:1,width:"100%",backgroundColor:f.palette.background.paper},tabs:{borderRight:`1px solid ${f.palette.divider}`,flexShrink:0},tabContents:{flexGrow:1,overflowX:"auto"}}));function Pr(f){const{children:A,value:L,index:K,...me}=f,De=ur();return o.createElement("div",{role:"tabpanel",hidden:L!==K,id:`vertical-tabpanel-${K}`,"aria-labelledby":`vertical-tab-${K}`,className:De.tabContents,...me},L===K&&o.createElement(se.Z,{pl:3,pr:3},A))}function _r(f){return{id:`vertical-tab-${f}`,"aria-controls":`vertical-tabpanel-${f}`}}function Ar(f){const A=ur(),[L,K]=o.useState(0);return(0,o.useEffect)(()=>{K(0)},[f.open]),f.entity?o.createElement(de.Z,{fullWidth:!0,maxWidth:"xl",open:f.open,onClose:f.onClose,"aria-labelledby":"entity-inspector-dialog-title",PaperProps:{className:A.fullHeightDialog}},o.createElement(Bt.Z,{id:"entity-inspector-dialog-title"},"Entity Inspector"),o.createElement(ut.Z,{dividers:!0},o.createElement("div",{className:A.root},o.createElement(rt.Z,{orientation:"vertical",variant:"scrollable",value:L,onChange:(me,De)=>K(De),"aria-label":"Inspector options",className:A.tabs},o.createElement(bt.Z,{label:"Overview",..._r(0)}),o.createElement(bt.Z,{label:"Ancestry",..._r(1)}),o.createElement(bt.Z,{label:"Colocated",..._r(2)}),o.createElement(bt.Z,{label:"Raw JSON",..._r(3)}),o.createElement(bt.Z,{label:"Raw YAML",..._r(4)})),o.createElement(Pr,{value:L,index:0},o.createElement(kr,{entity:f.entity})),o.createElement(Pr,{value:L,index:1},o.createElement(Re,{entity:f.entity})),o.createElement(Pr,{value:L,index:2},o.createElement(eo,{entity:f.entity})),o.createElement(Pr,{value:L,index:3},o.createElement(to,{entity:f.entity})),o.createElement(Pr,{value:L,index:4},o.createElement(Dr,{entity:f.entity})))),o.createElement(ke.Z,null,o.createElement(xe.Z,{onClick:f.onClose,color:"primary"},"Close"))):null}function Wr(f){var A;const L=(0,i.u)(B),K=(A=f.metadata.annotations)==null?void 0:A[g.q1],me=f.metadata.uid,De=K==="bootstrap:bootstrap",ze=(0,O.default)(async()=>{const In=L.getLocationByRef(K);let Xn;if(!K)Xn=Promise.resolve([]);else{const _n=`metadata.annotations.${g.q1}`;Xn=L.getEntities({filter:{[_n]:K},fields:["kind","metadata.uid","metadata.name","metadata.namespace"]}).then(ta=>ta.items)}return Promise.all([In,Xn]).then(([_n,ta])=>({location:_n,colocatedEntities:ta}))},[L,f]),Ve=(0,o.useCallback)(async function(){const{location:Xn}=ze.value;await L.removeLocationById(Xn.id)},[L,ze]),ht=(0,o.useCallback)(async function(){await L.removeEntityByUid(me)},[L,me]);if(De)return{type:"bootstrap",location:K,deleteEntity:ht};const{loading:Nt,error:$t,value:sn}=ze;if(Nt)return{type:"loading"};if($t)return{type:"error",error:$t};const{location:Pn,colocatedEntities:hn}=sn;return Pn?{type:"unregister",location:K,colocatedEntities:hn.map(g.iB),unregisterLocation:Ve,deleteEntity:ht}:{type:"only-delete",deleteEntity:ht}}const Nr=(0,Q.Z)({advancedButton:{fontSize:"0.7em"},dialogActions:{display:"inline-block"}}),no=({entity:f,onConfirm:A,onClose:L})=>{var K;const me=(0,i.u)(i.l),De=(0,i.u)(i.p),ze=Nr(),Ve=Wr(f),[ht,Nt]=(0,o.useState)(!1),[$t,sn]=(0,o.useState)(!1),Pn=(K=De.getOptionalString("app.title"))!=null?K:"Backstage",hn=(0,o.useCallback)(async function(){if("unregisterLocation"in Ve){sn(!0);try{await Ve.unregisterLocation(),A()}catch(ta){(0,Ce.BD)(ta),me.post({message:ta.message})}finally{sn(!1)}}},[me,A,Ve]),In=(0,o.useCallback)(async function(){var ta;if("deleteEntity"in Ve){sn(!0);try{await Ve.deleteEntity();const ma=(ta=f.metadata.title)!=null?ta:f.metadata.name;A(),me.post({message:`Removed entity ${ma}`,severity:"success",display:"transient"})}catch(ma){(0,Ce.BD)(ma),me.post({message:ma.message})}finally{sn(!1)}}},[me,A,Ve,f]),Xn=()=>o.createElement(ke.Z,{className:ze.dialogActions},o.createElement(xe.Z,{onClick:L,color:"primary"},"Cancel"));return Ve.type==="loading"?o.createElement(Ot.Ex,null):Ve.type==="error"?o.createElement(Ot.Gk,{error:Ve.error}):Ve.type==="bootstrap"?o.createElement(o.Fragment,null,o.createElement(nn.Z,{severity:"info"},'You cannot unregister this entity, since it originates from a protected Backstage configuration (location "',Ve.location,'"). If you believe this is in error, please contact the ',Pn," ","integrator."),o.createElement(se.Z,{marginTop:2},!ht&&o.createElement(o.Fragment,null,o.createElement(xe.Z,{variant:"text",size:"small",color:"primary",className:ze.advancedButton,onClick:()=>Nt(!0)},"Advanced Options"),o.createElement(Xn,null)),ht&&o.createElement(o.Fragment,null,o.createElement(ee.Z,null,"You have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),o.createElement(xe.Z,{variant:"contained",color:"secondary",disabled:$t,onClick:In},"Delete Entity"),o.createElement(Xn,null)))):Ve.type==="only-delete"?o.createElement(o.Fragment,null,o.createElement(ee.Z,null,"This entity does not seem to originate from a registered location. You therefore only have the option to delete it outright from the catalog."),o.createElement(xe.Z,{variant:"contained",color:"secondary",disabled:$t,onClick:In},"Delete Entity"),o.createElement(Xn,null)):Ve.type==="unregister"?o.createElement(o.Fragment,null,o.createElement(ee.Z,null,"This action will unregister the following entities:"),o.createElement(ee.Z,{component:"ul"},Ve.colocatedEntities.map(_n=>o.createElement("li",{key:`${_n.kind}:${_n.namespace}/${_n.name}`},o.createElement(Da,{entityRef:_n})))),o.createElement(ee.Z,null,"Located at the following location:"),o.createElement(ee.Z,{component:"ul"},o.createElement("li",null,Ve.location)),o.createElement(ee.Z,null,"To undo, just re-register the entity in ",Pn,"."),o.createElement(se.Z,{marginTop:2},o.createElement(xe.Z,{variant:"contained",color:"secondary",disabled:$t,onClick:hn},"Unregister Location"),!ht&&o.createElement(se.Z,{component:"span",marginLeft:2},o.createElement(xe.Z,{variant:"text",size:"small",color:"primary",className:ze.advancedButton,onClick:()=>Nt(!0)},"Advanced Options"))),ht&&o.createElement(o.Fragment,null,o.createElement(se.Z,{paddingTop:4,paddingBottom:4},o.createElement(_t.Z,null)),o.createElement(ee.Z,null,"You also have the option to delete the entity itself from the catalog. Note that this should only be done if you know that the catalog file has been deleted at, or moved from, its origin location. If that is not the case, the entity will reappear shortly as the next refresh round is performed by the catalog."),o.createElement(xe.Z,{variant:"contained",color:"secondary",disabled:$t,onClick:In},"Delete Entity"))):o.createElement(nn.Z,{severity:"error"},"Internal error: Unknown state")},ao=f=>{const{open:A,onConfirm:L,onClose:K,entity:me}=f;return o.createElement(de.Z,{open:A,onClose:K},o.createElement(Bt.Z,{id:"responsive-dialog-title"},"Are you sure you want to unregister this entity?"),o.createElement(ut.Z,null,o.createElement(no,{entity:me,onConfirm:L,onClose:K})))};function ro(){const f=(0,i.u)(i.t),A=(0,i.u)(B),{filters:L}=qn(),{value:K,loading:me}=(0,O.default)(async()=>(await f.getBackstageIdentity()).ownershipEntityRefs,[]),{user:De,owners:ze,...Ve}=L,{["metadata.name"]:ht,...Nt}=mn((0,dt.compact)(Object.values(Ve))),[{value:$t,loading:sn},Pn]=(0,Ft.default)(async In=>{const Xn=oo(In.owners,In.ownershipEntityRefs);if(Xn===void 0)return 0;const{totalItems:_n}=await A.queryEntities({filter:{...In.filter,"relations.ownedBy":Xn},limit:0});return _n},[],{loading:!0});return(0,R.Z)(()=>{Object.keys(Nt).length!==0&&K!==void 0&&Pn({ownershipEntityRefs:K,owners:ze,filter:Nt})},[K,ze,Nt]),{count:$t,loading:me||sn,filter:(0,o.useMemo)(()=>En.owned(K!=null?K:[]),[K]),ownershipEntityRefs:K}}function oo(f,A){var L;if(A===void 0)return;const K=(L=f==null?void 0:f.values)!=null?L:[];if(K.length){const me=(0,dt.intersection)(K,A);return me.length===0?void 0:me}return A}function dr(){const f=(0,i.u)(B),{filters:A}=qn(),L=(0,o.useRef)(),K=(0,o.useMemo)(()=>{const{user:ze,...Ve}=A,ht=(0,dt.compact)(Object.values(Ve)),Nt=mn(ht),$t={filter:Nt,limit:0};return Object.keys(Nt).length===0?(L.current=void 0,L.current):(0,dt.isEqual)($t,L.current)?L.current:(L.current=$t,$t)},[A]),{value:me,loading:De}=(0,O.default)(async()=>{if(K===void 0)return 0;const{totalItems:ze}=await f.queryEntities(K);return ze},[K]);return{count:me,loading:De}}function io(){const f=(0,i.u)(B),{filters:A}=qn(),{starredEntities:L}=et(),K=(0,o.useRef)(),me=(0,o.useMemo)(()=>{const{user:ht,...Nt}=A,$t=(0,dt.compact)(Object.values(Nt)),hn={filter:{...mn($t),["metadata.name"]:Array.from(L).map(In=>(0,g.of)(In).name)},limit:1e3};return(0,dt.isEqual)(hn,K.current)?K.current:(K.current=hn,hn)},[A,L]),{value:De,loading:ze}=(0,O.default)(async()=>L.size?(await f.queryEntities(me)).items.map(Nt=>(0,g.eE)({kind:Nt.kind,namespace:Nt.metadata.namespace,name:Nt.metadata.name})).filter(Nt=>L.has(Nt)).length:0,[me,L]),Ve=(0,o.useMemo)(()=>En.starred(Array.from(L)),[L]);return{count:De,loading:ze,filter:Ve}}const Fr=(0,Q.Z)(f=>({root:{backgroundColor:"rgba(0, 0, 0, .11)",boxShadow:"none",margin:f.spacing(1,0,1,0)},title:{margin:f.spacing(1,0,0,1),textTransform:"uppercase",fontSize:12,fontWeight:"bold"},listIcon:{minWidth:30,color:f.palette.text.primary},menuItem:{minHeight:f.spacing(6)},groupWrapper:{margin:f.spacing(1,1,2,1)}}),{name:"CatalogReactUserListPicker"});function Ya(f){return[{name:"Personal",items:[{id:"owned",label:"Owned",icon:Me.Z},{id:"starred",label:"Starred",icon:Be.Z}]},{name:f!=null?f:"Company",items:[{id:"all",label:"All"}]}]}const $r=f=>{var A;const{initialFilter:L,availableFilters:K}=f,me=Fr(),ze=(A=(0,i.u)(i.p).getOptionalString("organization.name"))!=null?A:"Company",{filters:Ve,updateFilters:ht,queryParameters:{kind:Nt,user:$t}}=qn(),sn=["starred","all"],Pn=Ya(ze).map(ba=>({...ba,items:ba.items.filter(({id:wa})=>["group","user"].some(Rr=>Rr===Nt)?sn.includes(wa):!K||K.includes(wa))})).filter(({items:ba})=>!!ba.length),{count:hn,loading:In,filter:Xn}=ro(),{count:_n}=dr(),{count:ta,filter:ma,loading:zn}=io(),Mn=(0,o.useMemo)(()=>[$t].flat()[0],[$t]),[Vn,Ea]=(0,o.useState)(Mn!=null?Mn:L),Sa=(0,o.useMemo)(()=>({all:_n,starred:ta,owned:hn}),[ta,hn,_n]);(0,o.useEffect)(()=>{Mn&&Ea(Mn)},[Mn]);const va=In||zn;return(0,o.useEffect)(()=>{!va&&Vn&&Vn!=="all"&&Sa[Vn]===0&&Ea("all")},[va,Sa,Vn,Ea]),(0,o.useEffect)(()=>{if(!Vn||va)return;ht({user:(()=>Vn==="owned"?Xn:Vn==="starred"?ma:En.all())()})},[Vn,ma,Xn,ht,va]),o.createElement(ne.Z,{className:me.root},Pn.map(ba=>o.createElement(o.Fragment,{key:ba.name},o.createElement(Y.Z,{variant:"subtitle2",component:"span",className:me.title},ba.name),o.createElement(ne.Z,{className:me.groupWrapper},o.createElement(T.Z,{disablePadding:!0,dense:!0,role:"menu","aria-label":ba.name},ba.items.map(wa=>{var Rr,Ra;return o.createElement(at.Z,{role:"none presentation",key:wa.id,divider:!0,onClick:()=>Ea(wa.id),selected:wa.id===((Rr=Ve.user)==null?void 0:Rr.value),className:me.menuItem,disabled:Sa[wa.id]===0,"data-testid":`user-picker-${wa.id}`,tabIndex:0,ContainerProps:{role:"menuitem"}},wa.icon&&o.createElement(Pt.Z,{className:me.listIcon},o.createElement(wa.icon,{fontSize:"small"})),o.createElement(he.Z,null,o.createElement(Y.Z,{variant:"body1"},wa.label," ")),o.createElement(rn.Z,null,(Ra=Sa[wa.id])!=null?Ra:"-"))}))))))},Mr=(0,Q.Z)({input:{}},{name:"CatalogReactEntityProcessingStatusPickerPicker"}),br=o.createElement(Te.Z,{fontSize:"small"}),mr=o.createElement(Ae.Z,{fontSize:"small"}),Sr=()=>{const f=Mr(),{updateFilters:A}=qn(),[L,K]=(0,o.useState)([]);function me(Ve){A({orphan:Ve?new oa(Ve):void 0})}function De(Ve){A({error:Ve?new na(Ve):void 0})}const ze=["Is Orphan","Has Error"];return o.createElement(se.Z,{pb:1,pt:1},o.createElement(Y.Z,{variant:"button",component:"label"},"Processing Status",o.createElement(wt.ZP,{multiple:!0,disableCloseOnSelect:!0,options:ze,value:L,onChange:(Ve,ht)=>{K(ht),me(ht.includes("Is Orphan")),De(ht.includes("Has Error"))},renderOption:(Ve,{selected:ht})=>o.createElement(_e.Z,{control:o.createElement(ge.Z,{icon:br,checkedIcon:mr,checked:ht}),onClick:Nt=>Nt.preventDefault(),label:Ve}),size:"small",popupIcon:o.createElement(Je.Z,{"data-testid":"processing-status-picker-expand"}),renderInput:Ve=>o.createElement(be.Z,{...Ve,className:f.input,variant:"outlined"})})))},pr=(0,Q.Z)({input:{}},{name:"CatalogReactEntityNamespacePicker"}),ir=()=>{const f=pr();return o.createElement(tn,{label:"Namespace",name:"namespace",path:"metadata.namespace",Filter:ra,InputProps:{className:f.input}})},so=(0,Q.Z)(f=>({code:{borderRadius:6,margin:f.spacing(2,0),background:f.palette.type==="dark"?"#444":f.palette.common.white}}),{name:"BackstageMissingAnnotationEmptyState"});function lo(f,A){var L,K;const me=(A==null?void 0:A.kind)||"Component",De=(A==null?void 0:A.metadata.name)||"example",ze=((L=A==null?void 0:A.spec)==null?void 0:L.type)||"website",Ve=((K=A==null?void 0:A.spec)==null?void 0:K.owner)||"user:default/guest",ht=`apiVersion: backstage.io/v1alpha1
kind: ${me}
metadata:
  name: ${De}
  annotations:${f.map(sn=>`
    ${sn}: value`).join("")}
spec:
  type: ${ze}
  owner: ${Ve}`;let Nt=6;const $t=[];return f.forEach(()=>{$t.push(Nt),Nt++}),{yamlText:ht,lineNumbers:$t}}function co(f,A="Component"){const L=f.length<=1;return o.createElement(o.Fragment,null,"The ",L?"annotation":"annotations"," ",f.map(K=>o.createElement("code",null,K)).reduce((K,me)=>o.createElement(o.Fragment,null,K,", ",me))," ",L?"is":"are"," missing. You need to add the"," ",L?"annotation":"annotations"," to your ",A," if you want to enable this tool.")}function uo(f){let A;try{A=(0,Zt.u)().entity}catch{}const{annotation:L,readMoreUrl:K}=f,me=Array.isArray(L)?L:[L],De=K||"https://backstage.io/docs/features/software-catalog/well-known-annotations",ze=so(),Ve=(A==null?void 0:A.kind)||"Component",{yamlText:ht,lineNumbers:Nt}=lo(me,A);return o.createElement(Ot.ub,{missing:"field",title:"Missing Annotation",description:co(me,Ve),action:o.createElement(o.Fragment,null,o.createElement(Y.Z,{variant:"body1"},"Add the annotation to your ",Ve," YAML as shown in the highlighted example below:"),o.createElement(se.Z,{className:ze.code},o.createElement(Ot.Oi,{text:ht,language:"yaml",showLineNumbers:!0,highlightedNumbers:Nt,customStyle:{background:"inherit",fontSize:"115%"}})),o.createElement(xe.Z,{color:"primary",component:Ot.rU,to:De},"Read more"))})}function Kr(f){var A;const{children:L,value:K}=f,[me,De]=useState((A=K==null?void 0:K.filters)!=null?A:{}),ze=useCallback(Nt=>{De($t=>{const sn=typeof Nt=="function"?Nt($t):Nt;return{...$t,...sn}})},[]),Ve=useMemo(()=>({entities:[],backendEntities:[],queryParameters:{}}),[]),ht=useMemo(()=>{var Nt,$t,sn,Pn,hn;return{entities:(Nt=K==null?void 0:K.entities)!=null?Nt:Ve.entities,backendEntities:($t=K==null?void 0:K.backendEntities)!=null?$t:Ve.backendEntities,updateFilters:(sn=K==null?void 0:K.updateFilters)!=null?sn:ze,filters:me,loading:(Pn=K==null?void 0:K.loading)!=null?Pn:!1,queryParameters:(hn=K==null?void 0:K.queryParameters)!=null?hn:Ve.queryParameters,error:K==null?void 0:K.error}},[K,Ve,me,ze]);return React.createElement(pa.Provider,{value:ht},L)}},27420:(xn,Yt,e)=>{"use strict";e.d(Yt,{C:()=>_});var i=e(34520),p=e(49558),g=e(73495),j=e(78373),k=e(90436),o=e(15459),z=e(93750),He=e(27604),Ze=e(2997),a=e(11640),xe=e(28347),Ee=e(76635),se=e.n(Ee),Y=e(19928),Fe=e.n(Y),ge=e(2784),_e=e(7089);const Q=Object.freeze({createNameColumn(m){function ve(ee){var he;return((he=ee.metadata)==null?void 0:he.title)||(0,g.$3)(ee,{defaultKind:m==null?void 0:m.defaultKind})}return{title:"Project Name",field:"resolved.entityRef",highlight:!0,customSort({entity:ee},{entity:he}){return ve(ee).localeCompare(ve(he))},render:({entity:ee})=>ge.createElement(g.dx,{entityRef:ee,defaultKind:(m==null?void 0:m.defaultKind)||"Component"})}},createSystemColumn(){return{title:"System",field:"resolved.partOfSystemRelationTitle",render:({resolved:m})=>ge.createElement(g.rI,{entityRefs:m.partOfSystemRelations,defaultKind:"system"})}},createOwnerColumn(){return{title:"Information Author",field:"resolved.ownedByRelationsTitle",render:({resolved:m})=>ge.createElement(g.rI,{entityRefs:m.ownedByRelations,defaultKind:"group"})}},createSpecTargetsColumn(){return{title:"Targets",field:"entity.spec.targets",render:({entity:m})=>{var ve,ee;return ge.createElement(ge.Fragment,null,(((ve=m==null?void 0:m.spec)==null?void 0:ve.targets)||((ee=m==null?void 0:m.spec)==null?void 0:ee.target))&&ge.createElement(p.Or,{text:(m.spec.targets||[m.spec.target]).join(", "),placement:"bottom-start"}))}}},createSpecTypeColumn(m={hidden:!1}){return{title:"Type",field:"entity.spec.type",hidden:m.hidden,width:"auto"}},createSpecLifecycleColumn(){return{title:"Lifecycle",field:"entity.spec.lifecycle"}},createMetadataDescriptionColumn(){return{title:"Description",field:"entity.metadata.description",render:({entity:m})=>ge.createElement(p.Or,{text:m.metadata.description,placement:"bottom-start"}),width:"auto"}},createTagsColumn(){return{title:"Source Code Languages",field:"entity.metadata.tags",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:m})=>ge.createElement(ge.Fragment,null,m.metadata.tags&&m.metadata.tags.map(ve=>ge.createElement(_e.Z,{key:ve,label:ve,size:"small",variant:"outlined",style:{marginBottom:"0px"}}))),width:"auto"}},createTitleColumn(m){return{title:"Title",field:"entity.metadata.title",hidden:m==null?void 0:m.hidden,searchable:!0}},createLabelColumn(m,ve){return{title:(ve==null?void 0:ve.title)||"Label",field:"entity.metadata.labels",cellStyle:{padding:"0px 16px 0px 20px"},render:({entity:ee})=>{var he;const J=(he=ee.metadata)==null?void 0:he.labels,ne=J&&J[m]||(ve==null?void 0:ve.defaultValue);return ge.createElement(ge.Fragment,null,ne&&ge.createElement(_e.Z,{key:ne,label:ne,size:"small",variant:"outlined"}))},width:"auto"}},createNamespaceColumn(){return{title:"Namespace",field:"entity.metadata.namespace",width:"auto"}},createModuleNameColumn(){return{title:"Module Name",field:"entity.spec.moduleName",width:"auto"}},createModalityColumn(){return{title:"Modality",field:"entity.spec.modality",width:"auto"}},createBodyPartsColumn(){return{title:"Body Parts",field:"entity.spec.bodyParts",width:"auto"}},createProcessingPurposeColumn(){return{title:"Processing Purpose",field:"entity.spec.processingPurpose",width:"auto"}},createProtocolColumn(){return{title:"Protocol",field:"entity.spec.protocol",width:"auto"}},createAlgorithmTypeColumn(){return{title:"Algorithm Type",field:"entity.spec.algorithmType",width:"auto"}},createPackageTypeColumn(){return{title:"Package Type",field:"entity.spec.packageType",width:"auto"}},createSupportedOSColumn(){return{title:"Supported OS",field:"entity.spec.supportedOs",width:"auto"}},createDevelopmentStatusColumn(){return{title:"Development Status",field:"entity.spec.developmentStatus",width:"auto"}},createLinkToProjectPageColumn(){return{title:"Link To ProjectPage",field:"entity.spec.linkToProjectPage",width:"auto"}}});function be(m){const{columns:ve,data:ee,next:he,prev:J}=m;return ge.createElement(p.iA,{columns:ve,data:ee,options:{paginationPosition:"both",pageSizeOptions:[],showFirstLastPageButtons:!1,pageSize:Number.MAX_SAFE_INTEGER,emptyRowsWhenPaging:!1},onPageChange:ne=>{ne>0?he==null||he():J==null||J()},page:J?1:0,totalCount:he?Number.MAX_VALUE:Number.MAX_SAFE_INTEGER,localization:{pagination:{labelDisplayedRows:""}}})}const M=(0,o.Z)({root:{color:"#f3ba37"}})(a.Z),c=(m,ve)=>{const ee=he=>he.metadata.title||(0,g.$3)(he,{defaultKind:"Component"});return ee(m).localeCompare(ee(ve))},S=({filters:m,entities:ve})=>{var ee;const he=m.type===void 0;return[Q.createTitleColumn({hidden:!0}),Q.createNameColumn({defaultKind:(ee=m.kind)==null?void 0:ee.value}),...J(),Q.createMetadataDescriptionColumn(),Q.createTagsColumn()];function J(){var ne;const re=[Q.createOwnerColumn(),Q.createSpecTypeColumn({hidden:!he}),Q.createSpecLifecycleColumn(),Q.createModuleNameColumn(),Q.createModalityColumn(),Q.createBodyPartsColumn(),Q.createProcessingPurposeColumn(),Q.createProtocolColumn(),Q.createAlgorithmTypeColumn(),Q.createPackageTypeColumn(),Q.createSupportedOSColumn(),Q.createDevelopmentStatusColumn(),Q.createLinkToProjectPageColumn()];switch((ne=m.kind)==null?void 0:ne.value){case"user":return[];case"domain":case"system":return[Q.createOwnerColumn()];case"group":case"template":return[Q.createSpecTypeColumn({hidden:!he})];case"location":return[Q.createSpecTypeColumn({hidden:!he}),Q.createSpecTargetsColumn()];default:return ve.every(Pe=>Pe.metadata.namespace==="default")?re:[...re,Q.createNamespaceColumn()]}}},_=m=>{var ve,ee,he,J;const{columns:ne=S,tableOptions:re,subtitle:Pe,emptyContent:Pt}=m,{isStarredEntity:T,toggleStarredEntity:rn}=(0,g.CR)(),de=(0,g.wp)(),{loading:Bt,error:ut,entities:rt,filters:bt,pageInfo:ke}=de,_t=!!ke,at=(0,ge.useMemo)(()=>typeof ne=="function"?ne(de):ne,[ne,de]);if(ut)return ge.createElement("div",null,ge.createElement(p.GB,{severity:"error",title:"Could not fetch catalog entities."},ge.createElement(p.Oi,{language:"text",text:ut.toString()})));const zt=[({entity:O})=>{var D;const ae=(D=O.metadata.annotations)==null?void 0:D[i.l2],fe="View";return{icon:()=>ge.createElement(ge.Fragment,null,ge.createElement(k.Z,{style:z.Z},fe),ge.createElement(Ze.Z,{fontSize:"small"})),tooltip:fe,disabled:!ae,onClick:()=>{ae&&window.open(ae,"_blank")}}},({entity:O})=>{var D;const ae=(D=O.metadata.annotations)==null?void 0:D[i.Tf],fe="Edit";return{icon:()=>ge.createElement(ge.Fragment,null,ge.createElement(k.Z,{style:z.Z},fe),ge.createElement(He.Z,{fontSize:"small"})),tooltip:fe,disabled:!ae,onClick:()=>{ae&&window.open(ae,"_blank")}}},({entity:O})=>{const D=T(O),ae=D?"Remove from favorites":"Add to favorites";return{cellStyle:{paddingLeft:"1em"},icon:()=>ge.createElement(ge.Fragment,null,ge.createElement(k.Z,{style:z.Z},ae),D?ge.createElement(M,null):ge.createElement(xe.Z,null)),tooltip:ae,onClick:()=>rn(O)}}],Ot=((ve=bt.kind)==null?void 0:ve.value)||"",Zt=((ee=bt.type)==null?void 0:ee.value)||"",gt=[(0,Ee.capitalize)((J=(he=bt.user)==null?void 0:he.value)!=null?J:"all"),Zt,Fe()(Ot)].filter(O=>O).join(" "),Ut=`${gt} (${rt.length})`,qt=m.actions||zt,yt={actionsColumnIndex:-1,loadingType:"linear",showEmptyDataSourceMessage:!Bt,padding:"dense",...re};if(_t)return ge.createElement(be,{columns:at,emptyContent:Pt,isLoading:Bt,title:Ut,actions:qt,subtitle:Pe,options:yt,data:rt.map(b),next:ke.next,prev:ke.prev});const Ft=rt.sort(c).map(b),I=20,W=Ft.length>I;return ge.createElement(p.iA,{isLoading:Bt,columns:at,options:{paging:W,pageSize:I,pageSizeOptions:[20,50,100],...yt},title:`${gt} (${rt.length})`,data:Ft,actions:qt,subtitle:Pe,emptyContent:Pt})};_.columns=Q;function b(m){const ve=(0,j.g)(m,i.cz,{kind:"system"}),ee=(0,j.g)(m,i.S4);return{entity:m,resolved:{name:(0,g.$3)(m,{defaultKind:"Component"}),entityRef:(0,i.eE)(m),ownedByRelationsTitle:ee.map(he=>(0,g.$3)(he,{defaultKind:"group"})).join(", "),ownedByRelations:ee,partOfSystemRelationTitle:ve.map(he=>(0,g.$3)(he,{defaultKind:"system"})).join(", "),partOfSystemRelations:ve}}}},84582:(xn,Yt,e)=>{"use strict";e.d(Yt,{E:()=>de});var i=e(34520),p=e(49558),g=e(57032),j=e(30705),k=e(73495),o=e(78373),z=e(12231),He=e(86136),Ze=e(49378),a=e(85256),xe=e(80030),Ee=e(61837),se=e(79784),Y=e(50758),Fe=e(95544),ge=e(99688),_e=e(2784),Q=e(73557),be=e(79692),M=e(31654),c=e(43054),S=e(65759),_=e(61068),b=e(75650),m=e(49166),ve=e(95074),ee=e(91578);function he(Bt){var ut;const{unregisterEntityOptions:rt,isUnregisterAllowed:bt,onUnregisterEntity:ke,onClose:_t}=Bt,at=typeof(rt==null?void 0:rt.disableUnregister)=="boolean",zt=(ut=!bt||(at?!!(rt!=null&&rt.disableUnregister):(rt==null?void 0:rt.disableUnregister)==="disable"))!=null?ut:!1;let Ot=_e.createElement(_e.Fragment,null);return(rt==null?void 0:rt.disableUnregister)!=="hidden"&&(Ot=_e.createElement(z.Z,{onClick:()=>{_t(),ke()},disabled:zt},_e.createElement(He.Z,null,_e.createElement(m.Z,{fontSize:"small"})),_e.createElement(Ze.Z,{primary:"Unregister entity"}))),_e.createElement(_e.Fragment,null,Ot)}const J=(0,be.Z)(Bt=>({button:{color:Bt.page.fontColor}}),{name:"PluginCatalogEntityContextMenu"});function ne(Bt){const{UNSTABLE_extraContextMenuItems:ut,UNSTABLE_contextMenuOptions:rt,onUnregisterEntity:bt,onInspectEntity:ke}=Bt,[_t,at]=(0,_e.useState)(),zt=J(),Zt=(0,_.N$)(b.j8).allowed,dt=I=>{at(I.currentTarget)},gt=()=>{at(void 0)},Ut=(0,g.u)(g.l),[qt,yt]=(0,ve.Z)();(0,_e.useEffect)(()=>{!qt.error&&qt.value&&Ut.post({message:"Copied!",severity:"info",display:"transient"})},[qt,Ut]);const Ft=ut&&[...ut.map(I=>_e.createElement(z.Z,{key:I.title,onClick:()=>{gt(),I.onClick()}},_e.createElement(He.Z,null,_e.createElement(I.Icon,{fontSize:"small"})),_e.createElement(Ze.Z,{primary:I.title}))),_e.createElement(a.Z,{key:"the divider is here!"})];return _e.createElement(_e.Fragment,null,_e.createElement(xe.ZP,{title:"More",arrow:!0},_e.createElement(Ee.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true","aria-expanded":!!_t,role:"button",onClick:dt,"data-testid":"menu-button",className:zt.button,id:"long-menu"},_e.createElement(c.Z,null))),_e.createElement(se.ZP,{open:Boolean(_t),onClose:gt,anchorEl:_t,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},"aria-labelledby":"long-menu"},_e.createElement(Y.Z,{autoFocusItem:Boolean(_t)},Ft,_e.createElement(he,{unregisterEntityOptions:rt,isUnregisterAllowed:Zt,onUnregisterEntity:bt,onClose:gt}),_e.createElement(z.Z,{onClick:()=>{gt(),ke()}},_e.createElement(He.Z,null,_e.createElement(M.Z,{fontSize:"small"})),_e.createElement(Ze.Z,{primary:"Inspect entity"})),_e.createElement(z.Z,{onClick:()=>{gt(),yt(window.location.toString())}},_e.createElement(He.Z,null,_e.createElement(S.Z,{fontSize:"small"})),_e.createElement(Ze.Z,{primary:"Copy entity URL"})))))}const re="plugin.catalog.entityLayoutRoute",Pe=()=>null;(0,j.R5)(Pe,re,!0),(0,j.R5)(Pe,"core.gatherMountPoints",!0);function Pt(Bt){const{entity:ut,title:rt}=Bt;return _e.createElement(Fe.Z,{display:"inline-flex",alignItems:"center",height:"1em",maxWidth:"100%"},_e.createElement(Fe.Z,{component:"span",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},ut?_e.createElement(k.co,{entityRef:ut,hideIcon:!0}):rt),ut&&_e.createElement(k.LH,{entity:ut}))}function T(Bt,ut,rt,bt){var ke,_t,at,zt,Ot;const Zt=(ke=Bt!=null?Bt:bt==null?void 0:bt.kind)!=null?ke:"",dt=(_t=ut!=null?ut:bt==null?void 0:bt.metadata.namespace)!=null?_t:"";return{headerTitle:`${(Ot=(zt=(at=bt==null?void 0:bt.metadata.title)!=null?at:rt)!=null?zt:bt==null?void 0:bt.metadata.name)!=null?Ot:""}${dt&&dt!==i.zG?` in ${dt}`:""}`,headerType:(()=>{let Ut=Zt.toLocaleLowerCase("en-US");return bt&&bt.spec&&"type"in bt.spec&&(Ut+=" \u2014 ",Ut+=bt.spec.type.toLocaleLowerCase("en-US")),Ut})()}}function rn(Bt){var ut,rt;const{entity:bt}=Bt,ke=(0,o.g)(bt,i.S4);return _e.createElement(_e.Fragment,null,ke.length>0&&_e.createElement(p.i9,{label:"Owner",contentTypograpyRootComponent:"p",value:_e.createElement(k.rI,{entityRefs:ke,defaultKind:"Group",color:"inherit"})}),((ut=bt.spec)==null?void 0:ut.lifecycle)&&_e.createElement(p.i9,{label:"Lifecycle",value:(rt=bt.spec.lifecycle)==null?void 0:rt.toString()}))}const de=Bt=>{var ut,rt,bt;const{UNSTABLE_extraContextMenuItems:ke,UNSTABLE_contextMenuOptions:_t,children:at,NotFoundComponent:zt}=Bt,{kind:Ot,namespace:Zt,name:dt}=(0,j.Oi)(k.wi),{entity:gt,loading:Ut,error:qt}=(0,o.a)(),yt=(0,Q.TH)(),Ft=(0,j.vJ)(at,nn=>nn.selectByComponentData({key:re,withStrictError:"Child of EntityLayout must be an EntityLayout.Route"}).getElements().flatMap(({props:Ae})=>{if(gt){if(Ae.if&&!Ae.if(gt))return[]}else return[];return[{path:Ae.path,title:Ae.title,children:Ae.children,tabProps:Ae.tabProps}]}),[gt]),{headerTitle:I,headerType:W}=T(Ot,Zt,dt,gt),[O,D]=(0,_e.useState)(!1),[ae,fe]=(0,_e.useState)(!1),Ke=(0,Q.s0)(),ft=(0,j.tg)(ee.r),Je=(0,j.tg)(ee.u),wt=async()=>{D(!1),fe(!1),Ke(Je?Je():ft())};return(0,_e.useEffect)(()=>{D(!1),fe(!1)},[yt.pathname]),_e.createElement(p.T3,{themeId:(bt=(rt=(ut=gt==null?void 0:gt.spec)==null?void 0:ut.type)==null?void 0:rt.toString())!=null?bt:"home"},_e.createElement(p.h4,{title:_e.createElement(Pt,{title:I,entity:gt}),pageTitleOverride:I,type:W},gt&&_e.createElement(_e.Fragment,null,_e.createElement(rn,{entity:gt}),_e.createElement(ne,{UNSTABLE_extraContextMenuItems:ke,UNSTABLE_contextMenuOptions:_t,onUnregisterEntity:()=>D(!0),onInspectEntity:()=>fe(!0)}))),Ut&&_e.createElement(p.Ex,null),gt&&_e.createElement(p.tn,{routes:Ft}),qt&&_e.createElement(p.VY,null,_e.createElement(ge.Z,{severity:"error"},qt.toString())),!Ut&&!qt&&!gt&&_e.createElement(p.VY,null,zt||_e.createElement(p.GB,{title:"Entity not found"},"There is no ",Ot," with the requested"," ",_e.createElement(p.rU,{to:"https://backstage.io/docs/features/software-catalog/references"},"kind, namespace, and name"),".")),_e.createElement(k.pp,{open:O,entity:gt,onConfirm:wt,onClose:()=>D(!1)}),_e.createElement(k.U_,{open:ae,entity:gt,onClose:()=>fe(!1)}))};de.Route=Pe},91578:(xn,Yt,e)=>{"use strict";e.d(Yt,{D:()=>Ut,a:()=>zt,b:()=>Ft,c:()=>qt,r:()=>W,u:()=>I,v:()=>yt});var i=e(34520);function p(O){const{years:D=0,months:ae=0,weeks:fe=0,days:Ke=0,hours:ft=0,minutes:Je=0,seconds:wt=0,milliseconds:nn=0}=O;return((((D*365+ae*30+fe*7+Ke)*24+ft)*60+Je)*60+wt)*1e3+nn}var g=e(99798),j=e.n(g),k=e(12830),o=e.n(k),z=e(82394),He=e.n(z),Ze=e(73495),a=e(43642),xe=e(77224),Ee=e(15933),se=e(86737),Y=e(78898),Fe=e(4989),ge=e(44407),_e=e(84219),Q=e(98685),be=e(39412),M=e(76635),c=e(30705);const S={seconds:10},_={milliseconds:50},b=se.Z,m={api:Ee.Z,component:ge.Z,system:xe.Z,resource:be.Z,domain:a.Z,location:Fe.Z,user:Q.Z,group:_e.Z,template:Y.Z};function ve(O){return{async:O.async,render:({entityRef:D,entity:ae,context:fe})=>({snapshot:(0,Ze.n8)(ae||D,fe),loadEntity:O.async})}}var ee=(O,D,ae)=>{if(!D.has(O))throw TypeError("Cannot "+ae)},he=(O,D,ae)=>(ee(O,D,"read from private field"),ae?ae.call(O):D.get(O)),J=(O,D,ae)=>{if(D.has(O))throw TypeError("Cannot add the same private member more than once");D instanceof WeakSet?D.add(O):D.set(O,ae)},ne=(O,D,ae,fe)=>(ee(O,D,"write to private field"),fe?fe.call(O,ae):D.set(O,ae),ae),re=(O,D,ae)=>(ee(O,D,"access private method"),ae),Pe,Pt,T,rn,de,Bt,ut,rt,bt,ke,_t;const at=class Xo{constructor(D){J(this,Bt),J(this,rt),J(this,ke),J(this,Pe,void 0),J(this,Pt,void 0),J(this,T,void 0),J(this,rn,void 0),J(this,de,void 0);var ae,fe,Ke,ft;const Je=(ae=D.cacheTtl)!=null?ae:S,wt=(fe=D.batchDelay)!=null?fe:_,nn=(Ke=D.renderer)!=null?Ke:ve({async:!0}),Ae={};if(Object.entries(m).forEach(([Te,vt])=>{Ae[Te.toLocaleLowerCase("en-US")]=vt}),Object.entries((ft=D.kindIcons)!=null?ft:{}).forEach(([Te,vt])=>{Ae[Te.toLocaleLowerCase("en-US")]=vt}),nn.async){if(!D.catalogApi)throw new TypeError("Asynchronous rendering requires a catalog API");ne(this,T,re(this,rt,bt).call(this,{cacheTtl:Je,batchDelay:wt,renderer:nn,catalogApi:D.catalogApi}))}ne(this,Pt,p(Je)),ne(this,Pe,new Map),ne(this,rn,Ae),ne(this,de,nn)}static createLocal(){return new Xo({renderer:ve({async:!1})})}static create(D){return new Xo(D)}forEntity(D,ae){const{entityRef:fe,kind:Ke,entity:ft,needsLoad:Je}=re(this,Bt,ut).call(this,D),wt=Te=>{const{snapshot:vt}=he(this,de).render({entityRef:fe,loading:Te.loading,entity:Te.entity,context:ae||{}});return{...vt,entityRef:fe,Icon:re(this,ke,_t).call(this,vt.Icon,Ke)}};let nn;try{nn=wt({loading:Je,entity:ft})}catch{nn={primaryTitle:fe,entityRef:fe}}const Ae=Je?new(He())(Te=>{let vt=!1;return Promise.resolve().then(()=>{var Tt;return(Tt=he(this,T))==null?void 0:Tt.load(fe)}).then(Tt=>{if(!vt&&Tt&&Tt.metadata.etag!==(ft==null?void 0:ft.metadata.etag)){const At=wt({loading:!1,entity:Tt});Te.next(At)}}).catch(()=>{}).finally(()=>{vt||Te.complete()}),()=>{vt=!0}}):void 0;return{snapshot:nn,update$:Ae}}};Pe=new WeakMap,Pt=new WeakMap,T=new WeakMap,rn=new WeakMap,de=new WeakMap,Bt=new WeakSet,ut=function(O){if(typeof O!="string")return{entity:O,kind:O.kind,entityRef:(0,i.eE)(O),needsLoad:!1};const D=he(this,Pe).get(O),ae=D==null?void 0:D.entity,Ke=(!D||Date.now()-D.updatedAt>he(this,Pt))&&he(this,de).async!==!1&&he(this,T)!==void 0;return{entity:ae,kind:(0,i.of)(O).kind,entityRef:O,needsLoad:Ke}},rt=new WeakSet,bt=function(O){const D=p(O.cacheTtl),ae=p(O.batchDelay);return new(j())(async fe=>{const{items:Ke}=await O.catalogApi.getEntitiesByRefs({entityRefs:fe}),ft=Date.now();return fe.forEach((Je,wt)=>{he(this,Pe).set(Je,{updatedAt:ft,entity:Ke[wt]})}),Ke},{name:"DefaultEntityPresentationApi",cacheMap:new(o())(D),maxBatchSize:100,batchScheduleFn:ae?fe=>setTimeout(fe,ae):void 0})},ke=new WeakSet,_t=function(O,D){var ae;return O||(O===!1?!1:(ae=he(this,rn)[D.toLocaleLowerCase("en-US")])!=null?ae:b)};let zt=at;async function Ot({storageApi:O}){var D;const ae=O.forBucket("settings"),fe=O.forBucket("starredEntities"),Ke=ae.snapshot("starredEntities").value;if(!(0,M.isArray)(Ke))return;const ft=new Set((D=fe.snapshot("entityRefs").value)!=null?D:[]);Ke.filter(M.isString).map(Je=>Je.split(":")).filter(Je=>Je.length===4&&Je[0]==="entity").map(([Je,wt,nn,Ae])=>(0,i.eE)({kind:wt,namespace:nn,name:Ae})).forEach(Je=>ft.add(Je)),await fe.set("entityRefs",Array.from(ft)),await ae.remove("starredEntities")}var Zt=Object.defineProperty,dt=(O,D,ae)=>D in O?Zt(O,D,{enumerable:!0,configurable:!0,writable:!0,value:ae}):O[D]=ae,gt=(O,D,ae)=>(dt(O,typeof D!="symbol"?D+"":D,ae),ae);class Ut{constructor(D){gt(this,"settingsStore"),gt(this,"starredEntities"),gt(this,"subscribers",new Set),gt(this,"observable",new(He())(fe=>(fe.next(new Set(this.starredEntities)),this.subscribers.add(fe),()=>{this.subscribers.delete(fe)})));var ae;Ot(D).then(),this.settingsStore=D.storageApi.forBucket("starredEntities"),this.starredEntities=new Set((ae=this.settingsStore.snapshot("entityRefs").value)!=null?ae:[]),this.settingsStore.observe$("entityRefs").subscribe({next:fe=>{var Ke;this.starredEntities=new Set((Ke=fe.value)!=null?Ke:[]),this.notifyChanges()}})}async toggleStarred(D){this.starredEntities.has(D)?this.starredEntities.delete(D):this.starredEntities.add(D),await this.settingsStore.set("entityRefs",Array.from(this.starredEntities))}starredEntitie$(){return this.observable}notifyChanges(){for(const D of this.subscribers)D.next(new Set(this.starredEntities))}}const qt=(0,c.x8)({id:"create-component",optional:!0}),yt=(0,c.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Ft=(0,c.x8)({id:"create-from-template",optional:!0,params:["namespace","templateName"]}),I=(0,c.x8)({id:"catalog:unregister-redirect",optional:!0}),W=(0,c.NT)({id:"catalog"})},16673:(xn,Yt,e)=>{"use strict";e.d(Yt,{BL:()=>Te,Cy:()=>At,Eq:()=>de,FZ:()=>Mt,Kf:()=>Ft,PA:()=>rn,Tu:()=>ft,VU:()=>rt,_l:()=>yt,bM:()=>wt,dN:()=>Je,f2:()=>nn,im:()=>_t,jF:()=>Wt,mr:()=>at,o6:()=>Ue,oU:()=>Tt,p$:()=>Zt,rR:()=>Ke,vA:()=>ut,yf:()=>vt});var i=e(91578),p=e(2784),g=e(79692),j=e(12420),k=e(8629),o=e(79249),z=e(49429),He=e(77277),Ze=e(95544),a=e(73495),xe=e(78373),Ee=e(19928),se=e.n(Ee),Y=e(57032),Fe=e(30705),ge=e(64279),_e=e(99688),Q=e(73557),be=e(32272),M=e(49558),c=e(34520),S=e(88285),_=e(42054),b=e(99798),m=e.n(b),ve=e(82394),ee=e.n(ve),he=e(76635),J=e.n(he);function ne(){const le=useApi(catalogApiRef),{error:Be,loading:ie,value:Ge}=useAsync(async()=>await le.getEntityFacets({facets:["kind"]}).then(ot=>{var Rt;return((Rt=ot.facets.kind)==null?void 0:Rt.map(en=>en.value).sort())||[]}),[le]);return{loading:ie,error:Be,allKinds:Ge!=null?Ge:[]}}function re(le,Be,ie){let Ge=le;return Be&&(Ge=Ge.filter(ot=>Be.some(Rt=>Rt.toLocaleLowerCase("en-US")===ot.toLocaleLowerCase("en-US")))),ie&&!le.some(ot=>ot.toLocaleLowerCase("en-US")===ie.toLocaleLowerCase("en-US"))&&(Ge=Ge.concat([ie])),Ge.sort().reduce((ot,Rt)=>(ot[Rt.toLocaleLowerCase("en-US")]=Rt,ot),{})}const Pe=(0,g.Z)(le=>(0,j.Z)({root:{...le.typography.h4}}));function Pt(le){var Be,ie;const{initialFilter:Ge="component",allowedKinds:tt}=le,ot=Pe(),{allKinds:Rt}=ne(),{filters:en,updateFilters:Ce,queryParameters:{kind:Me}}=useEntityList(),R=useMemo(()=>[Me].flat()[0],[Me]),[B,X]=useState((ie=R!=null?R:(Be=en.kind)==null?void 0:Be.value)!=null?ie:Ge);useEffect(()=>{R&&X(R)},[R]),useEffect(()=>{var mt,ct;(mt=en.kind)!=null&&mt.value&&X((ct=en.kind)==null?void 0:ct.value)},[en.kind]),useEffect(()=>{Ce({kind:B?new EntityKindFilter(B):void 0})},[B,Ce]);const nt=re(Rt,tt,B);return React.createElement(Select,{input:React.createElement(InputBase,null),value:B.toLocaleLowerCase("en-US"),onChange:mt=>X(mt.target.value),classes:ot},Object.keys(nt).map(mt=>React.createElement(MenuItem,{value:mt,key:mt},`${pluralize(nt[mt])}`)))}function T(le){const{open:Be,onClose:ie,onConfirm:Ge,entity:tt}=le,[ot,Rt]=(0,p.useState)(!1),en=(0,Y.u)(a.Ah),Ce=(0,Y.u)(Y.l),Me=async()=>{Rt(!0);try{const R=tt.metadata.uid;await en.removeEntityByUid(R),Ge()}catch(R){(0,be.BD)(R),Ce.post({message:R.message})}finally{Rt(!1)}};return p.createElement(k.Z,{open:Be,onClose:ie},p.createElement(o.Z,{id:"responsive-dialog-title"},"Are you sure you want to delete this entity?"),p.createElement(z.Z,null,p.createElement(He.Z,{variant:"contained",color:"secondary",disabled:ot,onClick:Me},"Delete"),p.createElement(He.Z,{onClick:ie,color:"primary"},"Cancel")))}function rn(le){var Be,ie;return((ie=(Be=le==null?void 0:le.metadata)==null?void 0:Be.annotations)==null?void 0:ie["backstage.io/orphan"])==="true"}function de(){const le=(0,Q.s0)(),Be=(0,Fe.tg)(i.r),[ie,Ge]=(0,p.useState)(!1),{entity:tt}=(0,xe.u)(),ot=async()=>{Ge(!1),le(Be())};return p.createElement(p.Fragment,null,p.createElement(_e.Z,{severity:"warning",onClick:()=>Ge(!0)},"This entity is not referenced by any location and is therefore not receiving updates. Click here to delete."),p.createElement(T,{open:ie,entity:tt,onConfirm:ot,onClose:()=>Ge(!1)}))}async function Bt(le,Be){var ie;const Ge=(ie=le.relations)==null?void 0:ie.map(ot=>ot.targetRef);if(!Ge||(Ge==null?void 0:Ge.length)<1||Ge.length>1e3)return[];const tt=await Be.getEntitiesByRefs({entityRefs:Ge,fields:["kind","metadata.name","metadata.namespace"]});return Ge.filter((ot,Rt)=>tt.items[Rt]===void 0)}async function ut(le,Be){const ie=Be.apis.get(a.Ah);if(!ie)throw new Error(`No implementation available for ${a.Ah}`);return(await Bt(le,ie)).length>0}function rt(){const{entity:le}=(0,xe.u)(),Be=(0,Y.u)(a.Ah),{loading:ie,error:Ge,value:tt}=(0,ge.default)(async()=>Bt(le,Be),[le,Be]);return Ge?p.createElement(Ze.Z,{mb:1},p.createElement(M.Gk,{error:Ge})):ie||!tt||tt.length===0?null:p.createElement(p.Fragment,null,p.createElement(_e.Z,{severity:"warning"},"This entity has relations to other entities, which can't be found in the catalog. ",p.createElement("br",null),"Entities not found are: ",tt.join(", ")))}const bt=le=>le.error&&le.level==="error"&&le.type===S.mk;async function ke(le,Be){return{items:(await Be.getEntityAncestors({entityRef:le})).items.map(tt=>{var ot,Rt;return{errors:((Rt=(ot=tt.entity.status)==null?void 0:ot.items)!=null?Rt:[]).filter(bt).map(Me=>Me.error).filter(Me=>Boolean(Me)),entity:tt.entity}}).filter(tt=>tt.errors.length>0)}}async function _t(le,Be){const ie=Be.apis.get(a.Ah);if(!ie)throw new Error(`No implementation available for ${a.Ah}`);return(await ke((0,c.eE)(le),ie)).items.length>0}function at(){const{entity:le}=(0,xe.u)(),Be=(0,c.eE)(le),ie=(0,Y.u)(a.Ah),{loading:Ge,error:tt,value:ot}=(0,ge.default)(async()=>ke(Be,ie),[Be,ie]);return tt?p.createElement(Ze.Z,{mb:1},p.createElement(M.Gk,{error:tt})):Ge||!ot?null:p.createElement(p.Fragment,null,ot.items.map((Rt,en)=>p.createElement(Ze.Z,{key:en,mb:1},(0,c.eE)(le)!==(0,c.eE)(Rt.entity)&&p.createElement(Ze.Z,{p:1},"The error below originates from"," ",p.createElement(a.dx,{entityRef:Rt.entity})),Rt.errors.map((Ce,Me)=>p.createElement(M.Gk,{key:Me,error:Ce})))))}const zt="core.backstage.entitySwitch",Ot=le=>null;(0,Fe.R5)(Ot,zt,!0);const Zt=le=>{var Be,ie;const{entity:Ge,loading:tt}=(0,xe.a)(),ot=(0,Y.b)(),Rt=(0,Fe.vJ)(le.children,Ce=>Ce.selectByComponentData({key:zt,withStrictError:"Child of EntitySwitch is not an EntitySwitch.Case"}).getElements().flatMap(Me=>{if(tt&&!Ge)return[];const{if:R,children:B}=Me.props;return Ge?[{if:R==null?void 0:R(Ge,{apis:ot}),children:B}]:[{if:R===void 0,children:B}]}),[ot,Ge,tt]);if(Rt.some(Ce=>typeof Ce.if=="object"&&"then"in Ce.if))return p.createElement(dt,{results:Rt,renderMultipleMatches:le.renderMultipleMatches});if(le.renderMultipleMatches==="all"){const Ce=Rt.filter(Me=>Me.if).map(Me=>Me.children);return Ce.length===0?gt(Rt):p.createElement(p.Fragment,null,Ce)}return(ie=(Be=Rt.find(Ce=>Ce.if))==null?void 0:Be.children)!=null?ie:gt(Rt)};function dt({results:le,renderMultipleMatches:Be}){const{loading:ie,value:Ge}=(0,ge.default)(async()=>{var tt;const ot=le.map(async({if:Rt,children:en})=>{try{if(await Rt)return en}catch{}return null});if(Be==="all"){const Rt=(await Promise.all(ot)).filter(Boolean);return Rt.length===0?gt(le):p.createElement(p.Fragment,null,Rt)}return(tt=(await Promise.all(ot)).find(Boolean))!=null?tt:gt(le)},[le]);return ie||!Ge?null:Ge}function gt(le){var Be,ie;return(ie=(Be=le.filter(Ge=>Ge.if===void 0)[0])==null?void 0:Be.children)!=null?ie:null}Zt.Case=Ot;function Ut(le,Be){return Boolean(le&&typeof le=="string"&&(le==null?void 0:le.toLocaleLowerCase("en-US"))===(Be==null?void 0:Be.toLocaleLowerCase("en-US")))}function qt(le,Be){return typeof Be=="string"?Ut(le,Be):Be.length===0||Be.some(ie=>Ut(le,ie))}function yt(le){return W({kind:le})}function Ft(le){return W({kind:"component",type:le})}function I(le){return W({kind:"resource",type:le})}function W(le){return Be=>{var ie;return!(le.kind&&!qt(Be.kind,le.kind)||le.type&&!qt((ie=Be.spec)==null?void 0:ie.type,le.type))}}function O(le){return Be=>{var ie;return qt((ie=Be.metadata)==null?void 0:ie.namespace,le)}}const D=null,ae=a._i.Filters,fe=a._i.Content,Ke=(0,Fe.rx)({id:"catalog",apis:[(0,Fe.ni)({api:a.Ah,deps:{discoveryApi:Y.q,fetchApi:Y.s},factory:({discoveryApi:le,fetchApi:Be})=>new S.MS({discoveryApi:le,fetchApi:Be})}),(0,Fe.ni)({api:a.p3,deps:{storageApi:Y.x},factory:({storageApi:le})=>new i.D({storageApi:le})}),(0,Fe.ni)({api:a.XI,deps:{catalogApi:a.Ah},factory:({catalogApi:le})=>i.a.create({catalogApi:le})})],routes:{catalogIndex:i.r,catalogEntity:a.wi},externalRoutes:{createComponent:i.c,viewTechDoc:i.v,createFromTemplate:i.b,unregisterRedirect:i.u}}),ft=Ke.provide((0,Fe.P4)({name:"CatalogIndexPage",component:()=>e.e(6151).then(e.bind(e,66151)).then(le=>le.CatalogPage),mountPoint:i.r})),Je=Ke.provide((0,Fe.P4)({name:"CatalogEntityPage",component:()=>e.e(3182).then(e.bind(e,63182)).then(le=>le.CatalogEntityPage),mountPoint:a.wi})),wt=Ke.provide((0,Fe.CO)({name:"EntityAboutCard",component:{lazy:()=>e.e(9433).then(e.bind(e,79433)).then(le=>le.AboutCard)}})),nn=Ke.provide((0,Fe.CO)({name:"EntityLinksCard",component:{lazy:()=>e.e(2886).then(e.bind(e,72886)).then(le=>le.EntityLinksCard)}})),Ae=Ke.provide((0,Fe.CO)({name:"EntityLabelsCard",component:{lazy:()=>e.e(2640).then(e.bind(e,52640)).then(le=>le.EntityLabelsCard)}})),Te=Ke.provide((0,Fe.CO)({name:"EntityHasSystemsCard",component:{lazy:()=>e.e(9699).then(e.bind(e,29699)).then(le=>le.HasSystemsCard)}})),vt=Ke.provide((0,Fe.CO)({name:"EntityHasComponentsCard",component:{lazy:()=>e.e(6803).then(e.bind(e,86803)).then(le=>le.HasComponentsCard)}})),Tt=Ke.provide((0,Fe.CO)({name:"EntityHasSubcomponentsCard",component:{lazy:()=>e.e(8081).then(e.bind(e,48081)).then(le=>le.HasSubcomponentsCard)}})),At=Ke.provide((0,Fe.CO)({name:"EntityHasResourcesCard",component:{lazy:()=>e.e(8537).then(e.bind(e,8537)).then(le=>le.HasResourcesCard)}})),Wt=Ke.provide((0,Fe.CO)({name:"EntityDependsOnComponentsCard",component:{lazy:()=>e.e(6671).then(e.bind(e,56671)).then(le=>le.DependsOnComponentsCard)}})),St=Ke.provide((0,Fe.CO)({name:"EntityDependencyOfComponentsCard",component:{lazy:()=>e.e(7575).then(e.bind(e,67575)).then(le=>le.DependencyOfComponentsCard)}})),Ue=Ke.provide((0,Fe.CO)({name:"EntityDependsOnResourcesCard",component:{lazy:()=>e.e(4540).then(e.bind(e,74540)).then(le=>le.DependsOnResourcesCard)}})),Xe=Ke.provide((0,Fe.CO)({name:"RelatedEntitiesCard",component:{lazy:()=>e.e(8581).then(e.bind(e,8581)).then(le=>le.RelatedEntitiesCard)}})),Mt=Ke.provide((0,_.c)({name:"CatalogSearchResultListItem",component:()=>e.e(7700).then(e.bind(e,27700)).then(le=>le.CatalogSearchResultListItem),predicate:le=>le.type==="software-catalog"}))},42214:(xn,Yt,e)=>{"use strict";e.d(Yt,{IJ:()=>mn,Oz:()=>Cn,Q3:()=>F,fX:()=>nn,i4:()=>Dt});var i=e(57032),p=e(30705),g=e(1854),j=e(89393),k=e(49462),o=e(2784),z=e(78373),He=e(73495),Ze=e(39857),a=e(73557),xe=e(79692),Ee=e(27616),se=e(8284),Y=e(90436),Fe=e(4614),ge=e(80030),_e=e(69087),Q=e(35111),be=e(14498),M=e(89571),c=e(15584),S=e(49378),_=e(70660),b=e(91256),m=e(37390),ve=e(95544),ee=e(67358),he=e(27556),J=e(97485),ne=e(12420),re=e(60905),Pe=e(7089),Pt=e(38592),T=e(61837),rn=e(28899),de=e(86619),Bt=e(77277),ut=e(73698),rt=e(12231),bt=e(38016),ke=e(69001),_t=e(26228),at=e(49558),zt=e(64279),Ot=e(30254),Zt=e(34520),dt=e(82717),gt=e.n(dt),Ut=e(58838),qt=e(43266),yt=e(26883),Ft=e(77446),I=e(99688);const W=(0,i.c)({id:"plugin.githubactions.service"});var O=Object.defineProperty,D=(Oe,$e,st)=>$e in Oe?O(Oe,$e,{enumerable:!0,configurable:!0,writable:!0,value:st}):Oe[$e]=st,ae=(Oe,$e,st)=>(D(Oe,typeof $e!="symbol"?$e+"":$e,st),st);class fe{constructor($e){ae(this,"configApi"),ae(this,"scmAuthApi"),this.configApi=$e.configApi,this.scmAuthApi=$e.scmAuthApi}async getOctokit($e="github.com"){var st;const{token:Qt}=await this.scmAuthApi.getCredentials({url:`https://${$e}/`,additionalScope:{customScopes:{github:["repo"]}}}),ln=(0,g.MY)((st=this.configApi.getOptionalConfigArray("integrations.github"))!=null?st:[]).find(On=>On.host===$e),an=ln==null?void 0:ln.apiBaseUrl;return new j.v({auth:Qt,baseUrl:an})}async reRunWorkflow($e){const{hostname:st,owner:Qt,repo:Xt,runId:ln}=$e;return(await this.getOctokit(st)).actions.reRunWorkflow({owner:Qt,repo:Xt,run_id:ln})}async listWorkflowRuns($e){const{hostname:st,owner:Qt,repo:Xt,pageSize:ln=100,page:an=0,branch:On}=$e;return(await(await this.getOctokit(st)).actions.listWorkflowRunsForRepo({owner:Qt,repo:Xt,per_page:ln,page:an,...On?{branch:On}:{}})).data}async getWorkflow($e){const{hostname:st,owner:Qt,repo:Xt,id:ln}=$e;return(await(await this.getOctokit(st)).actions.getWorkflow({owner:Qt,repo:Xt,workflow_id:ln})).data}async getWorkflowRun($e){const{hostname:st,owner:Qt,repo:Xt,id:ln}=$e;return(await(await this.getOctokit(st)).actions.getWorkflowRun({owner:Qt,repo:Xt,run_id:ln})).data}async listJobsForWorkflowRun($e){const{hostname:st,owner:Qt,repo:Xt,id:ln,pageSize:an=100,page:On=0}=$e;return(await(await this.getOctokit(st)).actions.listJobsForWorkflowRun({owner:Qt,repo:Xt,run_id:ln,per_page:an,page:On})).data}async downloadJobLogsForWorkflowRun($e){const{hostname:st,owner:Qt,repo:Xt,runId:ln}=$e;return(await(await this.getOctokit(st)).actions.downloadJobLogsForWorkflowRun({owner:Qt,repo:Xt,job_id:ln})).data}async listBranches($e){const{hostname:st,owner:Qt,repo:Xt,page:ln=0}=$e;return(await(await this.getOctokit(st)).rest.repos.listBranches({owner:Qt,repo:Xt,per_page:100,page:ln})).data}async getDefaultBranch($e){const{hostname:st,owner:Qt,repo:Xt}=$e;return(await(await this.getOctokit(st)).rest.repos.get({owner:Qt,repo:Xt})).data.default_branch}}var Ke=(Oe=>(Oe[Oe.success=0]="success",Oe[Oe.failure=1]="failure",Oe[Oe.pending=2]="pending",Oe[Oe.running=3]="running",Oe))(Ke||{});const ft=(0,p.NT)({id:"github-actions"}),Je=(0,p.Rz)({id:"github-actions/build",path:"/:id",parent:ft}),wt=(0,p.rx)({id:"github-actions",apis:[(0,p.ni)({api:W,deps:{configApi:i.p,scmAuthApi:k.Om},factory:({configApi:Oe,scmAuthApi:$e})=>new fe({configApi:Oe,scmAuthApi:$e})})],routes:{entityContent:ft}}),nn=wt.provide((0,p.P4)({name:"EntityGithubActionsContent",component:()=>Promise.resolve().then(function(){return Ne}).then(Oe=>Oe.Router),mountPoint:ft})),Ae=wt.provide((0,p.CO)({name:"EntityLatestGithubActionRunCard",component:{lazy:()=>e.e(6169).then(e.bind(e,96169)).then(Oe=>Oe.LatestWorkflowRunCard)}})),Te=wt.provide((0,p.CO)({name:"EntityLatestGithubActionsForBranchCard",component:{lazy:()=>e.e(6169).then(e.bind(e,96169)).then(Oe=>Oe.LatestWorkflowsForBranchCard)}})),vt=wt.provide((0,p.CO)({name:"EntityRecentGithubActionsRunsCard",component:{lazy:()=>e.e(6169).then(e.bind(e,96169)).then(Oe=>Oe.RecentWorkflowRunsCard)}})),Tt="github.com/project-slug",At=Oe=>{var $e,st;return(st=($e=Oe==null?void 0:Oe.metadata.annotations)==null?void 0:$e[Tt])!=null?st:""},Wt=Oe=>o.createElement(o.Fragment,null,o.createElement(St,{...Oe}),Ue(Oe));function St({status:Oe,conclusion:$e}){if(Oe===void 0)return null;switch(Oe.toLocaleLowerCase("en-US")){case"queued":return o.createElement(at.wA,null);case"in_progress":return o.createElement(at.VC,null);case"completed":switch($e==null?void 0:$e.toLocaleLowerCase("en-US")){case"skipped":return o.createElement(at.dh,null);case"timed_out":return o.createElement(at.Pd,null);case"failure":return o.createElement(at.vK,null);default:return o.createElement(at.Kq,null)}default:return o.createElement(at.wA,null)}}function Ue({status:Oe,conclusion:$e}){if(Oe===void 0)return"";switch(Oe.toLocaleLowerCase("en-US")){case"queued":return"Queued";case"in_progress":return"In progress";case"completed":switch($e==null?void 0:$e.toLocaleLowerCase("en-US")){case"skipped":return"Aborted";case"timed_out":return"Timed out";case"failure":return"Error";default:return"Completed"}default:return"Pending"}}const Xe=({hostname:Oe,owner:$e,repo:st})=>{const Qt=(0,i.u)(W),{id:Xt}=(0,p.Oi)(Je);return(0,zt.default)(async()=>{if(!st||!$e)throw new Error("No repo/owner provided");const ln=await Qt.listJobsForWorkflowRun({hostname:Oe,owner:$e,repo:st,id:parseInt(Xt,10)});return{total_count:ln.total_count,jobs:ln.jobs.map(an=>{var On,Nn,Fn,ra;return{html_url:(On=an.html_url)!=null?On:void 0,status:an.status,conclusion:(Nn=an.conclusion)!=null?Nn:void 0,started_at:an.started_at,completed_at:(Fn=an.completed_at)!=null?Fn:void 0,id:an.id,name:an.name,steps:(ra=an.steps)==null?void 0:ra.map(En=>{var aa,oa,na;return{name:En.name,status:En.status,conclusion:(aa=En.conclusion)!=null?aa:void 0,number:En.number,started_at:(oa=En.started_at)!=null?oa:void 0,completed_at:(na=En.completed_at)!=null?na:void 0}})}})}},[st,$e,Xt])},Mt=({hostname:Oe,owner:$e,repo:st})=>{const Qt=(0,i.u)(W),{id:Xt}=(0,p.Oi)(Je);return(0,zt.default)(async()=>st&&$e?Qt.getWorkflowRun({hostname:Oe,owner:$e,repo:st,id:parseInt(Xt,10)}):Promise.reject(new Error("No repo/owner provided")),[st,$e,Xt])},le=({hostname:Oe,owner:$e,repo:st,id:Qt})=>{const Xt=(0,i.u)(W);return(0,zt.default)(async()=>st&&$e?Xt.downloadJobLogsForWorkflowRun({hostname:Oe,owner:$e,repo:st,runId:Qt}):Promise.reject("No repo/owner provided"),[st,$e,Qt])},Be=Oe=>{var $e,st,Qt;const Xt=(Qt=($e=Oe==null?void 0:Oe.metadata.annotations)==null?void 0:$e[Zt.M6])!=null?Qt:(st=Oe==null?void 0:Oe.metadata.annotations)==null?void 0:st[Zt.P1];return Xt!=null&&Xt.startsWith("url:")?gt()(Xt.slice(4)).resource:void 0},ie=(0,xe.Z)(Oe=>({button:{order:-1,marginRight:0,marginLeft:"-20px"},modal:{display:"flex",alignItems:"center",width:"85%",height:"85%",justifyContent:"center",margin:"auto"},normalLogContainer:{height:"75vh",width:"100%"},modalLogContainer:{height:"100%",width:"100%"},log:{background:Oe.palette.background.default}})),Ge=({entity:Oe,runId:$e,inProgress:st})=>{const Qt=ie(),Xt=At(Oe),ln=Be(Oe),[an,On]=Xt&&Xt.split("/")||[],Nn=le({hostname:ln,owner:an,repo:On,id:$e}),Fn=Nn.value?String(Nn.value):void 0,[ra,En]=o.useState(!1),aa=()=>{En(!0)},oa=()=>{En(!1)};return o.createElement(Ee.Z,{TransitionProps:{unmountOnExit:!0},disabled:st},o.createElement(se.Z,{expandIcon:o.createElement(bt.Z,null),IconButtonProps:{className:Qt.button}},o.createElement(Y.Z,{variant:"button"},Nn.loading?o.createElement(Fe.Z,null):"Job Log"),o.createElement(ge.ZP,{title:"Open Log",TransitionComponent:_e.Z,arrow:!0},o.createElement(Ot.Z,{onClick:na=>{na.stopPropagation(),aa()},style:{marginLeft:"auto"}})),o.createElement(Q.Z,{className:Qt.modal,onClick:na=>na.stopPropagation(),open:ra,onClose:oa},o.createElement(be.Z,{in:ra},o.createElement("div",{className:Qt.modalLogContainer},o.createElement(at.nU,{text:Fn!=null?Fn:"No Values Found",classes:{root:Qt.log}}))))),Fn&&o.createElement("div",{className:Qt.normalLogContainer},o.createElement(at.nU,{text:Fn,classes:{root:Qt.log}})))},tt=(0,xe.Z)(Oe=>({root:{maxWidth:720,margin:Oe.spacing(2)},title:{padding:Oe.spacing(1,0,2,0)},table:{padding:Oe.spacing(1)},accordionDetails:{padding:0},button:{order:-1,marginRight:0,marginLeft:"-20px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}})),ot=(Oe,$e)=>{if(!Oe||!$e)return"";const st=_t.ou.fromISO(Oe);return($e?_t.ou.fromISO($e):_t.ou.now()).diff(st).toFormat("m 'minutes' s 'seconds'")},Rt=({step:Oe})=>{var $e;return o.createElement(M.Z,null,o.createElement(c.Z,null,o.createElement(S.Z,{primary:Oe.name,secondary:ot(Oe.started_at,Oe.completed_at)})),o.createElement(c.Z,null,o.createElement(Wt,{status:Oe.status.toLocaleUpperCase("en-US"),conclusion:($e=Oe.conclusion)==null?void 0:$e.toLocaleUpperCase("en-US")})))},en=({job:Oe,className:$e,entity:st})=>{var Qt;const Xt=tt();return o.createElement(Ee.Z,{TransitionProps:{unmountOnExit:!0},className:$e},o.createElement(se.Z,{expandIcon:o.createElement(bt.Z,null),IconButtonProps:{className:Xt.button}},o.createElement(Y.Z,{variant:"button"},Oe.name," (",ot(Oe.started_at,Oe.completed_at),")")),o.createElement(_.Z,{className:Xt.accordionDetails},o.createElement(b.Z,null,o.createElement(m.Z,null,(Qt=Oe.steps)==null?void 0:Qt.map(ln=>o.createElement(Rt,{key:ln.number,step:ln}))))),Oe.status==="queued"||Oe.status==="in_progress"?o.createElement(Ge,{runId:Oe.id,inProgress:!0,entity:st}):o.createElement(Ge,{runId:Oe.id,inProgress:!1,entity:st}))},Ce=({jobs:Oe,entity:$e})=>{const st=tt();return o.createElement(ve.Z,null,Oe&&Oe.total_count>0&&Oe.jobs.map(Qt=>o.createElement(en,{key:Qt.id,job:Qt,className:Qt.status!=="success"?st.failed:st.success,entity:$e})))},Me=({entity:Oe})=>{var $e,st,Qt,Xt,ln,an,On,Nn,Fn,ra,En,aa,oa,na,pa;const Pa=At(Oe),qn=Be(Oe),[ya,q]=Pa&&Pa.split("/")||[],Le=Mt({hostname:qn,owner:ya,repo:q}),et=Xe({hostname:qn,owner:ya,repo:q}),U=tt();return Le.error&&Le.error.message?o.createElement(Y.Z,{variant:"h6",color:"error"},"Failed to load build, ",Le.error.message):Le.loading?o.createElement(ee.Z,null):o.createElement("div",{className:U.root},o.createElement(ve.Z,{mb:3},o.createElement(at.Oo,{"aria-label":"breadcrumb"},o.createElement(at.rU,{to:".."},"Workflow runs"),o.createElement(Y.Z,null,"Workflow run details"))),o.createElement(b.Z,{component:he.Z,className:U.table},o.createElement(m.Z,null,o.createElement(J.Z,null,o.createElement(M.Z,null,o.createElement(c.Z,null,o.createElement(Y.Z,{noWrap:!0},"Branch")),o.createElement(c.Z,null,($e=Le.value)==null?void 0:$e.head_branch)),o.createElement(M.Z,null,o.createElement(c.Z,null,o.createElement(Y.Z,{noWrap:!0},"Message")),o.createElement(c.Z,null,(Qt=(st=Le.value)==null?void 0:st.head_commit)==null?void 0:Qt.message)),o.createElement(M.Z,null,o.createElement(c.Z,null,o.createElement(Y.Z,{noWrap:!0},"Commit ID")),o.createElement(c.Z,null,(ln=(Xt=Le.value)==null?void 0:Xt.head_commit)==null?void 0:ln.id)),o.createElement(M.Z,null,o.createElement(c.Z,null,o.createElement(Y.Z,{noWrap:!0},"Workflow")),o.createElement(c.Z,null,(an=Le.value)==null?void 0:an.name)),o.createElement(M.Z,null,o.createElement(c.Z,null,o.createElement(Y.Z,{noWrap:!0},"Status")),o.createElement(c.Z,null,o.createElement(Wt,{status:((On=Le.value)==null?void 0:On.status)||void 0,conclusion:((Nn=Le.value)==null?void 0:Nn.conclusion)||void 0}))),o.createElement(M.Z,null,o.createElement(c.Z,null,o.createElement(Y.Z,{noWrap:!0},"Author")),o.createElement(c.Z,null,`${(En=(ra=(Fn=Le.value)==null?void 0:Fn.head_commit)==null?void 0:ra.author)==null?void 0:En.name} (${(na=(oa=(aa=Le.value)==null?void 0:aa.head_commit)==null?void 0:oa.author)==null?void 0:na.email})`)),o.createElement(M.Z,null,o.createElement(c.Z,null,o.createElement(Y.Z,{noWrap:!0},"Links")),o.createElement(c.Z,null,((pa=Le.value)==null?void 0:pa.html_url)&&o.createElement(at.rU,{to:Le.value.html_url},"Workflow runs on GitHub"," ",o.createElement(ke.Z,{className:U.externalLinkIcon})))),o.createElement(M.Z,null,o.createElement(c.Z,{colSpan:2},o.createElement(Y.Z,{noWrap:!0},"Jobs"),et.loading?o.createElement(Fe.Z,null):o.createElement(Ce,{jobs:et.value,entity:Oe})))))))};function R({hostname:Oe,owner:$e,repo:st,branch:Qt,initialPageSize:Xt=6}){const ln=(0,i.u)(W),an=(0,i.u)(i.r),[On,Nn]=(0,o.useState)(0),[Fn,ra]=(0,o.useState)(0),[En,aa]=(0,o.useState)(Xt),[oa,na]=(0,o.useState)([]),[pa,Pa]=(0,o.useState)(""),{loading:qn,value:ya,retry:q,error:Le}=(0,Ft.Z)(async()=>{const et=await ln.getDefaultBranch({hostname:Oe,owner:$e,repo:st});Pa(et);let U=Qt;Qt==="default"&&(U=et);const P=await(async()=>{let N=!0,oe=0;const pe=[];for(;N;){const te=await ln.listBranches({hostname:Oe,owner:$e,repo:st,page:oe});te.length===0&&(N=!1),oe++,pe.push(...te)}return pe})();na(P);const $=await ln.listWorkflowRuns({hostname:Oe,owner:$e,repo:st,pageSize:En,page:Fn+1,branch:U});return Nn($.total_count),$.workflow_runs.map(N=>{var oe,pe,te,Se,We,Qe,kt,Lt,tn;return{workflowName:(oe=N.name)!=null?oe:void 0,message:(pe=N.head_commit)==null?void 0:pe.message,id:`${N.id}`,onReRunClick:async()=>{try{await ln.reRunWorkflow({hostname:Oe,owner:$e,repo:st,runId:N.id})}catch(on){an.post(new Error(`Failed to rerun the workflow: ${on.message}`))}},source:{branchName:(te=N.head_branch)!=null?te:void 0,commit:{hash:(Se=N.head_commit)==null?void 0:Se.id,url:(kt=(We=N.head_repository)==null?void 0:We.branches_url)==null?void 0:kt.replace("{/branch}",(Qe=N.head_branch)!=null?Qe:"")}},status:(Lt=N.status)!=null?Lt:void 0,conclusion:(tn=N.conclusion)!=null?tn:void 0,url:N.url,githubUrl:N.html_url}})},[Fn,En,st,$e]);return[{page:Fn,pageSize:En,loading:qn,runs:ya,branches:oa,defaultBranch:pa,projectName:`${$e}/${st}`,total:On,error:Le},{runs:ya,setPage:ra,setPageSize:aa,retry:q}]}const B=(0,xe.Z)(Oe=>(0,ne.Z)({card:{border:`1px solid ${Oe.palette.divider}`,boxShadow:Oe.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:Oe.spacing(4,1,1),flex:"1",minWidth:"0px"},externalLinkIcon:{fontSize:"inherit",verticalAlign:"middle"},bottomline:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"-5px"},pagination:{width:"100%"}})),X={skipped:"warning",canceled:"info",timed_out:"error",failure:"error",success:"success"},nt=(Oe,$e)=>{var st,Qt,Xt,ln;const an=$e.toLocaleLowerCase();return((st=Oe.workflowName)==null?void 0:st.toLocaleLowerCase().includes(an))||((Qt=Oe.source.branchName)==null?void 0:Qt.toLocaleLowerCase().includes(an))||((Xt=Oe.status)==null?void 0:Xt.toLocaleLowerCase().includes(an))||((ln=Oe.id)==null?void 0:ln.toLocaleLowerCase().includes(an))},mt=({runs:Oe,searchTerm:$e,loading:st,onChangePageSize:Qt,onChangePage:Xt,page:ln,total:an,pageSize:On})=>{const Nn=B(),Fn=(0,p.tg)(Je),ra=Oe==null?void 0:Oe.filter(En=>nt(En,$e));return o.createElement(re.Z,{container:!0,spacing:3},ra&&(Oe==null?void 0:Oe.length)!==0?ra.map(En=>{var aa,oa;return o.createElement(re.Z,{key:En.id,item:!0,container:!0,xs:12,sm:4,md:4,xl:4},o.createElement(ve.Z,{className:Nn.card},o.createElement(ve.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},o.createElement(ve.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},o.createElement(ge.ZP,{title:(aa=En.status)!=null?aa:"No Status",placement:"top-start"},o.createElement(I.Z,{variant:"outlined",severity:X[En.conclusion],style:{alignItems:"center"}},o.createElement(Y.Z,{variant:"h6"},o.createElement(at.rU,{to:Fn({id:En.id})},o.createElement(Y.Z,{color:"primary",variant:"h6"},En.workflowName))))),o.createElement(ge.ZP,{title:(oa=En.message)!=null?oa:"No run message"},o.createElement(Y.Z,{variant:"body2",component:"span",style:{fontSize:"smaller"}},o.createElement(at.SA,{content:`Commit ID : ${En.source.commit.hash}`}))),En.source.branchName&&o.createElement(at.SA,{content:`Branch : ${En.source.branchName}`}),o.createElement(Pe.Z,{key:En.id,size:"small",label:`Workflow ID : ${En.id}`}),o.createElement(Pe.Z,{size:"small",label:o.createElement(ve.Z,{display:"flex",alignItems:"center"},o.createElement(Wt,{status:En.status,conclusion:En.conclusion}))}),o.createElement("div",{className:Nn.bottomline},En.githubUrl&&o.createElement(at.rU,{to:En.githubUrl},"Workflow runs on GitHub"," ",o.createElement(ke.Z,{className:Nn.externalLinkIcon})),o.createElement(Pt.Z,null,o.createElement(ge.ZP,{title:"Rerun workflow"},o.createElement(T.Z,{onClick:En.onReRunClick,style:{fontSize:"12px"}},o.createElement(qt.Z,null)))))))))}):o.createElement(ve.Z,{p:2},st?o.createElement(Fe.Z,null):"No matching runs found."),o.createElement("div",{className:Nn.pagination},o.createElement(rn.Z,{component:"div",count:an,page:ln,rowsPerPage:On,onPageChange:(En,aa)=>Xt(aa),onRowsPerPageChange:En=>Qt(parseInt(En.target.value,6)),labelRowsPerPage:"Workflows per page",rowsPerPageOptions:[6,12,18,{label:"All",value:-1}]})))},ct=({searchTerm:Oe,handleSearch:$e,retry:st})=>o.createElement(o.Fragment,null,o.createElement(ve.Z,{flexGrow:1}),o.createElement(de.Z,{type:"search",label:"Search",value:Oe,onChange:$e,"data-testid":"search-control",style:{marginRight:"20px"}}),o.createElement(Pt.Z,null,o.createElement(ge.ZP,{title:"Reload workflow runs"},o.createElement(T.Z,{onClick:st},o.createElement(yt.Z,null))))),jt=({entity:Oe})=>{const $e=At(Oe),st=Be(Oe),[Qt,Xt]=($e!=null?$e:"/").split("/"),[ln,an]=(0,o.useState)("default"),[On,Nn]=(0,o.useState)([]),[Fn,ra]=(0,o.useState)(""),En=U=>{ra(U.target.value)},[{runs:aa,branches:oa,defaultBranch:na,...pa},{retry:Pa,setPage:qn,setPageSize:ya}]=R({hostname:st,owner:Qt,repo:Xt,branch:ln==="all"?void 0:ln}),q=st||"github.com",Le=!pa.loading&&!aa,et=U=>{const Z=U.target.value;an(Z),qn(0),Pa()};return(0,o.useEffect)(()=>{Nn(aa)},[aa,ln]),(0,o.useEffect)(()=>{an(na)},[na]),o.createElement(re.Z,{item:!0},Le?o.createElement(at.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:o.createElement(Bt.Z,{variant:"contained",color:"primary",href:`https://${q}/${$e}/actions/new`},"Create new Workflow")}):o.createElement(at.rJ,{title:o.createElement(ve.Z,{display:"flex",alignItems:"center"},o.createElement(Ut.Z,null),o.createElement(ve.Z,{mr:1}),o.createElement(Y.Z,{variant:"h6"},$e),o.createElement(ut.Z,{value:ln,key:ln,label:"Branch",onChange:et,"data-testid":"menu-control",style:{marginLeft:"30px",marginRight:"20px",width:"230px"}},oa.map(U=>o.createElement(rt.Z,{key:U.name,value:U.name},U.name===na?o.createElement(Y.Z,{variant:"body2",component:"span"},U.name," ",o.createElement(Y.Z,{variant:"body2",component:"span",style:{color:"lightgray",fontSize:"x-small"}},"(default)")):U.name)),o.createElement(rt.Z,{value:"all",key:"all",style:{color:"lightGrey",fontSize:"small"}},"select all branches")),o.createElement(ct,{searchTerm:Fn,handleSearch:En,retry:Pa}))},o.createElement(mt,{runs:On,loading:pa.loading,onChangePageSize:ya,onChangePage:qn,page:pa.page,total:pa.total,pageSize:pa.pageSize,searchTerm:Fn,projectName:$e})))},dn=[{title:"ID",field:"id",type:"numeric",width:"150px"},{title:"Message",field:"message",highlight:!0,render:Oe=>{const $e=()=>{const st=(0,p.tg)(Je);return o.createElement(at.rU,{component:Ze.rU,to:st({id:Oe.id})},Oe.message)};return o.createElement($e,null)}},{title:"Source",render:Oe=>{var $e,st;return o.createElement(Y.Z,{variant:"body2",noWrap:!0},o.createElement(Y.Z,{paragraph:!0,variant:"body2"},($e=Oe.source)==null?void 0:$e.branchName),o.createElement(Y.Z,{paragraph:!0,variant:"body2"},(st=Oe.source)==null?void 0:st.commit.hash))}},{title:"Workflow",field:"workflowName"},{title:"Status",customSort:(Oe,$e)=>Ue(Oe).localeCompare(Ue($e)),render:Oe=>o.createElement(ve.Z,{display:"flex",alignItems:"center"},o.createElement(Wt,{status:Oe.status,conclusion:Oe.conclusion}))},{title:"Actions",render:Oe=>o.createElement(ge.ZP,{title:"Rerun workflow"},o.createElement(T.Z,{onClick:Oe.onReRunClick},o.createElement(qt.Z,null))),width:"10%"}],An=({projectName:Oe,loading:$e,pageSize:st,page:Qt,retry:Xt,runs:ln,onChangePage:an,onChangePageSize:On,total:Nn})=>o.createElement(at.iA,{isLoading:$e,options:{paging:!0,pageSize:st,padding:"dense"},totalCount:Nn,page:Qt,actions:[{icon:()=>o.createElement(yt.Z,null),tooltip:"Reload workflow runs",isFreeAction:!0,onClick:()=>Xt()}],data:ln!=null?ln:[],onPageChange:an,onRowsPerPageChange:On,style:{width:"100%"},title:o.createElement(ve.Z,{display:"flex",alignItems:"center"},o.createElement(Ut.Z,null),o.createElement(ve.Z,{mr:1}),o.createElement(Y.Z,{variant:"h6"},Oe)),columns:dn}),bn=({entity:Oe,branch:$e})=>{const st=At(Oe),Qt=Be(Oe),[Xt,ln]=(st!=null?st:"/").split("/"),[{runs:an,...On},{retry:Nn,setPage:Fn,setPageSize:ra}]=R({hostname:Qt,owner:Xt,repo:ln,branch:$e}),En=Qt||"github.com";return!On.loading&&!an?o.createElement(at.ub,{missing:"data",title:"No Workflow Data",description:"This component has GitHub Actions enabled, but no data was found. Have you created any Workflows? Click the button below to create a new Workflow.",action:o.createElement(Bt.Z,{variant:"contained",color:"primary",href:`https://${En}/${st}/actions/new`},"Create new Workflow")}):o.createElement(An,{...On,runs:an,loading:On.loading,retry:Nn,onChangePageSize:ra,onChangePage:Fn})},F=Oe=>{var $e;return Boolean(($e=Oe.metadata.annotations)==null?void 0:$e[Tt])};var Ne=Object.freeze({__proto__:null,isGithubActionsAvailable:F,Router:Oe=>{const{view:$e="table"}=Oe,{entity:st}=(0,z.u)();if(!F(st))return o.createElement(He.sk,{annotation:Tt});const Qt=$e==="cards"?o.createElement(jt,{entity:st}):o.createElement(bn,{entity:st});return o.createElement(a.Z5,null,o.createElement(a.AW,{path:"/",element:Qt}),o.createElement(a.AW,{path:`${Je.path}`,element:o.createElement(Me,{entity:st})}))}});const it=(0,xe.Z)({externalLinkIcon:{fontSize:"inherit",verticalAlign:"bottom"}}),Gt=Oe=>{var $e;const{error:st,loading:Qt,lastRun:Xt,branch:ln}=Oe,an=it();return st?o.createElement(Y.Z,null,"Couldn't fetch latest ",ln," run"):Qt?o.createElement(ee.Z,null):o.createElement(at.xT,{metadata:{status:o.createElement(o.Fragment,null,o.createElement(Wt,{status:Xt.status,conclusion:Xt.conclusion})),message:Xt.message,url:o.createElement(at.rU,{to:($e=Xt.githubUrl)!=null?$e:""},"See more on GitHub"," ",o.createElement(ke.Z,{className:an.externalLinkIcon}))}})},Dt=Oe=>{var $e,st,Qt;const{branch:Xt="master",variant:ln}=Oe,{entity:an}=(0,z.u)(),On=(0,i.u)(i.r),Nn=Be(an),[Fn,ra]=((st=($e=an==null?void 0:an.metadata.annotations)==null?void 0:$e[Tt])!=null?st:"/").split("/"),[{runs:En,loading:aa,error:oa}]=R({hostname:Nn,owner:Fn,repo:ra,branch:Xt}),na=(Qt=En==null?void 0:En[0])!=null?Qt:{};return(0,o.useEffect)(()=>{oa&&On.post(oa)},[oa,On]),o.createElement(at.rJ,{title:`Last ${Xt} build`,variant:ln},o.createElement(Gt,{error:oa,loading:aa,branch:Xt,lastRun:na}))},mn=Oe=>{const{branch:$e="master",variant:st}=Oe,{entity:Qt}=(0,z.u)();return o.createElement(at.rJ,{title:`Last ${$e} build`,variant:st},o.createElement(bn,{branch:$e,entity:Qt}))},un=Oe=>Oe.split(`
`)[0],Cn=Oe=>{var $e,st;const{branch:Qt,dense:Xt=!1,limit:ln=5,variant:an}=Oe,{entity:On}=(0,z.u)(),Nn=(0,i.u)(i.r),Fn=Be(On),[ra,En]=((st=($e=On==null?void 0:On.metadata.annotations)==null?void 0:$e[Tt])!=null?st:"/").split("/"),[{runs:aa=[],loading:oa,error:na}]=R({hostname:Fn,owner:ra,repo:En,branch:Qt,initialPageSize:ln});(0,o.useEffect)(()=>{na&&Nn.post(na)},[na,Nn]);const pa=Fn||"github.com",Pa=(0,p.tg)(Je);return na?o.createElement(at.yu,{title:na.message,error:na}):o.createElement(at.rJ,{title:"Recent Workflow Runs",subheader:Qt?`Branch: ${Qt}`:"All Branches",noPadding:!0,variant:an},aa.length?o.createElement(at.iA,{isLoading:oa,options:{search:!1,paging:!1,padding:Xt?"dense":"default",toolbar:!1},columns:[{title:"Commit Message",field:"message",render:qn=>{var ya;return o.createElement(at.rU,{component:Ze.rU,to:Pa({id:qn.id})},un((ya=qn.message)!=null?ya:""))}},{title:"Branch",field:"source.branchName"},{title:"Status",field:"status",render:Wt}],data:aa}):o.createElement("div",{style:{textAlign:"center"}},o.createElement(Y.Z,{variant:"body1"},"This component has GitHub Actions enabled, but no workflows were found."),o.createElement(Y.Z,{variant:"body2"},o.createElement(at.rU,{to:`https://${pa}/${ra}/${En}/actions/new`},"Create a new workflow"))))}},59235:(xn,Yt,e)=>{"use strict";e.d(Yt,{$M:()=>zt,Eg:()=>Zt,Jh:()=>Je,Yq:()=>le,jJ:()=>Be,jQ:()=>dt,oy:()=>Ke,qJ:()=>O,rw:()=>Ot,w1:()=>at});var i=e(30705),p=e(57032),g=e(34520),j=e(78373),k=e(73495),o=e(79692),z=e(12420),He=e(95544),Ze=e(90436),a=e(60905),xe=e(82938),Ee=e(38402),se=e(86136),Y=e(49378),Fe=e(85256),ge=e(61837),_e=e(11776),Q=e(80030),be=e(9520),M=e(76637),c=e(2784),S=e(64279),_=e(49558),b=e(73655),m=e(99688),ve=e(52866),ee=e(27604),he=e(13384),J=e(62367),ne=e(52160),re=e(61068),Pe=e(75650),Pt=e(98685),T=e(19928),rn=e.n(T),de=e(14162),Bt=e.n(de),ut=e(19126),rt=e.n(ut),bt=e(76635),ke=e.n(bt);const _t=(0,i.x8)({id:"catalog-index"}),at=(0,i.rx)({id:"org",externalRoutes:{catalogIndex:_t}}),zt=at.provide((0,i.CO)({name:"EntityGroupProfileCard",component:{lazy:()=>e.e(111).then(e.bind(e,50111)).then(ie=>ie.GroupProfileCard)}})),Ot=at.provide((0,i.CO)({name:"EntityMembersListCard",component:{lazy:()=>e.e(111).then(e.bind(e,50111)).then(ie=>ie.MembersListCard)}})),Zt=at.provide((0,i.CO)({name:"EntityOwnershipCard",component:{lazy:()=>e.e(111).then(e.bind(e,50111)).then(ie=>ie.OwnershipCard)}})),dt=at.provide((0,i.CO)({name:"EntityUserProfileCard",component:{lazy:()=>e.e(111).then(e.bind(e,50111)).then(ie=>ie.UserProfileCard)}})),gt=async(ie,Ge)=>(ie.length===0?{items:[]}:await Ge.getEntities({filter:{kind:"User","relations.memberof":ie.map(ot=>(0,g.eE)({kind:"group",namespace:ot.namespace.toLocaleLowerCase("en-US"),name:ot.name.toLocaleLowerCase("en-US")}))}})).items,Ut=async(ie,Ge)=>{var tt;const ot=new Map,en=[{kind:ie.kind,namespace:(tt=ie.metadata.namespace)!=null?tt:g.zG,name:ie.metadata.name}],Ce=[];for(;en.length>0;){const Me=en.shift(),R=await Ge.getEntityByRef(Me);ot.set((0,g.eE)(Me),!0);const B=(0,j.g)(R,g._b,{kind:"Group"}).filter(X=>!ot.has((0,g.eE)(X)));B.forEach(X=>ot.set((0,g.eE)(X),!0)),en.push(...B),Ce.push(...B)}return Ce},qt=async(ie,Ge)=>gt(await Ut(ie,Ge),Ge),yt=ie=>{const Ge=new Map;return ie.filter(tt=>{const ot=(0,g.eE)(tt),Rt=Ge.has(ot);return Ge.set(ot,!0),!Rt})},Ft=(0,o.Z)(ie=>(0,z.Z)({card:{border:`1px solid ${ie.palette.divider}`,boxShadow:ie.shadows[2],borderRadius:"4px",overflow:"visible",position:"relative",margin:ie.spacing(4,1,1),flex:"1",minWidth:"0px"}})),I=ie=>{var Ge;const tt=Ft(),{metadata:{name:ot,description:Rt},spec:{profile:en}}=ie.member,Ce=(Ge=en==null?void 0:en.displayName)!=null?Ge:ot;return c.createElement(He.Z,{className:tt.card},c.createElement(He.Z,{display:"flex",flexDirection:"column",m:3,alignItems:"center",justifyContent:"center"},c.createElement(_.qE,{displayName:Ce,picture:en==null?void 0:en.picture,customStyles:{position:"absolute",top:"-2rem"}}),c.createElement(He.Z,{pt:2,sx:{width:"100%"},textAlign:"center"},c.createElement(Ze.Z,{variant:"h6"},c.createElement(k.dx,{"data-testid":"user-link",entityRef:ie.member,title:Ce})),(en==null?void 0:en.email)&&c.createElement(_.rU,{to:`mailto:${en.email}`},c.createElement(_.Or,{text:en.email})),Rt&&c.createElement(Ze.Z,{variant:"subtitle2"},Rt))))},W=(0,o.Z)(ie=>({root:{height:"100%"},cardContent:{overflow:"auto"},memberList:{display:"grid",gap:ie.spacing(1.5),gridTemplateColumns:`repeat(auto-fit, minmax(auto, ${ie.spacing(34)}px))`}})),O=ie=>{var Ge;const{memberDisplayTitle:tt="Members",pageSize:ot=50,showAggregateMembersToggle:Rt}=ie,en=W(),{entity:Ce}=(0,j.u)(),{metadata:{name:Me,namespace:R},spec:{profile:B}}=Ce,X=(0,p.u)(k.Ah),nt=(Ge=B==null?void 0:B.displayName)!=null?Ge:Me,mt=R||g.zG,[ct,jt]=c.useState(1),dn=($e,st)=>{jt(st)},[An,bn]=(0,c.useState)(!1),{loading:F,value:H}=(0,S.default)(async()=>Rt?await qt(Ce,X):[],[X,Ce,Rt]),{loading:Ne,error:it,value:Gt}=(0,S.default)(async()=>(await X.getEntities({filter:{kind:"User","relations.memberof":[(0,g.eE)({kind:"group",namespace:mt.toLocaleLowerCase("en-US"),name:Me.toLocaleLowerCase("en-US")})]}})).items,[X,Ce]),Dt=yt([...Gt!=null?Gt:[],...H&&An?H:[]].sort(($e,st)=>(0,g.eE)($e).localeCompare((0,g.eE)(st))));if(Ne)return c.createElement(_.Ex,null);if(it)return c.createElement(_.Gk,{error:it});const mn=Math.ceil(((Dt==null?void 0:Dt.length)||0)/ot),un=mn<2?"":`, page ${ct} of ${mn}`,Cn=c.createElement(M.Z,{count:mn,page:ct,onChange:dn,showFirstButton:!0,showLastButton:!0});let Oe;return Dt&&Dt.length>0?Oe=c.createElement(He.Z,{className:en.memberList},Dt.slice(ot*(ct-1),ot*ct).map($e=>c.createElement(I,{member:$e,key:$e.metadata.uid}))):Oe=c.createElement(He.Z,{p:2},c.createElement(Ze.Z,null,"This group has no ",tt.toLocaleLowerCase(),".")),c.createElement(a.Z,{item:!0,className:en.root},c.createElement(_.rJ,{title:`${tt} (${(Dt==null?void 0:Dt.length)||0}${un})`,subheader:`of ${nt}`,...mn<=1?{}:{actions:Cn},className:en.root,cardClassName:en.cardContent},Rt&&c.createElement(c.Fragment,null,"Direct Members",c.createElement(xe.Z,{color:"primary",checked:An,onChange:()=>{bn(!An)},inputProps:{"aria-label":"Users Type Switch"}}),"Aggregated Members"),An&&F?c.createElement(_.Ex,null):Oe))},D=({href:ie,Icon:Ge,text:tt})=>c.createElement(Ee.Z,{key:ie},c.createElement(se.Z,null,Ge?c.createElement(Ge,null):c.createElement(ne.Z,null)),c.createElement(Y.Z,null,c.createElement(_.rU,{to:ie},tt))),ae=({links:ie})=>{const Ge=(0,i.qD)(),tt=ot=>{var Rt;return ot&&(Rt=Ge.getSystemIcon(ot))!=null?Rt:ne.Z};return ie===void 0?null:c.createElement(c.Fragment,null,c.createElement(Fe.Z,null),ie.map(ot=>c.createElement(D,{key:ot.url,href:ot.url,text:ot.title,Icon:tt(ot.icon)})))},fe=ie=>c.createElement(He.Z,{display:"flex",alignItems:"center"},c.createElement(J.Z,{fontSize:"inherit"}),c.createElement(He.Z,{ml:1},ie.title)),Ke=ie=>{var Ge,tt,ot;const Rt=(0,p.u)(k.Ah),en=(0,p.u)(p.l),{entity:Ce}=(0,j.u)(),{allowed:Me}=(0,re.N$)(Pe.es),R=(0,c.useCallback)(async()=>{await Rt.refreshEntity((0,g.eE)(Ce)),en.post({message:"Refresh scheduled",severity:"info",display:"transient"})},[Rt,en,Ce]);if(!Ce)return c.createElement(m.Z,{severity:"error"},"Group not found");const{metadata:{name:B,description:X,title:nt,annotations:mt,links:ct},spec:{profile:jt}}=Ce,dn=(0,j.g)(Ce,g._b,{kind:"Group"}),An=(0,j.g)(Ce,g.wP,{kind:"group"}),bn=mt==null?void 0:mt[g.P1],F=(bn==null?void 0:bn.startsWith("url:"))||(bn==null?void 0:bn.startsWith("file:")),H=(Ge=Ce.metadata.annotations)==null?void 0:Ge[g.Tf],Ne=(ot=(tt=jt==null?void 0:jt.displayName)!=null?tt:nt)!=null?ot:B,it=jt!=null&&jt.email?`mailto:${jt.email}`:"#",Gt=H?c.createElement(ge.Z,{"aria-label":"Edit",title:"Edit Metadata",component:_.rU,to:H},c.createElement(ee.Z,null)):c.createElement(ge.Z,{"aria-label":"Edit",disabled:!0,title:"Edit Metadata"},c.createElement(ee.Z,null));return c.createElement(_.rJ,{title:c.createElement(fe,{title:Ne}),subheader:X,variant:ie.variant,action:c.createElement(c.Fragment,null,F&&Me&&c.createElement(ge.Z,{"aria-label":"Refresh",title:"Schedule entity refresh",onClick:R},c.createElement(ve.Z,null)),Gt)},c.createElement(a.Z,{container:!0,spacing:3},c.createElement(a.Z,{item:!0,xs:12,sm:2,xl:1},c.createElement(_.qE,{displayName:Ne,picture:jt==null?void 0:jt.picture})),c.createElement(a.Z,{item:!0,md:10,xl:11},c.createElement(_e.Z,null,(jt==null?void 0:jt.email)&&c.createElement(Ee.Z,null,c.createElement(se.Z,null,c.createElement(Q.ZP,{title:"Email"},c.createElement(he.Z,null))),c.createElement(Y.Z,{primary:c.createElement(_.rU,{to:it},jt.email),secondary:"Email"})),c.createElement(Ee.Z,null,c.createElement(se.Z,null,c.createElement(Q.ZP,{title:"Parent Group"},c.createElement(b.Z,null))),c.createElement(Y.Z,{primary:An.length?c.createElement(k.rI,{entityRefs:An,defaultKind:"Group"}):"N/A",secondary:"Parent Group"})),c.createElement(Ee.Z,null,c.createElement(se.Z,null,c.createElement(Q.ZP,{title:"Child Groups"},c.createElement(J.Z,null))),c.createElement(Y.Z,{primary:dn.length?c.createElement(k.rI,{entityRefs:dn,defaultKind:"Group"}):"N/A",secondary:"Child Groups"})),(ie==null?void 0:ie.showLinks)&&c.createElement(ae,{links:ct})))))},ft=ie=>ie.title?c.createElement(He.Z,{display:"flex",alignItems:"center"},c.createElement(Pt.Z,{fontSize:"inherit"}),c.createElement(He.Z,{ml:1},ie.title)):null,Je=ie=>{var Ge,tt;const{entity:ot}=(0,j.u)();if(!ot)return c.createElement(m.Z,{severity:"error"},"User not found");const Rt=(Ge=ot.metadata.annotations)==null?void 0:Ge[g.Tf],{metadata:{name:en,description:Ce,links:Me},spec:{profile:R}}=ot,B=(tt=R==null?void 0:R.displayName)!=null?tt:en,X=R!=null&&R.email?`mailto:${R.email}`:void 0,nt=(0,j.g)(ot,g.hr,{kind:"Group"});return c.createElement(_.rJ,{title:c.createElement(ft,{title:B}),subheader:Ce,variant:ie.variant,action:c.createElement(c.Fragment,null,Rt&&c.createElement(ge.Z,{"aria-label":"Edit",title:"Edit Metadata",component:_.rU,to:Rt},c.createElement(ee.Z,null)))},c.createElement(a.Z,{container:!0,spacing:3,alignItems:"flex-start"},c.createElement(a.Z,{item:!0,xs:12,sm:2,xl:1},c.createElement(_.qE,{displayName:B,picture:R==null?void 0:R.picture})),c.createElement(a.Z,{item:!0,md:10,xl:11},c.createElement(_e.Z,null,(R==null?void 0:R.email)&&c.createElement(Ee.Z,null,c.createElement(se.Z,null,c.createElement(Q.ZP,{title:"Email"},c.createElement(he.Z,null))),c.createElement(Y.Z,null,c.createElement(_.rU,{to:X!=null?X:""},R.email))),c.createElement(Ee.Z,null,c.createElement(se.Z,null,c.createElement(Q.ZP,{title:"Member of"},c.createElement(J.Z,null))),c.createElement(Y.Z,null,c.createElement(k.rI,{entityRefs:nt,defaultKind:"Group"}))),(ie==null?void 0:ie.showLinks)&&c.createElement(ae,{links:Me})))))},wt=Bt()(10),nn=(ie,Ge)=>{const{kind:tt,type:ot}=Ge,Rt=ie.map(Ce=>(0,k.$3)((0,g.of)(Ce),{defaultKind:"group"})),en={kind:tt.toLocaleLowerCase("en-US"),type:ot,owners:Rt,user:"all"};return rt().stringify({filters:en},{arrayFormat:"repeat"})},Ae=ie=>[...(0,j.g)(ie,g.hr,{kind:"Group"}).map(({kind:ot,namespace:Rt,name:en})=>(0,g.eE)({kind:ot,namespace:Rt,name:en})),(0,g.eE)(ie)],Te=ie=>ie!==void 0,vt=async(ie,Ge,tt=[])=>{const ot=(0,j.g)(ie,g._b,{kind:"Group"}),Rt=ot.length>0,en=(0,g.eE)(ie);if(Rt){const Ce=ot.map(nt=>(0,g.eE)(nt)),B=(await Ge.getEntitiesByRefs({fields:["kind","metadata.namespace","metadata.name","relations"],entityRefs:Ce})).items.filter(Te).filter(nt=>!tt.includes((0,g.eE)(nt))),X=(await Promise.all(B.map(nt=>wt(()=>vt(nt,Ge,[...tt,en]))))).flatMap(nt=>nt);return(0,bt.uniq)([...X,en])}return[en]},Tt=async(ie,Ge,tt)=>{const ot=ie.kind==="Group",Rt=Ge==="aggregated",en=ie.kind==="User";return Rt&&ot?vt(ie,tt):Rt&&en?Ae(ie):[(0,g.eE)(ie)]},At=(ie,Ge,tt)=>tt.getEntities({filter:[{kind:Ge,"relations.ownedBy":ie}],fields:["kind","metadata.name","metadata.namespace","spec.type","relations"]});function Wt(ie,Ge,tt,ot=6){const Rt=(0,p.u)(k.Ah),en=tt!=null?tt:["Component","API","System"],{loading:Ce,error:Me,value:R}=(0,S.default)(async()=>{const B=await Tt(ie,Ge,Rt);return(await At(B,en,Rt)).items.reduce((ct,jt)=>{var dn,An;const bn=ct.find(F=>{var H;return F.kind===jt.kind&&F.type===((H=jt.spec)==null?void 0:H.type)});return bn?bn.count+=1:ct.push({kind:jt.kind,type:(An=(dn=jt.spec)==null?void 0:dn.type)==null?void 0:An.toString(),count:1}),ct},[]).sort((ct,jt)=>jt.count-ct.count).slice(0,ot).map(ct=>({counter:ct.count,type:ct.type,kind:ct.kind,queryParams:nn(B,ct)}))},[Rt,ie,Ge]);return{componentsWithCounters:R,loading:Ce,error:Me}}const St=(0,o.Z)(ie=>(0,z.Z)({card:{border:`1px solid ${ie.palette.divider}`,boxShadow:ie.shadows[2],borderRadius:"4px",padding:ie.spacing(2),transition:`${ie.transitions.duration.standard}ms`,"&:hover":{boxShadow:ie.shadows[4]},height:"100%"},bold:{fontWeight:ie.typography.fontWeightBold},smallFont:{fontSize:ie.typography.body2.fontSize},entityTypeBox:{background:Ge=>ie.getPageTheme({themeId:Ge.type}).backgroundImage,color:Ge=>ie.getPageTheme({themeId:Ge.type}).fontColor}})),Ue=({counter:ie,type:Ge,kind:tt,url:ot})=>{const Rt=St({type:Ge!=null?Ge:tt}),en=Ge!=null?Ge:tt,Ce=en.length>10;return c.createElement(_.rU,{to:ot,variant:"body2"},c.createElement(He.Z,{className:`${Rt.card} ${Rt.entityTypeBox}`,display:"flex",flexDirection:"column",alignItems:"center"},c.createElement(Ze.Z,{className:Rt.bold,variant:"h6"},ie),c.createElement(He.Z,{sx:{width:"100%",textAlign:"center"}},c.createElement(Ze.Z,{className:`${Rt.bold} ${Ce&&Rt.smallFont}`,variant:"h6"},c.createElement(_.Or,{text:rn()(en.toLocaleUpperCase("en-US"),ie)}))),Ge&&c.createElement(Ze.Z,{variant:"subtitle1"},tt)))},Xe=({entity:ie,relationsType:Ge,entityFilterKind:tt,entityLimit:ot=6})=>{const Rt=(0,i.tg)(_t),{componentsWithCounters:en,loading:Ce,error:Me}=Wt(ie,Ge,tt,ot);return Ce?c.createElement(_.Ex,null):Me?c.createElement(_.Gk,{error:Me}):c.createElement(a.Z,{container:!0},en==null?void 0:en.map(R=>{var B;return c.createElement(a.Z,{item:!0,xs:6,md:6,lg:4,key:(B=R.type)!=null?B:R.kind},c.createElement(Ue,{counter:R.counter,kind:R.kind,type:R.type,url:`${Rt()}/?${R.queryParams}`}))}))},Mt=(0,o.Z)(ie=>({list:{[ie.breakpoints.down("xs")]:{padding:"0 0 12px"}},listItemText:{[ie.breakpoints.down("xs")]:{paddingRight:0,paddingLeft:0}},listItemSecondaryAction:{[ie.breakpoints.down("xs")]:{width:"100%",top:"auto",right:"auto",position:"relative",transform:"unset"}}})),le=ie=>{const{variant:Ge,entityFilterKind:tt,hideRelationsToggle:ot,relationsType:Rt,entityLimit:en=6}=ie,Ce=ot===void 0?!1:ot,Me=Mt(),{entity:R}=(0,j.u)(),B=R.kind==="User"?"aggregated":"direct",[X,nt]=(0,c.useState)(Rt!=null?Rt:B);return(0,c.useEffect)(()=>{Rt||nt(B)},[nt,B,Rt]),c.createElement(_.rJ,{title:"Ownership",variant:Ge},!Ce&&c.createElement(_e.Z,{dense:!0},c.createElement(Ee.Z,{className:Me.list},c.createElement(Y.Z,{className:Me.listItemText}),c.createElement(be.Z,{className:Me.listItemSecondaryAction},"Direct Relations",c.createElement(Q.ZP,{placement:"top",arrow:!0,title:`${X==="direct"?"Direct":"Aggregated"} Relations`},c.createElement(xe.Z,{color:"primary",checked:X!=="direct",onChange:()=>{nt(X==="direct"?"aggregated":"direct")},name:"pin",inputProps:{"aria-label":"Ownership Type Switch"}})),"Aggregated Relations"))),c.createElement(Xe,{entity:R,entityLimit:en,relationsType:X,entityFilterKind:tt}))},Be=ie=>{const{singularTitle:Ge,pluralTitle:tt,icon:ot,filter:Rt}=ie,en=(0,p.u)(p.t),Ce=(0,p.u)(k.Ah),Me=(0,i.tg)(k.wi),{value:R}=(0,S.default)(async()=>{const B=await en.getBackstageIdentity();return(await Ce.getEntities({filter:[{kind:"group","relations.hasMember":B.userEntityRef,...Rt!=null?Rt:{}}],fields:["metadata","kind"]})).items},[]);if(!(R!=null&&R.length))return null;if(R.length===1){const B=R[0];return c.createElement(_.R6,{text:Ge,to:Me((0,g.iB)(B)),icon:ot})}return c.createElement(_.R6,{icon:ot,text:tt},c.createElement(_.k2,{title:tt},R==null?void 0:R.map(function(X){return c.createElement(_.BT,{title:X.metadata.title||X.metadata.name,subtitle:X.metadata.namespace!==g.zG?X.metadata.namespace:void 0,to:Me((0,g.iB)(X)),icon:ot,key:(0,g.eE)(X)})})))}},5083:(xn,Yt,e)=>{"use strict";e.d(Yt,{J$:()=>Y,Y2:()=>S,g2:()=>He,rG:()=>o});var i=e(32272),p=e(96279),g=e.n(p),j=e(9571),k=e(30195),o=(_=>(_.DENY="DENY",_.ALLOW="ALLOW",_.CONDITIONAL="CONDITIONAL",_))(o||{});function z(_,b){return _.name===b.name}function He(_,b){return"resourceType"in _?!b||_.resourceType===b:!1}function Ze(_){return _.attributes.action==="create"}function a(_){return _.attributes.action==="read"}function xe(_){return _.attributes.action==="update"}function Ee(_){return _.attributes.action==="delete"}function se(_){return{authorize:async(b,m)=>await _.authorize(b,m),authorizeConditional(b,m){const ve=b;return _.authorize(ve,m)}}}function Y({name:_,attributes:b,resourceType:m}){return m?{type:"resource",name:_,attributes:b,resourceType:m}:{type:"basic",name:_,attributes:b}}var Fe=Object.defineProperty,ge=(_,b,m)=>b in _?Fe(_,b,{enumerable:!0,configurable:!0,writable:!0,value:m}):_[b]=m,_e=(_,b,m)=>(ge(_,typeof b!="symbol"?b+"":b,m),m);const Q=k.z.lazy(()=>k.z.object({rule:k.z.string(),resourceType:k.z.string(),params:k.z.record(k.z.any()).optional()}).or(k.z.object({anyOf:k.z.array(Q).nonempty()})).or(k.z.object({allOf:k.z.array(Q).nonempty()})).or(k.z.object({not:Q}))),be=k.z.object({result:k.z.literal(o.ALLOW).or(k.z.literal(o.DENY))}),M=k.z.union([k.z.object({result:k.z.literal(o.ALLOW).or(k.z.literal(o.DENY))}),k.z.object({result:k.z.literal(o.CONDITIONAL),pluginId:k.z.string(),resourceType:k.z.string(),conditions:Q})]),c=(_,b)=>k.z.object({items:k.z.array(k.z.intersection(k.z.object({id:k.z.string()}),_)).refine(m=>m.length===b.size&&m.every(({id:ve})=>b.has(ve)),{message:"Items in response do not match request"})});class S{constructor(b){_e(this,"enabled"),_e(this,"discovery");var m;this.discovery=b.discovery,this.enabled=(m=b.config.getOptionalBoolean("permission.enabled"))!=null?m:!1}async authorize(b,m){return this.makeRequest(b,be,m)}async authorizeConditional(b,m){return this.makeRequest(b,M,m)}async makeRequest(b,m,ve){if(!this.enabled)return b.map(Pt=>({result:o.ALLOW}));const ee={items:b.map(Pt=>({id:j.Z(),...Pt}))},he=await this.discovery.getBaseUrl("permission"),J=await g()(`${he}/authorize`,{method:"POST",body:JSON.stringify(ee),headers:{...this.getAuthorizationHeader(ve==null?void 0:ve.token),"content-type":"application/json"}});if(!J.ok)throw await i.VL.fromResponse(J);const ne=await J.json(),Pe=c(m,new Set(ee.items.map(({id:Pt})=>Pt))).parse(ne).items.reduce((Pt,T)=>(Pt[T.id]=T,Pt),{});return ee.items.map(Pt=>Pe[Pt.id])}getAuthorizationHeader(b){return b?{Authorization:`Bearer ${b}`}:{}}}},56563:(xn,Yt,e)=>{"use strict";e.d(Yt,{RV:()=>o,gI:()=>He,iM:()=>z,un:()=>a});var i=e(2784),p=e(57032),g=e(30705),j=e(5083),k=e(69984);const o=(0,p.c)({id:"plugin.permission.api"});class z{constructor(Ee,se){this.permissionClient=Ee,this.identityApi=se}static create(Ee){const{config:se,discovery:Y,identity:Fe}=Ee,ge=new j.Y2({discovery:Y,config:se});return new z(ge,Fe)}async authorize(Ee){return(await this.permissionClient.authorize([Ee],await this.identityApi.getCredentials()))[0]}}function He(xe){const Ee=(0,p.u)(o),{data:se,error:Y}=(0,k.ZP)(xe,async Fe=>{if((0,j.g2)(Fe.permission)&&!Fe.resourceRef)return j.rG.DENY;const{result:ge}=await Ee.authorize(Fe);return ge});return Y?{error:Y,loading:!1,allowed:!1}:se===void 0?{loading:!0,allowed:!1}:{loading:!1,allowed:se===j.rG.ALLOW}}const Ze=xe=>{const{permission:Ee,resourceRef:se,errorComponent:Y,...Fe}=xe,ge=He(isResourcePermission(Ee)?{permission:Ee,resourceRef:se}:{permission:Ee}),_e=useApp(),{NotFoundErrorPage:Q}=_e.getComponents();let be=Y===void 0?React.createElement(Q,null):Y;return ge.loading?be=null:ge.allowed&&(be=xe.element),React.createElement(Route,{...Fe,element:be})};function a(xe){const{permission:Ee,resourceRef:se}=xe,Y=He((0,j.g2)(Ee)?{permission:Ee,resourceRef:se}:{permission:Ee}),Fe=(0,g.qD)();if(Y.loading)return null;if(Y.allowed)return i.createElement(i.Fragment,null,xe.children);if(xe.errorPage)return i.createElement(i.Fragment,null,xe.errorPage);const{NotFoundErrorPage:ge}=Fe.getComponents();return i.createElement(ge,null)}},67898:(xn,Yt,e)=>{"use strict";e.d(Yt,{t:()=>a});var i=e(34520),p="http://json-schema.org/draft-07/schema",g="TemplateV1beta3",j="A Template describes a scaffolding task for use with the Scaffolder. It describes the required parameters as well as a series of steps that will be taken to execute the scaffolding task.",k=[{apiVersion:"scaffolder.backstage.io/v1beta3",kind:"Template",metadata:{name:"react-ssr-template",title:"React SSR Template",description:"Next.js application skeleton for creating isomorphic web applications.",tags:["recommended","react"]},spec:{owner:"artist-relations-team",type:"website",parameters:{required:["name","description","repoUrl"],"backstage:permissions":{tags:["one","two"]},properties:{name:{title:"Name",type:"string",description:"Unique name of the component"},description:{title:"Description",type:"string",description:"Description of the component"},repoUrl:{title:"Pick a repository",type:"string","ui:field":"RepoUrlPicker"}}},steps:[{id:"fetch",name:"Fetch",action:"fetch:plain",parameters:{url:"./template"},"backstage:permissions":{tags:["one","two"]}},{id:"publish",name:"Publish to GitHub",action:"publish:github",parameters:{repoUrl:"${{ parameters.repoUrl }}"},if:"${{ parameters.repoUrl }}"}],output:{catalogInfoUrl:"${{ steps.publish.output.catalogInfoUrl }}"}}}],o=[{$ref:"Entity"},{type:"object",required:["spec"],properties:{apiVersion:{enum:["scaffolder.backstage.io/v1beta3"]},kind:{enum:["Template"]},spec:{type:"object",required:["type","steps"],properties:{type:{type:"string",description:"The type of component created by the template. The software catalog accepts any type value, but an organization should take great care to establish a proper taxonomy for these. Tools including Backstage itself may read this field and behave differently depending on its value. For example, a website type component may present tooling in the Backstage interface that is specific to just websites.",examples:["service","website","library"],minLength:1},owner:{type:"string",description:"The user (or group) owner of the template",minLength:1},parameters:{oneOf:[{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}},{type:"array",description:"A list of separate forms to collect parameters.",items:{type:"object",description:"The JSONSchema describing the inputs for the template.",properties:{"backstage:permissions":{type:"object",description:"Object used for authorizing the parameter",properties:{tags:{type:"array",items:{type:"string"}}}}}}}]},steps:{type:"array",description:"A list of steps to execute.",items:{type:"object",description:"A description of the step to execute.",required:["action"],properties:{id:{type:"string",description:"The ID of the step, which can be used to refer to its outputs."},name:{type:"string",description:"The name of the step, which will be displayed in the UI during the scaffolding process."},action:{type:"string",description:"The name of the action to execute."},input:{type:"object",description:"A templated object describing the inputs to the action."},if:{type:["string","boolean"],description:'A templated condition that skips the step when evaluated to false. If the condition is true or not defined, the step is executed. The condition is true, if the input is not `false`, `undefined`, `null`, `""`, `0`, or `[]`.'},"backstage:permissions":{type:"object",description:"Object used for authorizing the step",properties:{tags:{type:"array",items:{type:"string"}}}}}}},output:{type:"object",description:"A templated object describing the outputs of the scaffolding task.",properties:{links:{type:"array",description:"A list of external hyperlinks, typically pointing to resources created or updated by the template",items:{type:"object",required:[],properties:{url:{type:"string",description:"A url in a standard uri format.",examples:["https://github.com/my-org/my-new-repo"],minLength:1},entityRef:{type:"string",description:"An entity reference to an entity in the catalog.",examples:["Component:default/my-app"],minLength:1},title:{type:"string",description:"A user friendly display name for the link.",examples:["View new repo"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1}}}},text:{type:"array",description:"A list of Markdown text blobs, like output data from the template.",items:{type:"object",required:[],properties:{title:{type:"string",description:"A user friendly display name for the text.",examples:["Output Content"],minLength:1},icon:{type:"string",description:"A key representing a visual icon to be displayed in the UI.",examples:["dashboard"],minLength:1},content:{type:"string",description:"The text blob to display in the UI, rendered as Markdown.",examples:["**hey** _I'm_ Markdown"]}}}}},additionalProperties:{type:"string"}}}}}}],z={$schema:p,$id:g,description:j,examples:k,allOf:o};const He=(0,i.wI)(z),Ze={async check(xe){return He(xe)===xe}},a=xe=>xe.apiVersion==="scaffolder.backstage.io/v1beta3"&&xe.kind==="Template"},31011:(xn,Yt,e)=>{"use strict";e.d(Yt,{Iy:()=>On,Lp:()=>oa,Q0:()=>mt,_G:()=>ya,br:()=>tt,h4:()=>st,l0:()=>bn,mg:()=>Mt,ow:()=>Oe,v9:()=>pa,vF:()=>H,zP:()=>Le});var i=e(57032),p=e(30705),g=e(79692),j=e(42494),k=e(90436),o=e(67358),z=e(31625),He=e(31377),Ze=e(34546),a=e(77277),xe=e(60364),Ee=e(94339),se=e(24579),Y=e(60905),Fe=e(95544),ge=e(85256),_e=e(7089),Q=e(14503),be=e(27556),M=e(4614),c=e(97136),S=e(5806),_=e(21324),b=e(86619),m=e(2784),ve=e(51251),ee=e(49558),he=e(11280),J=e(19126),ne=e.n(J),re=e(64279),Pe=e(60885),Pt=e(9850),T=e.n(Pt),rn=e(95303),de=e(93804),Bt=e(90137),ut=e(34520),rt=e(73495),bt=e(78373),ke=e(52160),_t=e(67898),at=e(27057),zt=e(71140),Ot=e(34063),Zt=e(72779),dt=e.n(Zt),gt=e(34812),Ut=e(91750),qt=e(70218),yt=e(26228),Ft=e(75951),I=e.n(Ft),W=e(89586),O=e(82108),D=e.n(O),ae=e(19996),fe=e(25505),Ke=e(38016),ft=e(88013),Je=e(61837),wt=e(86136),nn=e(49378),Ae=e(12231),Te=e(50758),vt=e(79784),Tt=e(30254),At=e(27604),Wt=e(33882),St=e(43054);function Ue(U){return typeof U=="object"&&U!==null&&!Array.isArray(U)}function Xe(U,Z){if(!Ue(U))return;const{properties:P,items:$,anyOf:N,oneOf:oe,allOf:pe,dependencies:te,then:Se,else:We}=U;for(const Qe in U)U.hasOwnProperty(Qe)&&Qe.startsWith("ui:")&&(Z[Qe]=U[Qe],delete U[Qe]);if(Ue(P))for(const Qe in P){if(!P.hasOwnProperty(Qe))continue;const kt=P[Qe];if(!Ue(kt))continue;const Lt={};Z[Qe]=Lt,Xe(kt,Lt)}if(Ue($)){const Qe={};Z.items=Qe,Xe($,Qe)}if(Array.isArray(N))for(const Qe of N)Ue(Qe)&&Xe(Qe,Z);if(Array.isArray(oe))for(const Qe of oe)Ue(Qe)&&Xe(Qe,Z);if(Array.isArray(pe))for(const Qe of pe)Ue(Qe)&&Xe(Qe,Z);if(Ue(te))for(const Qe of Object.keys(te)){const kt=te[Qe];Ue(kt)&&Xe(kt,Z)}Ue(Se)&&Xe(Se,Z),Ue(We)&&Xe(We,Z)}const Mt=U=>{const Z={},P=JSON.parse(JSON.stringify(U));return Xe(P,Z),{uiSchema:Z,schema:P}},le=()=>{const U={__errors:[],addError:Z=>{var P;(P=U.__errors)==null||P.push(Z)}};return U};function Be(U){return!!U&&"__errors"in U}function ie(U){var Z;if(!U)return!1;for(const P of Object.values(U)){if(Be(P)){if(((Z=P.__errors)!=null?Z:[]).length>0)return!0;continue}if(ie(P))return!0}return!1}function Ge(U){return typeof U=="object"&&U!==null&&!Array.isArray(U)}const tt=(U,Z,P)=>{async function $(N,oe="#",pe=N){var te,Se;const We=new ve.NL(U),Qe={},kt=async(Lt,tn,on,vn,cn)=>{const gn=Z[Lt];if(gn){const yn=le();try{await gn(on,yn,{...P,formData:N,schema:vn,uiSchema:cn})}catch(Bn){yn.addError(Bn.message)}Qe[tn]=yn}};for(const[Lt,tn]of Object.entries(pe)){const on=`${oe}/${Lt}`,vn=We.getSchema(on,N),{schema:cn,uiSchema:gn}=Mt(vn),yn=vn&&vn.items,Bn=async(jn,Kn,Dn)=>{await kt(jn["ui:field"],Lt,tn,Kn,Dn)},Qn=async jn=>{if("ui:field"in jn){const{schema:Kn,uiSchema:Dn}=Mt(vn.items);await Bn(jn,Kn,Dn)}};if(vn&&"ui:field"in vn)await Bn(vn,cn,gn);else if(yn&&"ui:field"in vn.items)await Qn(vn.items);else if(yn&&vn.items.type==="object"){const jn=(Se=(te=vn.items)==null?void 0:te.properties)!=null?Se:[];for(const[,Kn]of Object.entries(jn))await Qn(Kn)}else Ge(tn)&&(Qe[Lt]=await $(N,on,tn))}return Qe}return async N=>await $(N)},ot=U=>{const Z=Object.fromEntries(Object.entries(U.formState).map(([P,$])=>{var N;for(const oe of U.schemas){const te=new ve.NL(oe.mergedSchema).getSchema(`#/${P}`,U.formState);if(te){const Se=(N=te["ui:backstage"])==null?void 0:N.review;if(Se){if(Se.mask)return[P,Se.mask];if(Se.show===!1)return[]}if(te["ui:widget"]==="password")return[P,"******"];if(te.enum&&te.enumNames)return[P,te.enumNames[te.enum.indexOf($)]||$]}}return[P,$]}).filter(P=>P.length>0));return m.createElement(ee.xT,{metadata:Z})},Rt=U=>{const Z=(0,i.u)(i.f),$=U.steps.map(({title:N,description:oe,schema:pe})=>({title:N,description:oe,mergedSchema:pe,...Mt(pe)})).filter(N=>{var oe;const pe=(oe=N.uiSchema["ui:backstage"])==null?void 0:oe.featureFlag;return pe?Z.isActive(pe):!0}).map(N=>{var oe,pe,te;const Se={...N,schema:{...N.schema,title:void 0}};return(oe=N.schema)!=null&&oe.properties&&(Se.schema.properties=Object.fromEntries(Object.entries((te=(pe=N.schema)==null?void 0:pe.properties)!=null?te:[]).filter(([We])=>{var Qe,kt;const Lt=(kt=(Qe=N.uiSchema[We])==null?void 0:Qe["ui:backstage"])==null?void 0:kt.featureFlag;return Lt?Z.isActive(Lt):!0}))),Se});return{presentation:U.presentation,steps:$}},en=U=>(0,m.useState)(()=>{if(U)return U;const Z=ne().parse(window.location.search,{ignoreQueryPrefix:!0});try{return JSON.parse(Z.formData)}catch{return{}}}),Ce=U=>{const Z=(0,i.u)(Pe.s),{value:P,loading:$,error:N}=(0,re.default)(()=>Z.getTemplateParameterSchema(U),[Z,U]);return{manifest:P,loading:$,error:N}},Me=U=>{const Z="backstage:featureFlag",P=(0,i.u)(i.f);if(!U)return;const $=U==null?void 0:U.steps.filter(N=>{const oe=N.schema[Z];return typeof oe!="string"||P.isActive(oe)}).map(N=>{var oe;const pe=T()(N),te=[];return pe.schema.properties&&(pe.schema.properties=Object.fromEntries(Object.entries(pe.schema.properties).filter(([Se,We])=>We[Z]?P.isActive(We[Z])?!0:(te.push(Se),!1):!0)),pe.schema.required=Array.isArray(pe.schema.required)?(oe=pe.schema.required)==null?void 0:oe.filter(Se=>!te.includes(Se)):pe.schema.required),pe});return{...U,steps:$}},R=(U,Z={})=>{var P;const{layouts:$=[]}=Z,N=U==null?void 0:U.uiSchema["ui:ObjectFieldTemplate"];if(typeof N!="string")return U;const oe=(P=$.find(pe=>pe.name===N))==null?void 0:P.component;return oe?{...U,uiSchema:{...U.uiSchema,["ui:ObjectFieldTemplate"]:oe}}:U};var X=Object.freeze({__proto__:null,DescriptionField:({description:U})=>U&&m.createElement(ee.SA,{content:U,linkTarget:"_blank"})});const nt=(0,g.Z)(U=>({markdownDescription:{fontSize:U.typography.caption.fontSize,margin:0,color:U.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),mt=U=>{const{children:Z,displayLabel:P=!0,rawErrors:$=[],errors:N,help:oe,rawDescription:pe,required:te,disabled:Se}=U,We=nt();return m.createElement(j.Z,{fullWidth:!0,error:!!$.length,required:te,disabled:Se},Z,P&&pe?m.createElement(ee.SA,{content:pe,className:We.markdownDescription}):null,N,oe)},ct=U=>{const{id:Z,children:P,classNames:$,style:N,disabled:oe,displayLabel:pe,hidden:te,label:Se,onDropPropertyClick:We,onKeyChange:Qe,readonly:kt,required:Lt,rawErrors:tn=[],errors:on,help:vn,rawDescription:cn,schema:gn,uiSchema:yn,registry:Bn}=U,Qn=(0,de.LI)(yn),jn=(0,de.t4)("WrapIfAdditionalTemplate",Bn,Qn);return te?m.createElement("div",{style:{display:"none"}},P):m.createElement(jn,{classNames:$,style:N,disabled:oe,id:Z,label:Se,onDropPropertyClick:We,onKeyChange:Qe,readonly:kt,required:Lt,schema:gn,uiSchema:yn,registry:Bn},m.createElement(mt,{displayLabel:pe,rawErrors:tn,help:vn,disabled:oe,rawDescription:cn,errors:on,required:Lt},P))},jt=(0,g.Z)(U=>({markdownDescription:{fontSize:U.typography.caption.fontSize,margin:0,color:U.palette.text.secondary,"& :first-child":{margin:0,marginTop:"3px"}}})),dn=U=>{const{id:Z,description:P}=U,$=jt();return P?typeof P=="string"?m.createElement(ee.SA,{content:P,className:$.markdownDescription}):m.createElement(k.Z,{id:Z,variant:"subtitle2",style:{marginTop:"5px"}},P):null},An=(0,rn.Zz)(Bt.Q2),bn=U=>{const Z=m.useMemo(()=>{var $;return Object.fromEntries(Object.entries(($=U.fields)!=null?$:{}).map(([N,oe])=>[N,pe=>{var te,Se;return m.createElement(oe,{...pe,uiSchema:(te=pe.uiSchema)!=null?te:{},formData:pe.formData,rawErrors:(Se=pe.rawErrors)!=null?Se:[]})}]))},[U.fields]),P=m.useMemo(()=>({FieldTemplate:ct,DescriptionFieldTemplate:dn,...U.templates}),[U.templates]);return m.createElement(An,{...U,templates:P,fields:Z})},F=(0,g.Z)(U=>({backButton:{marginRight:U.spacing(1)},footer:{display:"flex",flexDirection:"row",justifyContent:"right",marginTop:U.spacing(2)},formWrapper:{padding:U.spacing(2)}})),H=U=>{var Z,P,$,N,oe,pe,te;const{layouts:Se=[],components:We={},...Qe}=U,{ReviewStateComponent:kt=ot,ReviewStepComponent:Lt,backButtonText:tn="Back",createButtonText:on="Create",reviewButtonText:vn="Review"}=We,cn=(0,p.z$)(),{presentation:gn,steps:yn}=Rt(Qe.manifest),Bn=(0,i.b)(),[Qn,jn]=(0,m.useState)(0),[Kn,Dn]=(0,m.useState)(!1),[Jn,fn]=en(Qe.initialState),[wn,sa]=(0,m.useState)(),ua=F(),Ia=(0,m.useMemo)(()=>Object.fromEntries(Qe.extensions.map(({name:ia,component:la})=>[ia,la])),[Qe.extensions]),Na=(0,m.useMemo)(()=>({...X,...Ia}),[Ia]),za=(0,m.useMemo)(()=>Object.fromEntries(Qe.extensions.map(({name:ia,validation:la})=>[ia,la])),[Qe.extensions]),Fa=(0,m.useMemo)(()=>{var ia;return tt((ia=yn[Qn])==null?void 0:ia.mergedSchema,za,{apiHolder:Bn})},[yn,Qn,za,Bn]),xa=()=>{jn(ia=>ia-1)},Da=(0,m.useCallback)(ia=>fn(la=>({...la,...ia.formData})),[fn]),Ga=(0,m.useCallback)(()=>{var ia;Qe.onCreate(Jn);const la=typeof Jn.name=="string"?Jn.name:void 0;cn.captureEvent("create",(ia=la!=null?la:Qe.templateName)!=null?ia:"unknown")},[Qe,Jn,cn]),ja=R(yn[Qn],{layouts:Se}),Xa=async({formData:ia={}})=>{sa(void 0),Dn(!0);const la=await Fa(ia);Dn(!1),ie(la)?sa(la):(sa(void 0),jn(Qa=>{const Ba=Qa+1;return cn.captureEvent("click",`Next Step (${Ba})`),Ba})),fn(Qa=>({...Qa,...ia}))},cr=(P=(Z=gn==null?void 0:gn.buttonLabels)==null?void 0:Z.backButtonText)!=null?P:tn,nr=(N=($=gn==null?void 0:gn.buttonLabels)==null?void 0:$.createButtonText)!=null?N:on,Oa=(pe=(oe=gn==null?void 0:gn.buttonLabels)==null?void 0:oe.reviewButtonText)!=null?pe:vn;return m.createElement(m.Fragment,null,Kn&&m.createElement(o.Z,{variant:"indeterminate"}),m.createElement(z.Z,{activeStep:Qn,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},yn.map((ia,la)=>{const Qa=Qn>la;return m.createElement(He.Z,{key:la},m.createElement(Ze.Z,{"aria-label":`Step ${la+1}`,style:{cursor:Qa?"pointer":"default"},onClick:()=>{Qa&&jn(la)}},ia.title))}),m.createElement(He.Z,null,m.createElement(Ze.Z,null,"Review"))),m.createElement("div",{className:ua.formWrapper},Qn<yn.length?m.createElement(bn,{validator:he.ZP,extraErrors:wn,formData:Jn,formContext:{formData:Jn},schema:ja.schema,uiSchema:ja.uiSchema,onSubmit:Xa,fields:Na,showErrorList:!1,onChange:Da,experimental_defaultFormStateBehavior:{allOf:"populateDefaults"},...(te=Qe.formProps)!=null?te:{}},m.createElement("div",{className:ua.footer},m.createElement(a.Z,{onClick:xa,className:ua.backButton,disabled:Qn<1||Kn},cr),m.createElement(a.Z,{variant:"contained",color:"primary",type:"submit",disabled:Kn},Qn===yn.length-1?Oa:"Next"))):Lt?m.createElement(Lt,{disableButtons:Kn,formData:Jn,handleBack:xa,handleReset:()=>{},steps:yn,handleCreate:Ga}):m.createElement(m.Fragment,null,m.createElement(kt,{formState:Jn,schemas:yn}),m.createElement("div",{className:ua.footer},m.createElement(a.Z,{onClick:xa,className:ua.backButton,disabled:Qn<1},"Back"),m.createElement(a.Z,{variant:"contained",color:"primary",onClick:Ga},nr)))))},Ne=(0,g.Z)(()=>({header:{backgroundImage:({cardBackgroundImage:U})=>U,color:({cardFontColor:U})=>U},subtitleWrapper:{display:"flex",justifyContent:"space-between"}})),it=U=>{const{template:{metadata:{title:Z,name:P},spec:{type:$}}}=U,{getPageTheme:N}=(0,xe.Z)(),oe=N({themeId:$}),pe=Ne({cardFontColor:oe.fontColor,cardBackgroundImage:oe.backgroundImage}),te=m.createElement("div",{className:pe.subtitleWrapper},m.createElement("div",null,$),m.createElement("div",null,m.createElement(rt.LH,{entity:U.template,style:{padding:0}})));return m.createElement(ee.hu,{title:Z!=null?Z:P,subtitle:te,classes:{root:pe.header}})},Gt=(0,g.Z)(()=>({linkText:{display:"inline-flex",alignItems:"center"}})),Dt=({icon:U,text:Z,url:P})=>{const $=Gt();return m.createElement("div",{className:$.linkText},m.createElement(U,{fontSize:"small"}),m.createElement(ee.rU,{style:{marginLeft:"8px"},to:P},Z||P))},mn=(0,g.Z)(U=>({box:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box","-webkit-line-clamp":10,"-webkit-box-orient":"vertical"},markdown:{"& :first-child":{margin:0}},label:{color:U.palette.text.secondary,textTransform:"uppercase",fontWeight:"bold",letterSpacing:.5,lineHeight:1,fontSize:"0.75rem"},footer:{display:"flex",justifyContent:"space-between",flex:1,alignItems:"center"},ownedBy:{display:"flex",alignItems:"center",flex:1,color:U.palette.link}})),un=U=>{var Z,P,$,N,oe,pe,te;const{template:Se}=U,We=mn(),Qe=(0,bt.g)(Se,ut.S4),kt=(0,p.qD)(),Lt=tn=>{var on;return tn&&(on=kt.getSystemIcon(tn))!=null?on:ke.Z};return m.createElement(Ee.Z,null,m.createElement(it,{template:Se}),m.createElement(se.Z,null,m.createElement(Y.Z,{container:!0,spacing:2},m.createElement(Y.Z,{item:!0,xs:12},m.createElement(Fe.Z,{className:We.box},m.createElement(ee.SA,{className:We.markdown,content:(Z=Se.metadata.description)!=null?Z:"No description"}))),(($=(P=Se.metadata.tags)==null?void 0:P.length)!=null?$:0)>0&&m.createElement(m.Fragment,null,m.createElement(Y.Z,{item:!0,xs:12},m.createElement(ge.Z,null)),m.createElement(Y.Z,{item:!0,xs:12},m.createElement(Y.Z,{container:!0,spacing:2},(N=Se.metadata.tags)==null?void 0:N.map(tn=>m.createElement(Y.Z,{item:!0},m.createElement(_e.Z,{style:{margin:0},size:"small",label:tn,key:tn})))))),(U.additionalLinks||((oe=Se.metadata.links)==null?void 0:oe.length))&&m.createElement(m.Fragment,null,m.createElement(Y.Z,{item:!0,xs:12},m.createElement(ge.Z,null)),m.createElement(Y.Z,{item:!0,xs:12},m.createElement(Y.Z,{container:!0,spacing:2},(pe=U.additionalLinks)==null?void 0:pe.map(({icon:tn,text:on,url:vn},cn)=>m.createElement(Y.Z,{className:We.linkText,item:!0,xs:6,key:cn},m.createElement(Dt,{icon:tn,text:on,url:vn}))),(te=Se.metadata.links)==null?void 0:te.map(({url:tn,icon:on,title:vn},cn)=>m.createElement(Y.Z,{className:We.linkText,item:!0,xs:6,key:cn},m.createElement(Dt,{icon:Lt(on),text:vn||tn,url:tn})))))))),m.createElement(Q.Z,{style:{padding:"16px",flex:1,alignItems:"flex-end"}},m.createElement("div",{className:We.footer},m.createElement("div",{className:We.ownedBy},Qe.length>0&&m.createElement(m.Fragment,null,m.createElement(ee.tB,{fontSize:"small"}),m.createElement(rt.rI,{style:{marginLeft:"8px"},entityRefs:Qe,defaultKind:"Group",hideIcons:!0}))),m.createElement(a.Z,{size:"small",variant:"outlined",color:"primary",onClick:()=>{var tn;return(tn=U.onSelected)==null?void 0:tn.call(U,Se)}},"Choose"))))},Cn=U=>{const{templates:Z,title:P,components:{CardComponent:$}={},onSelected:N}=U,oe=typeof P=="string"?m.createElement(ee.yW,{title:P}):P;if(Z.length===0)return null;const pe=$||un;return m.createElement(ee.VY,null,oe,m.createElement(ee.Oh,null,Z.map(({template:te,additionalLinks:Se})=>m.createElement(pe,{key:(0,ut.eE)(te),additionalLinks:Se,template:te,onSelected:N}))))},Oe=U=>{const{loading:Z,error:P,entities:$}=(0,rt.wp)(),{groups:N,templateFilter:oe,TemplateCardComponent:pe,onTemplateSelected:te}=U,Se=(0,i.u)(i.r),We=(0,m.useCallback)(Qe=>{te==null||te(Qe)},[te]);return Z?m.createElement(ee.Ex,null):P?(Se.post(P),null):!$||!$.length?m.createElement(k.Z,{variant:"body2"},"No templates found that match your filter. Learn more about"," ",m.createElement(ee.rU,{to:"https://backstage.io/docs/features/software-templates/adding-templates"},"adding templates"),"."):m.createElement(m.Fragment,null,N.map(({title:Qe,filter:kt},Lt)=>{const tn=$.filter(_t.t).filter(on=>oe?oe(on):!0).filter(kt).map(on=>{var vn,cn;const gn=(cn=(vn=U.additionalLinksForEntity)==null?void 0:vn.call(U,on))!=null?cn:[];return{template:on,additionalLinks:gn}});return m.createElement(Cn,{key:Lt,templates:tn,title:Qe,components:{CardComponent:pe},onSelected:We})}))},$e=(0,g.Z)({markdown:{"& :first-child":{marginTop:0},"& :last-child":{marginBottom:0}}}),st=U=>{var Z;const{title:P,description:$,namespace:N,templateName:oe,...pe}=U,te=$e(),Se=(0,ut.eE)({kind:"Template",namespace:N,name:oe}),We=(0,i.u)(i.r),{loading:Qe,manifest:kt,error:Lt}=Ce(Se),tn=Me(kt);return(0,m.useEffect)(()=>{Lt&&We.post(new Error(`Failed to load template, ${Lt}`))},[Lt,We]),Lt?pe.onError(Lt):m.createElement(ee.VY,null,Qe&&m.createElement(ee.Ex,null),tn&&m.createElement(ee.rJ,{title:P!=null?P:tn.title,subheader:m.createElement(ee.SA,{className:te.markdown,content:(Z=$!=null?$:tn.description)!=null?Z:"No description"}),noPadding:!0,titleTypographyProps:{component:"h2"}},m.createElement(H,{manifest:tn,templateName:oe,...pe})))},Qt=U=>React.createElement(SecretsContextProvider,null,React.createElement(st,{...U})),Xt=(0,g.Z)({root:{"&:hover":{textDecoration:"none"}}}),ln=U=>{const{links:Z=[]}=U.output,P=Xt(),$=(0,p.qD)(),N=(0,p.tg)(rt.wi),oe=pe=>{var te;return(te=$.getSystemIcon(pe))!=null?te:at.Z};return m.createElement(m.Fragment,null,Z.filter(({url:pe,entityRef:te})=>pe||te).map(({url:pe,entityRef:te,title:Se,icon:We})=>{if(te){const Qe=(0,ut.of)(te),kt=N(Qe);return{title:Se,icon:We,url:kt}}return{title:Se,icon:We,url:pe}}).map(({url:pe,title:te,icon:Se},We)=>{const Qe=oe(Se);return m.createElement(ee.rU,{to:pe,key:We,classes:{root:P.root}},m.createElement(a.Z,{startIcon:m.createElement(Qe,null),component:"div",color:"primary"},te))}))},an=U=>{const{output:{text:Z=[]},index:P,setIndex:$}=U,N=(0,p.qD)(),oe=pe=>{var te;return(te=N.getSystemIcon(pe))!=null?te:at.Z};return m.createElement(m.Fragment,null,Z.filter(({content:pe})=>pe!==void 0).map(({title:pe,icon:te},Se)=>{const We=oe(te);return m.createElement(a.Z,{key:Se,startIcon:m.createElement(We,null),component:"div",color:"primary",onClick:()=>$==null?void 0:$(P!==Se?Se:void 0),variant:P===Se?"outlined":void 0},pe)}))},On=U=>{var Z,P;const[$,N]=(0,m.useState)(),oe=(0,m.useMemo)(()=>{var pe,te;return $!==void 0?(te=(pe=U.output)==null?void 0:pe.text)==null?void 0:te[$]:null},[U.output,$]);return U.output?m.createElement(m.Fragment,null,m.createElement(Fe.Z,{paddingBottom:2},m.createElement(be.Z,null,m.createElement(Fe.Z,{padding:2,justifyContent:"center",display:"flex",gridGap:16},m.createElement(an,{output:U.output,index:$,setIndex:N}),m.createElement(ln,{output:U.output})))),oe?m.createElement(Fe.Z,{paddingBottom:2},m.createElement(ee.rJ,{title:(Z=oe.title)!=null?Z:"Text Output",noPadding:!0,titleTypographyProps:{component:"h2"}},m.createElement(Fe.Z,{padding:2,height:"100%"},m.createElement(ee.SA,{content:(P=oe.content)!=null?P:""})))):null):null},Nn=(0,g.Z)(U=>({root:{color:U.palette.text.disabled},completed:{color:U.palette.status.ok},error:{color:U.palette.status.error}})),Fn=U=>{const Z=Nn(),{active:P,completed:$,error:N,skipped:oe}=U,pe=()=>P?m.createElement(M.Z,{size:"20px"}):$?m.createElement(gt.Z,null):N?m.createElement(Ut.Z,null):oe?m.createElement(zt.Z,null):m.createElement(Ot.Z,null);return m.createElement("div",{className:dt()(Z.root,{[Z.completed]:$,[Z.error]:N})},pe())},ra=U=>{const[Z,P]=(0,m.useState)(""),{step:$}=U,N=()=>$.startedAt&&$.endedAt&&Z?null:$.startedAt&&$.endedAt?1:1e3,oe=(0,m.useCallback)(()=>{if(!$.startedAt){P("");return}const pe=$.endedAt?yt.ou.fromISO($.endedAt):yt.ou.local(),te=yt.ou.fromISO($.startedAt),Se=yt.Xp.fromDateTimes(te,pe).toDuration().valueOf();P(I()(Se,{round:!0}))},[$.endedAt,$.startedAt]);return(0,W.n)(oe),(0,qt.Z)(oe,N()),m.createElement(k.Z,{variant:"caption"},Z)},En=(0,g.Z)(U=>({failed:{backgroundColor:U.palette.error.main},success:{backgroundColor:U.palette.success.main}})),aa=U=>{const Z=En();return U.isComplete?m.createElement(o.Z,{variant:"determinate",classes:{bar:U.isError?Z.failed:Z.success},value:100}):m.createElement(o.Z,{variant:"indeterminate"})},oa=U=>{var Z,P;return m.createElement(be.Z,{style:{position:"relative",overflow:"hidden"}},m.createElement(aa,{isComplete:(Z=U.isComplete)!=null?Z:!1,isError:(P=U.isError)!=null?P:!1}),m.createElement(Fe.Z,{padding:2},m.createElement(z.Z,{activeStep:U.activeStep,alternativeLabel:!0,variant:"elevation",style:{overflowX:"auto"}},U.steps.map($=>{const N=$.status==="completed",oe=$.status==="failed",pe=$.status==="processing",te=$.status==="skipped",Se={completed:N,error:oe,active:pe,skipped:te};return m.createElement(He.Z,{key:$.id},m.createElement(c.Z,null,m.createElement(Ze.Z,{StepIconProps:Se,StepIconComponent:Fn,"data-testid":"step-label"},m.createElement(Fe.Z,null,$.name),!te&&m.createElement(ra,{step:$}))))}))))},na=(0,g.Z)({root:{width:"100%",height:"100%",position:"relative"}}),pa=U=>{const Z=na();return m.createElement("div",{className:Z.root},m.createElement(ee.nU,{text:Object.values(U.logs).map(P=>P.join(`
`)).filter(Boolean).join(`
`)}))},Pa=m.createElement(fe.Z,{fontSize:"small"}),qn=m.createElement(ae.Z,{fontSize:"small"}),ya=()=>{const U=(0,i.u)(i.l),{error:Z,loading:P,availableTypes:$,selectedTypes:N,setSelectedTypes:oe}=(0,rt.Uh)();return P?m.createElement(ee.Ex,null):Z?(U.post({message:`Failed to load entity types with error: ${Z}`,severity:"error"}),null):$?m.createElement(Fe.Z,{pb:1,pt:1},m.createElement(k.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),m.createElement(ft.ZP,{multiple:!0,id:"categories-picker",options:$,value:N,onChange:(pe,te)=>oe(te),renderOption:(pe,{selected:te})=>m.createElement(S.Z,{control:m.createElement(_.Z,{icon:Pa,checkedIcon:qn,checked:te}),label:D()(pe)}),size:"small",popupIcon:m.createElement(Ke.Z,null),renderInput:pe=>m.createElement(b.Z,{...pe,variant:"outlined"})})):null},q=(0,g.Z)(U=>({button:{color:U.page.fontColor}}));function Le(U){const{onEditorClicked:Z,onActionsClicked:P,onTasksClicked:$}=U,N=q(),[oe,pe]=(0,m.useState)();if(!Z&&!P)return null;const te=We=>{pe(We.currentTarget)},Se=()=>{pe(void 0)};return m.createElement(m.Fragment,null,m.createElement(Je.Z,{id:"long-menu","aria-label":"more","aria-controls":"long-menu","aria-expanded":!!oe,"aria-haspopup":"true",role:"button",onClick:te,"data-testid":"menu-button",color:"inherit",className:N.button},m.createElement(St.Z,null)),m.createElement(vt.ZP,{"aria-labelledby":"long-menu",open:Boolean(oe),onClose:Se,anchorEl:oe,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},m.createElement(Te.Z,null,Z&&m.createElement(Ae.Z,{onClick:Z},m.createElement(wt.Z,null,m.createElement(At.Z,{fontSize:"small"})),m.createElement(nn.Z,{primary:"Template Editor"})),P&&m.createElement(Ae.Z,{onClick:P},m.createElement(wt.Z,null,m.createElement(Tt.Z,{fontSize:"small"})),m.createElement(nn.Z,{primary:"Installed Actions"})),$&&m.createElement(Ae.Z,{onClick:$},m.createElement(wt.Z,null,m.createElement(Wt.Z,{fontSize:"small"})),m.createElement(nn.Z,{primary:"Task List"})))))}function et(U){return{expose(){const Z=()=>null;return attachComponentData(Z,FIELD_EXTENSION_KEY,U),Z}}}},60885:(xn,Yt,e)=>{"use strict";e.d(Yt,{F:()=>j,S:()=>z,a:()=>k,s:()=>Ze,u:()=>He});var i=e(18473),p=e(2784),g=e(57032);const j="scaffolder.extensions.wrapper.v1",k="scaffolder.extensions.field.v1",o=(0,i.CT)("secrets-context"),z=a=>{const[xe,Ee]=(0,p.useState)({});return p.createElement(o.Provider,{value:(0,i.EI)({1:{secrets:xe,setSecrets:Ee}})},a.children)},He=()=>{var a;const xe=(a=(0,p.useContext)(o))==null?void 0:a.atVersion(1);if(!xe)throw new Error("useTemplateSecrets must be used within a SecretsContextProvider");const{setSecrets:Ee,secrets:se={}}=xe;return{setSecrets:(0,p.useCallback)(Fe=>{Ee(ge=>({...ge,...Fe}))},[Ee]),secrets:se}},Ze=(0,i.uW)("scaffolder:scaffolder-api-ref",()=>(0,g.c)({id:"plugin.scaffolder.service"}))},12053:(xn,Yt,e)=>{"use strict";e.d(Yt,{PT:()=>He,WQ:()=>se,eP:()=>o,zS:()=>xe});var i=e(30705),p=e(57032),g=e(60885),j=e(92233),k=e(2784);function o(ge){return{expose(){const _e=()=>null;return(0,i.R5)(_e,g.a,ge),_e}}}const z=()=>null;(0,i.R5)(z,g.F,!0);const He=ge=>(0,i.vJ)(ge,_e=>_e.selectByComponentData({key:g.F}).findComponentData({key:g.a})),Ze="scaffolder.layout.v1",a="scaffolder.layouts.wrapper.v1",xe=ge=>(0,i.vJ)(ge,_e=>_e.selectByComponentData({key:a}).findComponentData({key:Ze}));function Ee(ge,_e){var Q,be,M;switch(_e.type){case"INIT":{ge.steps=_e.data.spec.steps.reduce((c,S)=>(c[S.id]={status:"open",id:S.id},c),{}),ge.stepLogs=_e.data.spec.steps.reduce((c,S)=>(c[S.id]=[],c),{}),ge.loading=!1,ge.error=void 0,ge.completed=!1,ge.task=_e.data;return}case"LOGS":{const c=_e.data;for(const S of c){const _=`${S.createdAt} ${S.body.message}`;if(!S.body.stepId||!((Q=ge.steps)!=null&&Q[S.body.stepId]))continue;const b=(be=ge.stepLogs)==null?void 0:be[S.body.stepId],m=(M=ge.steps)==null?void 0:M[S.body.stepId];S.body.status&&S.body.status!==m.status&&(m.status=S.body.status,m.status==="processing"&&(m.startedAt=S.createdAt),["cancelled","completed","failed"].includes(m.status)&&(m.endedAt=S.createdAt)),b==null||b.push(_)}return}case"COMPLETED":{ge.completed=!0,ge.output=_e.data.body.output,ge.error=_e.data.body.error;return}case"CANCELLED":{ge.cancelled=!0;return}case"ERROR":{ge.error=_e.data,ge.loading=!1,ge.completed=!0;return}default:return}}const se=ge=>{const _e=(0,p.u)(g.s),[Q,be]=(0,j.C)(Ee,{cancelled:!1,loading:!0,completed:!1,stepLogs:{},steps:{}});return(0,k.useEffect)(()=>{let M=!1,c,S,_=1;const b=()=>_e.getTask(ge).then(m=>{if(M)return;be({type:"INIT",data:m});const ve=_e.streamLogs({taskId:ge}),ee=new Array;function he(){if(ee.length){const J=ee.splice(0,ee.length);be({type:"LOGS",data:J})}}S=setInterval(he,500),c=ve.subscribe({next:J=>{switch(J.type){case"log":return ee.push(J);case"cancelled":be({type:"CANCELLED"});return;case"completion":he(),be({type:"COMPLETED",data:J});return;default:throw new Error(`Unhandled event type ${J.type} in observer`)}},error:J=>{he(),J.message||(J.message=`We cannot connect at the moment, trying again in some seconds... Retrying (${_}/3 retries)`),_<=3&&setTimeout(()=>{_+=1,b()},15e3),be({type:"ERROR",data:J})}})},m=>{M||be({type:"ERROR",data:m})});return b(),()=>{M=!0,c&&c.unsubscribe(),S&&clearInterval(S)}},[_e,be,ge]),Q};function Y(ge){return{expose(){const _e=()=>null;return attachComponentData(_e,Ze,ge),_e}}}const Fe=()=>null;(0,i.R5)(Fe,a,!0)},94063:(xn,Yt,e)=>{"use strict";e.d(Yt,{A:()=>Xe,B:()=>Wt,C:()=>Ue,D:()=>Ne,F:()=>H,G:()=>ct,H:()=>Ge,I:()=>Be,J:()=>le,K:()=>An,N:()=>dn,P:()=>ln,T:()=>ya,d:()=>aa,e:()=>U,i:()=>tt,l:()=>Xt,o:()=>un,p:()=>st,q:()=>$e,r:()=>Dt,s:()=>an,t:()=>Oe,u:()=>it,v:()=>Gt,w:()=>Cn,x:()=>mn,y:()=>Te,z:()=>Ae});var i=e(49462),p=e(60885),g=e(12053),j=e(34520),k=e(32272),o=e(19126),z=e.n(o),He=e(82394),Ze=e.n(He),a=e(31734),xe=e.n(a),Ee=e(88285),se=e(57032),Y=e(30705),Fe=e(73495),ge=e(86619),_e=e(95544),Q=e(90436),be=e(85256),M=e(42494),c=e(5806),S=e(21324),_=e(79692),b=e(60364),m=e(61837),ve=e(79784),ee=e(50758),he=e(12231),J=e(86136),ne=e(49378),re=e(27556),Pe=e(77277),Pt=e(88013),T=e(2784),rn=e(64279),de=e(30195),Bt=e(29641),ut=e(74828),rt=e(29611),bt=e(56939),ke=e(49558),_t=e(48760),at=e(62155),zt=e(82108),Ot=e.n(zt),Zt=e(19996),dt=e(25505),gt=e(38016),Ut=e(73557),qt=e(60497),yt=e(49166),Ft=e(93269),I=e(8198),W=e(15026),O=e(43054),D=e(31011),ae=Object.defineProperty,fe=(Z,P,$)=>P in Z?ae(Z,P,{enumerable:!0,configurable:!0,writable:!0,value:$}):Z[P]=$,Ke=(Z,P,$)=>(fe(Z,typeof P!="symbol"?P+"":P,$),$);class ft{constructor(P){Ke(this,"discoveryApi"),Ke(this,"scmIntegrationsApi"),Ke(this,"fetchApi"),Ke(this,"identityApi"),Ke(this,"useLongPollingLogs");var $,N;this.discoveryApi=P.discoveryApi,this.fetchApi=($=P.fetchApi)!=null?$:{fetch},this.scmIntegrationsApi=P.scmIntegrationsApi,this.useLongPollingLogs=(N=P.useLongPollingLogs)!=null?N:!1,this.identityApi=P.identityApi}async listTasks(P){if(!this.identityApi)throw new Error("IdentityApi is not available in the ScaffolderClient, please pass through the IdentityApi to the ScaffolderClient constructor in order to use the listTasks method");const $=await this.discoveryApi.getBaseUrl("scaffolder"),{userEntityRef:N}=await this.identityApi.getBackstageIdentity(),oe=z().stringify(P.filterByOwnership==="owned"?{createdBy:N}:{}),pe=await this.fetchApi.fetch(`${$}/v2/tasks?${oe}`);if(!pe.ok)throw await k.VL.fromResponse(pe);return await pe.json()}async getIntegrationsList(P){return{integrations:[...this.scmIntegrationsApi.azure.list(),...this.scmIntegrationsApi.bitbucket.list().filter(N=>!this.scmIntegrationsApi.bitbucketCloud.byHost(N.config.host)&&!this.scmIntegrationsApi.bitbucketServer.byHost(N.config.host)),...this.scmIntegrationsApi.bitbucketCloud.list(),...this.scmIntegrationsApi.bitbucketServer.list(),...this.scmIntegrationsApi.gerrit.list(),...this.scmIntegrationsApi.gitea.list(),...this.scmIntegrationsApi.github.list(),...this.scmIntegrationsApi.gitlab.list()].map(N=>({type:N.type,title:N.title,host:N.config.host})).filter(N=>P.allowedHosts.includes(N.host))}}async getTemplateParameterSchema(P){const{namespace:$,kind:N,name:oe}=(0,j.of)(P,{defaultKind:"template"}),pe=await this.discoveryApi.getBaseUrl("scaffolder"),te=[$,N,oe].map(kt=>encodeURIComponent(kt)).join("/"),Se=`${pe}/v2/templates/${te}/parameter-schema`,We=await this.fetchApi.fetch(Se);if(!We.ok)throw await k.VL.fromResponse(We);return await We.json()}async scaffold(P){const{templateRef:$,values:N,secrets:oe={}}=P,pe=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks`,te=await this.fetchApi.fetch(pe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({templateRef:$,values:{...N},secrets:oe})});if(te.status!==201){const We=`${te.status} ${te.statusText}`,Qe=await te.text();throw new Error(`Backend request failed, ${We} ${Qe.trim()}`)}const{id:Se}=await te.json();return{taskId:Se}}async getTask(P){const N=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(P)}`,oe=await this.fetchApi.fetch(N);if(!oe.ok)throw await k.VL.fromResponse(oe);return await oe.json()}streamLogs(P){return this.useLongPollingLogs?this.streamLogsPolling(P):this.streamLogsEventStream(P)}async dryRun(P){const $=await this.discoveryApi.getBaseUrl("scaffolder"),N=await this.fetchApi.fetch(`${$}/v2/dry-run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:P.template,values:P.values,secrets:P.secrets,directoryContents:P.directoryContents})});if(!N.ok)throw await k.VL.fromResponse(N);return N.json()}streamLogsEventStream({taskId:P,after:$}){return new(Ze())(N=>{var oe;const pe=new URLSearchParams;$!==void 0&&pe.set("after",String(Number($))),Promise.all([this.discoveryApi.getBaseUrl("scaffolder"),(oe=this.identityApi)==null?void 0:oe.getCredentials()]).then(([te,Se])=>{const We=`${te}/v2/tasks/${encodeURIComponent(P)}/eventstream`,Qe=Lt=>{if(Lt.data)try{N.next(JSON.parse(Lt.data))}catch(tn){N.error(tn)}},kt=new a.EventSourcePolyfill(We,{withCredentials:!0,headers:Se!=null&&Se.token?{Authorization:`Bearer ${Se.token}`}:{}});kt.addEventListener("log",Qe),kt.addEventListener("cancelled",Qe),kt.addEventListener("completion",Lt=>{Qe(Lt),kt.close(),N.complete()}),kt.addEventListener("error",Lt=>{N.error(Lt)})},te=>{N.error(te)})})}streamLogsPolling({taskId:P,after:$}){let N=$;return new(Ze())(oe=>{this.discoveryApi.getBaseUrl("scaffolder").then(async pe=>{for(;!oe.closed;){const te=`${pe}/v2/tasks/${encodeURIComponent(P)}/events?${z().stringify({after:N})}`,Se=await this.fetchApi.fetch(te);if(!Se.ok){await new Promise(Qe=>setTimeout(Qe,1e3));continue}const We=await Se.json();for(const Qe of We)if(N=Number(Qe.id),oe.next(Qe),Qe.type==="completion"){oe.complete();return}}})})}async listActions(){const P=await this.discoveryApi.getBaseUrl("scaffolder"),$=await this.fetchApi.fetch(`${P}/v2/actions`);if(!$.ok)throw await k.VL.fromResponse($);return await $.json()}async cancelTask(P){const N=`${await this.discoveryApi.getBaseUrl("scaffolder")}/v2/tasks/${encodeURIComponent(P)}/cancel`,oe=await this.fetchApi.fetch(N,{method:"POST"});if(!oe.ok)throw await k.VL.fromResponse(oe);return await oe.json()}}function Je(Z,P){return{schema:{returnValue:(0,Bt.ZP)(Z),uiOptions:P?(0,Bt.ZP)(P):void 0},type:null,uiOptionsType:null}}const wt=de.z.record(de.z.string().or(de.z.object({exists:de.z.boolean().optional()})).or(de.z.array(de.z.string()))),Ae=Je(de.z.string(),de.z.object({allowedKinds:de.z.array(de.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:de.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:de.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:de.z.union([de.z.string(),de.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:de.z.array(wt).or(wt).optional().describe("List of key-value filter expression for entities")})).schema,Te=Z=>{var P,$,N,oe,pe;const{onChange:te,schema:{title:Se="Entity",description:We="An entity from the catalog"},required:Qe,uiSchema:kt,rawErrors:Lt,formData:tn,idSchema:on}=Z,vn=At(kt),cn=(P=kt["ui:options"])==null?void 0:P.defaultKind,gn=(($=kt["ui:options"])==null?void 0:$.defaultNamespace)||void 0,yn=(0,se.u)(Fe.Ah),{value:Bn,loading:Qn}=(0,rn.default)(async()=>{const{items:fn}=await yn.getEntities(vn?{filter:vn}:void 0);return fn}),jn=(oe=(N=kt["ui:options"])==null?void 0:N.allowArbitraryValues)!=null?oe:!0,Kn=(0,T.useCallback)(fn=>{try{return(0,Fe.$3)((0,j.of)(fn,{defaultKind:cn,defaultNamespace:gn}),{defaultKind:cn,defaultNamespace:gn})}catch{return fn}},[cn,gn]),Dn=(0,T.useCallback)((fn,wn,sa)=>{if(typeof wn!="string")te(wn?(0,j.eE)(wn):void 0);else if(sa==="blur"||sa==="create-option"){let ua=wn;try{ua=(0,j.eE)((0,j.of)(wn,{defaultKind:cn,defaultNamespace:gn}))}catch{}(tn!==wn||jn)&&te(ua)}},[te,tn,cn,gn,jn]),Jn=(pe=Bn==null?void 0:Bn.find(fn=>(0,j.eE)(fn)===tn))!=null?pe:jn&&tn?Kn(tn):"";return(0,T.useEffect)(()=>{(Bn==null?void 0:Bn.length)===1&&Jn===""&&te((0,j.eE)(Bn[0]))},[Bn,te,Jn]),T.createElement(M.Z,{margin:"normal",required:Qe,error:(Lt==null?void 0:Lt.length)>0&&!tn},T.createElement(Pt.ZP,{disabled:(Bn==null?void 0:Bn.length)===1,id:on==null?void 0:on.$id,value:Jn,loading:Qn,onChange:Dn,options:Bn||[],getOptionLabel:fn=>typeof fn=="string"?fn:(0,Fe.$3)(fn,{defaultKind:cn,defaultNamespace:gn}),autoSelect:!0,freeSolo:jn,renderInput:fn=>T.createElement(ge.Z,{...fn,label:Se,margin:"dense",helperText:We,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:Qe,InputProps:fn.InputProps})}))};function vt(Z){return typeof Z=="object"&&Z.exists?Ee.n3:Z==null?void 0:Z.toString()}function Tt(Z){const P={};for(const[$,N]of Object.entries(Z))Array.isArray(N)?P[$]=N:P[$]=vt(N);return P}function At(Z){var P,$;const N=(P=Z["ui:options"])==null?void 0:P.allowedKinds,oe=(($=Z["ui:options"])==null?void 0:$.catalogFilter)||N&&{kind:N};if(oe)return Array.isArray(oe)?oe.map(Tt):Tt(oe)}const Wt=(Z,P)=>{j.y$.isValidObjectName(Z)||P.addError("Must start and end with an alphanumeric character, and contain only alphanumeric characters, hyphens, underscores, and periods. Maximum length is 63 characters.")},Ue=Je(de.z.string()).schema,Xe=Z=>{const{onChange:P,required:$,schema:{title:N="Name",description:oe="Unique name of the component"},rawErrors:pe,formData:te,uiSchema:{"ui:autofocus":Se},idSchema:We,placeholder:Qe}=Z;return T.createElement(ge.Z,{id:We==null?void 0:We.$id,label:N,placeholder:Qe,helperText:oe,required:$,value:te!=null?te:"",onChange:({target:{value:kt}})=>P(kt),margin:"normal",error:(pe==null?void 0:pe.length)>0&&!te,inputProps:{autoFocus:Se}})},le=Je(de.z.string(),de.z.object({allowedKinds:de.z.array(de.z.string()).default(["Group","User"]).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from. Defaults to Group and User"),allowArbitraryValues:de.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:de.z.union([de.z.string(),de.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:de.z.array(wt).or(wt).optional().describe("List of key-value filter expression for entities")})).schema,Be=Z=>{var P,$,N,oe,pe;const{schema:{title:te="Owner",description:Se="The owner of the component"},uiSchema:We,...Qe}=Z,kt=(P=We["ui:options"])==null?void 0:P.defaultNamespace,Lt=($=We["ui:options"])==null?void 0:$.allowedKinds,tn=((N=We["ui:options"])==null?void 0:N.catalogFilter)||{kind:Lt||["Group","User"]},on={...We,"ui:options":{catalogFilter:tn,defaultKind:"Group",allowArbitraryValues:(pe=(oe=We["ui:options"])==null?void 0:oe.allowArbitraryValues)!=null?pe:!0,...kt!==void 0?{defaultNamespace:kt}:{}}};return T.createElement(Te,{...Qe,schema:{title:te,description:Se},uiSchema:on})},Ge=Je(de.z.string(),de.z.object({allowedHosts:de.z.array(de.z.string()).optional().describe("List of allowed SCM platform hosts"),allowedOrganizations:de.z.array(de.z.string()).optional().describe("List of allowed organizations in the given SCM platform"),allowedOwners:de.z.array(de.z.string()).optional().describe("List of allowed owners in the given SCM platform"),allowedProjects:de.z.array(de.z.string()).optional().describe("List of allowed projects in the given SCM platform"),allowedRepos:de.z.array(de.z.string()).optional().describe("List of allowed repos in the given SCM platform"),requestUserCredentials:de.z.object({secretsKey:de.z.string().describe("Key used within the template secrets context to store the credential"),additionalScopes:de.z.object({gitea:de.z.array(de.z.string()).optional().describe("Additional Gitea scopes to request"),gerrit:de.z.array(de.z.string()).optional().describe("Additional Gerrit scopes to request"),github:de.z.array(de.z.string()).optional().describe("Additional GitHub scopes to request"),gitlab:de.z.array(de.z.string()).optional().describe("Additional GitLab scopes to request"),bitbucket:de.z.array(de.z.string()).optional().describe("Additional BitBucket scopes to request"),azure:de.z.array(de.z.string()).optional().describe("Additional Azure scopes to request")}).optional().describe("Additional permission scopes to request")}).optional().describe("If defined will request user credentials to auth against the given SCM platform")})).schema,tt=(Z,P,$)=>{var N,oe;try{const{host:pe,searchParams:te}=new URL(`https://${Z}`),Se=$.apiHolder.get(i.q3);pe?(((N=Se==null?void 0:Se.byHost(pe))==null?void 0:N.type)==="bitbucket"?(pe==="bitbucket.org"&&!te.get("workspace")&&P.addError("Incomplete repository location provided, workspace not provided"),te.get("project")||P.addError("Incomplete repository location provided, project not provided")):((oe=Se==null?void 0:Se.byHost(pe))==null?void 0:oe.type)!=="gerrit"&&(te.get("owner")||P.addError("Incomplete repository location provided, owner not provided")),te.get("repo")||P.addError("Incomplete repository location provided, repo not provided")):P.addError("Incomplete repository location provided, host not provided")}catch{P.addError("Unable to parse the Repository URL")}},ot=Z=>{const{allowedOwners:P=[],rawErrors:$,state:N,onChange:oe}=Z,pe=P?P.map(Se=>({label:Se,value:Se})):[{label:"Loading...",value:"loading"}],{owner:te}=N;return T.createElement(T.Fragment,null,T.createElement(M.Z,{margin:"normal",required:!0,error:($==null?void 0:$.length)>0&&!te},P!=null&&P.length?T.createElement(ke.Ph,{native:!0,label:"Owner Available",onChange:Se=>oe({owner:String(Array.isArray(Se)?Se[0]:Se)}),disabled:P.length===1,selected:te,items:pe}):T.createElement(T.Fragment,null,T.createElement(bt.Z,{htmlFor:"ownerInput"},"Owner"),T.createElement(rt.Z,{id:"ownerInput",onChange:Se=>oe({owner:Se.target.value}),value:te})),T.createElement(ut.Z,null,"The organization, user or project that this repo will belong to")))},Rt=Z=>{const{allowedOwners:P=[],state:$,onChange:N,rawErrors:oe}=Z,pe=P?P.map(Se=>({label:Se,value:Se})):[{label:"Loading...",value:"loading"}],{owner:te}=$;return T.createElement(T.Fragment,null,T.createElement(M.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!te},P!=null&&P.length?T.createElement(ke.Ph,{native:!0,label:"Owner Available",onChange:Se=>N({owner:String(Array.isArray(Se)?Se[0]:Se)}),disabled:P.length===1,selected:te,items:pe}):T.createElement(T.Fragment,null,T.createElement(bt.Z,{htmlFor:"ownerInput"},"Owner"),T.createElement(rt.Z,{id:"ownerInput",onChange:Se=>N({owner:Se.target.value}),value:te})),T.createElement(ut.Z,null,"Gitea namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},en=Z=>{const{allowedOwners:P=[],state:$,onChange:N,rawErrors:oe}=Z,pe=P?P.map(Se=>({label:Se,value:Se})):[{label:"Loading...",value:"loading"}],{owner:te}=$;return T.createElement(T.Fragment,null,T.createElement(M.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!te},P!=null&&P.length?T.createElement(ke.Ph,{native:!0,label:"Owner Available",onChange:Se=>N({owner:String(Array.isArray(Se)?Se[0]:Se)}),disabled:P.length===1,selected:te,items:pe}):T.createElement(T.Fragment,null,T.createElement(bt.Z,{htmlFor:"ownerInput"},"Owner"),T.createElement(rt.Z,{id:"ownerInput",onChange:Se=>N({owner:Se.target.value}),value:te})),T.createElement(ut.Z,null,"GitLab namespace where this repository will belong to. It can be the name of organization, group, subgroup, user, or the project.")))},Ce=Z=>{const{allowedOrganizations:P=[],allowedOwners:$=[],rawErrors:N,state:oe,onChange:pe}=Z,te=P?P.map(kt=>({label:kt,value:kt})):[{label:"Loading...",value:"loading"}],Se=$?$.map(kt=>({label:kt,value:kt})):[{label:"Loading...",value:"loading"}],{organization:We,owner:Qe}=oe;return T.createElement(T.Fragment,null,T.createElement(M.Z,{margin:"normal",required:!0,error:(N==null?void 0:N.length)>0&&!We},P!=null&&P.length?T.createElement(ke.Ph,{native:!0,label:"Organization",onChange:kt=>pe({organization:String(Array.isArray(kt)?kt[0]:kt)}),disabled:P.length===1,selected:We,items:te}):T.createElement(T.Fragment,null,T.createElement(bt.Z,{htmlFor:"orgInput"},"Organization"),T.createElement(rt.Z,{id:"orgInput",onChange:kt=>pe({organization:kt.target.value}),value:We})),T.createElement(ut.Z,null,"The Organization that this repo will belong to")),T.createElement(M.Z,{margin:"normal",required:!0,error:(N==null?void 0:N.length)>0&&!Qe},$!=null&&$.length?T.createElement(ke.Ph,{native:!0,label:"Owner",onChange:kt=>pe({owner:String(Array.isArray(kt)?kt[0]:kt)}),disabled:$.length===1,selected:Qe,items:Se}):T.createElement(T.Fragment,null,T.createElement(bt.Z,{htmlFor:"ownerInput"},"Project"),T.createElement(rt.Z,{id:"ownerInput",onChange:kt=>pe({owner:kt.target.value}),value:Qe})),T.createElement(ut.Z,null,"The Project that this repo will belong to")))},Me=Z=>{const{allowedOwners:P=[],allowedProjects:$=[],onChange:N,rawErrors:oe,state:pe}=Z,{host:te,workspace:Se,project:We}=pe,Qe=P?P==null?void 0:P.map(Lt=>({label:Lt,value:Lt})):[],kt=$?$==null?void 0:$.map(Lt=>({label:Lt,value:Lt})):[];return(0,T.useEffect)(()=>{te==="bitbucket.org"&&P.length&&N({workspace:P[0]})},[P,te,N]),T.createElement(T.Fragment,null,te==="bitbucket.org"&&T.createElement(M.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!Se},P!=null&&P.length?T.createElement(ke.Ph,{native:!0,label:"Allowed Workspaces",onChange:Lt=>N({workspace:String(Array.isArray(Lt)?Lt[0]:Lt)}),disabled:P.length===1,selected:Se,items:Qe}):T.createElement(T.Fragment,null,T.createElement(bt.Z,{htmlFor:"workspaceInput"},"Workspace"),T.createElement(rt.Z,{id:"workspaceInput",onChange:Lt=>N({workspace:Lt.target.value}),value:Se})),T.createElement(ut.Z,null,"The Workspace that this repo will belong to")),T.createElement(M.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!We},$!=null&&$.length?T.createElement(ke.Ph,{native:!0,label:"Allowed Projects",onChange:Lt=>N({project:String(Array.isArray(Lt)?Lt[0]:Lt)}),disabled:$.length===1,selected:We,items:kt}):T.createElement(T.Fragment,null,T.createElement(bt.Z,{htmlFor:"projectInput"},"Project"),T.createElement(rt.Z,{id:"projectInput",onChange:Lt=>N({project:Lt.target.value}),value:We})),T.createElement(ut.Z,null,"The Project that this repo will belong to")))},R=Z=>{const{onChange:P,rawErrors:$,state:N}=Z,{workspace:oe,owner:pe}=N;return T.createElement(T.Fragment,null,T.createElement(M.Z,{margin:"normal",error:($==null?void 0:$.length)>0&&!oe},T.createElement(bt.Z,{htmlFor:"ownerInput"},"Owner"),T.createElement(rt.Z,{id:"ownerInput",onChange:te=>P({owner:te.target.value}),value:pe}),T.createElement(ut.Z,null,"The owner of the project (optional)")),T.createElement(M.Z,{margin:"normal",required:!0,error:($==null?void 0:$.length)>0&&!oe},T.createElement(bt.Z,{htmlFor:"parentInput"},"Parent"),T.createElement(rt.Z,{id:"parentInput",onChange:te=>P({workspace:te.target.value}),value:oe}),T.createElement(ut.Z,null,"The project parent that the repo will belong to")))},B=Z=>{const{host:P,hosts:$,onChange:N,rawErrors:oe}=Z,pe=(0,se.u)(p.s),{value:{integrations:te}={integrations:[]},loading:Se}=(0,rn.default)(async()=>await pe.getIntegrationsList({allowedHosts:$!=null?$:[]}));(0,T.useEffect)(()=>{P||($!=null&&$.length?N($[0]):te!=null&&te.length&&N(te[0].host))},[$,P,N,te]);const We=te?te.filter(Qe=>$!=null&&$.length?$==null?void 0:$.includes(Qe.host):!0).map(Qe=>({label:Qe.title,value:Qe.host})):[{label:"Loading...",value:"loading"}];return Se?T.createElement(ke.Ex,null):T.createElement(T.Fragment,null,T.createElement(M.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!P},T.createElement(ke.Ph,{native:!0,disabled:($==null?void 0:$.length)===1,label:"Host",onChange:Qe=>N(String(Array.isArray(Qe)?Qe[0]:Qe)),selected:P,items:We,"data-testid":"host-select"}),T.createElement(ut.Z,null,"The host where the repository will be created")))},X=Z=>{const{repoName:P,allowedRepos:$,onChange:N,rawErrors:oe}=Z;(0,T.useEffect)(()=>{P||$!=null&&$.length&&N($[0])},[$,P,N]);const pe=$?$.map(te=>({label:te,value:te})):[{label:"Loading...",value:"loading"}];return T.createElement(T.Fragment,null,T.createElement(M.Z,{margin:"normal",required:!0,error:(oe==null?void 0:oe.length)>0&&!P},$!=null&&$.length?T.createElement(ke.Ph,{native:!0,label:"Repositories Available",onChange:te=>N(String(Array.isArray(te)?te[0]:te)),disabled:$.length===1,selected:P,items:pe}):T.createElement(T.Fragment,null,T.createElement(bt.Z,{htmlFor:"repoNameInput"},"Repository"),T.createElement(rt.Z,{id:"repoNameInput",onChange:te=>N(String(te.target.value)),value:P})),T.createElement(ut.Z,null,"The name of the repository")))};function nt(Z){if(!Z.host)return;const P=new URLSearchParams;return Z.owner&&P.set("owner",Z.owner),Z.repoName&&P.set("repo",Z.repoName),Z.organization&&P.set("organization",Z.organization),Z.workspace&&P.set("workspace",Z.workspace),Z.project&&P.set("project",Z.project),`${Z.host}?${P.toString()}`}function mt(Z){let P="",$="",N="",oe="",pe="",te="";try{if(Z){const Se=new URL(`https://${Z}`);P=Se.host,$=Se.searchParams.get("owner")||"",N=Se.searchParams.get("repo")||"",oe=Se.searchParams.get("organization")||"",pe=Se.searchParams.get("workspace")||"",te=Se.searchParams.get("project")||""}}catch{}return{host:P,owner:$,repoName:N,organization:oe,workspace:pe,project:te}}const ct=Z=>{var P,$;const{uiSchema:N,onChange:oe,rawErrors:pe,formData:te,schema:Se}=Z,[We,Qe]=(0,T.useState)(mt(te)),kt=(0,se.u)(i.q3),Lt=(0,se.u)(i.Om),{setSecrets:tn}=(0,p.u)(),on=(0,T.useMemo)(()=>{var fn,wn;return(wn=(fn=N==null?void 0:N["ui:options"])==null?void 0:fn.allowedHosts)!=null?wn:[]},[N]),vn=(0,T.useMemo)(()=>{var fn,wn;return(wn=(fn=N==null?void 0:N["ui:options"])==null?void 0:fn.allowedOrganizations)!=null?wn:[]},[N]),cn=(0,T.useMemo)(()=>{var fn,wn;return(wn=(fn=N==null?void 0:N["ui:options"])==null?void 0:fn.allowedOwners)!=null?wn:[]},[N]),gn=(0,T.useMemo)(()=>{var fn,wn;return(wn=(fn=N==null?void 0:N["ui:options"])==null?void 0:fn.allowedProjects)!=null?wn:[]},[N]),yn=(0,T.useMemo)(()=>{var fn,wn;return(wn=(fn=N==null?void 0:N["ui:options"])==null?void 0:fn.allowedRepos)!=null?wn:[]},[N]),{owner:Bn,organization:Qn,project:jn,repoName:Kn}=We;(0,T.useEffect)(()=>{oe(nt(We))},[We,oe]),(0,T.useEffect)(()=>{vn.length>0&&!Qn&&Qe(fn=>({...fn,organization:vn[0]}))},[Qe,vn,Qn]),(0,T.useEffect)(()=>{cn.length>0&&!Bn&&Qe(fn=>({...fn,owner:cn[0]}))},[Qe,cn,Bn]),(0,T.useEffect)(()=>{gn.length>0&&!jn&&Qe(fn=>({...fn,project:gn[0]}))},[Qe,gn,jn]),(0,T.useEffect)(()=>{yn.length>0&&!Kn&&Qe(fn=>({...fn,repoName:yn[0]}))},[Qe,yn,Kn]);const Dn=(0,T.useCallback)(fn=>{Qe(wn=>({...wn,...fn}))},[Qe]);(0,_t.Z)(async()=>{var fn;const{requestUserCredentials:wn}=(fn=N==null?void 0:N["ui:options"])!=null?fn:{},sa=We.owner?We.owner:We.project;if(!wn||!(We.host&&sa&&We.repoName))return;const[ua,Ia]=[We.host,We.repoName].map(encodeURIComponent),{token:Na}=await Lt.getCredentials({url:`https://${ua}/${sa}/${Ia}`,additionalScope:{repoWrite:!0,customScopes:wn.additionalScopes}});tn({[wn.secretsKey]:Na})},500,[We,N]);const Jn=($=We.host&&((P=kt.byHost(We.host))==null?void 0:P.type))!=null?$:null;return T.createElement(T.Fragment,null,Se.title&&T.createElement(_e.Z,{my:1},T.createElement(Q.Z,{variant:"h5"},Se.title),T.createElement(be.Z,null)),Se.description&&T.createElement(Q.Z,{variant:"body1"},Se.description),T.createElement(B,{host:We.host,hosts:on,onChange:fn=>Qe(wn=>({...wn,host:fn})),rawErrors:pe}),Jn==="github"&&T.createElement(ot,{allowedOwners:cn,onChange:Dn,rawErrors:pe,state:We}),Jn==="gitea"&&T.createElement(Rt,{allowedOwners:cn,allowedRepos:yn,rawErrors:pe,state:We,onChange:Dn}),Jn==="gitlab"&&T.createElement(en,{allowedOwners:cn,rawErrors:pe,state:We,onChange:Dn}),Jn==="bitbucket"&&T.createElement(Me,{allowedOwners:cn,allowedProjects:gn,rawErrors:pe,state:We,onChange:Dn}),Jn==="azure"&&T.createElement(Ce,{allowedOrganizations:vn,allowedOwners:cn,rawErrors:pe,state:We,onChange:Dn}),Jn==="gerrit"&&T.createElement(R,{rawErrors:pe,state:We,onChange:Dn}),T.createElement(X,{repoName:We.repoName,allowedRepos:yn,onChange:fn=>Qe(wn=>({...wn,repoName:fn})),rawErrors:pe}))},dn=Je(de.z.string(),de.z.object({allowedKinds:de.z.array(de.z.string()).optional().describe("DEPRECATED: Use `catalogFilter` instead. List of kinds of entities to derive options from"),defaultKind:de.z.string().optional().describe("The default entity kind. Options of this kind will not be prefixed."),allowArbitraryValues:de.z.boolean().optional().describe("Whether to allow arbitrary user input. Defaults to true"),defaultNamespace:de.z.union([de.z.string(),de.z.literal(!1)]).optional().describe("The default namespace. Options with this namespace will not be prefixed."),catalogFilter:de.z.array(wt).or(wt).optional().describe("List of key-value filter expression for entities")})).schema,An=Z=>{const{schema:{title:P="Entity",description:$="An entity from the catalog"},uiSchema:N,required:oe}=Z,pe=(0,se.u)(se.t),{loading:te,value:Se}=(0,rn.default)(async()=>(await pe.getBackstageIdentity()).ownershipEntityRefs);if(te)return T.createElement(Pt.ZP,{loading:te,renderInput:Qe=>T.createElement(ge.Z,{...Qe,label:P,margin:"dense",helperText:$,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:oe,InputProps:Qe.InputProps}),options:[]});const We=bn(N,Se);return T.createElement(Te,{...Z,uiSchema:We})};function bn(Z,P){const $=(Z==null?void 0:Z["ui:options"])||{},N=$.allowedKinds;return{"ui:options":{catalogFilter:{...$.catalogFilter,...N?{kind:N,[`relations.${j.S4}`]:P||[]}:{[`relations.${j.S4}`]:P||[]}}}}}const H=Je(de.z.array(de.z.string()),de.z.object({kinds:de.z.array(de.z.string()).optional().describe("List of kinds of entities to derive tags from"),showCounts:de.z.boolean().optional().describe("Whether to show usage counts per tag"),helperText:de.z.string().optional().describe("Helper text to display")})).schema,Ne=Z=>{var P,$,N;const{formData:oe,onChange:pe,uiSchema:te}=Z,Se=(0,se.u)(Fe.Ah),[We,Qe]=(0,T.useState)([]),[kt,Lt]=(0,T.useState)(""),[tn,on]=(0,T.useState)(!1),vn=(0,j.In)().isValidTag,cn=(P=te["ui:options"])==null?void 0:P.kinds,gn=($=te["ui:options"])==null?void 0:$.showCounts,yn=(N=te["ui:options"])==null?void 0:N.helperText,{loading:Bn,value:Qn}=(0,rn.default)(async()=>{const Kn="metadata.tags",Dn={facets:[Kn]};cn&&(Dn.filter={kind:cn});const{facets:Jn}=await Se.getEntityFacets(Dn),fn=Object.fromEntries(Jn[Kn].map(({value:wn,count:sa})=>[wn,sa]));return Qe(Object.keys(fn).sort((wn,sa)=>gn?fn[sa]-fn[wn]:wn.localeCompare(sa))),fn}),jn=(Kn,Dn)=>{let Jn=!1,fn=!1;const wn=oe||[];if(Dn!=null&&Dn.length&&wn.length<Dn.length){const sa=Dn[Dn.length-1]=Dn[Dn.length-1].toLocaleLowerCase("en-US").trim();Jn=!vn(sa),fn=wn.indexOf(sa)!==-1}on(Jn),Lt(Jn?kt:""),!Jn&&!fn&&pe(Dn||[])};return(0,at.Z)(()=>pe(oe||[])),T.createElement(M.Z,{margin:"normal"},T.createElement(Pt.ZP,{multiple:!0,freeSolo:!0,filterSelectedOptions:!0,onChange:jn,value:oe||[],inputValue:kt,loading:Bn,options:We,ChipProps:{size:"small"},renderOption:Kn=>gn?`${Kn} (${Qn==null?void 0:Qn[Kn]})`:Kn,renderInput:Kn=>T.createElement(ge.Z,{...Kn,label:"Tags",onChange:Dn=>Lt(Dn.target.value),error:tn,helperText:yn!=null?yn:"Add any relevant tags, hit 'Enter' to add new tags. Valid format: [a-z0-9+#] separated by [-], at most 63 characters"})}))},it=(0,Y.x8)({id:"register-component",optional:!0}),Gt=(0,Y.x8)({id:"view-techdoc",optional:!0,params:["namespace","kind","name"]}),Dt=(0,Y.NT)({id:"scaffolder"}),mn=(0,Y.Rz)({id:"scaffolder/legacy/selected-template",parent:Dt,path:"/templates/:templateName"}),un=(0,Y.Rz)({id:"scaffolder/selected-template",parent:Dt,path:"/templates/:namespace/:templateName"}),Cn=(0,Y.Rz)({id:"scaffolder/task",parent:Dt,path:"/tasks/:taskId"}),Oe=(0,Y.Rz)({id:"scaffolder/list-tasks",parent:Dt,path:"/tasks"}),$e=(0,Y.Rz)({id:"scaffolder/actions",parent:Dt,path:"/actions"}),st=(0,Y.Rz)({id:"scaffolder/edit",parent:Dt,path:"/edit"}),Xt=Je(de.z.string(),de.z.object({title:de.z.string().default("Group").describe("Group"),description:de.z.string().default("A group you are part of").describe("The group to which the entity belongs")})).schema,ln=Z=>{const{schema:{title:P,description:$},required:N,rawErrors:oe,onChange:pe}=Z,te=(0,se.u)(se.t),Se=(0,se.u)(Fe.Ah),We=(0,se.u)(se.r),[Qe,kt]=(0,T.useState)([]),[Lt,tn]=(0,T.useState)(null);(0,rn.default)(async()=>{const{userEntityRef:vn}=await te.getBackstageIdentity();if(!vn){We.post(new k.dR("No user entity ref found"));return}const{items:cn}=await Se.getEntities({filter:{kind:"Group",["relations.hasMember"]:[vn]}}),gn=cn.filter(yn=>Boolean(yn)).map(yn=>{var Bn;return{label:(Bn=yn.metadata.title)!=null?Bn:yn.metadata.name,ref:(0,j.eE)(yn)}});kt(gn)});const on=(vn,cn)=>{var gn;tn(cn),pe((gn=cn==null?void 0:cn.ref)!=null?gn:"")};return T.createElement(M.Z,{margin:"normal",required:N,error:(oe==null?void 0:oe.length)>0},T.createElement(Pt.ZP,{id:"OwnershipEntityRefPicker-dropdown",options:Qe||[],value:Lt,onChange:on,getOptionLabel:vn=>vn.label,renderInput:vn=>T.createElement(ge.Z,{...vn,label:P,margin:"dense",helperText:$,FormHelperTextProps:{margin:"dense",style:{marginLeft:0}},variant:"outlined",required:N})}))},an=(0,Y.rx)({id:"scaffolder",apis:[(0,Y.ni)({api:p.s,deps:{discoveryApi:se.q,scmIntegrationsApi:i.q3,fetchApi:se.s,identityApi:se.t},factory:({discoveryApi:Z,scmIntegrationsApi:P,fetchApi:$,identityApi:N})=>new ft({discoveryApi:Z,scmIntegrationsApi:P,fetchApi:$,identityApi:N})})],routes:{root:Dt,selectedTemplate:un,ongoingTask:Cn,actions:$e,listTasks:Oe,edit:st},externalRoutes:{registerComponent:it,viewTechDoc:Gt}}),On=an.provide((0,g.eP)({component:Te,name:"EntityPicker",schema:Ae})),Nn=an.provide((0,g.eP)({component:Xe,name:"EntityNamePicker",validation:Wt,schema:Ue})),Fn=an.provide((0,g.eP)({component:ct,name:"RepoUrlPicker",validation:tt,schema:Ge})),ra=an.provide((0,g.eP)({component:Be,name:"OwnerPicker",schema:le})),En=an.provide((0,g.eP)({component:ln,name:"MyGroupsPicker",schema:Xt})),aa=an.provide((0,Y.P4)({name:"ScaffolderPage",component:()=>Promise.all([e.e(3761),e.e(2719)]).then(e.bind(e,12719)).then(Z=>Z.Router),mountPoint:Dt})),oa=an.provide((0,g.eP)({component:An,name:"OwnedEntityPicker",schema:dn})),na=an.provide((0,g.eP)({component:Ne,name:"EntityTagsPicker",schema:H})),pa=an.provide((0,Y.P4)({name:"LegacyScaffolderPage",component:()=>Promise.all([e.e(3761),e.e(1447)]).then(e.bind(e,1447)).then(Z=>Z.LegacyRouter),mountPoint:Dt})),Pa=T.createElement(dt.Z,{fontSize:"small"}),qn=T.createElement(Zt.Z,{fontSize:"small"}),ya=()=>{const Z=(0,se.u)(se.l),{error:P,loading:$,availableTypes:N,selectedTypes:oe,setSelectedTypes:pe}=(0,Fe.Uh)();return $?T.createElement(ke.Ex,null):N?P?(Z.post({message:"Failed to load entity types",severity:"error"}),null):T.createElement(_e.Z,{pb:1,pt:1},T.createElement(Q.Z,{variant:"button",component:"label",htmlFor:"categories-picker"},"Categories"),T.createElement(Pt.ZP,{id:"categories-picker",multiple:!0,options:N,value:oe,onChange:(te,Se)=>pe(Se),renderOption:(te,{selected:Se})=>T.createElement(c.Z,{control:T.createElement(S.Z,{icon:Pa,checkedIcon:qn,checked:Se}),label:Ot()(te)}),size:"small",popupIcon:T.createElement(gt.Z,{"data-testid":"categories-picker-expand"}),renderInput:te=>T.createElement(ge.Z,{...te,variant:"outlined"})})):null},q=(0,_.Z)(()=>({button:{color:({fontColor:Z})=>Z}})),Le=Z=>{const{cancelEnabled:P,logsVisible:$,buttonBarVisible:N,onStartOver:oe,onToggleLogs:pe,onToggleButtonBar:te,taskId:Se}=Z,{getPageTheme:We}=(0,b.Z)(),Qe=We({themeId:"website"}),kt=q({fontColor:Qe.fontColor}),Lt=(0,se.u)(p.s),[tn,on]=(0,T.useState)(),[{status:vn},{execute:cn}]=(0,qt.r)(async()=>{Se&&await Lt.cancelTask(Se)});return T.createElement(T.Fragment,null,T.createElement(m.Z,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:gn=>{on(gn.currentTarget)},"data-testid":"menu-button",className:kt.button},T.createElement(O.Z,null)),T.createElement(ve.ZP,{open:Boolean(tn),onClose:()=>on(void 0),anchorEl:tn,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},T.createElement(ee.Z,null,T.createElement(he.Z,{onClick:()=>pe==null?void 0:pe(!$)},T.createElement(J.Z,null,T.createElement(I.Z,{fontSize:"small"})),T.createElement(ne.Z,{primary:$?"Hide Logs":"Show Logs"})),T.createElement(he.Z,{onClick:()=>te==null?void 0:te(!N)},T.createElement(J.Z,null,T.createElement(W.Z,{fontSize:"small"})),T.createElement(ne.Z,{primary:N?"Hide Button Bar":"Show Button Bar"})),T.createElement(he.Z,{onClick:oe},T.createElement(J.Z,null,T.createElement(Ft.Z,{fontSize:"small"})),T.createElement(ne.Z,{primary:"Start Over"})),T.createElement(he.Z,{onClick:cn,disabled:!P||vn!=="not-executed","data-testid":"cancel-task"},T.createElement(J.Z,null,T.createElement(yt.Z,{fontSize:"small"})),T.createElement(ne.Z,{primary:"Cancel"})))))},et=(0,_.Z)(Z=>({contentWrapper:{display:"flex",flexDirection:"column"},buttonBar:{display:"flex",flexDirection:"row",justifyContent:"right"},cancelButton:{marginRight:Z.spacing(1)},logsVisibilityButton:{marginRight:Z.spacing(1)}})),U=Z=>{var P,$,N,oe,pe,te,Se,We;const{taskId:Qe}=(0,Ut.UO)(),kt=(0,Y.tg)(un),Lt=(0,Ut.s0)(),tn=(0,se.u)(p.s),on=(0,g.WQ)(Qe),vn=et(),cn=(0,T.useMemo)(()=>{var ua,Ia;return(Ia=(ua=on.task)==null?void 0:ua.spec.steps.map(Na=>{var za;return{...Na,...(za=on==null?void 0:on.steps)==null?void 0:za[Na.id]}}))!=null?Ia:[]},[on]),[gn,yn]=(0,T.useState)(!1),[Bn,Qn]=(0,T.useState)(!0);(0,T.useEffect)(()=>{on.error&&yn(!0)},[on.error]),(0,T.useEffect)(()=>{on.completed&&!on.error&&Qn(!1)},[on.error,on.completed]);const jn=(0,T.useMemo)(()=>{for(let ua=cn.length-1;ua>=0;ua--)if(cn[ua].status!=="open")return ua;return 0},[cn]),Kn=(0,T.useCallback)(()=>{var ua,Ia,Na,za,Fa,xa;const{namespace:Da,name:Ga}=(za=(Na=(Ia=(ua=on.task)==null?void 0:ua.spec.templateInfo)==null?void 0:Ia.entity)==null?void 0:Na.metadata)!=null?za:{},ja=(xa=(Fa=on.task)==null?void 0:Fa.spec.parameters)!=null?xa:{};!Da||!Ga||Lt({pathname:kt({namespace:Da,templateName:Ga}),search:`?${z().stringify({formData:JSON.stringify(ja)})}`})},[Lt,(P=on.task)==null?void 0:P.spec.parameters,(oe=(N=($=on.task)==null?void 0:$.spec.templateInfo)==null?void 0:N.entity)==null?void 0:oe.metadata,kt]),[{status:Dn},{execute:Jn}]=(0,qt.r)(async()=>{Qe&&await tn.cancelTask(Qe)}),fn=(pe=Z.TemplateOutputsComponent)!=null?pe:D.Iy,wn=(We=(Se=(te=on.task)==null?void 0:te.spec.templateInfo)==null?void 0:Se.entity)==null?void 0:We.metadata.name,sa=!(on.cancelled||on.completed);return T.createElement(ke.T3,{themeId:"website"},T.createElement(ke.h4,{pageTitleOverride:`Run of ${wn}`,title:T.createElement("div",null,"Run of ",T.createElement("code",null,wn)),subtitle:`Task ${Qe}`},T.createElement(Le,{cancelEnabled:sa,logsVisible:gn,buttonBarVisible:Bn,onStartOver:Kn,onToggleLogs:yn,onToggleButtonBar:Qn,taskId:Qe})),T.createElement(ke.VY,{className:vn.contentWrapper},on.error?T.createElement(_e.Z,{paddingBottom:2},T.createElement(ke.yu,{error:on.error,titleFormat:"markdown",title:on.error.message})):null,T.createElement(_e.Z,{paddingBottom:2},T.createElement(D.Lp,{steps:cn,activeStep:jn,isComplete:on.completed,isError:Boolean(on.error)})),T.createElement(fn,{output:on.output}),Bn?T.createElement(_e.Z,{paddingBottom:2},T.createElement(re.Z,null,T.createElement(_e.Z,{padding:2},T.createElement("div",{className:vn.buttonBar},T.createElement(Pe.Z,{className:vn.cancelButton,disabled:!sa||Dn!=="not-executed",onClick:Jn,"data-testid":"cancel-button"},"Cancel"),T.createElement(Pe.Z,{className:vn.logsVisibilityButton,color:"primary",variant:"outlined",onClick:()=>yn(!gn)},gn?"Hide Logs":"Show Logs"),T.createElement(Pe.Z,{variant:"contained",color:"primary",disabled:sa,onClick:Kn},"Start Over"))))):null,gn?T.createElement(_e.Z,{paddingBottom:2,height:"100%"},T.createElement(re.Z,{style:{height:"100%"}},T.createElement(_e.Z,{padding:2,height:"100%"},T.createElement(D.v9,{logs:on.stepLogs})))):null))}},31734:function(xn,Yt){var e,i,p;/** @license
* eventsource.js
* Available under MIT License (MIT)
* https://github.com/Yaffle/EventSource/
*/(function(g){"use strict";var j=g.setTimeout,k=g.clearTimeout,o=g.XMLHttpRequest,z=g.XDomainRequest,He=g.ActiveXObject,Ze=g.EventSource,a=g.document,xe=g.Promise,Ee=g.fetch,se=g.Response,Y=g.TextDecoder,Fe=g.TextEncoder,ge=g.AbortController;if(typeof window!="undefined"&&typeof a!="undefined"&&!("readyState"in a)&&a.body==null&&(a.readyState="loading",window.addEventListener("load",function(I){a.readyState="complete"},!1)),o==null&&He!=null&&(o=function(){return new He("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(I){function W(){}return W.prototype=I,new W}),Date.now||(Date.now=function(){return new Date().getTime()}),ge==null){var _e=Ee;Ee=function(I,W){var O=W.signal;return _e(I,{headers:W.headers,credentials:W.credentials,cache:W.cache}).then(function(D){var ae=D.body.getReader();return O._reader=ae,O._aborted&&O._reader.cancel(),{status:D.status,statusText:D.statusText,headers:D.headers,body:{getReader:function(){return ae}}}})},ge=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function Q(){this.bitsNeeded=0,this.codePoint=0}Q.prototype.decode=function(I){function W(wt,nn,Ae){if(Ae===1)return wt>=128>>nn&&wt<<nn<=2047;if(Ae===2)return wt>=2048>>nn&&wt<<nn<=55295||wt>=57344>>nn&&wt<<nn<=65535;if(Ae===3)return wt>=65536>>nn&&wt<<nn<=1114111;throw new Error}function O(wt,nn){if(wt===6*1)return nn>>6>15?3:nn>31?2:1;if(wt===6*2)return nn>15?3:2;if(wt===6*3)return 3;throw new Error}for(var D=65533,ae="",fe=this.bitsNeeded,Ke=this.codePoint,ft=0;ft<I.length;ft+=1){var Je=I[ft];fe!==0&&(Je<128||Je>191||!W(Ke<<6|Je&63,fe-6,O(fe,Ke)))&&(fe=0,Ke=D,ae+=String.fromCharCode(Ke)),fe===0?(Je>=0&&Je<=127?(fe=0,Ke=Je):Je>=192&&Je<=223?(fe=6*1,Ke=Je&31):Je>=224&&Je<=239?(fe=6*2,Ke=Je&15):Je>=240&&Je<=247?(fe=6*3,Ke=Je&7):(fe=0,Ke=D),fe!==0&&!W(Ke,fe,O(fe,Ke))&&(fe=0,Ke=D)):(fe-=6,Ke=Ke<<6|Je&63),fe===0&&(Ke<=65535?ae+=String.fromCharCode(Ke):(ae+=String.fromCharCode(55296+(Ke-65535-1>>10)),ae+=String.fromCharCode(56320+(Ke-65535-1&1023))))}return this.bitsNeeded=fe,this.codePoint=Ke,ae};var be=function(){try{return new Y().decode(new Fe().encode("test"),{stream:!0})==="test"}catch(I){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+I)}return!1};(Y==null||Fe==null||!be())&&(Y=Q);var M=function(){};function c(I){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=M,this.onload=M,this.onerror=M,this.onreadystatechange=M,this._contentType="",this._xhr=I,this._sendTimeout=0,this._abort=M}c.prototype.open=function(I,W){this._abort(!0);var O=this,D=this._xhr,ae=1,fe=0;this._abort=function(Ae){O._sendTimeout!==0&&(k(O._sendTimeout),O._sendTimeout=0),(ae===1||ae===2||ae===3)&&(ae=4,D.onload=M,D.onerror=M,D.onabort=M,D.onprogress=M,D.onreadystatechange=M,D.abort(),fe!==0&&(k(fe),fe=0),Ae||(O.readyState=4,O.onabort(null),O.onreadystatechange())),ae=0};var Ke=function(){if(ae===1){var Ae=0,Te="",vt=void 0;if("contentType"in D)Ae=200,Te="OK",vt=D.contentType;else try{Ae=D.status,Te=D.statusText,vt=D.getResponseHeader("Content-Type")}catch{Ae=0,Te="",vt=void 0}Ae!==0&&(ae=2,O.readyState=2,O.status=Ae,O.statusText=Te,O._contentType=vt,O.onreadystatechange())}},ft=function(){if(Ke(),ae===2||ae===3){ae=3;var Ae="";try{Ae=D.responseText}catch{}O.readyState=3,O.responseText=Ae,O.onprogress()}},Je=function(Ae,Te){if((Te==null||Te.preventDefault==null)&&(Te={preventDefault:M}),ft(),ae===1||ae===2||ae===3){if(ae=4,fe!==0&&(k(fe),fe=0),O.readyState=4,Ae==="load")O.onload(Te);else if(Ae==="error")O.onerror(Te);else if(Ae==="abort")O.onabort(Te);else throw new TypeError;O.onreadystatechange()}},wt=function(Ae){D!=null&&(D.readyState===4?(!("onload"in D)||!("onerror"in D)||!("onabort"in D))&&Je(D.responseText===""?"error":"load",Ae):D.readyState===3?"onprogress"in D||ft():D.readyState===2&&Ke())},nn=function(){fe=j(function(){nn()},500),D.readyState===3&&ft()};"onload"in D&&(D.onload=function(Ae){Je("load",Ae)}),"onerror"in D&&(D.onerror=function(Ae){Je("error",Ae)}),"onabort"in D&&(D.onabort=function(Ae){Je("abort",Ae)}),"onprogress"in D&&(D.onprogress=ft),"onreadystatechange"in D&&(D.onreadystatechange=function(Ae){wt(Ae)}),("contentType"in D||!("ontimeout"in o.prototype))&&(W+=(W.indexOf("?")===-1?"?":"&")+"padding=true"),D.open(I,W,!0),"readyState"in D&&(fe=j(function(){nn()},0))},c.prototype.abort=function(){this._abort(!1)},c.prototype.getResponseHeader=function(I){return this._contentType},c.prototype.setRequestHeader=function(I,W){var O=this._xhr;"setRequestHeader"in O&&O.setRequestHeader(I,W)},c.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},c.prototype.send=function(){if((!("ontimeout"in o.prototype)||!("sendAsBinary"in o.prototype)&&!("mozAnon"in o.prototype))&&a!=null&&a.readyState!=null&&a.readyState!=="complete"){var I=this;I._sendTimeout=j(function(){I._sendTimeout=0,I.send()},4);return}var W=this._xhr;"withCredentials"in W&&(W.withCredentials=this.withCredentials);try{W.send(void 0)}catch(O){throw O}};function S(I){return I.replace(/[A-Z]/g,function(W){return String.fromCharCode(W.charCodeAt(0)+32)})}function _(I){for(var W=Object.create(null),O=I.split(`\r
`),D=0;D<O.length;D+=1){var ae=O[D],fe=ae.split(": "),Ke=fe.shift(),ft=fe.join(": ");W[S(Ke)]=ft}this._map=W}_.prototype.get=function(I){return this._map[S(I)]},o!=null&&o.HEADERS_RECEIVED==null&&(o.HEADERS_RECEIVED=2);function b(){}b.prototype.open=function(I,W,O,D,ae,fe,Ke){I.open("GET",ae);var ft=0;I.onprogress=function(){var wt=I.responseText,nn=wt.slice(ft);ft+=nn.length,O(nn)},I.onerror=function(wt){wt.preventDefault(),D(new Error("NetworkError"))},I.onload=function(){D(null)},I.onabort=function(){D(null)},I.onreadystatechange=function(){if(I.readyState===o.HEADERS_RECEIVED){var wt=I.status,nn=I.statusText,Ae=I.getResponseHeader("Content-Type"),Te=I.getAllResponseHeaders();W(wt,nn,Ae,new _(Te))}},I.withCredentials=fe;for(var Je in Ke)Object.prototype.hasOwnProperty.call(Ke,Je)&&I.setRequestHeader(Je,Ke[Je]);return I.send(),I};function m(I){this._headers=I}m.prototype.get=function(I){return this._headers.get(I)};function ve(){}ve.prototype.open=function(I,W,O,D,ae,fe,Ke){var ft=null,Je=new ge,wt=Je.signal,nn=new Y;return Ee(ae,{headers:Ke,credentials:fe?"include":"same-origin",signal:wt,cache:"no-store"}).then(function(Ae){return ft=Ae.body.getReader(),W(Ae.status,Ae.statusText,Ae.headers.get("Content-Type"),new m(Ae.headers)),new xe(function(Te,vt){var Tt=function(){ft.read().then(function(At){if(At.done)Te(void 0);else{var Wt=nn.decode(At.value,{stream:!0});O(Wt),Tt()}}).catch(function(At){vt(At)})};Tt()})}).catch(function(Ae){if(Ae.name!=="AbortError")return Ae}).then(function(Ae){D(Ae)}),{abort:function(){ft!=null&&ft.cancel(),Je.abort()}}};function ee(){this._listeners=Object.create(null)}function he(I){j(function(){throw I},0)}ee.prototype.dispatchEvent=function(I){I.target=this;var W=this._listeners[I.type];if(W!=null)for(var O=W.length,D=0;D<O;D+=1){var ae=W[D];try{typeof ae.handleEvent=="function"?ae.handleEvent(I):ae.call(this,I)}catch(fe){he(fe)}}},ee.prototype.addEventListener=function(I,W){I=String(I);var O=this._listeners,D=O[I];D==null&&(D=[],O[I]=D);for(var ae=!1,fe=0;fe<D.length;fe+=1)D[fe]===W&&(ae=!0);ae||D.push(W)},ee.prototype.removeEventListener=function(I,W){I=String(I);var O=this._listeners,D=O[I];if(D!=null){for(var ae=[],fe=0;fe<D.length;fe+=1)D[fe]!==W&&ae.push(D[fe]);ae.length===0?delete O[I]:O[I]=ae}};function J(I){this.type=I,this.target=void 0}function ne(I,W){J.call(this,I),this.data=W.data,this.lastEventId=W.lastEventId}ne.prototype=Object.create(J.prototype);function re(I,W){J.call(this,I),this.status=W.status,this.statusText=W.statusText,this.headers=W.headers}re.prototype=Object.create(J.prototype);function Pe(I,W){J.call(this,I),this.error=W.error}Pe.prototype=Object.create(J.prototype);var Pt=-1,T=0,rn=1,de=2,Bt=-1,ut=0,rt=1,bt=2,ke=3,_t=/^text\/event\-stream(;.*)?$/i,at=1e3,zt=18e6,Ot=function(I,W){var O=I==null?W:parseInt(I,10);return O!==O&&(O=W),Zt(O)},Zt=function(I){return Math.min(Math.max(I,at),zt)},dt=function(I,W,O){try{typeof W=="function"&&W.call(I,O)}catch(D){he(D)}};function gt(I,W){ee.call(this),W=W||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,yt(this,I,W)}function Ut(){return o!=null&&"withCredentials"in o.prototype||z==null?new o:new z}var qt=Ee!=null&&se!=null&&"body"in se.prototype;function yt(I,W,O){W=String(W);var D=Boolean(O.withCredentials),ae=O.lastEventIdQueryParameterName||"lastEventId",fe=Zt(1e3),Ke=Ot(O.heartbeatTimeout,45e3),ft="",Je=fe,wt=!1,nn=0,Ae=O.headers||{},Te=O.Transport,vt=qt&&Te==null?void 0:new c(Te!=null?new Te:Ut()),Tt=Te!=null&&typeof Te!="string"?new Te:vt==null?new ve:new b,At=void 0,Wt=0,St=Pt,Ue="",Xe="",Mt="",le="",Be=ut,ie=0,Ge=0,tt=function(Me,R,B,X){if(St===T)if(Me===200&&B!=null&&_t.test(B)){St=rn,wt=Date.now(),Je=fe,I.readyState=rn;var nt=new re("open",{status:Me,statusText:R,headers:X});I.dispatchEvent(nt),dt(I,I.onopen,nt)}else{var mt="";Me!==200?(R&&(R=R.replace(/\s+/g," ")),mt="EventSource's response has a status "+Me+" "+R+" that is not 200. Aborting the connection."):mt="EventSource's response has a Content-Type specifying an unsupported type: "+(B==null?"-":B.replace(/\s+/g," "))+". Aborting the connection.",en();var nt=new re("error",{status:Me,statusText:R,headers:X});I.dispatchEvent(nt),dt(I,I.onerror,nt),console.error(mt)}},ot=function(Me){if(St===rn){for(var R=-1,B=0;B<Me.length;B+=1){var X=Me.charCodeAt(B);(X===`
`.charCodeAt(0)||X==="\r".charCodeAt(0))&&(R=B)}var nt=(R!==-1?le:"")+Me.slice(0,R+1);le=(R===-1?le:"")+Me.slice(R+1),Me!==""&&(wt=Date.now(),nn+=Me.length);for(var mt=0;mt<nt.length;mt+=1){var X=nt.charCodeAt(mt);if(Be===Bt&&X===`
`.charCodeAt(0))Be=ut;else if(Be===Bt&&(Be=ut),X==="\r".charCodeAt(0)||X===`
`.charCodeAt(0)){if(Be!==ut){Be===rt&&(Ge=mt+1);var ct=nt.slice(ie,Ge-1),jt=nt.slice(Ge+(Ge<mt&&nt.charCodeAt(Ge)===" ".charCodeAt(0)?1:0),mt);ct==="data"?(Ue+=`
`,Ue+=jt):ct==="id"?Xe=jt:ct==="event"?Mt=jt:ct==="retry"?(fe=Ot(jt,fe),Je=fe):ct==="heartbeatTimeout"&&(Ke=Ot(jt,Ke),Wt!==0&&(k(Wt),Wt=j(function(){Ce()},Ke)))}if(Be===ut){if(Ue!==""){ft=Xe,Mt===""&&(Mt="message");var dn=new ne(Mt,{data:Ue.slice(1),lastEventId:Xe});if(I.dispatchEvent(dn),Mt==="open"?dt(I,I.onopen,dn):Mt==="message"?dt(I,I.onmessage,dn):Mt==="error"&&dt(I,I.onerror,dn),St===de)return}Ue="",Mt=""}Be=X==="\r".charCodeAt(0)?Bt:ut}else Be===ut&&(ie=mt,Be=rt),Be===rt?X===":".charCodeAt(0)&&(Ge=mt+1,Be=bt):Be===bt&&(Be=ke)}}},Rt=function(Me){if(St===rn||St===T){St=Pt,Wt!==0&&(k(Wt),Wt=0),Wt=j(function(){Ce()},Je),Je=Zt(Math.min(fe*16,Je*2)),I.readyState=T;var R=new Pe("error",{error:Me});I.dispatchEvent(R),dt(I,I.onerror,R),Me!=null&&console.error(Me)}},en=function(){St=de,At!=null&&(At.abort(),At=void 0),Wt!==0&&(k(Wt),Wt=0),I.readyState=de},Ce=function(){if(Wt=0,St!==Pt){if(!wt&&At!=null)Rt(new Error("No activity within "+Ke+" milliseconds. "+(St===T?"No response received.":nn+" chars received.")+" Reconnecting.")),At!=null&&(At.abort(),At=void 0);else{var Me=Math.max((wt||Date.now())+Ke-Date.now(),1);wt=!1,Wt=j(function(){Ce()},Me)}return}wt=!1,nn=0,Wt=j(function(){Ce()},Ke),St=T,Ue="",Mt="",Xe=ft,le="",ie=0,Ge=0,Be=ut;var R=W;if(W.slice(0,5)!=="data:"&&W.slice(0,5)!=="blob:"&&ft!==""){var B=W.indexOf("?");R=B===-1?W:W.slice(0,B+1)+W.slice(B+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(jt,dn){return dn===ae?"":jt}),R+=(W.indexOf("?")===-1?"?":"&")+ae+"="+encodeURIComponent(ft)}var X=I.withCredentials,nt={};nt.Accept="text/event-stream";var mt=I.headers;if(mt!=null)for(var ct in mt)Object.prototype.hasOwnProperty.call(mt,ct)&&(nt[ct]=mt[ct]);try{At=Tt.open(vt,tt,ot,Rt,R,X,nt)}catch(jt){throw en(),jt}};I.url=W,I.readyState=T,I.withCredentials=D,I.headers=Ae,I._close=en,Ce()}gt.prototype=Object.create(ee.prototype),gt.prototype.CONNECTING=T,gt.prototype.OPEN=rn,gt.prototype.CLOSED=de,gt.prototype.close=function(){this._close()},gt.CONNECTING=T,gt.OPEN=rn,gt.CLOSED=de,gt.prototype.withCredentials=void 0;var Ft=Ze;o!=null&&(Ze==null||!("withCredentials"in Ze.prototype))&&(Ft=gt),function(I){if(typeof xn.exports=="object"){var W=I(Yt);W!==void 0&&(xn.exports=W)}else i=[Yt],e=I,p=typeof e=="function"?e.apply(Yt,i):e,p!==void 0&&(xn.exports=p)}(function(I){I.EventSourcePolyfill=gt,I.NativeEventSource=Ze,I.EventSource=Ft})})(typeof globalThis=="undefined"?typeof window!="undefined"?window:typeof self!="undefined"?self:this:globalThis)},42054:(xn,Yt,e)=>{"use strict";e.d(Yt,{S:()=>M,b:()=>Ee,c:()=>Q});var i=e(2784),p=e(30705),g=e(79692),j=e(86136),k=e(49378),o=e(95544),z=e(38402),He=e(11776),Ze=e(90436),a=e(49558);const xe=(0,g.Z)(()=>({highlight:{}}),{name:"BackstageHighlightedSearchResultText"}),Ee=c=>{const{text:S,preTag:_,postTag:b}=c,m=xe(),ve=(0,i.useMemo)(()=>S.split(new RegExp(`(${_}.+?${b})`)),[b,_,S]);return i.createElement(i.Fragment,null,ve.map((ee,he)=>ee.includes(_)?i.createElement("mark",{className:m.highlight,key:he},ee.replace(new RegExp(`${_}|${b}`,"g"),"")):ee))},se=({result:c,highlight:S,icon:_,secondaryAction:b,lineClamp:m=5})=>c?i.createElement(i.Fragment,null,_&&i.createElement(j.Z,null,_),i.createElement(k.Z,{primaryTypographyProps:{variant:"h6"},primary:i.createElement(a.rU,{noTrack:!0,to:c.location},S!=null&&S.fields.title?i.createElement(Ee,{text:(S==null?void 0:S.fields.title)||"",preTag:(S==null?void 0:S.preTag)||"",postTag:(S==null?void 0:S.postTag)||""}):c.title),secondary:i.createElement(Ze.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:m,overflow:"hidden"},color:"textSecondary",variant:"body2"},S!=null&&S.fields.text?i.createElement(Ee,{text:S.fields.text,preTag:S.preTag,postTag:S.postTag}):c.text)}),b&&i.createElement(o.Z,{alignItems:"flex-end"},b)):null,Y=c=>i.createElement(p.fC,{attributes:{pluginId:"search",extension:"DefaultResultListItem"}},i.createElement(se,{...c})),Fe="search.results.list.items.extensions.v1",ge=(c,S)=>{for(const _ of c){if(!(0,i.isValidElement)(_))continue;const b=(0,p.IY)(_,Fe);if(b!=null&&b(S))return(0,i.cloneElement)(_,{rank:S.rank,highlight:S.highlight,result:S.document,..._.props})}return null},_e=c=>{const{rank:S,result:_,noTrack:b,children:m,alignItems:ve="flex-start",...ee}=c,he=(0,p.z$)(),J=(0,i.useCallback)(()=>{b||_&&he.captureEvent("discover",_.title,{attributes:{to:_.location},value:S})},[S,_,b,he]);return i.createElement(z.Z,{divider:!0,alignItems:ve,onClickCapture:J,...ee},m)},Q=c=>{const{name:S,component:_,predicate:b=()=>!0}=c;return(0,p.YO)({name:S,component:{lazy:()=>_().then(m=>ve=>i.createElement(_e,{rank:ve.rank,result:ve.result,noTrack:ve.noTrack},(0,i.createElement)(m,ve)))},data:{[Fe]:b}})},be=c=>{const S=(0,p.vJ)(c,_=>_.selectByComponentData({key:Fe}).getElements(),[c]);return(0,i.useCallback)((_,b)=>{const m=ge(S,_);return i.createElement(i.Fragment,{key:b},m!=null?m:i.createElement(_e,{rank:_.rank,result:_.document},i.createElement(Y,{rank:_.rank,highlight:_.highlight,result:_.document})))},[S])},M=c=>{const{results:S,children:_,...b}=c,m=be(_);return i.createElement(He.Z,{...b},S.map(m))}},92573:(xn,Yt,e)=>{"use strict";e.d(Yt,{E1:()=>dt,GQ:()=>en,Nd:()=>zt,Rx:()=>rt,US:()=>Zt,ay:()=>Ke,gK:()=>de,lt:()=>At,qO:()=>yt,wy:()=>nn});var i=e(57032),p=e(30705),g=e(42054),j=e(50581),k=e(61837),o=e(86619),z=e(79692),He=e(4614),Ze=e(7089),a=e(42494),xe=e(84899),Ee=e(5806),se=e(21324),Y=e(56939),Fe=e(73698),ge=e(12231),_e=e(90436),Q=e(28899),be=e(77277),M=e(21853),c=e(2784),S=e(48760),_=e(76635),b=e.n(_),m=e(64279),ve=e(1849),ee=e(18473),he=e(88013),J=e(69294),ne=e(49558),re=e(19126),Pe=e.n(re),Pt=e(27742),T=e(35352),rn=e(48834).Buffer;const de=(0,i.c)({id:"plugin.search.queryservice"});class Bt{constructor(Me){this.mockedResults=Me}query(){return Promise.resolve(this.mockedResults||{results:[]})}}const ut=(0,ee.CT)("search-context"),rt=()=>{const Ce=(0,c.useContext)(ut);if(!Ce)throw new Error("useSearch must be used within a SearchContextProvider");const Me=Ce.atVersion(1);if(!Me)throw new Error("No SearchContext v1 found");return Me},bt=()=>(0,c.useContext)(ut)!==void 0,ke={term:"",types:[],filters:{},pageLimit:void 0,pageCursor:void 0},_t=(Ce=ke)=>{var Me,R,B,X;const nt=(0,i.u)(de),mt=(0,p.z$)(),[ct,jt]=(0,c.useState)(Ce.term),[dn,An]=(0,c.useState)(Ce.types),[bn,F]=(0,c.useState)(Ce.filters),[H,Ne]=(0,c.useState)(Ce.pageLimit),[it,Gt]=(0,c.useState)(Ce.pageCursor),Dt=(0,ve.Z)(ct),mn=(0,ve.Z)(bn),un=(0,m.default)(async()=>{var Xt,ln;const an=await nt.query({term:ct,types:dn,filters:bn,pageLimit:H,pageCursor:it});return ct&&mt.captureEvent("search",ct,{value:(ln=(Xt=un.value)==null?void 0:Xt.numberOfResults)!=null?ln:void 0}),an},[ct,dn,bn,H,it]),Cn=!un.loading&&!un.error&&((Me=un.value)==null?void 0:Me.nextPageCursor),Oe=!un.loading&&!un.error&&((R=un.value)==null?void 0:R.previousPageCursor),$e=(0,c.useCallback)(()=>{var Xt;Gt((Xt=un.value)==null?void 0:Xt.nextPageCursor)},[(B=un.value)==null?void 0:B.nextPageCursor]),st=(0,c.useCallback)(()=>{var Xt;Gt((Xt=un.value)==null?void 0:Xt.previousPageCursor)},[(X=un.value)==null?void 0:X.previousPageCursor]);return(0,c.useEffect)(()=>{Dt!==void 0&&ct!==Dt&&Gt(void 0)},[ct,Dt,Gt]),(0,c.useEffect)(()=>{mn!==void 0&&!(0,_.isEqual)(bn,mn)&&Gt(void 0)},[bn,mn,Gt]),{result:un,term:ct,setTerm:jt,types:dn,setTypes:An,filters:bn,setFilters:F,pageLimit:H,setPageLimit:Ne,pageCursor:it,setPageCursor:Gt,fetchNextPage:Cn?$e:void 0,fetchPreviousPage:Oe?st:void 0}},at=Ce=>{const{initialState:Me,children:R}=Ce,B=_t(Me);return c.createElement(p.fC,{attributes:{searchTypes:B.types.sort().join(",")}},c.createElement(ut.Provider,{value:(0,ee.EI)({1:B})},R))},zt=Ce=>{const{initialState:Me,inheritParentContextIfAvailable:R,children:B}=Ce,X=bt(),nt=(0,i.u)(i.p),mt=Me!=null?Me:{},ct=nt.has("search.query.pageLimit")?{pageLimit:nt.getNumber("search.query.pageLimit")}:{},jt={...ke,...mt,...ct};return X&&R?c.createElement(c.Fragment,null,B):c.createElement(at,{initialState:jt},B)};function Ot(Ce){return(0,c.forwardRef)((Me,R)=>c.createElement(zt,{inheritParentContextIfAvailable:!0},c.createElement(Ce,{...Me,ref:R})))}const Zt=Ot((0,c.forwardRef)((Ce,Me)=>{const{onChange:R,onKeyDown:B=()=>{},onClear:X=()=>{},onSubmit:nt=()=>{},debounceTime:mt=200,clearButton:ct=!0,fullWidth:jt=!0,value:dn,label:An,placeholder:bn,inputProps:F={},InputProps:H={},endAdornment:Ne,...it}=Ce,Gt=(0,i.u)(i.p),[Dt,mn]=(0,c.useState)(""),un=(0,c.useRef)("");(0,c.useEffect)(()=>{mn(an=>an===un.current?String(dn):an)},[dn,un]),(0,S.Z)(()=>{un.current=Dt,R(Dt)},mt,[Dt]);const Cn=(0,c.useCallback)(an=>{mn(an.target.value)},[mn]),Oe=(0,c.useCallback)(an=>{B&&B(an),nt&&an.key==="Enter"&&nt()},[B,nt]),$e=(0,c.useCallback)(()=>{un.current="",R(""),mn(""),X&&X()},[R,X]),st=An?void 0:"Search",Qt=bn!=null?bn:`Search in ${Gt.getOptionalString("app.title")||"Backstage"}`,Xt=c.createElement(j.Z,{position:"start"},c.createElement(k.Z,{"aria-label":"Query",size:"small",disabled:!0},c.createElement(M.Z,null))),ln=c.createElement(j.Z,{position:"end"},c.createElement(be.Z,{"aria-label":"Clear",size:"small",onClick:$e,onKeyDown:an=>{an.key==="Enter"&&an.stopPropagation()}},"Clear"));return c.createElement(o.Z,{id:"search-bar-text-field","data-testid":"search-bar-next",variant:"outlined",margin:"normal",inputRef:Me,value:Dt,label:An,placeholder:Qt,InputProps:{startAdornment:Xt,endAdornment:ct?ln:Ne,...H},inputProps:{"aria-label":st,...F},fullWidth:jt,onChange:Cn,onKeyDown:Oe,...it})})),dt=Ot((0,c.forwardRef)((Ce,Me)=>{const{value:R="",onChange:B,...X}=Ce,{term:nt,setTerm:mt}=rt();(0,c.useEffect)(()=>{R&&mt(String(R))},[R,mt]);const ct=(0,c.useCallback)(jt=>{B?B(jt):mt(jt)},[B,mt]);return c.createElement(p.fC,{attributes:{pluginId:"search",extension:"SearchBar"}},c.createElement(Zt,{...X,ref:Me,value:nt,onChange:ct}))})),gt=(0,z.Z)(Ce=>({loading:{right:Ce.spacing(1),position:"absolute"}})),Ut=Ce=>Me=>c.createElement(zt,{inheritParentContextIfAvailable:!0},c.createElement(Ce,{...Me})),qt=()=>{const Ce=gt();return c.createElement(He.Z,{className:Ce.loading,"data-testid":"search-autocomplete-progressbar",color:"inherit",size:20})},yt=Ut(function(Me){const{loading:R,value:B,onChange:X=()=>{},options:nt=[],getOptionLabel:mt=un=>String(un),inputPlaceholder:ct,inputDebounceTime:jt,freeSolo:dn=!0,fullWidth:An=!0,clearOnBlur:bn=!1,"data-testid":F="search-autocomplete",...H}=Me,{setTerm:Ne}=rt(),it=(0,c.useCallback)(un=>un?typeof un=="string"?un:mt(un):"",[mt]),Gt=(0,c.useMemo)(()=>it(B),[B,it]),Dt=(0,c.useCallback)((un,Cn,Oe,$e)=>{Ne(it(Cn)),X(un,Cn,Oe,$e)},[it,Ne,X]),mn=(0,c.useCallback)(({InputProps:{ref:un,className:Cn,endAdornment:Oe},InputLabelProps:$e,...st})=>c.createElement(dt,{...st,ref:un,clearButton:!1,value:Gt,placeholder:ct,debounceTime:jt,endAdornment:R?c.createElement(qt,null):Oe,InputProps:{className:Cn}}),[R,Gt,ct,jt]);return c.createElement(he.ZP,{...H,"data-testid":F,value:B,onChange:Dt,options:nt,getOptionLabel:mt,renderInput:mn,freeSolo:dn,fullWidth:An,clearOnBlur:bn})}),Ft=Ce=>{const{icon:Me,primaryText:R,primaryTextTypographyProps:B,secondaryText:X,secondaryTextTypographyProps:nt,disableTextTypography:mt}=Ce;return React.createElement(React.Fragment,null,Me?React.createElement(ListItemIcon,null,Me):null,React.createElement(ListItemText,{primary:R,primaryTypographyProps:B,secondary:X,secondaryTypographyProps:nt,disableTypography:mt}))},I=(Ce,Me,R=[],B=250)=>{const X=(0,c.useRef)({}),nt=Ce||(()=>Promise.resolve([])),[mt,ct]=(0,J.default)(nt,[Me],{loading:!0});if((0,S.Z)(()=>{X.current[Me]===void 0&&(X.current[Me]=ct(Me).then(dn=>(X.current[Me]=dn,dn)))},B,[ct,Me]),R.length)return{loading:!1,value:R};const jt=X.current[Me];return Array.isArray(jt)?{loading:!1,value:jt}:mt},W=(Ce,Me)=>{const{setFilters:R}=rt();(0,c.useEffect)(()=>{Me&&[Me].flat().length>0&&R(B=>({...B,[Ce]:Me}))},[])},O=Ce=>{const{className:Me,defaultValue:R,name:B,values:X,valuesDebounceMs:nt,label:mt,filterSelectedOptions:ct,limitTags:jt,multiple:dn}=Ce,[An,bn]=(0,c.useState)("");W(B,R);const F=typeof X=="function"?X:void 0,H=typeof X=="function"?void 0:X,{value:Ne,loading:it}=I(F,An,H,nt),{filters:Gt,setFilters:Dt}=rt(),mn=Gt[B]||(dn?[]:null),un=($e,st)=>{Dt(Qt=>{const{[B]:Xt,...ln}=Qt;return st?{...ln,[B]:st}:{...ln}})},Cn=$e=>c.createElement(o.Z,{...$e,name:"search",variant:"outlined",label:mt,fullWidth:!0}),Oe=($e,st)=>$e.map((Qt,Xt)=>c.createElement(Ze.Z,{label:Qt,color:"primary",...st({index:Xt})}));return c.createElement(he.ZP,{filterSelectedOptions:ct,limitTags:jt,multiple:dn,className:Me,id:`${dn?"multi-":""}select-filter-${B}--select`,options:Ne||[],loading:it,value:mn,onChange:un,onInputChange:($e,st)=>bn(st),renderInput:Cn,renderTags:Oe})},D=(0,z.Z)({label:{textTransform:"capitalize"},checkboxWrapper:{display:"flex",alignItems:"center",width:"100%"},textWrapper:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),ae=Ce=>{const{className:Me,defaultValue:R,label:B,name:X,values:nt=[],valuesDebounceMs:mt}=Ce,ct=D(),{filters:jt,setFilters:dn}=rt();W(X,R);const An=typeof nt=="function"?nt:void 0,bn=typeof nt=="function"?void 0:nt,{value:F=[],loading:H}=I(An,"",bn,mt),Ne=it=>{const{target:{value:Gt,checked:Dt}}=it;dn(mn=>{const{[X]:un,...Cn}=mn,Oe=(un||[]).filter(st=>st!==Gt),$e=Dt?[...Oe,Gt]:Oe;return $e.length?{...Cn,[X]:$e}:Cn})};return c.createElement(a.Z,{className:Me,disabled:H,fullWidth:!0,"data-testid":"search-checkboxfilter-next"},B?c.createElement(xe.Z,{className:ct.label},B):null,F.map(it=>{var Gt;return c.createElement(Ee.Z,{key:it,classes:{root:ct.checkboxWrapper,label:ct.textWrapper},label:it,control:c.createElement(se.Z,{color:"primary",inputProps:{"aria-labelledby":it},value:it,name:it,onChange:Ne,checked:((Gt=jt[X])!=null?Gt:[]).includes(it)})})}))},fe=Ce=>{const{className:Me,defaultValue:R,label:B,name:X,values:nt,valuesDebounceMs:mt}=Ce,ct=D();W(X,R);const jt=typeof nt=="function"?nt:void 0,dn=typeof nt=="function"?void 0:nt,{value:An=[],loading:bn}=I(jt,"",dn,mt),{filters:F,setFilters:H}=rt(),Ne=it=>{const{target:{value:Gt}}=it;H(Dt=>{const{[X]:mn,...un}=Dt;return Gt?{...un,[X]:Gt}:un})};return c.createElement(a.Z,{disabled:bn,className:Me,variant:"filled",fullWidth:!0,"data-testid":"search-selectfilter-next"},B?c.createElement(Y.Z,{className:ct.label,margin:"dense"},B):null,c.createElement(Fe.Z,{variant:"outlined",value:F[X]||"",onChange:Ne},c.createElement(ge.Z,{value:""},c.createElement("em",null,"All")),An.map(it=>c.createElement(ge.Z,{key:it,value:it},c.createElement(_e.Z,{variant:"inherit",noWrap:!0},it)))))},Ke=Ce=>{const{component:Me,...R}=Ce;return c.createElement(Me,{...R})};Ke.Checkbox=Ce=>c.createElement(Ke,{...Ce,component:ae}),Ke.Select=Ce=>c.createElement(Ke,{...Ce,component:fe}),Ke.Autocomplete=Ce=>c.createElement(Ke,{...Ce,component:O});const ft=Ce=>rn.from(Ce.toString(),"utf-8").toString("base64"),Je=Ce=>Ce?Number(rn.from(Ce,"base64").toString("utf-8")):0,wt=Ce=>{const{total:Me=-1,cursor:R,hasNextPage:B,onCursorChange:X,limit:nt=25,limitLabel:mt="Results per page:",limitText:ct=({from:Ne,to:it})=>Me>0?`of ${Me}`:`${Ne}-${it}`,limitOptions:jt,onLimitChange:dn,...An}=Ce,bn=(0,c.useMemo)(()=>Je(R),[R]),F=(0,c.useCallback)((Ne,it)=>{X==null||X(ft(it))},[X]),H=(0,c.useCallback)(Ne=>{const it=Ne.target.value;dn==null||dn(parseInt(it,10))},[dn]);return c.createElement(Q.Z,{...An,component:"div",count:Me,page:bn,nextIconButtonProps:{...B!==void 0&&{disabled:!B}},onPageChange:F,rowsPerPage:nt,labelRowsPerPage:mt,labelDisplayedRows:ct,rowsPerPageOptions:jt,onRowsPerPageChange:H})},nn=Ce=>{const{pageLimit:Me,setPageLimit:R,pageCursor:B,setPageCursor:X,fetchNextPage:nt}=rt(),mt=(0,c.useCallback)(ct=>{R(ct),X(void 0)},[R,X]);return c.createElement(wt,{...Ce,hasNextPage:!!nt,limit:Me,onLimitChange:mt,cursor:B,onCursorChange:X})},Ae=Ce=>{const{children:Me}=Ce,R=rt(),{result:B,...X}=R;return Me(B,X)},Te=Ce=>{const{query:Me,children:R}=Ce,B=(0,i.u)(de),X=(0,m.default)(()=>{const{term:nt="",types:mt=[],filters:ct={},...jt}=Me;return B.query({...jt,term:nt,types:mt,filters:ct})},[Me]);return R(X,Me)},vt=Ce=>{const{query:Me,children:R}=Ce;return Me?c.createElement(Te,{query:Me},R):c.createElement(Ae,null,R)},Tt=Ce=>{const{query:Me,children:R,noResultsComponent:B=c.createElement(ne.ub,{missing:"data",title:"Sorry, no results were found"}),...X}=Ce;return c.createElement(vt,{query:Me},({loading:nt,error:mt,value:ct})=>nt?c.createElement(ne.Ex,null):mt?c.createElement(ne.Gk,{title:"Error encountered while fetching search results",error:mt}):ct!=null&&ct.results.length?(0,_.isFunction)(R)?R(ct):c.createElement(g.S,{...X,results:ct.results},R):B)},At=Ce=>c.createElement(p.fC,{attributes:{pluginId:"search",extension:"SearchResult"}},c.createElement(Tt,{...Ce})),Wt=Ce=>{const{error:Me,loading:R,resultItems:B,renderResultItem:X=jt=>React.createElement(HigherOrderDefaultResultListItem,{key:jt.document.location,result:jt.document}),disableRenderingWithNoResults:nt,noResultsComponent:mt=nt?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...ct}=Ce;return R?React.createElement(Progress,null):Me?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:Me}):B!=null&&B.length?React.createElement(List,{...ct},B.map(X)):React.createElement(React.Fragment,null,mt)},St=Ce=>{const{query:Me,renderResultItem:R,children:B,...X}=Ce,nt=useSearchResultListItemExtensions(B);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultList"}},React.createElement(vt,{query:Me},({loading:mt,error:ct,value:jt})=>React.createElement(Wt,{...X,error:ct,loading:mt,resultItems:jt==null?void 0:jt.results,renderResultItem:R!=null?R:nt})))},Ue=(0,z.Z)(Ce=>({listSubheader:{display:"flex",alignItems:"center"},listSubheaderName:{marginLeft:Ce.spacing(1),textTransform:"uppercase"},listSubheaderChip:{color:Ce.palette.text.secondary,margin:Ce.spacing(0,0,0,1.5)},listSubheaderFilter:{display:"flex",color:Ce.palette.text.secondary,margin:Ce.spacing(0,0,0,1.5)},listSubheaderLink:{marginLeft:"auto",display:"flex",alignItems:"center"},listSubheaderLinkIcon:{fontSize:"inherit",marginLeft:Ce.spacing(.5)}})),Xe=Ce=>{const Me=Ue(),{label:R,children:B,...X}=Ce;return React.createElement(Chip,{...X,className:Me.listSubheaderFilter,variant:"outlined",label:React.createElement(React.Fragment,null,R,": ",B)})},Mt=()=>null,le=(0,z.Z)(Ce=>({root:{fontSize:"inherit","&:focus":{outline:"none",background:Ce.palette.common.white},"&:not(:focus)":{cursor:"pointer",color:Ce.palette.primary.main,"&:hover":{textDecoration:"underline"}}}})),Be=Ce=>{const Me=le(),{label:R,value:B="None",onChange:X,onDelete:nt}=Ce,mt=useCallback(ct=>{X(ct.target.value)},[X]);return React.createElement(Xe,{label:R,onDelete:nt},React.createElement(Typography,{role:"textbox",component:"span",className:Me.root,onChange:mt,contentEditable:!0,suppressContentEditableWarning:!0},B==null?void 0:B.toString()))},ie=(0,z.Z)(Ce=>({root:{fontSize:"inherit","&:not(:focus)":{cursor:"pointer",color:Ce.palette.primary.main,"&:hover":{textDecoration:"underline"}},"&:focus":{outline:"none"},"&>div:first-child":{padding:0}}})),Ge=Ce=>{const Me=ie(),{label:R,value:B="none",onChange:X,onDelete:nt,children:mt}=Ce,ct=useCallback(jt=>{X(jt.target.value)},[X]);return React.createElement(Xe,{label:R,onDelete:nt},React.createElement(Select,{className:Me.root,value:B,onChange:ct,input:React.createElement(InputBase,null),IconComponent:Mt},React.createElement(MenuItem,{value:"none"},"None"),mt))};function tt(Ce){const Me=Ue(),[R,B]=useState(null),{error:X,loading:nt,icon:mt,title:ct,titleProps:jt={},link:dn=React.createElement(React.Fragment,null,"See all",React.createElement(ArrowRightIcon,{className:Me.listSubheaderLinkIcon})),linkProps:An={},filterOptions:bn,renderFilterOption:F=$e=>React.createElement(MenuItem,{key:String($e),value:String($e)},String($e)),filterFields:H,renderFilterField:Ne,resultItems:it,renderResultItem:Gt=$e=>React.createElement(HigherOrderDefaultResultListItem,{key:$e.document.location,result:$e.document}),disableRenderingWithNoResults:Dt,noResultsComponent:mn=Dt?null:React.createElement(EmptyState,{missing:"data",title:"Sorry, no results were found"}),...un}=Ce,Cn=useCallback($e=>{B($e.currentTarget)},[]),Oe=useCallback(()=>{B(null)},[]);return nt?React.createElement(Progress,null):X?React.createElement(ResponseErrorPanel,{title:"Error encountered while fetching search results",error:X}):it!=null&&it.length?React.createElement(List,{...un},React.createElement(ListSubheader,{className:Me.listSubheader},mt,React.createElement(Typography,{className:Me.listSubheaderName,component:"strong",...jt},ct),bn?React.createElement(Chip,{className:Me.listSubheaderChip,component:"button",icon:React.createElement(AddIcon,null),variant:"outlined",label:"Add filter","aria-controls":"filters-menu","aria-haspopup":"true",onClick:Cn}):null,bn?React.createElement(Menu,{id:"filters-menu",anchorEl:R,open:Boolean(R),onClose:Oe,onClick:Oe,keepMounted:!0},bn.map(F)):null,H==null?void 0:H.map($e=>{var st;return(st=Ne==null?void 0:Ne($e))!=null?st:null}),React.createElement(Link,{className:Me.listSubheaderLink,to:"/search",...An},dn)),it.map(Gt)):React.createElement(React.Fragment,null,mn)}function ot(Ce){const{query:Me,children:R,renderResultItem:B,linkProps:X={},...nt}=Ce,mt=useSearchResultListItemExtensions(R);return React.createElement(AnalyticsContext,{attributes:{pluginId:"search",extension:"SearchResultGroup"}},React.createElement(vt,{query:Me},({loading:ct,error:jt,value:dn},{term:An,types:bn,pageCursor:F,filters:H={}})=>{const Ne=`/search?${qs.stringify({term:An,types:bn,filters:H,pageCursor:F,query:An},{arrayFormat:"brackets"})}`;return React.createElement(tt,{...nt,error:jt,loading:ct,linkProps:{to:Ne,...X},filterFields:Object.keys(H),resultItems:dn==null?void 0:dn.results,renderResultItem:B!=null?B:mt})}))}const Rt=(0,z.Z)(Ce=>({root:{display:"flex",justifyContent:"space-between",gap:Ce.spacing(2),margin:Ce.spacing(2,0)}})),en=()=>{const{fetchNextPage:Ce,fetchPreviousPage:Me}=rt(),R=Rt();return!Ce&&!Me?c.createElement(c.Fragment,null):c.createElement("nav",{"aria-label":"pagination navigation",className:R.root},c.createElement(be.Z,{"aria-label":"previous page",disabled:!Me,onClick:Me,startIcon:c.createElement(T.Z,null)},"Previous"),c.createElement(be.Z,{"aria-label":"next page",disabled:!Ce,onClick:Ce,endIcon:c.createElement(Pt.Z,null)},"Next"))}},81024:(xn,Yt,e)=>{"use strict";e.d(Yt,{S:()=>zt,a:()=>qt,b:()=>bt,c:()=>ke,r:()=>ut});var i=e(32272),p=e(19126),g=e.n(p),j=e(92573),k=e(30705),o=e(57032),z=e(2784),He=e(1849),Ze=e(73557),a=e(79692),xe=e(94339),Ee=e(32552),se=e(24579),Y=e(27616),Fe=e(8284),ge=e(70660),_e=e(11776),Q=e(85256),be=e(38402),M=e(86136),c=e(49378),S=e(99152),_=e(6487),b=e(42494),m=e(56939),ve=e(73698),ee=e(7089),he=e(12231),J=e(21324),ne=e(62155),re=e(38016),Pe=e(56881),Pt=e(64279),T=Object.defineProperty,rn=(yt,Ft,I)=>Ft in yt?T(yt,Ft,{enumerable:!0,configurable:!0,writable:!0,value:I}):yt[Ft]=I,de=(yt,Ft,I)=>(rn(yt,typeof Ft!="symbol"?Ft+"":Ft,I),I);class Bt{constructor(Ft){de(this,"discoveryApi"),de(this,"identityApi"),this.discoveryApi=Ft.discoveryApi,this.identityApi=Ft.identityApi}async query(Ft){const{token:I}=await this.identityApi.getCredentials(),W=g().stringify(Ft),O=`${await this.discoveryApi.getBaseUrl("search")}/query?${W}`,D=await fetch(O,{headers:I?{Authorization:`Bearer ${I}`}:{}});if(!D.ok)throw await i.VL.fromResponse(D);return D.json()}}const ut=(0,k.NT)({id:"search"}),rt=(0,k.rx)({id:"search",apis:[(0,k.ni)({api:j.gK,deps:{discoveryApi:o.q,identityApi:o.t},factory:({discoveryApi:yt,identityApi:Ft})=>new Bt({discoveryApi:yt,identityApi:Ft})})],routes:{root:ut}}),bt=rt.provide((0,k.P4)({name:"SearchPage",component:()=>e.e(3509).then(e.bind(e,53509)).then(yt=>yt.SearchPage),mountPoint:ut})),ke=rt.provide((0,k.CO)({name:"SidebarSearchModal",component:{lazy:()=>e.e(8742).then(e.bind(e,38742)).then(yt=>yt.SidebarSearchModal)}})),_t=rt.provide((0,k.CO)({name:"HomePageSearchBar",component:{lazy:()=>e.e(8622).then(e.bind(e,8622)).then(yt=>yt.HomePageSearchBar)}})),at=()=>{const yt=(0,Ze.TH)(),{term:Ft,setTerm:I,types:W,setTypes:O,pageCursor:D,setPageCursor:ae,filters:fe,setFilters:Ke}=(0,j.Rx)(),ft=(0,He.Z)(yt.search);return(0,z.useEffect)(()=>{if(yt.search===ft)return;const Je=g().parse(yt.search.substring(1),{arrayLimit:0})||{};Je.filters&&Ke(Je.filters),Je.query&&I(Je.query),Je.pageCursor&&ae(Je.pageCursor),Je.types&&O(Je.types)},[ft,yt,I,O,ae,Ke]),(0,z.useEffect)(()=>{const Je=g().stringify({query:Ft,types:W,pageCursor:D,filters:fe},{arrayFormat:"brackets"}),wt=`${window.location.pathname}?${Je}`;window.history.replaceState(null,document.title,wt)},[Ft,W,D,fe]),null},zt=()=>{const yt=(0,Ze.pC)();return z.createElement(j.Nd,null,z.createElement(at,null),yt)},Ot=(0,a.Z)(yt=>({card:{backgroundColor:"rgba(0, 0, 0, .11)"},cardContent:{paddingTop:yt.spacing(1)},icon:{color:yt.palette.common.black},list:{width:"100%"},listItemIcon:{width:"24px",height:"24px"},accordion:{backgroundColor:yt.palette.background.paper},accordionSummary:{minHeight:"auto","&.Mui-expanded":{minHeight:"auto"}},accordionSummaryContent:{margin:yt.spacing(2,0),"&.Mui-expanded":{margin:yt.spacing(2,0)}},accordionDetails:{padding:yt.spacing(0,0,1)}})),Zt=yt=>{const Ft=Ot(),{filters:I,setPageCursor:W,setTypes:O,term:D,types:ae}=(0,j.Rx)(),fe=(0,o.u)(j.gK),[Ke,ft]=(0,z.useState)(!0),{defaultValue:Je,name:wt,showCounts:nn,types:Ae}=yt,Te=()=>ft(St=>!St),vt=St=>()=>{O(St!==""?[St]:[]),W(void 0),ft(!1)};(0,z.useEffect)(()=>{Je&&O([Je])},[]);const Tt=[{value:"",name:"All",icon:z.createElement(Pe.Z,null)},...Ae],At=ae[0]||"",{value:Wt}=(0,Pt.default)(async()=>{if(!nn)return{};const St=await Promise.all(Tt.map(Ue=>Ue.value).map(async Ue=>{const{numberOfResults:Xe}=await fe.query({term:D,types:Ue?[Ue]:[],filters:ae.includes(Ue)||!ae.length&&!Ue?I:{},pageLimit:0});return[Ue,Xe!==void 0?`${Xe>=1e4?">10000":Xe} results`:" -- "]}));return Object.fromEntries(St)},[I,nn,D,ae]);return z.createElement(xe.Z,{className:Ft.card},z.createElement(Ee.Z,{title:wt,titleTypographyProps:{variant:"overline"}}),z.createElement(se.Z,{className:Ft.cardContent},z.createElement(Y.Z,{className:Ft.accordion,expanded:Ke,onChange:Te},z.createElement(Fe.Z,{classes:{root:Ft.accordionSummary,content:Ft.accordionSummaryContent},expandIcon:z.createElement(re.Z,{className:Ft.icon}),IconButtonProps:{size:"small"}},Ke?"Collapse":Tt.filter(St=>St.value===At)[0].name),z.createElement(ge.Z,{classes:{root:Ft.accordionDetails}},z.createElement(_e.Z,{className:Ft.list,component:"nav","aria-label":"filter by type",disablePadding:!0,dense:!0},Tt.map(St=>z.createElement(z.Fragment,{key:St.value},z.createElement(Q.Z,null),z.createElement(be.Z,{selected:ae[0]===St.value||ae.length===0&&St.value==="",onClick:vt(St.value),button:!0},z.createElement(M.Z,null,(0,z.cloneElement)(St.icon,{className:Ft.listItemIcon})),z.createElement(c.Z,{primary:St.name,secondary:Wt&&Wt[St.value]})))))))))},dt=(0,a.Z)(yt=>({tabs:{borderBottom:`1px solid ${yt.palette.textVerySubtle}`},tab:{height:"50px",fontWeight:yt.typography.fontWeightBold,fontSize:yt.typography.pxToRem(13),color:yt.palette.text.primary,minWidth:"130px"}})),gt=yt=>{const Ft=dt(),{setPageCursor:I,setTypes:W,types:O}=(0,j.Rx)(),{defaultValue:D,types:ae}=yt,fe=(ft,Je)=>{W(Je!==""?[Je]:[]),I(void 0)};(0,z.useEffect)(()=>{D&&W([D])},[]);const Ke=[{value:"",name:"All"},...ae];return z.createElement(S.Z,{"aria-label":"List of search types tabs",className:Ft.tabs,indicatorColor:"primary",value:O.length===0?"":O[0],onChange:fe},Ke.map((ft,Je)=>z.createElement(_.Z,{key:Je,className:Ft.tab,label:ft.name,value:ft.value})))},Ut=(0,a.Z)(yt=>({label:{textTransform:"capitalize"},chips:{display:"flex",flexWrap:"wrap",marginTop:yt.spacing(1)},chip:{margin:2}})),qt=yt=>{const{className:Ft,defaultValue:I,name:W,values:O=[]}=yt,D=Ut(),{types:ae,setTypes:fe}=(0,j.Rx)();(0,ne.Z)(()=>{ae.length||(I&&Array.isArray(I)?fe(I):I&&fe([I]))});const Ke=ft=>{const Je=ft.target.value;fe(Je)};return z.createElement(b.Z,{className:Ft,variant:"filled",fullWidth:!0,"data-testid":"search-typefilter-next"},z.createElement(m.Z,{className:D.label,margin:"dense"},W),z.createElement(ve.Z,{multiple:!0,variant:"outlined",value:ae,onChange:Ke,placeholder:"All Results",renderValue:ft=>z.createElement("div",{className:D.chips},ft.map(Je=>z.createElement(ee.Z,{key:Je,label:Je,className:D.chip,size:"small"})))},O.map(ft=>z.createElement(he.Z,{key:ft,value:ft},z.createElement(J.Z,{checked:ae.indexOf(ft)>-1}),z.createElement(c.Z,{primary:ft})))))};qt.Accordion=yt=>z.createElement(Zt,{...yt}),qt.Tabs=yt=>z.createElement(gt,{...yt})},7310:(xn,Yt,e)=>{"use strict";e.d(Yt,{M:()=>j,T:()=>Ee,a:()=>g});var i=e(57032),p=e(30705);const g=(0,i.c)({id:"plugin.techradar.service"});var j=(se=>(se[se.Down=-1]="Down",se[se.NoChange=0]="NoChange",se[se.Up=1]="Up",se))(j||{});const k=new Array;k.push({id:"adopt",name:"ADOPT",color:"#5BA300",description:"Commodi accusantium culpa sed itaque excepturi rem eum nulla possimus."}),k.push({id:"trial",name:"TRIAL",color:"#009EB0",description:"Recusandae possimus ipsum dolores."}),k.push({id:"assess",name:"ASSESS",color:"#C7BA00",description:"In asperiores repellat error recusandae et adipisci laborum porro."}),k.push({id:"hold",name:"HOLD",color:"#E09B96",description:"Esse mollitia in."});const o=new Array;o.push({id:"infrastructure",name:"Infrastructure"}),o.push({id:"frameworks",name:"Frameworks"}),o.push({id:"languages",name:"Languages"}),o.push({id:"process",name:"Process"});const z=new Array;z.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06"),description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua"}],key:"javascript",id:"javascript",title:"JavaScript",quadrant:"languages",links:[{url:"https://www.javascript.com/",title:"Learn more"},{url:"https://www.typescriptlang.org/",title:"TypeScript"}],description:'Excepteur **sint** occaecat *cupidatat* non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n```ts\nconst x = "3";\n```\n'}),z.push({timeline:[{moved:-1,ringId:"adopt",date:new Date("2020-08-06"),description:"Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"}],key:"typescript",id:"typescript",title:"TypeScript",quadrant:"languages",description:"Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat"}),z.push({timeline:[{moved:1,ringId:"adopt",date:new Date("2020-08-06"),description:"Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur"}],links:[{url:"https://webpack.js.org/",title:"Learn more"}],key:"webpack",id:"webpack",title:"Webpack",quadrant:"frameworks"}),z.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],links:[{url:"https://reactjs.org/",title:"Learn more"}],key:"react",id:"react",title:"React",quadrant:"frameworks"}),z.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"code-reviews",id:"code-reviews",title:"Code Reviews",quadrant:"process"}),z.push({timeline:[{moved:0,ringId:"assess",date:new Date("2020-08-06")}],key:"mob-programming",id:"mob-programming",title:"Mob Programming",quadrant:"process"}),z.push({timeline:[{moved:0,ringId:"adopt",date:new Date("2020-08-06")}],key:"docs-like-code",id:"docs-like-code",title:"Docs-like-code",quadrant:"process"}),z.push({timeline:[{ringId:"hold",date:new Date("2020-08-06")}],key:"force-push",id:"force-push",title:"Force push to master",quadrant:"process"}),z.push({timeline:[{ringId:"adopt",date:new Date("2020-08-06"),description:"long description"},{ringId:"trial",date:new Date("2020-07-05"),description:"long description"}],links:[{url:"https://github.com",title:"Learn more"}],key:"github-actions",id:"github-actions",title:"GitHub Actions",quadrant:"infrastructure"});const He={entries:z,quadrants:o,rings:k};class Ze{async load(){return He}}const a=(0,p.NT)({id:"tech-radar"}),Ee=(0,p.rx)({id:"tech-radar",routes:{root:a},apis:[(0,p.ni)(g,new Ze)]}).provide((0,p.P4)({name:"TechRadarPage",component:()=>e.e(8272).then(e.bind(e,88272)).then(function(se){return se.b}).then(se=>se.RadarPage),mountPoint:a}))},65609:(xn,Yt,e)=>{"use strict";e.d(Yt,{EU:()=>wt});var i=e(57032),p=e(30705),g=e(66565),j=e(2784),k=e(12576),o=e(15459),z=e(77277),He=e(79692),Ze=e(8560),a=e(27556),xe=e(11433),Ee=e(60364),se=e(12231),Y=e(49378),Fe=e(90436),ge=e(95544),_e=e(61837),Q=e(51209),be=e(38016),M=e(82717),c=e.n(M),S=e(1854),_=e(49462),b=e(31654),m=e(49558),ve=e(65549),ee=e(17373),he=e(85224),J=e(96103);const ne=".md-nav__item--nested .md-toggle",re="@backstage/techdocs-addons/nav-expanded",Pe=(0,o.Z)({root:{position:"absolute",left:"220px",top:"19px",padding:0,minWidth:0}})(z.Z),Pt=(0,o.Z)({root:{height:"20px",width:"20px"}})(Q.Z),T=(0,o.Z)({root:{height:"20px",width:"20px"}})(be.Z),rn=()=>{const Te={expandAllNestedNavs:!1},{value:vt,set:Tt}=(0,k.Z)(re,{defaultValue:Te}),[At,Wt]=(0,j.useState)(!1),[...St]=(0,g.pV)([ne]),Ue=(0,j.useCallback)(Mt=>{const le=Mt.checked,Be=vt==null?void 0:vt.expandAllNestedNavs;return!!(Be&&!le||!Be&&le)},[vt]);(0,j.useEffect)(()=>{St!=null&&St.length&&(Wt(!0),St.forEach(Mt=>{Ue(Mt)&&Mt.click()}))},[vt,Ue,St]);const Xe=()=>{Tt(Mt=>({expandAllNestedNavs:!(Mt!=null&&Mt.expandAllNestedNavs)}))};return j.createElement(j.Fragment,null,At?j.createElement(Pe,{size:"small",onClick:Xe,"aria-label":vt!=null&&vt.expandAllNestedNavs?"collapse-nav":"expand-nav"},vt!=null&&vt.expandAllNestedNavs?j.createElement(T,null):j.createElement(Pt,null)):null)},de="techdocs-report-issue",Bt=`#${de}`,ut='[title^="Edit this page"]',rt='[title^="Leave feedback for"]',bt='[data-md-component="main"] .md-content',ke=(Te,vt)=>vt==="github"?(0,S.BT)(Te,"blob"):vt==="gitlab"?(0,S.ah)(Te,"blob"):(console.error(`Invalid SCM type ${vt} found in ReportIssue addon for URL ${Te}!`),Te),_t=Te=>{const vt=Te.toString().substring(0,70),Tt=vt.length===70?"...":"";return`Documentation feedback: ${vt}${Tt}`},at=(Te,vt,Tt)=>{const At="## Documentation Feedback \u{1F4DD}",Wt="#### The highlighted text:",St="#### The comment on the text:",Ue="_>replace this line with your comment<_",Xe=Te.toString().trim().split(`
`).map(le=>`> ${le.trim()}`).join(`
`),Mt=[`${Tt} URL: <${window.location.href}> 
Markdown URL: <${vt}>`];return`${At}

 ${Wt} 

 ${Xe}

 ${St} 
 ${Ue}

 ___
${Mt}`},zt=Te=>{var vt,Tt;const At={title:"",body:""},Wt=(0,g.oi)(Te),[St]=(0,g.pV)([ut]),Ue=(vt=St==null?void 0:St.href)!=null?vt:"",Xe=(0,i.u)(_.q3),le=(0,i.u)(i.p).getOptionalString("app.title")||"Backstage";if(!Wt||!Ue)return At;const Be=(Tt=Xe.byUrl(Ue))==null?void 0:Tt.type;return Be?{title:_t(Wt),body:at(Wt,ke(Ue,Be),le)}:At},Ot=()=>{var Te,vt;const Tt=(0,i.u)(_.q3),[At]=(0,g.pV)([ut]),Wt=(Te=At==null?void 0:At.href)!=null?Te:"";if(!Wt)return null;const St=(vt=Tt.byUrl(Wt))==null?void 0:vt.type;return St?{...c()(ke(Wt,St)),type:St}:null},Zt=(0,He.Z)(Te=>({root:{display:"grid",gridGap:Te.spacing(1),gridAutoFlow:"column",justifyContent:"center",alignItems:"center",color:Te.palette.common.black,fontSize:Te.typography.button.fontSize}})),dt=({type:Te})=>Te==="github"?m.fy:b.Z,gt=({type:Te})=>Te==="github"?"Github":"Gitlab",Ut=(Te,vt)=>{const{title:Tt,body:At}=vt,Wt=encodeURIComponent(Tt),St=encodeURIComponent(At),{protocol:Ue,resource:Xe,owner:Mt,name:le,type:Be}=Te,ie=`${Ue}://${Xe}/${Mt}/${le}`,Ge=encodeURI(ie);return Be==="github"?`${Ge}/issues/new?title=${Wt}&body=${St}`:`${Ge}/issues/new?issue[title]=${Wt}&issue[description]=${St}`},qt=({template:Te,repository:vt})=>{const Tt=Zt(),At=dt(vt),Wt=Ut(vt,Te);return j.createElement(m.rU,{className:Tt.root,to:Wt,target:"_blank"},j.createElement(At,null)," Open new ",gt(vt)," issue")},yt=(0,He.Z)(Te=>({root:{transform:"translate(-100%, -100%)",position:"absolute",padding:Te.spacing(1),zIndex:Te.zIndex.tooltip,background:Te.palette.common.white}})),Ft=({debounceTime:Te=500,templateBuilder:vt})=>{const Tt=yt(),[At,Wt]=(0,j.useState)(),St=Ot(),Ue=zt(Te),Xe=(0,g.oi)(Te),[Mt,le]=(0,g.pV)([bt,rt]);let[Be]=(0,g.pV)([Bt]);return le&&(le.style.display="none"),(0,j.useEffect)(()=>{if(!St||!Xe||!Xe.containsNode(Mt,!0)||Xe!=null&&Xe.containsNode(Be,!0))return;const ie=Mt.getBoundingClientRect(),Ge=Xe.getRangeAt(0).getBoundingClientRect();Wt({top:`${Ge.top-ie.top-16}px`,left:`${Ge.left+Ge.width/2}px`})},[Xe,Mt,Be]),!Xe||!St||!["github","gitlab"].includes(St.type)?null:(Be||(Be=document.createElement("div"),Be.setAttribute("id",de),Mt.prepend(Be)),j.createElement(Ze.Z,{container:Be},j.createElement(a.Z,{"data-testid":"report-issue-addon",className:Tt.root,style:At},j.createElement(qt,{repository:St,template:vt?vt({selection:Xe}):Ue}))))},I="0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.13),0 0 0 1px rgba(0,0,0,0.02)",W=(0,o.Z)(Te=>({root:{height:2,padding:"15px 0"},thumb:{height:18,width:18,backgroundColor:Te.palette.common.white,boxShadow:I,marginTop:-9,marginLeft:-9,"&:focus, &:hover, &$active":{boxShadow:"0 3px 1px rgba(0,0,0,0.1),0 4px 8px rgba(0,0,0,0.3),0 0 0 1px rgba(0,0,0,0.02)","@media (hover: none)":{boxShadow:I}}},active:{},valueLabel:{top:"100%",left:"50%",transform:"scale(1) translate(-50%, -5px) !important","& *":{color:Te.palette.common.black,fontSize:Te.typography.caption.fontSize,background:"transparent"}},track:{height:2},rail:{height:2,opacity:.5},mark:{height:10,width:1,marginTop:-4},markActive:{opacity:1,backgroundColor:"currentColor"}}))(xe.Z),O={key:"techdocs.addons.settings.textsize",defaultValue:100},D=[{value:90},{value:100},{value:115},{value:130},{value:150}],ae=(0,He.Z)(Te=>({container:{color:Te.palette.textSubtle,display:"flex",alignItems:"center",margin:0,minWidth:200},menuItem:{"&:hover":{background:"transparent"}},decreaseButton:{marginRight:Te.spacing(1)},increaseButton:{marginLeft:Te.spacing(1)}})),fe=()=>{const Te=ae(),vt=(0,Ee.Z)(),[Tt]=(0,g.pV)(["body"]),[At,Wt]=(0,j.useState)(()=>{const tt=localStorage==null?void 0:localStorage.getItem(O.key);return tt?parseInt(tt,10):O.defaultValue}),St=(0,j.useMemo)(()=>D.map(tt=>tt.value),[]),Ue=(0,j.useMemo)(()=>St.indexOf(At),[St,At]),Xe=(0,j.useMemo)(()=>St[0],[St]),Mt=(0,j.useMemo)(()=>St[St.length-1],[St]),le=(0,j.useCallback)(()=>`${At}%`,[At]),Be=(0,j.useCallback)((tt,ot)=>{Array.isArray(ot)||(Wt(ot),localStorage==null||localStorage.setItem(O.key,String(ot)))},[Wt]),ie=(0,j.useCallback)(tt=>{Be(tt,St[Ue-1])},[Ue,St,Be]),Ge=(0,j.useCallback)(tt=>{Be(tt,St[Ue+1])},[Ue,St,Be]);return(0,j.useEffect)(()=>{var tt,ot;if(!Tt)return;const Rt=(ot=(tt=vt.typography)==null?void 0:tt.htmlFontSize)!=null?ot:16;Tt.style.setProperty("--md-typeset-font-size",`${Rt*(At/100)}px`)},[Tt,At,vt]),j.createElement(se.Z,{className:Te.menuItem,button:!0,disableRipple:!0},j.createElement(Y.Z,{primary:j.createElement(Fe.Z,{variant:"subtitle2",color:"textPrimary"},"Text size"),secondary:j.createElement(ge.Z,{className:Te.container},j.createElement(_e.Z,{className:Te.decreaseButton,size:"small",edge:"start",disabled:At===Xe,onClick:ie,"aria-label":"Decrease text size"},j.createElement(ee.Z,null)),j.createElement(W,{value:At,"aria-labelledby":"text-size-slider",getAriaValueText:le,valueLabelDisplay:"on",valueLabelFormat:le,marks:D,step:null,min:Xe,max:Mt,onChangeCommitted:Be}),j.createElement(_e.Z,{className:Te.increaseButton,size:"small",edge:"end",disabled:At===Mt,onClick:Ge,"aria-label":"Increase text size"},j.createElement(ve.Z,null))),disableTypography:!0}))},Ke=()=>{const Te=(0,g.pV)(["img"]);return(0,j.useEffect)(()=>{let vt=null,Tt=new he.Z({pswpModule:J.Z,initialZoomLevel:1,secondaryZoomLevel:At=>{const Wt=At.elementSize.x,St=At.elementSize.y,Ue=At.panAreaSize.x,Xe=At.panAreaSize.y,Mt=Ue/Wt,le=Xe/St;return Math.min(Mt,le)},wheelToZoom:!0,arrowPrevSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowBackIosIcon" aria-label="fontSize large"><path d="M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"></path></svg>',arrowNextSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ArrowForwardIosIcon" aria-label="fontSize large"><path d="M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"></path></svg>',closeSVG:'<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="CloseIcon" aria-label="fontSize large"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>',zoomSVG:`<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeLarge  css-c1sh5i" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ZoomIcon" aria-label="fontSize large">
          <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" id="photoswipe-zoom-icon-zoomin-path"></path><path d="M12 10H 7 V 9 H 12 Z" id="photoswipe-zoom-icon-zoomout-path">
        </svg>`});return Te.forEach((At,Wt)=>{At.onclick=()=>(vt===null&&(vt=Te.map(St=>({element:St,src:St.src,msrc:St.src,alt:St.alt,width:St.clientWidth,height:St.clientHeight}))),Tt.loadAndOpen(Wt,vt),!1)}),Tt.init(),()=>{Tt.destroy(),Tt=null}},[Te]),null},ft=(0,p.rx)({id:"techdocsModuleAddonsContrib"}),Je=ft.provide((0,g.KY)({name:"ExpandableNavigation",location:g.oZ.PrimarySidebar,component:rn})),wt=ft.provide((0,g.KY)({name:"ReportIssue",location:g.oZ.Content,component:Ft})),nn=ft.provide((0,g.KY)({name:"TextSize",location:g.oZ.Settings,component:fe})),Ae=ft.provide((0,g.KY)({name:"LightBox",location:g.oZ.Content,component:Ke}))},66565:(xn,Yt,e)=>{"use strict";e.d(Yt,{$L:()=>_,DR:()=>_e,Dl:()=>m,KY:()=>be,Ox:()=>Pt,VA:()=>de,ZS:()=>ne,Zz:()=>ge,gT:()=>b,jM:()=>Fe,oZ:()=>Pe,oi:()=>bt,pV:()=>ut,ux:()=>rn,x1:()=>re});var i=e(2784),p=e(73557),g=e(30705),j=e(57032),k=e(64279),o=e(77446),z=e(34520),He=e(18473),Ze=e(70882),a=e(50236),xe=e(19219),Ee=e(49558),se=e(54073),Y=e.n(se);const Fe="techdocs.addons.addon.v1",ge="techdocs.addons.wrapper.v1",_e=()=>null;(0,g.R5)(_e,ge,!0);const Q=ke=>`${Fe}.${ke.toLocaleLowerCase("en-US")}`;function be(ke){const{name:_t,component:at}=ke;return(0,g.YO)({name:_t,component:{sync:zt=>i.createElement(at,{...zt})},data:{[Fe]:ke,[Q(_t)]:!0}})}const M=(ke,_t)=>ke.selectByComponentData({key:_t}).getElements()[0],c=ke=>ke.selectByComponentData({key:ge}).selectByComponentData({key:Fe}),S=ke=>ke.selectByComponentData({key:ge}).findComponentData({key:Fe}),_=()=>{const ke=(0,p.pC)(),_t=(0,g.vJ)(ke,c),at=(0,g.vJ)(ke,S),zt=(0,i.useCallback)(dt=>{var gt;if(!_t||!dt)return null;const Ut=Q(dt.name);return(gt=M(_t,Ut))!=null?gt:null},[_t]),Ot=(0,i.useCallback)(dt=>{const gt=at.find(Ut=>Ut.name===dt);return gt?zt(gt):null},[at,zt]),Zt=(0,i.useCallback)(dt=>{const gt=at.filter(Ut=>Ut.location===dt);return gt.length?gt.map(zt):null},[at,zt]);return{renderComponentByName:Ot,renderComponentsByLocation:Zt}},b=(0,j.c)({id:"plugin.techdocs.service"}),m=(0,j.c)({id:"plugin.techdocs.storageservice"});function ve(ke,_t){return _t.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")||(ke.kind=ke.kind.toLocaleLowerCase(),ke.name=ke.name.toLocaleLowerCase(),ke.namespace=ke.namespace.toLocaleLowerCase()),ke}const ee=(ke,_t)=>(0,z.eE)(ke)===(0,z.eE)(_t),he={title:"",subtitle:"",setTitle:()=>{},setSubtitle:()=>{},setShadowRoot:()=>{},metadata:{loading:!0},entityMetadata:{loading:!0},entityRef:{kind:"",name:"",namespace:""}},J=(0,He.CT)("techdocs-reader-page-context"),ne=(0,i.memo)(ke=>{const{entityRef:_t,children:at}=ke,zt=(0,j.u)(b),Ot=(0,j.u)(j.p),Zt=(0,k.default)(async()=>zt.getEntityMetadata(_t),[_t]),dt=(0,o.Z)(async()=>zt.getTechDocsMetadata(_t),[_t]),[gt,Ut]=(0,i.useState)(he.title),[qt,yt]=(0,i.useState)(he.subtitle),[Ft,I]=(0,i.useState)(he.shadowRoot);(0,i.useEffect)(()=>{Ft&&!dt.value&&!dt.loading&&dt.retry()},[dt.value,dt.loading,Ft,dt.retry,dt]);const W={metadata:dt,entityRef:ve(_t,Ot),entityMetadata:Zt,shadowRoot:Ft,setShadowRoot:I,title:gt,setTitle:Ut,subtitle:qt,setSubtitle:yt},O=(0,He.EI)({1:W});return i.createElement(g.fC,{attributes:{entityRef:(0,z.eE)(_t)}},i.createElement(J.Provider,{value:O},at instanceof Function?at(W):at))},(ke,_t)=>ee(ke.entityRef,_t.entityRef)),re=()=>{const ke=(0,i.useContext)(J);if(ke===void 0)return he;const _t=ke.atVersion(1);if(_t===void 0)throw new Error("No context found for version 1.");return _t},Pe=Object.freeze({Header:"Header",Subheader:"Subheader",Settings:"Settings",PrimarySidebar:"PrimarySidebar",SecondarySidebar:"SecondarySidebar",Content:"Content"}),Pt="TECH_DOCS_SHADOW_DOM_STYLE_LOAD",T=ke=>{(0,i.useEffect)(()=>{var _t;if(!ke)return()=>{};const at=ke.querySelectorAll('head > link[rel="stylesheet"]');let zt=(_t=at==null?void 0:at.length)!=null?_t:0;const Ot=new CustomEvent(Pt);if(!zt)return ke.dispatchEvent(Ot),()=>{};const Zt=()=>{--zt===0&&ke.dispatchEvent(Ot)};return at==null||at.forEach(dt=>{dt.addEventListener("load",Zt)}),()=>{at==null||at.forEach(dt=>{dt.removeEventListener("load",Zt)})}},[ke])},rn=ke=>{const[_t,at]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(!ke)return()=>{};at(!0);const zt=ke.style;zt.setProperty("opacity","0");const Ot=()=>{at(!1),zt.setProperty("opacity","1")};return ke.addEventListener(Pt,Ot),()=>{ke.removeEventListener(Pt,Ot)}},[ke]),_t},de=ke=>{const{element:_t,onAppend:at,children:zt}=ke,[Ot,Zt]=(0,i.useState)((0,Ze.Ue)({...(0,a.Z)(),insertionPoint:void 0}));T(_t);const dt=rn(_t),gt=(0,i.useCallback)(Ut=>{if(!_t||!Ut)return;Zt((0,Ze.Ue)({...(0,a.Z)(),insertionPoint:_t.querySelector("head")||void 0}));let qt=Ut.shadowRoot;qt||(qt=Ut.attachShadow({mode:"open"})),qt.replaceChildren(_t),typeof at=="function"&&at(qt)},[_t,at]);return i.createElement(i.Fragment,null,dt&&i.createElement(Ee.Ex,null),i.createElement(xe.ZP,{jss:Ot,sheetsManager:new Map},i.createElement("div",{ref:gt,"data-testid":"techdocs-native-shadowroot"}),zt))},Bt=()=>{const{shadowRoot:ke}=re();return ke},ut=ke=>{const _t=Bt();return _t?ke.map(at=>_t==null?void 0:_t.querySelectorAll(at)).filter(at=>at.length).map(at=>Array.from(at)).flat():[]},rt=ke=>ke.toString()&&ke.rangeCount&&ke.getRangeAt(0).getBoundingClientRect().top,bt=(ke=0)=>{const _t=Bt(),[at,zt]=(0,i.useState)(null),Ot=(0,i.useMemo)(()=>Y()(()=>{const Zt=_t,dt=Zt.getSelection?Zt.getSelection():document.getSelection();dt&&rt(dt)?zt(dt):zt(null)},ke),[_t,zt,ke]);return(0,i.useEffect)(()=>(window.document.addEventListener("selectionchange",Ot),()=>{Ot.cancel(),window.document.removeEventListener("selectionchange",Ot)}),[Ot]),at}},78832:(xn,Yt,e)=>{"use strict";e.d(Yt,{E:()=>Fe,a:()=>_e,c:()=>Q,d:()=>be,t:()=>se});var i=e(2784),p=e(73557),g=e(34520),j=e(66565),k=e(67266),o=e(30705),z=e(57032),He=e(42054),Ze=e(33019),a=e(38334),xe=e(78373),Ee=e(73495);const se=(0,o.rx)({id:"techdocs",apis:[(0,o.ni)({api:j.Dl,deps:{configApi:z.p,discoveryApi:z.q,identityApi:z.t,fetchApi:z.s},factory:({configApi:he,discoveryApi:J,identityApi:ne,fetchApi:re})=>new k.a({configApi:he,discoveryApi:J,identityApi:ne,fetchApi:re})}),(0,o.ni)({api:j.gT,deps:{configApi:z.p,discoveryApi:z.q,fetchApi:z.s},factory:({configApi:he,discoveryApi:J,fetchApi:ne})=>new k.T({configApi:he,discoveryApi:J,fetchApi:ne})})],routes:{root:k.r,docRoot:k.b,entityContent:k.c}}),Y=se.provide((0,o.P4)({name:"TechdocsPage",component:()=>Promise.resolve().then(function(){return ee}).then(he=>he.Router),mountPoint:k.r})),Fe=se.provide((0,o.P4)({name:"EntityTechdocsContent",component:()=>Promise.resolve().then(function(){return ee}).then(he=>he.EmbeddedDocsRouter),mountPoint:k.c})),ge=se.provide((0,o.P4)({name:"TechDocsCustomHome",component:()=>e.e(979).then(e.bind(e,979)).then(he=>he.TechDocsCustomHome),mountPoint:k.r})),_e=se.provide((0,o.P4)({name:"TechDocsIndexPage",component:()=>Promise.resolve().then(e.bind(e,38334)).then(function(he){return he.d}).then(he=>he.TechDocsIndexPage),mountPoint:k.r})),Q=se.provide((0,o.P4)({name:"TechDocsReaderPage",component:()=>e.e(4376).then(e.bind(e,34376)).then(he=>he.TechDocsReaderPage),mountPoint:k.b})),be=se.provide((0,He.c)({name:"TechDocsSearchResultListItem",component:()=>Promise.resolve().then(e.bind(e,77529)).then(he=>he.TechDocsSearchResultListItem),predicate:he=>he.type==="techdocs"})),M="backstage.io/techdocs-entity",c=({entity:he})=>{var J,ne;let re=(0,g.iB)(he);if((J=he.metadata.annotations)!=null&&J[M])try{re=(0,g.of)((ne=he.metadata.annotations)==null?void 0:ne[M])}catch{}return i.createElement(Q,{entityRef:re},i.createElement(Ze.d,null),i.createElement(Ze.c,{withSearch:!1}))},S="backstage.io/techdocs-ref",_="backstage.io/techdocs-entity";var ee=Object.freeze({__proto__:null,isTechDocsAvailable:he=>{var J,ne,re,Pe;return Boolean((ne=(J=he==null?void 0:he.metadata)==null?void 0:J.annotations)==null?void 0:ne[S])||Boolean((Pe=(re=he==null?void 0:he.metadata)==null?void 0:re.annotations)==null?void 0:Pe[_])},Router:()=>i.createElement(p.Z5,null,i.createElement(p.AW,{path:"/",element:i.createElement(a.c,null)}),i.createElement(p.AW,{path:"/:namespace/:kind/:name/*",element:i.createElement(Ze.f,null)})),EmbeddedDocsRouter:he=>{var J,ne;const{children:re}=he,{entity:Pe}=(0,xe.u)(),Pt=(0,p.V$)([{path:"/*",element:i.createElement(c,{entity:Pe}),children:[{path:"*",element:re}]}]);return((J=Pe.metadata.annotations)==null?void 0:J[S])||((ne=Pe.metadata.annotations)==null?void 0:ne[_])?Pt:i.createElement(Ee.sk,{annotation:[S]})}})},38334:(xn,Yt,e)=>{"use strict";e.r(Yt),e.d(Yt,{D:()=>_,E:()=>b,T:()=>m,a:()=>he,b:()=>ee,c:()=>J,d:()=>ne,t:()=>Q});var i=e(2784),p=e(73557),g=e(49558),j=e(73495),k=e(78373),o=e(88285),z=e(30705),He=e(57032),Ze=e(95074),a=e(76635),xe=e.n(a),Ee=e(34520),se=e(67266),Y=e(39981),Fe=e(2337),ge=e(11640),_e=e(28347);function Q(re,Pe){return Pe.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?re:re.toLocaleLowerCase("en-US")}const be=(0,Fe.Z)({root:{color:"#f3ba37"}})(ge.Z),M={createCopyDocsUrlAction(re){return Pe=>({icon:()=>i.createElement(Y.Z,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>re(`${window.location.origin}${Pe.resolved.docsUrl}`)})},createStarEntityAction(re,Pe){return Pt=>{const T=Pt.entity,rn=re(T);return{cellStyle:{paddingLeft:"1em"},icon:()=>rn?i.createElement(be,null):i.createElement(_e.Z,null),tooltip:rn?"Remove from favorites":"Add to favorites",onClick:()=>Pe(T)}}}};function c(re){return re.metadata.title||re.metadata.name}const S={createNameColumn(){return{title:"Document",field:"entity.metadata.name",highlight:!0,render:re=>i.createElement(g.uw,{value:i.createElement(g.rU,{to:re.resolved.docsUrl},c(re.entity)),subvalue:re.entity.metadata.description})}},createOwnerColumn(){return{title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:re})=>i.createElement(j.rI,{entityRefs:re.ownedByRelations,defaultKind:"group"})}},createKindColumn(){return{title:"Kind",field:"entity.kind"}},createTypeColumn(){return{title:"Type",field:"entity.spec.type"}}},_=re=>{const{entities:Pe,title:Pt,loading:T,columns:rn,actions:de,options:Bt}=re,[,ut]=(0,Ze.Z)(),rt=(0,z.tg)(se.b),bt=(0,He.u)(He.p);if(!Pe)return null;const ke=Pe.map(Zt=>{var dt;const gt=(0,k.g)(Zt,Ee.S4);return{entity:Zt,resolved:{docsUrl:rt({namespace:Q((dt=Zt.metadata.namespace)!=null?dt:"default",bt),kind:Q(Zt.kind,bt),name:Q(Zt.metadata.name,bt)}),ownedByRelations:gt,ownedByRelationsTitle:gt.map(Ut=>(0,j.$3)(Ut,{defaultKind:"group"})).join(", ")}}}),_t=[S.createNameColumn(),S.createOwnerColumn(),S.createKindColumn(),S.createTypeColumn()],at=[M.createCopyDocsUrlAction(ut)],zt=20,Ot=ke&&ke.length>zt;return i.createElement(i.Fragment,null,T||ke&&ke.length>0?i.createElement(g.iA,{isLoading:T,options:{paging:Ot,pageSize:zt,search:!0,actionsColumnIndex:-1,...Bt},data:ke,columns:rn||_t,actions:de||at,title:Pt?`${Pt} (${ke.length})`:`All (${ke.length})`}):i.createElement(g.ub,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:i.createElement(g.Qj,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained"},"DOCS")}))};_.columns=S,_.actions=M;const b=re=>{var Pe,Pt;const{columns:T,actions:rn,options:de}=re,{loading:Bt,error:ut,entities:rt,filters:bt}=(0,j.wp)(),{isStarredEntity:ke,toggleStarredEntity:_t}=(0,j.CR)(),[,at]=(0,Ze.Z)(),zt=(0,a.capitalize)((Pt=(Pe=bt.user)==null?void 0:Pe.value)!=null?Pt:"all"),Ot=[M.createCopyDocsUrlAction(at),M.createStarEntityAction(ke,_t)];return ut?i.createElement(g.GB,{severity:"error",title:"Could not load available documentation."},i.createElement(g.Oi,{language:"text",text:ut.toString()})):i.createElement(_,{title:zt,entities:rt,loading:Bt,actions:rn||Ot,columns:T,options:de})};b.columns=S,b.actions=M;const m=re=>{var Pe;const{children:Pt}=re,rn=`Documentation available in ${(Pe=(0,He.u)(He.p).getOptionalString("organization.name"))!=null?Pe:"Backstage"}`;return i.createElement(g.g9,{title:"Documentation",subtitle:rn,themeId:"documentation"},Pt)};class ve{getCatalogFilters(){return{"metadata.annotations.backstage.io/techdocs-ref":o.n3}}}const ee=()=>{const{updateFilters:re}=(0,j.wp)();return(0,i.useEffect)(()=>{re({techdocs:new ve})},[re]),null},he=re=>{const{initialFilter:Pe="owned",columns:Pt,actions:T}=re;return i.createElement(m,null,i.createElement(g.VY,null,i.createElement(g.yW,{title:""},i.createElement(g.qt,null,"Discover documentation in your ecosystem.")),i.createElement(j.UO,null,i.createElement(j._i,null,i.createElement(j._i.Filters,null,i.createElement(ee,null),i.createElement(j.EW,{initialFilter:Pe}),i.createElement(j.dq,null),i.createElement(j.xE,null)),i.createElement(j._i.Content,null,i.createElement(b,{actions:T,columns:Pt}))))))},J=re=>(0,p.pC)()||i.createElement(he,{...re});var ne=Object.freeze({__proto__:null,TechDocsIndexPage:J})},33019:(xn,Yt,e)=>{"use strict";e.d(Yt,{a:()=>qn,c:()=>En,d:()=>Pa,f:()=>ya});var i=e(2784),p=e(73557),g=e(49558),j=e(66565),k=e(79692),o=e(12420),z=e(60905),He=e(90436),Ze=e(61837),a=e(77277),xe=e(4190),Ee=e(4614),se=e(41128),Y=e(60364),Fe=e(15459),ge=e(80030),_e=e(72379),Q=e(41547),be=e(41156),M=e(8560),c=e(15223),S=e(95544),_=e(48348),b=e(92573),m=e(77529),ve=e(99688),ee=e(98069),he=e(87685),J=e(57032),ne=e(30705),re=e(64279),Pe=e(77446),Pt=e(49462),T=e(35368),rn=e.n(T),de=e(1854),Bt=e(67097),ut=e(82717),rt=e.n(ut),bt=e(44882),ke=e(95074),_t=e(18671),at=e(73250),zt=e(78373),Ot=e(73495),Zt=e(34520),dt=e(76635),gt=e.n(dt),Ut=e(67266),qt=e(47603);function yt({contentLoading:q,content:Le,activeSyncState:et}){return q||et==="BUILD_READY_RELOAD"||!Le&&et==="CHECKING"?"CHECKING":!Le&&et==="BUILDING"?"INITIAL_BUILD":Le?et==="BUILDING"?"CONTENT_STALE_REFRESHING":et==="BUILD_READY"?"CONTENT_STALE_READY":et==="ERROR"?"CONTENT_STALE_ERROR":"CONTENT_FRESH":"CONTENT_NOT_FOUND"}function Ft(q,Le){const et={...q};switch(Le.type){case"sync":Le.state==="CHECKING"&&(et.buildLog=[]),et.activeSyncState=Le.state,et.syncError=Le.syncError;break;case"contentLoading":et.contentLoading=!0,et.contentError=void 0;break;case"content":typeof Le.path=="string"&&(et.path=Le.path),et.contentLoading=!1,et.content=Le.content,et.contentError=Le.contentError;break;case"buildLog":et.buildLog=et.buildLog.concat(Le.log);break;default:throw new Error}return["BUILD_READY","BUILD_READY_RELOAD"].includes(et.activeSyncState)&&["contentLoading","content"].includes(Le.type)&&(et.activeSyncState="UP_TO_DATE",et.buildLog=[]),et}function I(q,Le,et,U){var Z,P;const[$,N]=(0,i.useReducer)(Ft,{activeSyncState:"CHECKING",path:U,contentLoading:!0,buildLog:[]}),oe=(0,J.u)(j.Dl),{retry:pe}=(0,Pe.Z)(async()=>{N({type:"contentLoading"});try{const We=await oe.getEntityDocs({kind:q,namespace:Le,name:et},U);return N({type:"content",content:We,path:U}),We}catch(We){N({type:"content",contentError:We,path:U})}},[oe,q,Le,et,U]),te=(0,i.useRef)({content:void 0,reload:()=>{}});return te.current={content:$.content,reload:pe},(0,re.default)(async()=>{N({type:"sync",state:"CHECKING"});const We=setTimeout(()=>{N({type:"sync",state:"BUILDING"})},1e3);try{switch(await oe.syncEntityDocs({kind:q,namespace:Le,name:et},kt=>{N({type:"buildLog",log:kt})})){case"updated":te.current.content?N({type:"sync",state:"BUILD_READY"}):(te.current.reload(),N({type:"sync",state:"BUILD_READY_RELOAD"}));break;case"cached":N({type:"sync",state:"UP_TO_DATE"});break;default:N({type:"sync",state:"ERROR",syncError:new Error("Unexpected return state")});break}}catch(Qe){N({type:"sync",state:"ERROR",syncError:Qe})}finally{clearTimeout(We)}},[q,et,Le,oe,N,te]),{state:(0,i.useMemo)(()=>yt({activeSyncState:$.activeSyncState,contentLoading:$.contentLoading,content:$.content}),[$.activeSyncState,$.content,$.contentLoading]),contentReload:pe,path:$.path,content:$.content,contentErrorMessage:(Z=$.contentError)==null?void 0:Z.toString(),syncErrorMessage:(P=$.syncError)==null?void 0:P.toString(),buildLog:$.buildLog}}const W=(0,i.createContext)({}),O=()=>(0,i.useContext)(W),D=q=>{const{children:Le}=q,{"*":et=""}=(0,p.UO)(),{entityRef:U}=(0,j.x1)(),{kind:Z,namespace:P,name:$}=U,N=I(Z,P,$,et);return i.createElement(W.Provider,{value:N},Le instanceof Function?Le(N):Le)},ae=q=>Le=>i.createElement(D,null,i.createElement(q,{...Le})),fe=q=>q==null?void 0:q.document,Ke=q=>{const{entityId:Le,entityTitle:et,debounceTime:U=150}=q,[Z,P]=(0,i.useState)(!1),$=(0,p.s0)(),{setFilters:N,result:{loading:oe,value:pe}}=(0,b.Rx)(),[te,Se]=(0,i.useState)([]);(0,i.useEffect)(()=>{let tn=!0;if(tn&&pe){const on=pe.results.slice(0,10);Se(on)}return()=>{tn=!1}},[oe,pe]);const{kind:We,name:Qe,namespace:kt}=Le;(0,i.useEffect)(()=>{N(tn=>({...tn,kind:We,namespace:kt,name:Qe}))},[We,kt,Qe,N]);const Lt=(tn,on)=>{if(fe(on)){const{location:vn}=on.document;$(vn)}};return i.createElement(b.qO,{"data-testid":"techdocs-search-bar",size:"small",open:Z,getOptionLabel:()=>"",filterOptions:tn=>tn,onClose:()=>{P(!1)},onFocus:()=>{P(!0)},onChange:Lt,blurOnSelect:!0,noOptionsText:"No results found",value:null,options:te,renderOption:({document:tn,highlight:on})=>i.createElement(m.TechDocsSearchResultListItem,{result:tn,lineClamp:3,asListItem:!1,asLink:!1,title:tn.title,highlight:on}),loading:oe,inputDebounceTime:U,inputPlaceholder:`Search ${et||Le.name} docs`,freeSolo:!1})},ft=q=>{const Le={term:"",types:["techdocs"],pageCursor:"",filters:q.entityId};return i.createElement(b.Nd,{initialState:Le},i.createElement(Ke,{...q}))},Je=(0,k.Z)(q=>(0,o.Z)({paper:{width:"100%",[q.breakpoints.up("sm")]:{width:"75%"},[q.breakpoints.up("md")]:{width:"50%"},padding:q.spacing(2.5)},root:{height:"100%",overflow:"hidden"},logs:{background:q.palette.background.default}})),wt=({buildLog:q,onClose:Le})=>{const et=Je(),U=q.length===0?"Waiting for logs...":q.join(`
`);return i.createElement(z.Z,{container:!0,direction:"column",className:et.root,spacing:0,wrap:"nowrap"},i.createElement(z.Z,{item:!0,container:!0,justifyContent:"space-between",alignItems:"center",spacing:0,wrap:"nowrap"},i.createElement(He.Z,{variant:"h5"},"Build Details"),i.createElement(Ze.Z,{key:"dismiss",title:"Close the drawer",onClick:Le,color:"inherit"},i.createElement(he.Z,null))),i.createElement(z.Z,{item:!0,xs:!0},i.createElement(g.nU,{text:U,classes:{root:et.logs}})))},nn=({buildLog:q})=>{const Le=Je(),[et,U]=(0,i.useState)(!1);return i.createElement(i.Fragment,null,i.createElement(a.Z,{color:"inherit",onClick:()=>U(!0)},"Show Build Logs"),i.createElement(xe.ZP,{classes:{paper:Le.paper},anchor:"right",open:et,onClose:()=>U(!1)},i.createElement(wt,{buildLog:q,onClose:()=>U(!1)})))},Ae=({errorMessage:q})=>{const Le=(0,J.u)(J.p).getOptionalString("techdocs.builder"),et=(0,ne.z$)(),{entityRef:U}=(0,j.x1)(),Z=(0,p.TH)();(0,i.useEffect)(()=>{const{pathname:$,search:N,hash:oe}=Z;et.captureEvent("not-found",`${$}${N}${oe}`,{attributes:U})},[et,U,Z]);let P="";return Le!=="local"&&(P="Note that techdocs.builder is not set to 'local' in your config, which means this Backstage app will not generate docs if they are not found. Make sure the project's docs are generated and published by some external process (e.g. CI/CD pipeline). Or change techdocs.builder to 'local' to generate docs from this Backstage instance."),i.createElement(g.mf,{status:"404",statusMessage:q||"Documentation not found",additionalInfo:P})},Te=(0,k.Z)(q=>({root:{marginBottom:q.spacing(2)},message:{wordBreak:"break-word",overflowWrap:"anywhere"}})),vt=()=>{let q=null;const Le=Te(),{state:et,contentReload:U,contentErrorMessage:Z,syncErrorMessage:P,buildLog:$}=O();return et==="INITIAL_BUILD"&&(q=i.createElement(ve.Z,{classes:{root:Le.root},variant:"outlined",severity:"info",icon:i.createElement(Ee.Z,{size:"24px"}),action:i.createElement(nn,{buildLog:$})},"Documentation is accessed for the first time and is being prepared. The subsequent loads are much faster.")),et==="CONTENT_STALE_REFRESHING"&&(q=i.createElement(ve.Z,{variant:"outlined",severity:"info",icon:i.createElement(Ee.Z,{size:"24px"}),action:i.createElement(nn,{buildLog:$}),classes:{root:Le.root}},"A newer version of this documentation is being prepared and will be available shortly.")),et==="CONTENT_STALE_READY"&&(q=i.createElement(ve.Z,{variant:"outlined",severity:"success",action:i.createElement(a.Z,{color:"inherit",onClick:()=>U()},"Refresh"),classes:{root:Le.root}},"A newer version of this documentation is now available, please refresh to view.")),et==="CONTENT_STALE_ERROR"&&(q=i.createElement(ve.Z,{variant:"outlined",severity:"error",action:i.createElement(nn,{buildLog:$}),classes:{root:Le.root,message:Le.message}},"Building a newer version of this documentation failed."," ",P)),et==="CONTENT_NOT_FOUND"&&(q=i.createElement(i.Fragment,null,P&&i.createElement(ve.Z,{variant:"outlined",severity:"error",action:i.createElement(nn,{buildLog:$}),classes:{root:Le.root,message:Le.message}},"Building a newer version of this documentation failed."," ",P),i.createElement(Ae,{errorMessage:Z}))),q},Tt=/main\.[A-Fa-f0-9]{8}\.min\.css$/,At=/^https:\/\/fonts\.googleapis\.com/,Wt=/^https:\/\/fonts\.gstatic\.com/,St=q=>q.nodeName==="LINK",Ue=q=>{const Le=(q==null?void 0:q.getAttribute("href"))||"",et=Le.match(Tt),U=Le.match(At),Z=Le.match(Wt);return et||U||Z},Xe=q=>(St(q)&&!Ue(q)&&q.remove(),q),Mt=q=>q.nodeName==="IFRAME",le=(q,Le)=>{const et=q.getAttribute("src")||"";try{const{host:U}=new URL(et);return Le.includes(U)}catch{return!1}},Be=q=>Le=>(Mt(Le)&&!le(Le,q)&&Le.remove(),Le),ie=()=>{const q=(0,J.u)(J.p);return(0,i.useMemo)(()=>q.getOptionalConfig("techdocs.sanitizer"),[q])},Ge=()=>{const q=ie();return(0,i.useCallback)(async Le=>{const et=q==null?void 0:q.getOptionalStringArray("allowedIframeHosts");rn().addHook("beforeSanitizeElements",Xe);const U=["link"];return et&&(U.push("iframe"),rn().addHook("beforeSanitizeElements",Be(et))),rn().sanitize(Le.outerHTML,{ADD_TAGS:U,FORBID_TAGS:["style"],WHOLE_DOCUMENT:!0,RETURN_DOM:!0})},[q])};var tt=({theme:q})=>`
/*==================  Variables  ==================*/
/*
  As the MkDocs output is rendered in shadow DOM, the CSS variable definitions on the root selector are not applied. Instead, they have to be applied on :host.
  As there is no way to transform the served main*.css yet (for example in the backend), we have to copy from main*.css and modify them.
*/

:host {
  /* FONT */
  --md-default-fg-color: ${q.palette.text.primary};
  --md-default-fg-color--light: ${q.palette.text.secondary};
  --md-default-fg-color--lighter: ${(0,se.$n)(q.palette.text.secondary,.7)};
  --md-default-fg-color--lightest: ${(0,se.$n)(q.palette.text.secondary,.3)};

  /* BACKGROUND */
  --md-default-bg-color:${q.palette.background.default};
  --md-default-bg-color--light: ${q.palette.background.paper};
  --md-default-bg-color--lighter: ${(0,se.$n)(q.palette.background.paper,.7)};
  --md-default-bg-color--lightest: ${(0,se.$n)(q.palette.background.paper,.3)};

  /* PRIMARY */
  --md-primary-fg-color: ${q.palette.primary.main};
  --md-primary-fg-color--light: ${q.palette.primary.light};
  --md-primary-fg-color--dark: ${q.palette.primary.dark};
  --md-primary-bg-color: ${q.palette.primary.contrastText};
  --md-primary-bg-color--light: ${(0,se.$n)(q.palette.primary.contrastText,.7)};

  /* ACCENT */
  --md-accent-fg-color: var(--md-primary-fg-color);

  /* SHADOW */
  --md-shadow-z1: ${q.shadows[1]};
  --md-shadow-z2: ${q.shadows[2]};
  --md-shadow-z3: ${q.shadows[3]};

  /* EXTENSIONS */
  --md-admonition-fg-color: var(--md-default-fg-color);
  --md-admonition-bg-color: var(--md-default-bg-color);
  /* Admonitions and others are using SVG masks to define icons. These masks are defined as CSS variables. */
  --md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.55 11.2c-.23-.3-.5-.56-.76-.82-.65-.6-1.4-1.03-2.03-1.66C13.3 7.26 13 4.85 13.91 3c-.91.23-1.75.75-2.45 1.32-2.54 2.08-3.54 5.75-2.34 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.22.1-.46.04-.64-.12a.83.83 0 01-.15-.17c-1.1-1.43-1.28-3.48-.53-5.12C5.89 10 5 12.3 5.14 14.47c.04.5.1 1 .27 1.5.14.6.4 1.2.72 1.73 1.04 1.73 2.87 2.97 4.84 3.22 2.1.27 4.35-.12 5.96-1.6 1.8-1.66 2.45-4.32 1.5-6.6l-.13-.26c-.2-.46-.47-.87-.8-1.25l.05-.01m-3.1 6.3c-.28.24-.73.5-1.08.6-1.1.4-2.2-.16-2.87-.82 1.19-.28 1.89-1.16 2.09-2.05.17-.8-.14-1.46-.27-2.23-.12-.74-.1-1.37.18-2.06.17.38.37.76.6 1.06.76 1 1.95 1.44 2.2 2.8.04.14.06.28.06.43.03.82-.32 1.72-.92 2.27h.01z"/></svg>');
  --md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14h-2v-4h2m0 8h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>');
  --md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>');
  --md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>');
  --md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --md-nav-icon--prev: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>');
  --md-nav-icon--next: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>');
  --md-toc-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>');
  --md-clipboard-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12V1z"/></svg>');
  --md-search-result-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h7c-.41-.25-.8-.56-1.14-.9-.33-.33-.61-.7-.86-1.1H6V4h7v5h5v1.18c.71.16 1.39.43 2 .82V8l-6-6m6.31 16.9c1.33-2.11.69-4.9-1.4-6.22-2.11-1.33-4.91-.68-6.22 1.4-1.34 2.11-.69 4.89 1.4 6.22 1.46.93 3.32.93 4.79.02L22 23.39 23.39 22l-3.08-3.1m-3.81.1a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5z"/></svg>');
  --md-source-forks-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 3.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm0 2.122a2.25 2.25 0 1 0-1.5 0v.878A2.25 2.25 0 0 0 5.75 8.5h1.5v2.128a2.251 2.251 0 1 0 1.5 0V8.5h1.5a2.25 2.25 0 0 0 2.25-2.25v-.878a2.25 2.25 0 1 0-1.5 0v.878a.75.75 0 0 1-.75.75h-4.5A.75.75 0 0 1 5 6.25v-.878zm3.75 7.378a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0zm3-8.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5z"/></svg>');
  --md-source-repositories-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 1 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 0 1-1.072 1.05A2.495 2.495 0 0 1 2 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 0 1 1-1h8zM5 12.25v3.25a.25.25 0 0 0 .4.2l1.45-1.087a.25.25 0 0 1 .3 0L8.6 15.7a.25.25 0 0 0 .4-.2v-3.25a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25z"/></svg>');
  --md-source-stars-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.75.75 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694v.001z"/></svg>');
  --md-source-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 7.775V2.75a.25.25 0 0 1 .25-.25h5.025a.25.25 0 0 1 .177.073l6.25 6.25a.25.25 0 0 1 0 .354l-5.025 5.025a.25.25 0 0 1-.354 0l-6.25-6.25a.25.25 0 0 1-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.75 1.75 0 0 1 1 7.775zM6 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/></svg>');
  --md-version-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="m310.6 246.6-127.1 128c-7.1 6.3-15.3 9.4-23.5 9.4s-16.38-3.125-22.63-9.375l-127.1-128C.224 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75s3.12 25.75-6.08 34.85z"/></svg>');
}

:host > * {
  /* CODE */
  --md-code-fg-color: ${q.palette.text.primary};
  --md-code-bg-color: ${q.palette.background.paper};
  --md-code-hl-color: ${(0,se.Fq)(q.palette.warning.main,.5)};
  --md-code-hl-keyword-color: ${q.palette.type==="dark"?q.palette.primary.light:q.palette.primary.dark};
  --md-code-hl-function-color: ${q.palette.type==="dark"?q.palette.secondary.light:q.palette.secondary.dark};
  --md-code-hl-string-color: ${q.palette.type==="dark"?q.palette.success.light:q.palette.success.dark};
  --md-code-hl-number-color: ${q.palette.type==="dark"?q.palette.error.light:q.palette.error.dark};
  --md-code-hl-constant-color: var(--md-code-hl-function-color);
  --md-code-hl-special-color: var(--md-code-hl-function-color);
  --md-code-hl-name-color: var(--md-code-fg-color);
  --md-code-hl-comment-color: var(--md-default-fg-color--light);
  --md-code-hl-generic-color: var(--md-default-fg-color--light);
  --md-code-hl-variable-color: var(--md-default-fg-color--light);
  --md-code-hl-operator-color: var(--md-default-fg-color--light);
  --md-code-hl-punctuation-color: var(--md-default-fg-color--light);

  /* TYPESET */
  --md-typeset-font-size: 1rem;
  --md-typeset-color: var(--md-default-fg-color);
  --md-typeset-a-color: ${q.palette.link};
  --md-typeset-table-color: ${q.palette.text.primary};
  --md-typeset-del-color: ${q.palette.type==="dark"?(0,se.Fq)(q.palette.error.dark,.5):(0,se.Fq)(q.palette.error.light,.5)};
  --md-typeset-ins-color: ${q.palette.type==="dark"?(0,se.Fq)(q.palette.success.dark,.5):(0,se.Fq)(q.palette.success.light,.5)};
  --md-typeset-mark-color: ${q.palette.type==="dark"?(0,se.Fq)(q.palette.warning.dark,.5):(0,se.Fq)(q.palette.warning.light,.5)};
}

@media screen and (max-width: 76.1875em) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .9rem;
  }
}

@media screen and (max-width: 600px) {
  :host > * {
    /* TYPESET */
    --md-typeset-font-size: .7rem;
  }
}
`,ot=({theme:q})=>`
/*==================  Reset  ==================*/

body {
  --md-text-color: var(--md-default-fg-color);
  --md-text-link-color: var(--md-accent-fg-color);
  --md-text-font-family: ${q.typography.fontFamily};
  font-family: var(--md-text-font-family);
  background-color: unset;
}
`;const Rt="224px";var en=({theme:q,sidebar:Le})=>`
/*==================  Layout  ==================*/

/* mkdocs material v9 compat */
.md-nav__title {
  color: var(--md-default-fg-color);
}

.md-grid {
  max-width: 100%;
  margin: 0;
}

.md-nav {
  font-size: calc(var(--md-typeset-font-size) * 0.9);
}
.md-nav__link {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.md-nav__icon {
  height: 20px !important;
  width: 20px !important;
  margin-left:${q.spacing(1)}px;
}
.md-nav__icon svg {
  margin: 0;
  width: 20px !important;
  height: 20px !important;
}
.md-nav__icon:after {
  width: 20px !important;
  height: 20px !important;
}

.md-nav__item--active > .md-nav__link, a.md-nav__link--active {
  text-decoration: underline;
  color: var(--md-typeset-a-color);
}

.md-main__inner {
  margin-top: 0;
}

.md-sidebar {
  bottom: 75px;
  position: fixed;
  width: 16rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-color: rgb(193, 193, 193) #eee;
  scrollbar-width: thin;
}
.md-sidebar .md-sidebar__scrollwrap {
  width: calc(12.1rem);
}
.md-sidebar--secondary {
  right: ${q.spacing(3)}px;
}
.md-sidebar::-webkit-scrollbar {
  width: 5px;
}
.md-sidebar::-webkit-scrollbar-button {
  width: 5px;
  height: 5px;
}
.md-sidebar::-webkit-scrollbar-track {
  background: #eee;
  border: 1 px solid rgb(250, 250, 250);
  box-shadow: 0px 0px 3px #dfdfdf inset;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb {
  width: 5px;
  background: rgb(193, 193, 193);
  border: transparent;
  border-radius: 3px;
}
.md-sidebar::-webkit-scrollbar-thumb:hover {
  background: rgb(125, 125, 125);
}

.md-content {
  max-width: calc(100% - 16rem * 2);
  margin-left: 16rem;
  margin-bottom: 50px;
}

.md-footer {
  position: fixed;
  bottom: 0px;
  pointer-events: none;
}

.md-footer-nav__link, .md-footer__link {
  pointer-events: all;
}

.md-footer__title {
  background-color: unset;
}
.md-footer-nav__link, .md-footer__link {
  width: 16rem;
}

.md-dialog {
  background-color: unset;
}

@media screen and (min-width: 76.25em) {
  .md-sidebar {
    height: auto;
  }
}

@media screen and (max-width: 76.1875em) {
  .md-nav {
    transition: none !important;
    background-color: var(--md-default-bg-color)
  }
  .md-nav--primary .md-nav__title {
    cursor: auto;
    color: var(--md-default-fg-color);
    font-weight: 700;
    white-space: normal;
    line-height: 1rem;
    height: auto;
    display: flex;
    flex-flow: column;
    row-gap: 1.6rem;
    padding: 1.2rem .8rem .8rem;
    background-color: var(--md-default-bg-color);
  }
  .md-nav--primary .md-nav__title~.md-nav__list {
    box-shadow: none;
  }
  .md-nav--primary .md-nav__title ~ .md-nav__list > :first-child {
    border-top: none;
  }
  .md-nav--primary .md-nav__title .md-nav__button {
    display: none;
  }
  .md-nav--primary .md-nav__title .md-nav__icon {
    color: var(--md-default-fg-color);
    position: static;
    height: auto;
    margin: 0 0 0 -0.2rem;
  }
  .md-nav--primary > .md-nav__title [for="none"] {
    padding-top: 0;
  }
  .md-nav--primary .md-nav__item {
    border-top: none;
  }
  .md-nav--primary :is(.md-nav__title,.md-nav__item) {
    font-size : var(--md-typeset-font-size);
  }
  .md-nav .md-source {
    display: none;
  }

  .md-sidebar {
    height: 100%;
  }
  .md-sidebar--primary {
    width: 12.1rem !important;
    z-index: 200;
    left: ${Le.isPinned?`calc(-12.1rem + ${Rt})`:"calc(-12.1rem + 72px)"} !important;
  }
  .md-sidebar--secondary:not([hidden]) {
    display: none;
  }

  .md-content {
    max-width: 100%;
    margin-left: 0;
  }

  .md-header__button {
    margin: 0.4rem 0;
    margin-left: 0.4rem;
    padding: 0;
  }

  .md-overlay {
    left: 0;
  }

  .md-footer {
    position: static;
    padding-left: 0;
  }
  .md-footer-nav__link {
    /* footer links begin to overlap at small sizes without setting width */
    width: 50%;
  }
}

@media screen and (max-width: 600px) {
  .md-sidebar--primary {
    left: -12.1rem !important;
    width: 12.1rem;
  }
}


@media print {
  .md-sidebar,
  #toggle-sidebar {
    display: none;
  }
  
  .md-content {
    margin: 0;
    width: 100%;
    max-width: 100%;
  }
}
`;const Ce=["h1","h2","h3","h4","h5","h6"];var Me=({theme:q})=>`
/*==================  Typeset  ==================*/

.md-typeset {
  font-size: var(--md-typeset-font-size);
}

${Ce.reduce((Le,et)=>{var U;const Z=(U=q.typography.htmlFontSize)!=null?U:16,P=q.typography[et],{lineHeight:$,fontFamily:N,fontWeight:oe,fontSize:pe}=P,te=Se=>{let We=1;return typeof Se=="number"&&(We=Se/Z*.6),typeof Se=="string"&&(We=Se.replace("rem","")),`calc(${We} * var(--md-typeset-font-size))`};return Le.concat(`
    .md-typeset ${et} {
      color: var(--md-default-fg-color);
      line-height: ${$};
      font-family: ${N};
      font-weight: ${oe};
      font-size: ${te(pe)};
    }
  `)},"")}

.md-typeset .md-content__button {
  color: var(--md-default-fg-color);
}

.md-typeset hr {
  border-bottom: 0.05rem dotted ${q.palette.divider};
}

.md-typeset details {
  font-size: var(--md-typeset-font-size) !important;
}
.md-typeset details summary {
  padding-left: 2.5rem !important;
}
.md-typeset details summary:before,
.md-typeset details summary:after {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: rotate(0deg) translateY(-50%) !important;
}
.md-typeset details[open] > summary:after {
  transform: rotate(90deg) translateX(-50%) !important;
}

.md-typeset blockquote {
  color: var(--md-default-fg-color--light);
  border-left: 0.2rem solid var(--md-default-fg-color--light);
}

.md-typeset table:not([class]) {
  font-size: var(--md-typeset-font-size);
  border: 1px solid var(--md-default-fg-color);
  border-bottom: none;
  border-collapse: collapse;
}
.md-typeset table:not([class]) th {
  font-weight: bold;
}
.md-typeset table:not([class]) td, .md-typeset table:not([class]) th {
  border-bottom: 1px solid var(--md-default-fg-color);
}

.md-typeset pre > code::-webkit-scrollbar-thumb {
  background-color: hsla(0, 0%, 0%, 0.32);
}
.md-typeset pre > code::-webkit-scrollbar-thumb:hover {
  background-color: hsla(0, 0%, 0%, 0.87);
}
`,R=()=>`
/*==================  Animations  ==================*/
/*
  Disable CSS animations on link colors as they lead to issues in dark mode.
  The dark mode color theme is applied later and theirfore there is always an animation from light to dark mode when navigation between pages.
*/
.md-dialog, .md-nav__link, .md-footer__link, .md-typeset a, .md-typeset a::before, .md-typeset .headerlink {
  transition: none;
}
`,B=({theme:q})=>`
/*==================  Extensions  ==================*/

/* HIGHLIGHT */
.highlight .md-clipboard:after {
  content: unset;
}

.highlight .nx {
  color: ${q.palette.type==="dark"?"#ff53a3":"#ec407a"};
}

/* CODE HILITE */
.codehilite .gd {
  background-color: ${q.palette.type==="dark"?"rgba(248,81,73,0.65)":"#fdd"};
}

.codehilite .gi {
  background-color: ${q.palette.type==="dark"?"rgba(46,160,67,0.65)":"#dfd"};
}

/* TABBED */
.tabbed-set>input:nth-child(1):checked~.tabbed-labels>:nth-child(1),
.tabbed-set>input:nth-child(2):checked~.tabbed-labels>:nth-child(2),
.tabbed-set>input:nth-child(3):checked~.tabbed-labels>:nth-child(3),
.tabbed-set>input:nth-child(4):checked~.tabbed-labels>:nth-child(4),
.tabbed-set>input:nth-child(5):checked~.tabbed-labels>:nth-child(5),
.tabbed-set>input:nth-child(6):checked~.tabbed-labels>:nth-child(6),
.tabbed-set>input:nth-child(7):checked~.tabbed-labels>:nth-child(7),
.tabbed-set>input:nth-child(8):checked~.tabbed-labels>:nth-child(8),
.tabbed-set>input:nth-child(9):checked~.tabbed-labels>:nth-child(9),
.tabbed-set>input:nth-child(10):checked~.tabbed-labels>:nth-child(10),
.tabbed-set>input:nth-child(11):checked~.tabbed-labels>:nth-child(11),
.tabbed-set>input:nth-child(12):checked~.tabbed-labels>:nth-child(12),
.tabbed-set>input:nth-child(13):checked~.tabbed-labels>:nth-child(13),
.tabbed-set>input:nth-child(14):checked~.tabbed-labels>:nth-child(14),
.tabbed-set>input:nth-child(15):checked~.tabbed-labels>:nth-child(15),
.tabbed-set>input:nth-child(16):checked~.tabbed-labels>:nth-child(16),
.tabbed-set>input:nth-child(17):checked~.tabbed-labels>:nth-child(17),
.tabbed-set>input:nth-child(18):checked~.tabbed-labels>:nth-child(18),
.tabbed-set>input:nth-child(19):checked~.tabbed-labels>:nth-child(19),
.tabbed-set>input:nth-child(20):checked~.tabbed-labels>:nth-child(20) {
  color: var(--md-accent-fg-color);
  border-color: var(--md-accent-fg-color);
}

/* TASK-LIST */
.task-list-control .task-list-indicator::before {
  background-color: ${q.palette.action.disabledBackground};
}
.task-list-control [type="checkbox"]:checked + .task-list-indicator:before {
 background-color: ${q.palette.success.main};
}

/* ADMONITION */
.admonition {
  font-size: var(--md-typeset-font-size) !important;
}
.admonition .admonition-title {
  padding-left: 2.5rem !important;
}

.admonition .admonition-title:before {
  top: 50% !important;
  width: 20px !important;
  height: 20px !important;
  transform: translateY(-50%) !important;
}
`;const X=[tt,ot,en,Me,R,B],nt=()=>(0,g.Pf)(),mt=()=>{const q=nt(),Le=(0,Y.Z)();return(0,i.useMemo)(()=>{const et={theme:Le,sidebar:q};return X.reduce((U,Z)=>U+Z(et),"")},[Le,q])},ct=()=>{const q=mt();return(0,i.useCallback)(Le=>(Le.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<style>${q}</style>`),Le),[q])},jt=(q,Le,et)=>{const U=q==="src"&&Le.endsWith(".svg"),Z=!Le.match(/^([a-z]*:)?\/\//i),P=Le.startsWith(et);return U&&(Z||P)},dn=({techdocsStorageApi:q,entityId:Le,path:et})=>async U=>{const Z=await q.getApiOrigin(),P=async($,N)=>{for(const oe of $)if(oe.hasAttribute(N)){const pe=oe.getAttribute(N);if(!pe)return;const te=await q.getBaseUrl(pe,Le,et);if(jt(N,pe,Z))try{const We=await(await fetch(te,{credentials:"include"})).text();oe.setAttribute(N,`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(We)))}`)}catch{oe.setAttribute("alt",`Error: ${pe}`)}else oe.setAttribute(N,te)}};return await Promise.all([P(U.querySelectorAll("img"),"src"),P(U.querySelectorAll("script"),"src"),P(U.querySelectorAll("source"),"src"),P(U.querySelectorAll("link"),"href"),P(U.querySelectorAll("a[download]"),"href")]),U};let An;An=Promise.resolve().then(e.t.bind(e,28316,19));function bn(q,Le){An.then(et=>{"createRoot"in et?et.createRoot(Le).render(q):et.render(q,Le)})}const F=q=>Le=>{var et;const U=Le.querySelector('[title="Edit this page"]');if(!U||!U.href)return Le;const Z=new URL(U.href),P=q.byUrl(Z);if((P==null?void 0:P.type)!=="github"&&(P==null?void 0:P.type)!=="gitlab")return Le;const $=((et=Le.querySelector("article>h1"))==null?void 0:et.childNodes[0].textContent)||"",N=encodeURIComponent(`Documentation Feedback: ${$}`),oe=encodeURIComponent(`Page source:
${U.href}

Feedback:`),pe=(P==null?void 0:P.type)==="github"?(0,de.BT)(Z.href,"blob"):Z.href,te=rt()(pe),Se=`/${te.organization}/${te.name}`,We=U.cloneNode();switch(P==null?void 0:P.type){case"gitlab":We.href=`${Z.origin}${Se}/issues/new?issue[title]=${N}&issue[description]=${oe}`;break;case"github":We.href=`${Z.origin}${Se}/issues/new?title=${N}&body=${oe}`;break;default:return Le}return bn(i.createElement(Bt.Z),We),We.style.paddingLeft="5px",We.title="Leave feedback for this page",We.id="git-feedback-link",U==null||U.insertAdjacentElement("beforebegin",We),Le},H=()=>q=>{const Le=q.querySelector('.md-header label[for="__drawer"]'),et=q.querySelector("article");if(!Le||!et)return q;const U=Le.cloneNode();return bn(i.createElement(bt.Z),U),U.id="toggle-sidebar",U.title="Toggle Sidebar",U.classList.add("md-content__button"),U.style.setProperty("padding","0 0 0 5px"),U.style.setProperty("margin","0.4rem 0 0.4rem 0.4rem"),et==null||et.prepend(U),q},Ne=()=>q=>(((et,U)=>{Array.from(et).filter(Z=>Z.hasAttribute(U)).forEach(Z=>{const P=Z.getAttribute(U);if(P){P.match(/^https?:\/\//i)&&Z.setAttribute("target","_blank");try{const $=it(window.location.href);Z.setAttribute(U,new URL(P,$).toString())}catch{Z.replaceWith(Z.textContent||P)}}})})(Array.from(q.getElementsByTagName("a")),"href"),q);function it(q){const Le=new URL(q);return!Le.pathname.endsWith("/")&&!Le.pathname.endsWith(".html")&&(Le.pathname+="/"),Le.toString()}const Gt=({baseUrl:q,onClick:Le})=>et=>(Array.from(et.getElementsByTagName("a")).forEach(U=>{U.addEventListener("click",Z=>{const $=U.getAttribute("href");$&&$.startsWith(q)&&!U.hasAttribute("download")&&(Z.preventDefault(),Le(Z,$))})}),et),Dt=(0,Fe.Z)(q=>({tooltip:{fontSize:"inherit",color:q.palette.text.primary,margin:0,padding:q.spacing(.5),backgroundColor:"transparent",boxShadow:"none"}}))(ge.ZP),mn=()=>i.createElement(_e.Z,null,i.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})),un=({text:q})=>{const[Le,et]=(0,i.useState)(!1),[,U]=(0,ke.Z)(),Z=(0,i.useCallback)(()=>{U(q),et(!0)},[q,U]),P=(0,i.useCallback)(()=>{et(!1)},[et]);return i.createElement(Dt,{title:"Copied to clipboard",placement:"left",open:Le,onClose:P,leaveDelay:1e3},i.createElement(Ze.Z,{style:{color:"inherit"},className:"md-clipboard md-icon",onClick:Z},i.createElement(mn,null)))},Cn=q=>Le=>{var et;const U=Le.querySelectorAll("pre > code");for(const Z of U){const P=Z.textContent||"",$=document.createElement("div");(et=Z==null?void 0:Z.parentElement)==null||et.prepend($),bn(i.createElement(Q.Z,{theme:q},i.createElement(un,{text:P})),$)}return Le},Oe=()=>q=>{var Le;return(Le=q.querySelector(".md-header"))==null||Le.remove(),q},$e=()=>q=>{var Le,et;return(Le=q.querySelector(".md-footer .md-copyright"))==null||Le.remove(),(et=q.querySelector(".md-footer-copyright"))==null||et.remove(),q},st=({onLoading:q,onLoaded:Le})=>et=>(q(),et.addEventListener(j.Ox,function U(){Le(),et.removeEventListener(j.Ox,U)}),et),Qt=()=>q=>(setTimeout(()=>{const Le=q==null?void 0:q.querySelectorAll("li.md-nav__item--active");Le.length!==0&&(Le.forEach(U=>{const Z=U==null?void 0:U.querySelector("input");Z!=null&&Z.checked||Z==null||Z.click()}),Le[Le.length-1].scrollIntoView())},200),q),Xt=async(q,Le)=>{let et;if(typeof q=="string")et=new DOMParser().parseFromString(q,"text/html").documentElement;else if(q instanceof Element)et=q;else throw new Error("dom is not a recognized type");for(const U of Le)et=await U(et);return et};function ln(q,Le){const et=new URL(Le),U=`${et.origin}${et.pathname.replace(/\/$/,"")}`,Z=q.replace(U,"").replace(/^\/+/,""),P=new URL(`http://localhost/${Z}`);return`${P.pathname}${P.search}${P.hash}`}function an(){const q=(0,p.s0)(),et=(0,J.u)(J.p).getOptionalString("app.baseUrl");return(0,i.useCallback)(Z=>{let P=Z;if(et)try{P=ln(Z,et)}catch{}q(P)},[q,et])}const On="screen and (max-width: 76.1875em)",Nn=q=>{const Le=an(),et=(0,Y.Z)(),U=(0,be.Z)(On),Z=Ge(),P=ct(),$=(0,ne.z$)(),N=(0,J.u)(j.Dl),oe=(0,J.u)(Pt.q3),{state:pe,path:te,content:Se}=O(),[We,Qe]=(0,i.useState)(null),kt=(0,j.ux)(We),Lt=(0,i.useCallback)(()=>{if(!We)return;We.querySelectorAll(".md-sidebar").forEach(gn=>{var yn,Bn,Qn;if(U)gn.style.top="0px";else{const jn=document==null?void 0:document.querySelector(".techdocs-reader-page"),Kn=(yn=jn==null?void 0:jn.getBoundingClientRect().top)!=null?yn:0;let Dn=(Bn=We.getBoundingClientRect().top)!=null?Bn:0;const Jn=We.querySelector(".md-container > .md-tabs"),fn=(Qn=Jn==null?void 0:Jn.getBoundingClientRect().height)!=null?Qn:0;Dn<Kn&&(Dn=Kn),gn.style.top=`${Math.max(Dn,0)+fn}px`}gn.style.setProperty("opacity","1")})},[We,U]);(0,i.useEffect)(()=>(window.addEventListener("resize",Lt),window.addEventListener("scroll",Lt,!0),()=>{window.removeEventListener("resize",Lt),window.removeEventListener("scroll",Lt,!0)}),[We,Lt]);const tn=(0,i.useCallback)(()=>{if(!We)return;const cn=We.querySelector(".md-footer");cn&&(cn.style.width=`${We.getBoundingClientRect().width}px`)},[We]);(0,i.useEffect)(()=>(window.addEventListener("resize",tn),()=>{window.removeEventListener("resize",tn)}),[We,tn]),(0,i.useEffect)(()=>{kt||(tn(),Lt())},[pe,kt,tn,Lt]);const on=(0,i.useCallback)((cn,gn)=>Xt(cn,[Z,dn({techdocsStorageApi:N,entityId:q,path:gn}),Ne(),H(),Oe(),$e(),F(oe),P]),[q,oe,N,Z,P]),vn=(0,i.useCallback)(async cn=>Xt(cn,[Qt(),Cn(et),Gt({baseUrl:window.location.origin,onClick:(gn,yn)=>{var Bn,Qn;const jn=gn.ctrlKey||gn.metaKey,Kn=new URL(yn),Dn=((Bn=gn.target)==null?void 0:Bn.innerText)||yn,Jn=yn.replace(window.location.origin,"");$.captureEvent("click",Dn,{attributes:{to:Jn}}),Kn.hash?jn?window.open(yn,"_blank"):(Le(yn),(Qn=cn==null?void 0:cn.querySelector(`[id="${Kn.hash.slice(1)}"]`))==null||Qn.scrollIntoView()):jn?window.open(yn,"_blank"):Le(yn)}}),st({onLoading:()=>{},onLoaded:()=>{var gn;(gn=cn.querySelector(".md-nav__title"))==null||gn.removeAttribute("for")}}),st({onLoading:()=>{Array.from(cn.querySelectorAll(".md-sidebar")).forEach(yn=>{yn.style.setProperty("opacity","0")})},onLoaded:()=>{}})]),[et,Le,$]);return(0,i.useEffect)(()=>{if(!Se)return()=>{};let cn=!0;return on(Se,te).then(async gn=>{if(!(gn!=null&&gn.innerHTML)||!cn)return;window.scroll({top:0});const yn=await vn(gn);Qe(yn)}),()=>{cn=!1}},[Se,te,on,vn]),We},Fn=()=>{const q=(0,j.$L)(),{shadowRoot:Le}=(0,j.x1)(),et=Le==null?void 0:Le.querySelector('[data-md-component="content"]'),U=Le==null?void 0:Le.querySelector('div[data-md-component="sidebar"][data-md-type="navigation"], div[data-md-component="navigation"]');let Z=U==null?void 0:U.querySelector('[data-techdocs-addons-location="primary sidebar"]');Z||(Z=document.createElement("div"),Z.setAttribute("data-techdocs-addons-location","primary sidebar"),U==null||U.prepend(Z));const P=Le==null?void 0:Le.querySelector('div[data-md-component="sidebar"][data-md-type="toc"], div[data-md-component="toc"]');let $=P==null?void 0:P.querySelector('[data-techdocs-addons-location="secondary sidebar"]');return $||($=document.createElement("div"),$.setAttribute("data-techdocs-addons-location","secondary sidebar"),P==null||P.prepend($)),i.createElement(i.Fragment,null,i.createElement(M.Z,{container:Z},q.renderComponentsByLocation(j.oZ.PrimarySidebar)),i.createElement(M.Z,{container:et},q.renderComponentsByLocation(j.oZ.Content)),i.createElement(M.Z,{container:$},q.renderComponentsByLocation(j.oZ.SecondarySidebar)))},ra=(0,k.Z)({search:{width:"100%","@media (min-width: 76.1875em)":{width:"calc(100% - 34.4rem)",margin:"0 auto"},"@media print":{display:"none"}}}),En=ae(q=>{var Le;const{withSearch:et=!0,onReady:U}=q,Z=ra(),{entityMetadata:{value:P,loading:$},entityRef:N,setShadowRoot:oe}=(0,j.x1)(),pe=Nn(N),te=window.location.pathname,Se=window.location.hash,We=(0,j.ux)(pe),[Qe]=(0,j.pV)([`[id="${Se.slice(1)}"]`]);(0,i.useEffect)(()=>{var Lt;We||(Se?Qe&&Qe.scrollIntoView():(Lt=document==null?void 0:document.querySelector("header"))==null||Lt.scrollIntoView())},[te,Se,Qe,We]);const kt=(0,i.useCallback)(Lt=>{oe(Lt),U instanceof Function&&U()},[oe,U]);return $===!1&&!P?i.createElement(g.mf,{status:"404",statusMessage:"PAGE NOT FOUND"}):pe?i.createElement(g.VY,null,i.createElement(z.Z,{container:!0},i.createElement(z.Z,{xs:12,item:!0},i.createElement(vt,null)),et&&i.createElement(z.Z,{className:Z.search,xs:"auto",item:!0},i.createElement(ft,{entityId:N,entityTitle:(Le=P==null?void 0:P.metadata)==null?void 0:Le.title})),i.createElement(z.Z,{xs:12,item:!0},i.createElement(j.VA,{element:pe,onAppend:kt},i.createElement(Fn,null))))):i.createElement(g.VY,null,i.createElement(z.Z,{container:!0},i.createElement(z.Z,{xs:12,item:!0},i.createElement(vt,null))))}),aa=null,oa=i.createElement(ee.Z,{animation:"wave",variant:"text",height:40}),na=q=>{const{palette:{common:{white:Le}}}=(0,Y.Z)(),{children:et}=q,U=(0,j.$L)(),Z=(0,J.u)(J.p),{title:P,setTitle:$,subtitle:N,setSubtitle:oe,entityRef:pe,metadata:{value:te,loading:Se},entityMetadata:{value:We,loading:Qe}}=(0,j.x1)();(0,i.useEffect)(()=>{te&&($(te.site_name),oe(()=>{let{site_description:jn}=te;return(!jn||jn==="None")&&(jn=""),jn}))},[te,$,oe]);const kt=Z.getOptional("app.title")||"Backstage",Lt=[P,N,kt].filter(Boolean).join(" | "),{locationMetadata:tn,spec:on}=We||{},vn=on==null?void 0:on.lifecycle,cn=We?(0,zt.g)(We,Zt.S4):[],gn=(0,ne.tg)(Ut.r)(),yn=i.createElement(i.Fragment,null,i.createElement(g.i9,{label:(0,dt.capitalize)((We==null?void 0:We.kind)||"entity"),value:i.createElement(Ot.dx,{color:"inherit",entityRef:pe,title:We==null?void 0:We.metadata.title,defaultKind:"Component"})}),cn.length>0&&i.createElement(g.i9,{label:"Owner",value:i.createElement(Ot.rI,{color:"inherit",entityRefs:cn,defaultKind:"group"})}),vn?i.createElement(g.i9,{label:"Lifecycle",value:String(vn)}):null,tn&&tn.type!=="dir"&&tn.type!=="file"?i.createElement(g.i9,{label:"",value:i.createElement(z.Z,{container:!0,direction:"column",alignItems:"center",style:{color:Le}},i.createElement(z.Z,{style:{padding:0},item:!0},i.createElement(at.Z,{style:{marginTop:"-25px"}})),i.createElement(z.Z,{style:{padding:0},item:!0},"Source")),url:tn.target}):null);return!Qe&&We===void 0||!Se&&te===void 0?null:i.createElement(g.h4,{type:"Documentation",typeLink:gn,title:P||oa,subtitle:N===""?void 0:N||oa},i.createElement(_t.Z,{titleTemplate:"%s"},i.createElement("title",null,Lt)),yn,et,U.renderComponentsByLocation(j.oZ.Header))},pa=(0,k.Z)(q=>({root:{gridArea:"pageSubheader",flexDirection:"column",minHeight:"auto",padding:q.spacing(3,3,0),"@media print":{display:"none"}}})),Pa=q=>{const Le=pa(),[et,U]=(0,i.useState)(null),Z=(0,i.useCallback)(Se=>{U(Se.currentTarget)},[]),P=(0,i.useCallback)(()=>{U(null)},[]),{entityMetadata:{value:$,loading:N}}=(0,j.x1)(),oe=(0,j.$L)(),pe=oe.renderComponentsByLocation(j.oZ.Subheader),te=oe.renderComponentsByLocation(j.oZ.Settings);return!pe&&!te||N===!1&&!$?null:i.createElement(c.Z,{classes:Le,...q.toolbarProps},i.createElement(S.Z,{display:"flex",justifyContent:"flex-end",width:"100%",flexWrap:"wrap"},pe,te?i.createElement(i.Fragment,null,i.createElement(ge.ZP,{title:"Settings"},i.createElement(Ze.Z,{"aria-controls":"tech-docs-reader-page-settings","aria-haspopup":"true",onClick:Z},i.createElement(qt.Z,null))),i.createElement(_.Z,{id:"tech-docs-reader-page-settings",getContentAnchorEl:null,anchorEl:et,anchorOrigin:{vertical:"bottom",horizontal:"right"},open:Boolean(et),onClose:P,keepMounted:!0},i.createElement("div",null,te))):null))},qn=q=>{const{withSearch:Le,withHeader:et=!0}=q;return i.createElement(g.T3,{themeId:"documentation"},et&&i.createElement(na,null),i.createElement(Pa,null),i.createElement(En,{withSearch:Le}))},ya=q=>{const{kind:Le,name:et,namespace:U}=(0,ne.Oi)(Ut.b),{children:Z,entityRef:P={kind:Le,name:et,namespace:U}}=q,$=(0,p.pC)();if(!Z){const pe=($?i.Children.toArray($.props.children):[]).flatMap(te=>{var Se,We;return(We=(Se=te==null?void 0:te.props)==null?void 0:Se.children)!=null?We:[]}).find(te=>!(0,ne.IY)(te,j.Zz)&&!(0,ne.IY)(te,j.jM));return i.createElement(j.ZS,{entityRef:P},pe||i.createElement(qn,null))}return i.createElement(j.ZS,{entityRef:P},({metadata:N,entityMetadata:oe,onReady:pe})=>i.createElement("div",{className:"techdocs-reader-page"},i.createElement(g.T3,{themeId:"documentation"},Z instanceof Function?Z({entityRef:P,techdocsMetadataValue:N.value,entityMetadataValue:oe.value,onReady:pe}):Z)))}},77529:(xn,Yt,e)=>{"use strict";e.r(Yt),e.d(Yt,{TechDocsSearchResultListItem:()=>Ze});var i=e(2784),p=e(79692),g=e(49378),j=e(86136),k=e(90436),o=e(49558),z=e(42054);const He=(0,p.Z)({flexContainer:{flexWrap:"wrap"},itemText:{width:"100%",marginBottom:"1rem"}}),Ze=a=>{const{result:xe,highlight:Ee,lineClamp:se=5,asListItem:Y=!0,asLink:Fe=!0,title:ge,icon:_e}=a,Q=He(),be=({children:S})=>Fe?i.createElement(o.rU,{noTrack:!0,to:xe.location},S):i.createElement(i.Fragment,null,S),M=()=>{const S=Ee!=null&&Ee.fields.title?i.createElement(z.b,{text:Ee.fields.title,preTag:Ee.preTag,postTag:Ee.postTag}):xe.title,_=Ee!=null&&Ee.fields.entityTitle?i.createElement(z.b,{text:Ee.fields.entityTitle,preTag:Ee.preTag,postTag:Ee.postTag}):xe.entityTitle,b=Ee!=null&&Ee.fields.name?i.createElement(z.b,{text:Ee.fields.name,preTag:Ee.preTag,postTag:Ee.postTag}):xe.name;return xe?i.createElement(g.Z,{className:Q.itemText,primaryTypographyProps:{variant:"h6"},primary:i.createElement(be,null,ge||i.createElement(i.Fragment,null,S," | ",_!=null?_:b," docs")),secondary:i.createElement(k.Z,{component:"span",style:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:se,overflow:"hidden"},color:"textSecondary",variant:"body2"},Ee!=null&&Ee.fields.text?i.createElement(z.b,{text:Ee.fields.text,preTag:Ee.preTag,postTag:Ee.postTag}):xe.text)}):null},c=({children:S})=>Y?i.createElement(i.Fragment,null,_e&&i.createElement(j.Z,null,typeof _e=="function"?_e(xe):_e),i.createElement("div",{className:Q.flexContainer},S)):i.createElement(i.Fragment,null,S);return i.createElement(c,null,i.createElement(M,null))}},67266:(xn,Yt,e)=>{"use strict";e.d(Yt,{T:()=>He,a:()=>Ze,b:()=>xe,c:()=>Ee,r:()=>a});var i=e(32272),p=e(76372),g=e.n(p),j=e(30705),k=Object.defineProperty,o=(se,Y,Fe)=>Y in se?k(se,Y,{enumerable:!0,configurable:!0,writable:!0,value:Fe}):se[Y]=Fe,z=(se,Y,Fe)=>(o(se,typeof Y!="symbol"?Y+"":Y,Fe),Fe);class He{constructor(Y){z(this,"configApi"),z(this,"discoveryApi"),z(this,"fetchApi"),this.configApi=Y.configApi,this.discoveryApi=Y.discoveryApi,this.fetchApi=Y.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getTechDocsMetadata(Y){const{kind:Fe,namespace:ge,name:_e}=Y,be=`${await this.getApiOrigin()}/metadata/techdocs/${ge}/${Fe}/${_e}`,M=await this.fetchApi.fetch(`${be}`);if(!M.ok)throw await i.VL.fromResponse(M);return await M.json()}async getEntityMetadata(Y){const{kind:Fe,namespace:ge,name:_e}=Y,be=`${await this.getApiOrigin()}/metadata/entity/${ge}/${Fe}/${_e}`,M=await this.fetchApi.fetch(`${be}`);if(!M.ok)throw await i.VL.fromResponse(M);return await M.json()}}class Ze{constructor(Y){z(this,"configApi"),z(this,"discoveryApi"),z(this,"identityApi"),z(this,"fetchApi"),this.configApi=Y.configApi,this.discoveryApi=Y.discoveryApi,this.identityApi=Y.identityApi,this.fetchApi=Y.fetchApi}async getApiOrigin(){return await this.discoveryApi.getBaseUrl("techdocs")}async getStorageUrl(){var Y;return(Y=this.configApi.getOptionalString("techdocs.storageUrl"))!=null?Y:`${await this.discoveryApi.getBaseUrl("techdocs")}/static/docs`}async getBuilder(){return this.configApi.getString("techdocs.builder")}async getEntityDocs(Y,Fe){const{kind:ge,namespace:_e,name:Q}=Y,M=`${await this.getStorageUrl()}/${_e}/${ge}/${Q}/${Fe}`,c=await this.fetchApi.fetch(`${M.endsWith("/")?M:`${M}/`}index.html`);let S="";switch(c.status){case 404:throw S="Page not found. ",Fe||(S+="This could be because there is no index.md file in the root of the docs directory of this repository."),new i.dR(S);case 500:throw S="Could not generate documentation or an error in the TechDocs backend. ",new Error(S)}return c.text()}async syncEntityDocs(Y,Fe=()=>{}){const{kind:ge,namespace:_e,name:Q}=Y,M=`${await this.getApiOrigin()}/sync/${_e}/${ge}/${Q}`,{token:c}=await this.identityApi.getCredentials();return new Promise((S,_)=>{const b=new p.EventSourcePolyfill(M,{withCredentials:!0,headers:c?{Authorization:`Bearer ${c}`}:{}});b.addEventListener("log",m=>{m.data&&Fe(JSON.parse(m.data))}),b.addEventListener("finish",m=>{let ve=!1;m.data&&({updated:ve}=JSON.parse(m.data)),S(ve?"updated":"cached")}),b.onerror=m=>{switch(b.close(),m.status){case 404:_(new i.dR(m.message));return;default:_(new Error(m.data));return}}})}async getBaseUrl(Y,Fe,ge){const{kind:_e,namespace:Q,name:be}=Fe,c=`${await this.getApiOrigin()}/static/docs/${Q}/${_e}/${be}/${ge}`;return new URL(Y,c.endsWith("/")?c:`${c}/`).toString()}}const a=(0,j.NT)({id:"techdocs:index-page"}),xe=(0,j.NT)({id:"techdocs:reader-page",params:["namespace","kind","name"]}),Ee=(0,j.NT)({id:"techdocs:catalog-reader-view"})},60982:(xn,Yt,e)=>{"use strict";e.d(Yt,{L:()=>vt,S:()=>At,a:()=>St,e:()=>qt});var i=e(73557),p=e(2784),g=e(90436),j=e(77277),k=e(79692),o=e(43434),z=e(38402),He=e(86136),Ze=e(49378),a=e(80030),xe=e(60905),Ee=e(9520),se=e(11776),Y=e(82938),Fe=e(86619),ge=e(61837),_e=e(48348),Q=e(12231),be=e(49558),M=e(11640),c=e(57032),S=e(30705),_=e(33375),b=e(64279),m=e(71554),ve=e(43054),ee=e(72164),he=e(59324),J=e(13737),ne=e(31168),re=e(83487),Pe=e(97281),Pt=e(73495);const T=`auth:
  providers:
    google:
      development:
        clientId: \${AUTH_GOOGLE_CLIENT_ID}
        clientSecret: \${AUTH_GOOGLE_CLIENT_SECRET}
`,rn=()=>p.createElement(be.ub,{missing:"content",title:"No Authentication Providers",description:"You can add Authentication Providers to Backstage which allows you to use these providers to authenticate yourself.",action:p.createElement(p.Fragment,null,p.createElement(g.Z,{variant:"body1"},"Open ",p.createElement("code",null,"app-config.yaml")," and make the changes as highlighted below:"),p.createElement(be.Oi,{text:T,language:"yaml",showLineNumbers:!0,highlightedNumbers:[3,4,5,6,7,8],customStyle:{background:"inherit",fontSize:"115%"}}),p.createElement(j.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/auth/add-auth-provider"},"Read More"))}),de=(0,k.Z)(Ue=>({avatar:{width:({size:Xe})=>Xe,height:({size:Xe})=>Xe,fontSize:({size:Xe})=>Xe*.7,border:`1px solid ${Ue.palette.textSubtle}`}})),Bt=({size:Ue,picture:Xe})=>{const{iconSize:Mt}=be.sidebarConfig,le=de(Ue?{size:Ue}:{size:Mt});return p.createElement(o.Z,{src:Xe,className:le.avatar})},ut={},rt=Ue=>{const{title:Xe,description:Mt,icon:le,apiRef:Be}=Ue,ie=(0,c.u)(Be),Ge=(0,c.u)(c.r),[tt,ot]=(0,p.useState)(!1),[Rt,en]=(0,p.useState)(ut);return(0,p.useEffect)(()=>{let Ce=!1;const Me=ie.sessionState$().subscribe(R=>{R!==c.S.SignedIn&&(en(ut),ot(!1)),Ce||ie.getProfile({optional:!0}).then(B=>{Ce||(R===c.S.SignedIn&&ot(!0),B&&en(B))})});return()=>{Ce=!0,Me.unsubscribe()}},[ie]),p.createElement(z.Z,null,p.createElement(He.Z,null,p.createElement(le,null)),p.createElement(Ze.Z,{primary:Xe,secondary:p.createElement(a.ZP,{placement:"top",arrow:!0,title:Mt},p.createElement(xe.Z,{container:!0,spacing:6},p.createElement(xe.Z,{item:!0},p.createElement(Bt,{size:48,picture:Rt.picture})),p.createElement(xe.Z,{item:!0,xs:12,sm:!0,container:!0},p.createElement(xe.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},p.createElement(xe.Z,{item:!0,xs:!0},p.createElement(g.Z,{variant:"subtitle1",color:"textPrimary",gutterBottom:!0},Rt.displayName),p.createElement(g.Z,{variant:"body2",color:"textSecondary"},Rt.email),p.createElement(g.Z,{variant:"body2",color:"textSecondary"},Mt)))))),secondaryTypographyProps:{noWrap:!0,style:{width:"80%"}}}),p.createElement(Ee.Z,null,p.createElement(a.ZP,{placement:"top",arrow:!0,title:tt?`Sign out from ${Xe}`:`Sign in to ${Xe}`},p.createElement(j.Z,{variant:"outlined",color:"primary",onClick:()=>{(tt?ie.signOut():ie.signIn()).catch(Me=>Ge.post(Me))}},tt?"Sign out":"Sign in"))))},bt=Ue=>{const{configuredProviders:Xe}=Ue;return p.createElement(p.Fragment,null,Xe.includes("google")&&p.createElement(rt,{title:"Google",description:"Provides authentication towards Google APIs and identities",apiRef:c.g,icon:M.Z}),Xe.includes("microsoft")&&p.createElement(rt,{title:"Microsoft",description:"Provides authentication towards Microsoft APIs and identities",apiRef:c.m,icon:M.Z}),Xe.includes("github")&&p.createElement(rt,{title:"GitHub",description:"Provides authentication towards GitHub APIs",apiRef:c.d,icon:M.Z}),Xe.includes("gitlab")&&p.createElement(rt,{title:"GitLab",description:"Provides authentication towards GitLab APIs",apiRef:c.e,icon:M.Z}),Xe.includes("okta")&&p.createElement(rt,{title:"Okta",description:"Provides authentication towards Okta APIs",apiRef:c.o,icon:M.Z}),Xe.includes("bitbucket")&&p.createElement(rt,{title:"Bitbucket",description:"Provides authentication towards Bitbucket APIs",apiRef:c.i,icon:M.Z}),Xe.includes("onelogin")&&p.createElement(rt,{title:"OneLogin",description:"Provides authentication towards OneLogin APIs",apiRef:c.h,icon:M.Z}),Xe.includes("atlassian")&&p.createElement(rt,{title:"Atlassian",description:"Provides authentication towards Atlassian APIs",apiRef:c.k,icon:M.Z}),Xe.includes("bitbucketServer")&&p.createElement(rt,{title:"Bitbucket Server",description:"Provides authentication towards Bitbucket Server APIs",apiRef:c.j,icon:M.Z}))},ke=Ue=>{const{providerSettings:Xe}=Ue,le=(0,c.u)(c.p).getOptionalConfig("auth.providers"),Be=(le==null?void 0:le.keys())||[],ie=Xe!=null?Xe:p.createElement(bt,{configuredProviders:Be});return!Xe&&!(Be!=null&&Be.length)?p.createElement(rn,null):p.createElement(be.rJ,{title:"Available Providers"},p.createElement(se.Z,{dense:!0},ie))},_t=`import { createPlugin } from '@backstage/core-plugin-api';

export default createPlugin({
  id: 'plugin-name',
  featureFlags: [{ name: 'enable-example-feature' }],
});
`,at=()=>p.createElement(be.ub,{missing:"content",title:"No Feature Flags",description:"Feature Flags make it possible for plugins to register features in Backstage for users to opt into. You can use this to split out logic in your code for manual A/B testing, etc.",action:p.createElement(p.Fragment,null,p.createElement(g.Z,{variant:"body1"},"An example for how to add a feature flag is highlighted below:"),p.createElement(be.Oi,{text:_t,language:"typescript",showLineNumbers:!0,highlightedNumbers:[6],customStyle:{background:"inherit",fontSize:"115%"}}),p.createElement(j.Z,{variant:"contained",color:"primary",href:"https://backstage.io/docs/api/utility-apis"},"Read More"))}),zt=Ue=>Ue.description?Ue.description:Ue.pluginId?`Registered in ${Ue.pluginId} plugin`:"Registered in the application",Ot=({flag:Ue,enabled:Xe,toggleHandler:Mt})=>p.createElement(z.Z,{divider:!0,button:!0,onClick:()=>Mt(Ue.name)},p.createElement(He.Z,null,p.createElement(a.ZP,{placement:"top",arrow:!0,title:Xe?"Disable":"Enable"},p.createElement(Y.Z,{color:"primary",checked:Xe,name:Ue.name}))),p.createElement(Ze.Z,{primary:Ue.name,secondary:zt(Ue)})),Zt=(Ue,Xe)=>{const Mt=Ue.filter(Be=>Xe.isActive(Be.name)),le=Ue.filter(Be=>!Xe.isActive(Be.name));return[...Mt,...le]},dt=()=>{const Ue=(0,c.u)(c.f),Xe=p.useRef(),Mt=Ue.getRegisteredFlags(),le=Zt(Mt,Ue),[Be]=(0,p.useState)(le),ie=Object.fromEntries(Be.map(({name:B})=>[B,Ue.isActive(B)])),[Ge,tt]=(0,p.useState)(ie),[ot,Rt]=(0,p.useState)(""),en=(0,p.useCallback)(B=>{const X=Ue.isActive(B)?c.F.None:c.F.Active;Ue.save({states:{[B]:X},merge:!0}),tt(nt=>({...nt,[B]:X===c.F.Active}))},[Ue]);if(!Be.length)return p.createElement(at,null);const Ce=()=>{var B;Rt(""),(B=Xe==null?void 0:Xe.current)==null||B.focus()},Me=Be.filter(B=>B.name.toLocaleLowerCase("en-US").includes(ot.toLocaleLowerCase("en-US"))),R=()=>p.createElement(xe.Z,{container:!0,style:{justifyContent:"space-between"}},p.createElement(xe.Z,{item:!0,xs:6,md:8},p.createElement(g.Z,{variant:"h5"},"Feature Flags"),p.createElement(g.Z,{variant:"subtitle1"},"Please refresh the page when toggling feature flags")),Be.length>=10&&p.createElement(xe.Z,{item:!0,xs:6,md:4},p.createElement(Fe.Z,{label:"Filter",style:{display:"flex",justifyContent:"flex-end"},inputRef:B=>B&&B.focus(),InputProps:{...ot.length&&{endAdornment:p.createElement(ge.Z,{"aria-label":"Clear filter",onClick:Ce,edge:"end"},p.createElement(_.Z,null))}},onChange:B=>Rt(B.target.value),value:ot})));return p.createElement(be.rJ,{title:p.createElement(R,null)},p.createElement(se.Z,{dense:!0},Me.map(B=>{const X=Boolean(Ge[B.name]);return p.createElement(Ot,{key:B.name,flag:B,enabled:X,toggleHandler:en})})))},gt=()=>{var Ue;const Xe=(0,c.u)(c.t),Mt=(0,c.u)(c.l),{value:le,loading:Be,error:ie}=(0,b.default)(async()=>({profile:await Xe.getProfileInfo(),identity:await Xe.getBackstageIdentity()}),[]);return(0,p.useEffect)(()=>{ie&&Mt.post({message:`Failed to load user identity: ${ie}`,severity:"error"})},[ie,Mt]),Be||ie?{profile:{},displayName:"",loading:Be}:{profile:le.profile,backstageIdentity:le.identity,displayName:(Ue=le.profile.displayName)!=null?Ue:le.identity.userEntityRef,loading:Be}},Ut=(0,k.Z)(Ue=>({avatar:{width:({size:Xe})=>Xe,height:({size:Xe})=>Xe,fontSize:({size:Xe})=>Xe*.7,border:`1px solid ${Ue.palette.textSubtle}`}})),qt=Ue=>{const{size:Xe}=Ue,{iconSize:Mt}=be.sidebarConfig,le=Ut(Xe?{size:Xe}:{size:Mt}),{profile:Be}=gt();return p.createElement(o.Z,{src:Be.picture,className:le.avatar,alt:"Profile picture"})},yt=()=>{const Ue=(0,c.u)(c.r),Xe=(0,c.u)(c.t),[Mt,le]=p.useState(!1),[Be,ie]=p.useState(void 0),Ge=ot=>{ie(ot.currentTarget),le(!0)},tt=()=>{ie(void 0),le(!1)};return p.createElement(p.Fragment,null,p.createElement(ge.Z,{"data-testid":"user-settings-menu","aria-label":"more",onClick:Ge},p.createElement(ve.Z,null)),p.createElement(_e.Z,{anchorEl:Be,open:Mt,onClose:tt},p.createElement(Q.Z,{"data-testid":"sign-out",onClick:()=>Xe.signOut().catch(ot=>Ue.post(ot))},p.createElement(He.Z,null,p.createElement(m.Z,null)),"Sign Out")))},Ft=()=>{const{profile:Ue,displayName:Xe}=gt();return p.createElement(be.rJ,{title:"Profile",variant:"gridItem"},p.createElement(xe.Z,{container:!0,spacing:6},p.createElement(xe.Z,{item:!0},p.createElement(qt,{size:96})),p.createElement(xe.Z,{item:!0,xs:12,sm:!0,container:!0},p.createElement(xe.Z,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},p.createElement(xe.Z,{item:!0,xs:!0},p.createElement(g.Z,{variant:"subtitle1",gutterBottom:!0},Xe),Ue.email&&p.createElement(g.Z,{variant:"body2",color:"textSecondary"},Ue.email))),p.createElement(xe.Z,{item:!0},p.createElement(yt,null)))))},I=()=>{const{isPinned:Ue,toggleSidebarPinState:Xe}=(0,be.Pf)();return p.createElement(z.Z,null,p.createElement(Ze.Z,{primary:"Pin Sidebar",secondary:"Prevent the sidebar from collapsing"}),p.createElement(Ee.Z,null,p.createElement(a.ZP,{placement:"top",arrow:!0,title:`${Ue?"Unpin":"Pin"} Sidebar`},p.createElement(Y.Z,{color:"primary",checked:Ue,onChange:()=>Xe(),name:"pin",inputProps:{"aria-label":"Pin Sidebar Switch"}}))))},W=({id:Ue,activeId:Xe,icon:Mt})=>Mt?(0,p.cloneElement)(Mt,{color:Xe===Ue?"primary":void 0}):p.createElement(he.Z,{color:Xe===Ue?"primary":void 0}),O=(0,k.Z)(Ue=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[Ue.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[Ue.breakpoints.down("xs")]:{paddingLeft:0}}})),D=({children:Ue,title:Xe,value:Mt,...le})=>p.createElement(a.ZP,{placement:"top",arrow:!0,title:Xe},p.createElement(J.Z,{value:Mt,...le},Ue)),ae=()=>{const Ue=O(),Xe=(0,c.u)(c.n),Mt=(0,ee.Z)(Xe.activeThemeId$(),Xe.getActiveThemeId()),le=Xe.getInstalledThemes(),{t:Be}=(0,re.iH)(Pe.a),ie=(Ge,tt)=>{le.some(ot=>ot.id===tt)?Xe.setActiveThemeId(tt):Xe.setActiveThemeId(void 0)};return p.createElement(z.Z,{className:Ue.list,classes:{container:Ue.container}},p.createElement(Ze.Z,{className:Ue.listItemText,primary:Be("themeToggle.title"),secondary:Be("themeToggle.description")}),p.createElement(Ee.Z,{className:Ue.listItemSecondaryAction},p.createElement(ne.Z,{exclusive:!0,size:"small",value:Mt!=null?Mt:"auto",onChange:ie},le.map(Ge=>{const tt=Ge.id,ot=Ge.icon,Rt=Ge.title||(tt==="light"||tt==="dark"?Be(`themeToggle.names.${tt}`):tt);return p.createElement(D,{key:tt,title:Be("themeToggle.select",{theme:Rt}),value:tt},p.createElement(p.Fragment,null,Rt,"\xA0",p.createElement(W,{id:tt,icon:ot,activeId:Mt})))}),p.createElement(a.ZP,{placement:"top",arrow:!0,title:Be("themeToggle.selectAuto")},p.createElement(J.Z,{value:"auto",selected:Mt===void 0},Be("themeToggle.names.auto"),"\xA0",p.createElement(he.Z,{color:Mt===void 0?"primary":void 0}))))))},fe=(0,k.Z)(Ue=>({container:{display:"flex",flexWrap:"wrap",width:"100%",justifyContent:"space-between",alignItems:"center",paddingBottom:8,paddingRight:16},list:{width:"initial",[Ue.breakpoints.down("xs")]:{width:"100%",padding:"0 0 12px"}},listItemText:{paddingRight:0,paddingLeft:0},listItemSecondaryAction:{position:"relative",transform:"unset",top:"auto",right:"auto",paddingLeft:16,[Ue.breakpoints.down("xs")]:{paddingLeft:0}}})),Ke=({children:Ue,title:Xe,value:Mt,...le})=>p.createElement(a.ZP,{placement:"top",arrow:!0,title:Xe},p.createElement(J.Z,{value:Mt,...le},Ue)),ft=()=>{const Ue=fe(),Xe=(0,c.u)(re.IB),{t:Mt}=(0,re.iH)(Pe.a),[le]=(0,p.useState)(()=>Xe.language$()),{language:Be}=(0,ee.Z)(le,Xe.getLanguage()),{languages:ie}=Xe.getAvailableLanguages();if(ie.length<=1)return null;const Ge=(tt,ot)=>{Xe.setLanguage(ot)};return p.createElement(z.Z,{className:Ue.list,classes:{container:Ue.container}},p.createElement(Ze.Z,{className:Ue.listItemText,primary:Mt("languageToggle.title"),secondary:Mt("languageToggle.description")}),p.createElement(Ee.Z,{className:Ue.listItemSecondaryAction},p.createElement(ne.Z,{exclusive:!0,size:"small",value:Be,onChange:Ge},ie.map(tt=>p.createElement(Ke,{key:tt,title:Mt("languageToggle.select",{language:tt}),value:tt},p.createElement(p.Fragment,null,tt))))))},Je=()=>{const{isMobile:Ue}=(0,be.Pf)();return p.createElement(be.rJ,{title:"Appearance",variant:"gridItem"},p.createElement(se.Z,{dense:!0},p.createElement(ae,null),p.createElement(ft,null),!Ue&&p.createElement(I,null)))},wt=()=>{const{backstageIdentity:Ue}=gt();return Ue?p.createElement(xe.Z,{container:!0,spacing:1},p.createElement(xe.Z,{item:!0,xs:12},p.createElement(g.Z,{variant:"subtitle1",gutterBottom:!0},"User Entity:"," ",p.createElement(Pt.rI,{entityRefs:[Ue.userEntityRef]}))),p.createElement(xe.Z,{item:!0,xs:12},p.createElement(g.Z,{variant:"subtitle1"},"Ownership Entities:"," ",p.createElement(Pt.rI,{entityRefs:Ue.ownershipEntityRefs})))):p.createElement(g.Z,null,"No Backstage Identity")},nn=()=>p.createElement(be.rJ,{title:"Backstage Identity"},p.createElement(wt,null)),Ae=()=>p.createElement(xe.Z,{container:!0,direction:"row",spacing:3},p.createElement(xe.Z,{item:!0,xs:12,md:6},p.createElement(Ft,null)),p.createElement(xe.Z,{item:!0,xs:12,md:6},p.createElement(Je,null)),p.createElement(xe.Z,{item:!0,xs:12,md:6},p.createElement(nn,null))),Te="plugin.user-settings.settingsLayout",vt="plugin.user-settings.settingsLayoutRoute",Tt=()=>null;(0,S.R5)(Tt,vt,!0),(0,S.R5)(Tt,"core.gatherMountPoints",!0);const At=Ue=>{const{title:Xe,children:Mt}=Ue,{isMobile:le}=(0,be.Pf)(),Be=(0,S.vJ)(Mt,ie=>ie.selectByComponentData({key:vt,withStrictError:"Child of SettingsLayout must be an SettingsLayout.Route"}).getElements().map(Ge=>Ge.props));return p.createElement(be.T3,{themeId:"home"},!le&&p.createElement(be.h4,{title:Xe!=null?Xe:"Settings"}),p.createElement(be.tn,{routes:Be}))};(0,S.R5)(At,Te,!0),At.Route=Tt;const Wt=Ue=>{const{providerSettings:Xe,tabs:Mt}=Ue;return p.createElement(At,null,p.createElement(At.Route,{path:"general",title:"General"},p.createElement(Ae,null)),p.createElement(At.Route,{path:"auth-providers",title:"Authentication Providers"},p.createElement(ke,{providerSettings:Xe})),p.createElement(At.Route,{path:"feature-flags",title:"Feature Flags"},p.createElement(dt,null)),Mt)},St=Ue=>{const{providerSettings:Xe}=Ue,Mt=(0,i.pC)(),le=(0,S.vJ)(Mt,ie=>ie.selectByComponentData({key:Te}).getElements()),Be=(0,S.vJ)(Mt,ie=>ie.selectByComponentData({key:vt}).getElements());return p.createElement(p.Fragment,null,le.length!==0&&le||p.createElement(Wt,{tabs:Be,providerSettings:Xe}))}},97281:(xn,Yt,e)=>{"use strict";e.d(Yt,{U:()=>k,a:()=>o,s:()=>g});var i=e(30705),p=e(83487);const g=(0,i.NT)({id:"user-settings"}),k=(0,i.rx)({id:"user-settings",routes:{settingsPage:g}}).provide((0,i.P4)({name:"UserSettingsPage",component:()=>e.e(9716).then(e.bind(e,29716)).then(z=>z.SettingsPage),mountPoint:g})),o=(0,p.FB)({id:"user-settings",messages:{languageToggle:{title:"Language",description:"Change the language",select:"Select language {{language}}"},themeToggle:{title:"Theme",description:"Change the theme mode",select:"Select theme {{theme}}",selectAuto:"Select Auto Theme",names:{light:"Light",dark:"Dark",auto:"Auto"}}}})},43229:(xn,Yt,e)=>{"use strict";e.d(Yt,{Zr:()=>Fe});var i=e(82394),p=e.n(i),g=e(97281),j=e(2784),k=e(47603),o=e(49558),z=e(30705),He=e(60982),Ze=Object.defineProperty,a=(Q,be,M)=>be in Q?Ze(Q,be,{enumerable:!0,configurable:!0,writable:!0,value:M}):Q[be]=M,xe=(Q,be,M)=>(a(Q,typeof be!="symbol"?be+"":be,M),M);const Ee={"Content-Type":"application/json; charset=utf-8",Accept:"application/json"},se=new Map;class Y{constructor(be,M,c,S,_,b){this.namespace=be,this.fetchApi=M,this.discoveryApi=c,this.errorApi=S,this.identityApi=_,this.fallback=b,xe(this,"subscribers",new Set),xe(this,"observables",new Map)}static create(be){var M;return new Y((M=be.namespace)!=null?M:"default",be.fetchApi,be.discoveryApi,be.errorApi,be.identityApi,WebStorage.create({namespace:be.namespace,errorApi:be.errorApi}))}forBucket(be){const M=`${this.namespace}.${be}`;return se.has(M)||se.set(M,new Y(M,this.fetchApi,this.discoveryApi,this.errorApi,this.identityApi,this.fallback)),se.get(M)}async remove(be){const M=await this.getFetchUrl(be),c=await this.fetchApi.fetch(M,{method:"DELETE"});if(!c.ok&&c.status!==404)throw await ResponseError.fromResponse(c);this.notifyChanges({key:be,presence:"absent"})}async set(be,M){if(!await this.isSignedIn()){await this.fallback.set(be,M),this.notifyChanges({key:be,presence:"present",value:M});return}const c=await this.getFetchUrl(be),S=await this.fetchApi.fetch(c,{method:"PUT",headers:Ee,body:JSON.stringify({value:M})});if(!S.ok)throw await ResponseError.fromResponse(S);const{value:_}=await S.json();this.notifyChanges({key:be,value:_,presence:"present"})}observe$(be){return this.observables.has(be)||this.observables.set(be,new ObservableImpl(M=>(this.subscribers.add(M),Promise.resolve().then(()=>this.get(be)).then(c=>M.next(c)).catch(c=>this.errorApi.post(c)),()=>{this.subscribers.delete(M)})).filter(({key:M})=>M===be)),this.observables.get(be)}snapshot(be){return{key:be,presence:"unknown"}}async get(be){if(!await this.isSignedIn())return this.fallback.snapshot(be);const M=await this.getFetchUrl(be),c=await this.fetchApi.fetch(M);if(c.status===404)return{key:be,presence:"absent"};if(!c.ok)throw await ResponseError.fromResponse(c);try{const{value:S}=await c.json(),_=JSON.parse(JSON.stringify(S),(b,m)=>(typeof m=="object"&&m!==null&&Object.freeze(m),m));return{key:be,presence:"present",value:_}}catch{return{key:be,presence:"absent"}}}async getFetchUrl(be){const M=await this.discoveryApi.getBaseUrl("user-settings"),c=encodeURIComponent(this.namespace),S=encodeURIComponent(be);return`${M}/buckets/${c}/keys/${S}`}async notifyChanges(be){for(const M of this.subscribers)try{M.next(be)}catch{}}async isSignedIn(){try{const be=await this.identityApi.getCredentials();return!!(be!=null&&be.token)}catch{return!1}}}const Fe=Q=>{const be=(0,z.tg)(g.s),M=Q.icon?Q.icon:k.Z;return j.createElement(o.R6,{text:"Settings",to:be(),icon:M})},ge=He.L,_e=Q=>j.createElement(He.S.Route,{path:Q.path,title:Q.title},j.createElement(j.Fragment,null,"props.children"));(0,z.R5)(_e,ge,"UserSettingsTab")},18473:(xn,Yt,e)=>{"use strict";e.d(Yt,{CT:()=>z,EI:()=>o,Vt:()=>He,uW:()=>k});var i=e(2784);function p(){return typeof window!="undefined"&&window.Math===Math?window:typeof self!="undefined"&&self.Math===Math?self:Function("return this")()}const g=p(),j=a=>`__@backstage/${a}__`;function k(a,xe){const Ee=j(a);let se=g[Ee];return se||(se=xe(),g[Ee]=se,se)}function o(a){Object.freeze(a);const xe={atVersion(Ee){return a[Ee]}};return Object.defineProperty(xe,"$map",{configurable:!0,enumerable:!0,get(){return a}}),xe}function z(a){return k(a,()=>(0,i.createContext)(void 0))}function He(a){return(0,i.useContext)(z(a))}function Ze(a){return{set(xe){globalThis[`__@backstage/${a}__`]=createContext(o(xe))},reset(){delete globalThis[`__@backstage/${a}__`]}}}}}]);})();

//# sourceMappingURL=module-backstage.04048a92.js.map